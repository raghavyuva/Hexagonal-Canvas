var HN=(l,o)=>()=>(o||l((o={exports:{}}).exports,o),o.exports);var DF=HN((OF,$p)=>{(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function s(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerpolicy&&(p.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?p.credentials="include":u.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(u){if(u.ep)return;u.ep=!0;const p=s(u);fetch(u.href,p)}})();function WN(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ls={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=Symbol.for("react.element"),$N=Symbol.for("react.portal"),JN=Symbol.for("react.fragment"),ZN=Symbol.for("react.strict_mode"),QN=Symbol.for("react.profiler"),qN=Symbol.for("react.provider"),bN=Symbol.for("react.context"),tC=Symbol.for("react.forward_ref"),eC=Symbol.for("react.suspense"),nC=Symbol.for("react.memo"),iC=Symbol.for("react.lazy"),vL=Symbol.iterator;function oC(l){return l===null||typeof l!="object"?null:(l=vL&&l[vL]||l["@@iterator"],typeof l=="function"?l:null)}var TM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FM=Object.assign,DM={};function Xu(l,o,s){this.props=l,this.context=o,this.refs=DM,this.updater=s||TM}Xu.prototype.isReactComponent={};Xu.prototype.setState=function(l,o){if(typeof l!="object"&&typeof l!="function"&&l!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,l,o,"setState")};Xu.prototype.forceUpdate=function(l){this.updater.enqueueForceUpdate(this,l,"forceUpdate")};function jM(){}jM.prototype=Xu.prototype;function d1(l,o,s){this.props=l,this.context=o,this.refs=DM,this.updater=s||TM}var f1=d1.prototype=new jM;f1.constructor=d1;FM(f1,Xu.prototype);f1.isPureReactComponent=!0;var SL=Array.isArray,OM=Object.prototype.hasOwnProperty,c1={current:null},EM={key:!0,ref:!0,__self:!0,__source:!0};function IM(l,o,s){var d,u={},p=null,v=null;if(o!=null)for(d in o.ref!==void 0&&(v=o.ref),o.key!==void 0&&(p=""+o.key),o)OM.call(o,d)&&!EM.hasOwnProperty(d)&&(u[d]=o[d]);var w=arguments.length-2;if(w===1)u.children=s;else if(1<w){for(var M=Array(w),T=0;T<w;T++)M[T]=arguments[T+2];u.children=M}if(l&&l.defaultProps)for(d in w=l.defaultProps,w)u[d]===void 0&&(u[d]=w[d]);return{$$typeof:bd,type:l,key:p,ref:v,props:u,_owner:c1.current}}function rC(l,o){return{$$typeof:bd,type:l.type,key:o,ref:l.ref,props:l.props,_owner:l._owner}}function p1(l){return typeof l=="object"&&l!==null&&l.$$typeof===bd}function sC(l){var o={"=":"=0",":":"=2"};return"$"+l.replace(/[=:]/g,function(s){return o[s]})}var PL=/\/+/g;function _v(l,o){return typeof l=="object"&&l!==null&&l.key!=null?sC(""+l.key):o.toString(36)}function zp(l,o,s,d,u){var p=typeof l;(p==="undefined"||p==="boolean")&&(l=null);var v=!1;if(l===null)v=!0;else switch(p){case"string":case"number":v=!0;break;case"object":switch(l.$$typeof){case bd:case $N:v=!0}}if(v)return v=l,u=u(v),l=d===""?"."+_v(v,0):d,SL(u)?(s="",l!=null&&(s=l.replace(PL,"$&/")+"/"),zp(u,o,s,"",function(T){return T})):u!=null&&(p1(u)&&(u=rC(u,s+(!u.key||v&&v.key===u.key?"":(""+u.key).replace(PL,"$&/")+"/")+l)),o.push(u)),1;if(v=0,d=d===""?".":d+":",SL(l))for(var w=0;w<l.length;w++){p=l[w];var M=d+_v(p,w);v+=zp(p,o,s,M,u)}else if(M=oC(l),typeof M=="function")for(l=M.call(l),w=0;!(p=l.next()).done;)p=p.value,M=d+_v(p,w++),v+=zp(p,o,s,M,u);else if(p==="object")throw o=String(l),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return v}function Sp(l,o,s){if(l==null)return l;var d=[],u=0;return zp(l,d,"","",function(p){return o.call(s,p,u++)}),d}function aC(l){if(l._status===-1){var o=l._result;o=o(),o.then(function(s){(l._status===0||l._status===-1)&&(l._status=1,l._result=s)},function(s){(l._status===0||l._status===-1)&&(l._status=2,l._result=s)}),l._status===-1&&(l._status=0,l._result=o)}if(l._status===1)return l._result.default;throw l._result}var no={current:null},Bp={transition:null},lC={ReactCurrentDispatcher:no,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:c1};fe.Children={map:Sp,forEach:function(l,o,s){Sp(l,function(){o.apply(this,arguments)},s)},count:function(l){var o=0;return Sp(l,function(){o++}),o},toArray:function(l){return Sp(l,function(o){return o})||[]},only:function(l){if(!p1(l))throw Error("React.Children.only expected to receive a single React element child.");return l}};fe.Component=Xu;fe.Fragment=JN;fe.Profiler=QN;fe.PureComponent=d1;fe.StrictMode=ZN;fe.Suspense=eC;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lC;fe.cloneElement=function(l,o,s){if(l==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+l+".");var d=FM({},l.props),u=l.key,p=l.ref,v=l._owner;if(o!=null){if(o.ref!==void 0&&(p=o.ref,v=c1.current),o.key!==void 0&&(u=""+o.key),l.type&&l.type.defaultProps)var w=l.type.defaultProps;for(M in o)OM.call(o,M)&&!EM.hasOwnProperty(M)&&(d[M]=o[M]===void 0&&w!==void 0?w[M]:o[M])}var M=arguments.length-2;if(M===1)d.children=s;else if(1<M){w=Array(M);for(var T=0;T<M;T++)w[T]=arguments[T+2];d.children=w}return{$$typeof:bd,type:l.type,key:u,ref:p,props:d,_owner:v}};fe.createContext=function(l){return l={$$typeof:bN,_currentValue:l,_currentValue2:l,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},l.Provider={$$typeof:qN,_context:l},l.Consumer=l};fe.createElement=IM;fe.createFactory=function(l){var o=IM.bind(null,l);return o.type=l,o};fe.createRef=function(){return{current:null}};fe.forwardRef=function(l){return{$$typeof:tC,render:l}};fe.isValidElement=p1;fe.lazy=function(l){return{$$typeof:iC,_payload:{_status:-1,_result:l},_init:aC}};fe.memo=function(l,o){return{$$typeof:nC,type:l,compare:o===void 0?null:o}};fe.startTransition=function(l){var o=Bp.transition;Bp.transition={};try{l()}finally{Bp.transition=o}};fe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};fe.useCallback=function(l,o){return no.current.useCallback(l,o)};fe.useContext=function(l){return no.current.useContext(l)};fe.useDebugValue=function(){};fe.useDeferredValue=function(l){return no.current.useDeferredValue(l)};fe.useEffect=function(l,o){return no.current.useEffect(l,o)};fe.useId=function(){return no.current.useId()};fe.useImperativeHandle=function(l,o,s){return no.current.useImperativeHandle(l,o,s)};fe.useInsertionEffect=function(l,o){return no.current.useInsertionEffect(l,o)};fe.useLayoutEffect=function(l,o){return no.current.useLayoutEffect(l,o)};fe.useMemo=function(l,o){return no.current.useMemo(l,o)};fe.useReducer=function(l,o,s){return no.current.useReducer(l,o,s)};fe.useRef=function(l){return no.current.useRef(l)};fe.useState=function(l){return no.current.useState(l)};fe.useSyncExternalStore=function(l,o,s){return no.current.useSyncExternalStore(l,o,s)};fe.useTransition=function(){return no.current.useTransition()};fe.version="18.2.0";(function(l){l.exports=fe})(Ls);const hC=WN(Ls.exports);var yS={},AM={exports:{}},Vo={},zM={exports:{}},BM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(l){function o(Nt,St){var ne=Nt.length;Nt.push(St);t:for(;0<ne;){var tn=ne-1>>>1,Ce=Nt[tn];if(0<u(Ce,St))Nt[tn]=St,Nt[ne]=Ce,ne=tn;else break t}}function s(Nt){return Nt.length===0?null:Nt[0]}function d(Nt){if(Nt.length===0)return null;var St=Nt[0],ne=Nt.pop();if(ne!==St){Nt[0]=ne;t:for(var tn=0,Ce=Nt.length,aa=Ce>>>1;tn<aa;){var $=2*(tn+1)-1,Yi=Nt[$],Uo=$+1,jn=Nt[Uo];if(0>u(Yi,ne))Uo<Ce&&0>u(jn,Yi)?(Nt[tn]=jn,Nt[Uo]=ne,tn=Uo):(Nt[tn]=Yi,Nt[$]=ne,tn=$);else if(Uo<Ce&&0>u(jn,ne))Nt[tn]=jn,Nt[Uo]=ne,tn=Uo;else break t}}return St}function u(Nt,St){var ne=Nt.sortIndex-St.sortIndex;return ne!==0?ne:Nt.id-St.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;l.unstable_now=function(){return p.now()}}else{var v=Date,w=v.now();l.unstable_now=function(){return v.now()-w}}var M=[],T=[],O=1,I=null,V=3,K=!1,at=!1,U=!1,Bt=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Nt){for(var St=s(T);St!==null;){if(St.callback===null)d(T);else if(St.startTime<=Nt)d(T),St.sortIndex=St.expirationTime,o(M,St);else break;St=s(T)}}function B(Nt){if(U=!1,Q(Nt),!at)if(s(M)!==null)at=!0,Hn(ot);else{var St=s(T);St!==null&&ih(B,St.startTime-Nt)}}function ot(Nt,St){at=!1,U&&(U=!1,b(mt),mt=-1),K=!0;var ne=V;try{for(Q(St),I=s(M);I!==null&&(!(I.expirationTime>St)||Nt&&!Bn());){var tn=I.callback;if(typeof tn=="function"){I.callback=null,V=I.priorityLevel;var Ce=tn(I.expirationTime<=St);St=l.unstable_now(),typeof Ce=="function"?I.callback=Ce:I===s(M)&&d(M),Q(St)}else d(M);I=s(M)}if(I!==null)var aa=!0;else{var $=s(T);$!==null&&ih(B,$.startTime-St),aa=!1}return aa}finally{I=null,V=ne,K=!1}}var gt=!1,Lt=null,mt=-1,Ut=5,Jt=-1;function Bn(){return!(l.unstable_now()-Jt<Ut)}function No(){if(Lt!==null){var Nt=l.unstable_now();Jt=Nt;var St=!0;try{St=Lt(!0,Nt)}finally{St?Kt():(gt=!1,Lt=null)}}else gt=!1}var Kt;if(typeof _=="function")Kt=function(){_(No)};else if(typeof MessageChannel<"u"){var Xt=new MessageChannel,gr=Xt.port2;Xt.port1.onmessage=No,Kt=function(){gr.postMessage(null)}}else Kt=function(){Bt(No,0)};function Hn(Nt){Lt=Nt,gt||(gt=!0,Kt())}function ih(Nt,St){mt=Bt(function(){Nt(l.unstable_now())},St)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Nt){Nt.callback=null},l.unstable_continueExecution=function(){at||K||(at=!0,Hn(ot))},l.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ut=0<Nt?Math.floor(1e3/Nt):5},l.unstable_getCurrentPriorityLevel=function(){return V},l.unstable_getFirstCallbackNode=function(){return s(M)},l.unstable_next=function(Nt){switch(V){case 1:case 2:case 3:var St=3;break;default:St=V}var ne=V;V=St;try{return Nt()}finally{V=ne}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(Nt,St){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var ne=V;V=Nt;try{return St()}finally{V=ne}},l.unstable_scheduleCallback=function(Nt,St,ne){var tn=l.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?tn+ne:tn):ne=tn,Nt){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ne+Ce,Nt={id:O++,callback:St,priorityLevel:Nt,startTime:ne,expirationTime:Ce,sortIndex:-1},ne>tn?(Nt.sortIndex=ne,o(T,Nt),s(M)===null&&Nt===s(T)&&(U?(b(mt),mt=-1):U=!0,ih(B,ne-tn))):(Nt.sortIndex=Ce,o(M,Nt),at||K||(at=!0,Hn(ot))),Nt},l.unstable_shouldYield=Bn,l.unstable_wrapCallback=function(Nt){var St=V;return function(){var ne=V;V=St;try{return Nt.apply(this,arguments)}finally{V=ne}}}})(BM);(function(l){l.exports=BM})(zM);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM=Ls.exports,Go=zM.exports;function Pt(l){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+l,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+l+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RM=new Set,zd={};function th(l,o){zu(l,o),zu(l+"Capture",o)}function zu(l,o){for(zd[l]=o,l=0;l<o.length;l++)RM.add(o[l])}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vS=Object.prototype.hasOwnProperty,uC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xL={},wL={};function gC(l){return vS.call(wL,l)?!0:vS.call(xL,l)?!1:uC.test(l)?wL[l]=!0:(xL[l]=!0,!1)}function dC(l,o,s,d){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:s!==null?!s.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function fC(l,o,s,d){if(o===null||typeof o>"u"||dC(l,o,s,d))return!0;if(d)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function io(l,o,s,d,u,p,v){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=l,this.type=o,this.sanitizeURL=p,this.removeEmptyString=v}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){Mi[l]=new io(l,0,!1,l,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var o=l[0];Mi[o]=new io(o,1,!1,l[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(l){Mi[l]=new io(l,2,!1,l.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){Mi[l]=new io(l,2,!1,l,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){Mi[l]=new io(l,3,!1,l.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(l){Mi[l]=new io(l,3,!0,l,null,!1,!1)});["capture","download"].forEach(function(l){Mi[l]=new io(l,4,!1,l,null,!1,!1)});["cols","rows","size","span"].forEach(function(l){Mi[l]=new io(l,6,!1,l,null,!1,!1)});["rowSpan","start"].forEach(function(l){Mi[l]=new io(l,5,!1,l.toLowerCase(),null,!1,!1)});var m1=/[\-:]([a-z])/g;function y1(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var o=l.replace(m1,y1);Mi[o]=new io(o,1,!1,l,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var o=l.replace(m1,y1);Mi[o]=new io(o,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(l){var o=l.replace(m1,y1);Mi[o]=new io(o,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(l){Mi[l]=new io(l,1,!1,l.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new io("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(l){Mi[l]=new io(l,1,!1,l.toLowerCase(),null,!0,!0)});function v1(l,o,s,d){var u=Mi.hasOwnProperty(o)?Mi[o]:null;(u!==null?u.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(fC(o,s,u,d)&&(s=null),d||u===null?gC(o)&&(s===null?l.removeAttribute(o):l.setAttribute(o,""+s)):u.mustUseProperty?l[u.propertyName]=s===null?u.type===3?!1:"":s:(o=u.attributeName,d=u.attributeNamespace,s===null?l.removeAttribute(o):(u=u.type,s=u===3||u===4&&s===!0?"":""+s,d?l.setAttributeNS(d,o,s):l.setAttribute(o,s))))}var sa=GM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pp=Symbol.for("react.element"),vu=Symbol.for("react.portal"),Su=Symbol.for("react.fragment"),S1=Symbol.for("react.strict_mode"),SS=Symbol.for("react.profiler"),VM=Symbol.for("react.provider"),YM=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),xS=Symbol.for("react.suspense_list"),x1=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),UM=Symbol.for("react.offscreen"),LL=Symbol.iterator;function gd(l){return l===null||typeof l!="object"?null:(l=LL&&l[LL]||l["@@iterator"],typeof l=="function"?l:null)}var gn=Object.assign,Kv;function wd(l){if(Kv===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);Kv=o&&o[1]||""}return`
`+Kv+l}var Hv=!1;function Wv(l,o){if(!l||Hv)return"";Hv=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(T){var d=T}Reflect.construct(l,[],o)}else{try{o.call()}catch(T){d=T}l.call(o.prototype)}else{try{throw Error()}catch(T){d=T}l()}}catch(T){if(T&&d&&typeof T.stack=="string"){for(var u=T.stack.split(`
`),p=d.stack.split(`
`),v=u.length-1,w=p.length-1;1<=v&&0<=w&&u[v]!==p[w];)w--;for(;1<=v&&0<=w;v--,w--)if(u[v]!==p[w]){if(v!==1||w!==1)do if(v--,w--,0>w||u[v]!==p[w]){var M=`
`+u[v].replace(" at new "," at ");return l.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",l.displayName)),M}while(1<=v&&0<=w);break}}}finally{Hv=!1,Error.prepareStackTrace=s}return(l=l?l.displayName||l.name:"")?wd(l):""}function cC(l){switch(l.tag){case 5:return wd(l.type);case 16:return wd("Lazy");case 13:return wd("Suspense");case 19:return wd("SuspenseList");case 0:case 2:case 15:return l=Wv(l.type,!1),l;case 11:return l=Wv(l.type.render,!1),l;case 1:return l=Wv(l.type,!0),l;default:return""}}function wS(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Su:return"Fragment";case vu:return"Portal";case SS:return"Profiler";case S1:return"StrictMode";case PS:return"Suspense";case xS:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case YM:return(l.displayName||"Context")+".Consumer";case VM:return(l._context.displayName||"Context")+".Provider";case P1:var o=l.render;return l=l.displayName,l||(l=o.displayName||o.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x1:return o=l.displayName||null,o!==null?o:wS(l.type)||"Memo";case Ea:o=l._payload,l=l._init;try{return wS(l(o))}catch{}}return null}function pC(l){var o=l.type;switch(l.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=o.render,l=l.displayName||l.name||"",o.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wS(o);case 8:return o===S1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Wa(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function XM(l){var o=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function mC(l){var o=XM(l)?"checked":"value",s=Object.getOwnPropertyDescriptor(l.constructor.prototype,o),d=""+l[o];if(!l.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,p=s.set;return Object.defineProperty(l,o,{configurable:!0,get:function(){return u.call(this)},set:function(v){d=""+v,p.call(this,v)}}),Object.defineProperty(l,o,{enumerable:s.enumerable}),{getValue:function(){return d},setValue:function(v){d=""+v},stopTracking:function(){l._valueTracker=null,delete l[o]}}}}function xp(l){l._valueTracker||(l._valueTracker=mC(l))}function _M(l){if(!l)return!1;var o=l._valueTracker;if(!o)return!0;var s=o.getValue(),d="";return l&&(d=XM(l)?l.checked?"true":"false":l.value),l=d,l!==s?(o.setValue(l),!0):!1}function Jp(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function LS(l,o){var s=o.checked;return gn({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s!=null?s:l._wrapperState.initialChecked})}function ML(l,o){var s=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;s=Wa(o.value!=null?o.value:s),l._wrapperState={initialChecked:d,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function KM(l,o){o=o.checked,o!=null&&v1(l,"checked",o,!1)}function MS(l,o){KM(l,o);var s=Wa(o.value),d=o.type;if(s!=null)d==="number"?(s===0&&l.value===""||l.value!=s)&&(l.value=""+s):l.value!==""+s&&(l.value=""+s);else if(d==="submit"||d==="reset"){l.removeAttribute("value");return}o.hasOwnProperty("value")?kS(l,o.type,s):o.hasOwnProperty("defaultValue")&&kS(l,o.type,Wa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(l.defaultChecked=!!o.defaultChecked)}function kL(l,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+l._wrapperState.initialValue,s||o===l.value||(l.value=o),l.defaultValue=o}s=l.name,s!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,s!==""&&(l.name=s)}function kS(l,o,s){(o!=="number"||Jp(l.ownerDocument)!==l)&&(s==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+s&&(l.defaultValue=""+s))}var Ld=Array.isArray;function Du(l,o,s,d){if(l=l.options,o){o={};for(var u=0;u<s.length;u++)o["$"+s[u]]=!0;for(s=0;s<l.length;s++)u=o.hasOwnProperty("$"+l[s].value),l[s].selected!==u&&(l[s].selected=u),u&&d&&(l[s].defaultSelected=!0)}else{for(s=""+Wa(s),o=null,u=0;u<l.length;u++){if(l[u].value===s){l[u].selected=!0,d&&(l[u].defaultSelected=!0);return}o!==null||l[u].disabled||(o=l[u])}o!==null&&(o.selected=!0)}}function NS(l,o){if(o.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return gn({},o,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function NL(l,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(Pt(92));if(Ld(s)){if(1<s.length)throw Error(Pt(93));s=s[0]}o=s}o==null&&(o=""),s=o}l._wrapperState={initialValue:Wa(s)}}function HM(l,o){var s=Wa(o.value),d=Wa(o.defaultValue);s!=null&&(s=""+s,s!==l.value&&(l.value=s),o.defaultValue==null&&l.defaultValue!==s&&(l.defaultValue=s)),d!=null&&(l.defaultValue=""+d)}function CL(l){var o=l.textContent;o===l._wrapperState.initialValue&&o!==""&&o!==null&&(l.value=o)}function WM(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function CS(l,o){return l==null||l==="http://www.w3.org/1999/xhtml"?WM(o):l==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var wp,$M=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,d,u){MSApp.execUnsafeLocalFunction(function(){return l(o,s,d,u)})}:l}(function(l,o){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=o;else{for(wp=wp||document.createElement("div"),wp.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=wp.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;o.firstChild;)l.appendChild(o.firstChild)}});function Bd(l,o){if(o){var s=l.firstChild;if(s&&s===l.lastChild&&s.nodeType===3){s.nodeValue=o;return}}l.textContent=o}var Cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yC=["Webkit","ms","Moz","O"];Object.keys(Cd).forEach(function(l){yC.forEach(function(o){o=o+l.charAt(0).toUpperCase()+l.substring(1),Cd[o]=Cd[l]})});function JM(l,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||Cd.hasOwnProperty(l)&&Cd[l]?(""+o).trim():o+"px"}function ZM(l,o){l=l.style;for(var s in o)if(o.hasOwnProperty(s)){var d=s.indexOf("--")===0,u=JM(s,o[s],d);s==="float"&&(s="cssFloat"),d?l.setProperty(s,u):l[s]=u}}var vC=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function TS(l,o){if(o){if(vC[l]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(Pt(137,l));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(Pt(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(Pt(61))}if(o.style!=null&&typeof o.style!="object")throw Error(Pt(62))}}function FS(l,o){if(l.indexOf("-")===-1)return typeof o.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DS=null;function w1(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var jS=null,ju=null,Ou=null;function TL(l){if(l=nf(l)){if(typeof jS!="function")throw Error(Pt(280));var o=l.stateNode;o&&(o=Lm(o),jS(l.stateNode,l.type,o))}}function QM(l){ju?Ou?Ou.push(l):Ou=[l]:ju=l}function qM(){if(ju){var l=ju,o=Ou;if(Ou=ju=null,TL(l),o)for(l=0;l<o.length;l++)TL(o[l])}}function bM(l,o){return l(o)}function t5(){}var $v=!1;function e5(l,o,s){if($v)return l(o,s);$v=!0;try{return bM(l,o,s)}finally{$v=!1,(ju!==null||Ou!==null)&&(t5(),qM())}}function Gd(l,o){var s=l.stateNode;if(s===null)return null;var d=Lm(s);if(d===null)return null;s=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(l=l.type,d=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!d;break t;default:l=!1}if(l)return null;if(s&&typeof s!="function")throw Error(Pt(231,o,typeof s));return s}var OS=!1;if(na)try{var dd={};Object.defineProperty(dd,"passive",{get:function(){OS=!0}}),window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch{OS=!1}function SC(l,o,s,d,u,p,v,w,M){var T=Array.prototype.slice.call(arguments,3);try{o.apply(s,T)}catch(O){this.onError(O)}}var Td=!1,Zp=null,Qp=!1,ES=null,PC={onError:function(l){Td=!0,Zp=l}};function xC(l,o,s,d,u,p,v,w,M){Td=!1,Zp=null,SC.apply(PC,arguments)}function wC(l,o,s,d,u,p,v,w,M){if(xC.apply(this,arguments),Td){if(Td){var T=Zp;Td=!1,Zp=null}else throw Error(Pt(198));Qp||(Qp=!0,ES=T)}}function eh(l){var o=l,s=l;if(l.alternate)for(;o.return;)o=o.return;else{l=o;do o=l,(o.flags&4098)!==0&&(s=o.return),l=o.return;while(l)}return o.tag===3?s:null}function n5(l){if(l.tag===13){var o=l.memoizedState;if(o===null&&(l=l.alternate,l!==null&&(o=l.memoizedState)),o!==null)return o.dehydrated}return null}function FL(l){if(eh(l)!==l)throw Error(Pt(188))}function LC(l){var o=l.alternate;if(!o){if(o=eh(l),o===null)throw Error(Pt(188));return o!==l?null:l}for(var s=l,d=o;;){var u=s.return;if(u===null)break;var p=u.alternate;if(p===null){if(d=u.return,d!==null){s=d;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===s)return FL(u),l;if(p===d)return FL(u),o;p=p.sibling}throw Error(Pt(188))}if(s.return!==d.return)s=u,d=p;else{for(var v=!1,w=u.child;w;){if(w===s){v=!0,s=u,d=p;break}if(w===d){v=!0,d=u,s=p;break}w=w.sibling}if(!v){for(w=p.child;w;){if(w===s){v=!0,s=p,d=u;break}if(w===d){v=!0,d=p,s=u;break}w=w.sibling}if(!v)throw Error(Pt(189))}}if(s.alternate!==d)throw Error(Pt(190))}if(s.tag!==3)throw Error(Pt(188));return s.stateNode.current===s?l:o}function i5(l){return l=LC(l),l!==null?o5(l):null}function o5(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var o=o5(l);if(o!==null)return o;l=l.sibling}return null}var r5=Go.unstable_scheduleCallback,DL=Go.unstable_cancelCallback,MC=Go.unstable_shouldYield,kC=Go.unstable_requestPaint,An=Go.unstable_now,NC=Go.unstable_getCurrentPriorityLevel,L1=Go.unstable_ImmediatePriority,s5=Go.unstable_UserBlockingPriority,qp=Go.unstable_NormalPriority,CC=Go.unstable_LowPriority,a5=Go.unstable_IdlePriority,Sm=null,xs=null;function TC(l){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(Sm,l,void 0,(l.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:jC,FC=Math.log,DC=Math.LN2;function jC(l){return l>>>=0,l===0?32:31-(FC(l)/DC|0)|0}var Lp=64,Mp=4194304;function Md(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function bp(l,o){var s=l.pendingLanes;if(s===0)return 0;var d=0,u=l.suspendedLanes,p=l.pingedLanes,v=s&268435455;if(v!==0){var w=v&~u;w!==0?d=Md(w):(p&=v,p!==0&&(d=Md(p)))}else v=s&~u,v!==0?d=Md(v):p!==0&&(d=Md(p));if(d===0)return 0;if(o!==0&&o!==d&&(o&u)===0&&(u=d&-d,p=o&-o,u>=p||u===16&&(p&4194240)!==0))return o;if((d&4)!==0&&(d|=s&16),o=l.entangledLanes,o!==0)for(l=l.entanglements,o&=d;0<o;)s=31-Br(o),u=1<<s,d|=l[s],o&=~u;return d}function OC(l,o){switch(l){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EC(l,o){for(var s=l.suspendedLanes,d=l.pingedLanes,u=l.expirationTimes,p=l.pendingLanes;0<p;){var v=31-Br(p),w=1<<v,M=u[v];M===-1?((w&s)===0||(w&d)!==0)&&(u[v]=OC(w,o)):M<=o&&(l.expiredLanes|=w),p&=~w}}function IS(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function l5(){var l=Lp;return Lp<<=1,(Lp&4194240)===0&&(Lp=64),l}function Jv(l){for(var o=[],s=0;31>s;s++)o.push(l);return o}function tf(l,o,s){l.pendingLanes|=o,o!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,o=31-Br(o),l[o]=s}function IC(l,o){var s=l.pendingLanes&~o;l.pendingLanes=o,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=o,l.mutableReadLanes&=o,l.entangledLanes&=o,o=l.entanglements;var d=l.eventTimes;for(l=l.expirationTimes;0<s;){var u=31-Br(s),p=1<<u;o[u]=0,d[u]=-1,l[u]=-1,s&=~p}}function M1(l,o){var s=l.entangledLanes|=o;for(l=l.entanglements;s;){var d=31-Br(s),u=1<<d;u&o|l[d]&o&&(l[d]|=o),s&=~u}}var Ie=0;function h5(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var u5,k1,g5,d5,f5,AS=!1,kp=[],Ra=null,Va=null,Ya=null,Rd=new Map,Vd=new Map,Aa=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jL(l,o){switch(l){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Rd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vd.delete(o.pointerId)}}function fd(l,o,s,d,u,p){return l===null||l.nativeEvent!==p?(l={blockedOn:o,domEventName:s,eventSystemFlags:d,nativeEvent:p,targetContainers:[u]},o!==null&&(o=nf(o),o!==null&&k1(o)),l):(l.eventSystemFlags|=d,o=l.targetContainers,u!==null&&o.indexOf(u)===-1&&o.push(u),l)}function zC(l,o,s,d,u){switch(o){case"focusin":return Ra=fd(Ra,l,o,s,d,u),!0;case"dragenter":return Va=fd(Va,l,o,s,d,u),!0;case"mouseover":return Ya=fd(Ya,l,o,s,d,u),!0;case"pointerover":var p=u.pointerId;return Rd.set(p,fd(Rd.get(p)||null,l,o,s,d,u)),!0;case"gotpointercapture":return p=u.pointerId,Vd.set(p,fd(Vd.get(p)||null,l,o,s,d,u)),!0}return!1}function c5(l){var o=Xl(l.target);if(o!==null){var s=eh(o);if(s!==null){if(o=s.tag,o===13){if(o=n5(s),o!==null){l.blockedOn=o,f5(l.priority,function(){g5(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){l.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Gp(l){if(l.blockedOn!==null)return!1;for(var o=l.targetContainers;0<o.length;){var s=zS(l.domEventName,l.eventSystemFlags,o[0],l.nativeEvent);if(s===null){s=l.nativeEvent;var d=new s.constructor(s.type,s);DS=d,s.target.dispatchEvent(d),DS=null}else return o=nf(s),o!==null&&k1(o),l.blockedOn=s,!1;o.shift()}return!0}function OL(l,o,s){Gp(l)&&s.delete(o)}function BC(){AS=!1,Ra!==null&&Gp(Ra)&&(Ra=null),Va!==null&&Gp(Va)&&(Va=null),Ya!==null&&Gp(Ya)&&(Ya=null),Rd.forEach(OL),Vd.forEach(OL)}function cd(l,o){l.blockedOn===o&&(l.blockedOn=null,AS||(AS=!0,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,BC)))}function Yd(l){function o(u){return cd(u,l)}if(0<kp.length){cd(kp[0],l);for(var s=1;s<kp.length;s++){var d=kp[s];d.blockedOn===l&&(d.blockedOn=null)}}for(Ra!==null&&cd(Ra,l),Va!==null&&cd(Va,l),Ya!==null&&cd(Ya,l),Rd.forEach(o),Vd.forEach(o),s=0;s<Aa.length;s++)d=Aa[s],d.blockedOn===l&&(d.blockedOn=null);for(;0<Aa.length&&(s=Aa[0],s.blockedOn===null);)c5(s),s.blockedOn===null&&Aa.shift()}var Eu=sa.ReactCurrentBatchConfig,tm=!0;function GC(l,o,s,d){var u=Ie,p=Eu.transition;Eu.transition=null;try{Ie=1,N1(l,o,s,d)}finally{Ie=u,Eu.transition=p}}function RC(l,o,s,d){var u=Ie,p=Eu.transition;Eu.transition=null;try{Ie=4,N1(l,o,s,d)}finally{Ie=u,Eu.transition=p}}function N1(l,o,s,d){if(tm){var u=zS(l,o,s,d);if(u===null)rS(l,o,d,em,s),jL(l,d);else if(zC(u,l,o,s,d))d.stopPropagation();else if(jL(l,d),o&4&&-1<AC.indexOf(l)){for(;u!==null;){var p=nf(u);if(p!==null&&u5(p),p=zS(l,o,s,d),p===null&&rS(l,o,d,em,s),p===u)break;u=p}u!==null&&d.stopPropagation()}else rS(l,o,d,null,s)}}var em=null;function zS(l,o,s,d){if(em=null,l=w1(d),l=Xl(l),l!==null)if(o=eh(l),o===null)l=null;else if(s=o.tag,s===13){if(l=n5(o),l!==null)return l;l=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;l=null}else o!==l&&(l=null);return em=l,null}function p5(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NC()){case L1:return 1;case s5:return 4;case qp:case CC:return 16;case a5:return 536870912;default:return 16}default:return 16}}var Ba=null,C1=null,Rp=null;function m5(){if(Rp)return Rp;var l,o=C1,s=o.length,d,u="value"in Ba?Ba.value:Ba.textContent,p=u.length;for(l=0;l<s&&o[l]===u[l];l++);var v=s-l;for(d=1;d<=v&&o[s-d]===u[p-d];d++);return Rp=u.slice(l,1<d?1-d:void 0)}function Vp(l){var o=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&o===13&&(l=13)):l=o,l===10&&(l=13),32<=l||l===13?l:0}function Np(){return!0}function EL(){return!1}function Yo(l){function o(s,d,u,p,v){this._reactName=s,this._targetInst=u,this.type=d,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var w in l)l.hasOwnProperty(w)&&(s=l[w],this[w]=s?s(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Np:EL,this.isPropagationStopped=EL,this}return gn(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Np)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Np)},persist:function(){},isPersistent:Np}),o}var _u={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T1=Yo(_u),ef=gn({},_u,{view:0,detail:0}),VC=Yo(ef),Zv,Qv,pd,Pm=gn({},ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F1,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==pd&&(pd&&l.type==="mousemove"?(Zv=l.screenX-pd.screenX,Qv=l.screenY-pd.screenY):Qv=Zv=0,pd=l),Zv)},movementY:function(l){return"movementY"in l?l.movementY:Qv}}),IL=Yo(Pm),YC=gn({},Pm,{dataTransfer:0}),UC=Yo(YC),XC=gn({},ef,{relatedTarget:0}),qv=Yo(XC),_C=gn({},_u,{animationName:0,elapsedTime:0,pseudoElement:0}),KC=Yo(_C),HC=gn({},_u,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),WC=Yo(HC),$C=gn({},_u,{data:0}),AL=Yo($C),JC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qC(l){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(l):(l=QC[l])?!!o[l]:!1}function F1(){return qC}var bC=gn({},ef,{key:function(l){if(l.key){var o=JC[l.key]||l.key;if(o!=="Unidentified")return o}return l.type==="keypress"?(l=Vp(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ZC[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F1,charCode:function(l){return l.type==="keypress"?Vp(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Vp(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),tT=Yo(bC),eT=gn({},Pm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zL=Yo(eT),nT=gn({},ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F1}),iT=Yo(nT),oT=gn({},_u,{propertyName:0,elapsedTime:0,pseudoElement:0}),rT=Yo(oT),sT=gn({},Pm,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),aT=Yo(sT),lT=[9,13,27,32],D1=na&&"CompositionEvent"in window,Fd=null;na&&"documentMode"in document&&(Fd=document.documentMode);var hT=na&&"TextEvent"in window&&!Fd,y5=na&&(!D1||Fd&&8<Fd&&11>=Fd),BL=String.fromCharCode(32),GL=!1;function v5(l,o){switch(l){case"keyup":return lT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S5(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Pu=!1;function uT(l,o){switch(l){case"compositionend":return S5(o);case"keypress":return o.which!==32?null:(GL=!0,BL);case"textInput":return l=o.data,l===BL&&GL?null:l;default:return null}}function gT(l,o){if(Pu)return l==="compositionend"||!D1&&v5(l,o)?(l=m5(),Rp=C1=Ba=null,Pu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return y5&&o.locale!=="ko"?null:o.data;default:return null}}var dT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RL(l){var o=l&&l.nodeName&&l.nodeName.toLowerCase();return o==="input"?!!dT[l.type]:o==="textarea"}function P5(l,o,s,d){QM(d),o=nm(o,"onChange"),0<o.length&&(s=new T1("onChange","change",null,s,d),l.push({event:s,listeners:o}))}var Dd=null,Ud=null;function fT(l){j5(l,0)}function xm(l){var o=Lu(l);if(_M(o))return l}function cT(l,o){if(l==="change")return o}var x5=!1;if(na){var bv;if(na){var tS="oninput"in document;if(!tS){var VL=document.createElement("div");VL.setAttribute("oninput","return;"),tS=typeof VL.oninput=="function"}bv=tS}else bv=!1;x5=bv&&(!document.documentMode||9<document.documentMode)}function YL(){Dd&&(Dd.detachEvent("onpropertychange",w5),Ud=Dd=null)}function w5(l){if(l.propertyName==="value"&&xm(Ud)){var o=[];P5(o,Ud,l,w1(l)),e5(fT,o)}}function pT(l,o,s){l==="focusin"?(YL(),Dd=o,Ud=s,Dd.attachEvent("onpropertychange",w5)):l==="focusout"&&YL()}function mT(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return xm(Ud)}function yT(l,o){if(l==="click")return xm(o)}function vT(l,o){if(l==="input"||l==="change")return xm(o)}function ST(l,o){return l===o&&(l!==0||1/l===1/o)||l!==l&&o!==o}var Rr=typeof Object.is=="function"?Object.is:ST;function Xd(l,o){if(Rr(l,o))return!0;if(typeof l!="object"||l===null||typeof o!="object"||o===null)return!1;var s=Object.keys(l),d=Object.keys(o);if(s.length!==d.length)return!1;for(d=0;d<s.length;d++){var u=s[d];if(!vS.call(o,u)||!Rr(l[u],o[u]))return!1}return!0}function UL(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function XL(l,o){var s=UL(l);l=0;for(var d;s;){if(s.nodeType===3){if(d=l+s.textContent.length,l<=o&&d>=o)return{node:s,offset:o-l};l=d}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=UL(s)}}function L5(l,o){return l&&o?l===o?!0:l&&l.nodeType===3?!1:o&&o.nodeType===3?L5(l,o.parentNode):"contains"in l?l.contains(o):l.compareDocumentPosition?!!(l.compareDocumentPosition(o)&16):!1:!1}function M5(){for(var l=window,o=Jp();o instanceof l.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)l=o.contentWindow;else break;o=Jp(l.document)}return o}function j1(l){var o=l&&l.nodeName&&l.nodeName.toLowerCase();return o&&(o==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||o==="textarea"||l.contentEditable==="true")}function PT(l){var o=M5(),s=l.focusedElem,d=l.selectionRange;if(o!==s&&s&&s.ownerDocument&&L5(s.ownerDocument.documentElement,s)){if(d!==null&&j1(s)){if(o=d.start,l=d.end,l===void 0&&(l=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(l,s.value.length);else if(l=(o=s.ownerDocument||document)&&o.defaultView||window,l.getSelection){l=l.getSelection();var u=s.textContent.length,p=Math.min(d.start,u);d=d.end===void 0?p:Math.min(d.end,u),!l.extend&&p>d&&(u=d,d=p,p=u),u=XL(s,p);var v=XL(s,d);u&&v&&(l.rangeCount!==1||l.anchorNode!==u.node||l.anchorOffset!==u.offset||l.focusNode!==v.node||l.focusOffset!==v.offset)&&(o=o.createRange(),o.setStart(u.node,u.offset),l.removeAllRanges(),p>d?(l.addRange(o),l.extend(v.node,v.offset)):(o.setEnd(v.node,v.offset),l.addRange(o)))}}for(o=[],l=s;l=l.parentNode;)l.nodeType===1&&o.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)l=o[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var xT=na&&"documentMode"in document&&11>=document.documentMode,xu=null,BS=null,jd=null,GS=!1;function _L(l,o,s){var d=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;GS||xu==null||xu!==Jp(d)||(d=xu,"selectionStart"in d&&j1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),jd&&Xd(jd,d)||(jd=d,d=nm(BS,"onSelect"),0<d.length&&(o=new T1("onSelect","select",null,o,s),l.push({event:o,listeners:d}),o.target=xu)))}function Cp(l,o){var s={};return s[l.toLowerCase()]=o.toLowerCase(),s["Webkit"+l]="webkit"+o,s["Moz"+l]="moz"+o,s}var wu={animationend:Cp("Animation","AnimationEnd"),animationiteration:Cp("Animation","AnimationIteration"),animationstart:Cp("Animation","AnimationStart"),transitionend:Cp("Transition","TransitionEnd")},eS={},k5={};na&&(k5=document.createElement("div").style,"AnimationEvent"in window||(delete wu.animationend.animation,delete wu.animationiteration.animation,delete wu.animationstart.animation),"TransitionEvent"in window||delete wu.transitionend.transition);function wm(l){if(eS[l])return eS[l];if(!wu[l])return l;var o=wu[l],s;for(s in o)if(o.hasOwnProperty(s)&&s in k5)return eS[l]=o[s];return l}var N5=wm("animationend"),C5=wm("animationiteration"),T5=wm("animationstart"),F5=wm("transitionend"),D5=new Map,KL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(l,o){D5.set(l,o),th(o,[l])}for(var nS=0;nS<KL.length;nS++){var iS=KL[nS],wT=iS.toLowerCase(),LT=iS[0].toUpperCase()+iS.slice(1);Ja(wT,"on"+LT)}Ja(N5,"onAnimationEnd");Ja(C5,"onAnimationIteration");Ja(T5,"onAnimationStart");Ja("dblclick","onDoubleClick");Ja("focusin","onFocus");Ja("focusout","onBlur");Ja(F5,"onTransitionEnd");zu("onMouseEnter",["mouseout","mouseover"]);zu("onMouseLeave",["mouseout","mouseover"]);zu("onPointerEnter",["pointerout","pointerover"]);zu("onPointerLeave",["pointerout","pointerover"]);th("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));th("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));th("onBeforeInput",["compositionend","keypress","textInput","paste"]);th("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));th("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));th("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MT=new Set("cancel close invalid load scroll toggle".split(" ").concat(kd));function HL(l,o,s){var d=l.type||"unknown-event";l.currentTarget=s,wC(d,o,void 0,l),l.currentTarget=null}function j5(l,o){o=(o&4)!==0;for(var s=0;s<l.length;s++){var d=l[s],u=d.event;d=d.listeners;t:{var p=void 0;if(o)for(var v=d.length-1;0<=v;v--){var w=d[v],M=w.instance,T=w.currentTarget;if(w=w.listener,M!==p&&u.isPropagationStopped())break t;HL(u,w,T),p=M}else for(v=0;v<d.length;v++){if(w=d[v],M=w.instance,T=w.currentTarget,w=w.listener,M!==p&&u.isPropagationStopped())break t;HL(u,w,T),p=M}}}if(Qp)throw l=ES,Qp=!1,ES=null,l}function He(l,o){var s=o[XS];s===void 0&&(s=o[XS]=new Set);var d=l+"__bubble";s.has(d)||(O5(o,l,2,!1),s.add(d))}function oS(l,o,s){var d=0;o&&(d|=4),O5(s,l,d,o)}var Tp="_reactListening"+Math.random().toString(36).slice(2);function _d(l){if(!l[Tp]){l[Tp]=!0,RM.forEach(function(s){s!=="selectionchange"&&(MT.has(s)||oS(s,!1,l),oS(s,!0,l))});var o=l.nodeType===9?l:l.ownerDocument;o===null||o[Tp]||(o[Tp]=!0,oS("selectionchange",!1,o))}}function O5(l,o,s,d){switch(p5(o)){case 1:var u=GC;break;case 4:u=RC;break;default:u=N1}s=u.bind(null,o,s,l),u=void 0,!OS||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(u=!0),d?u!==void 0?l.addEventListener(o,s,{capture:!0,passive:u}):l.addEventListener(o,s,!0):u!==void 0?l.addEventListener(o,s,{passive:u}):l.addEventListener(o,s,!1)}function rS(l,o,s,d,u){var p=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var v=d.tag;if(v===3||v===4){var w=d.stateNode.containerInfo;if(w===u||w.nodeType===8&&w.parentNode===u)break;if(v===4)for(v=d.return;v!==null;){var M=v.tag;if((M===3||M===4)&&(M=v.stateNode.containerInfo,M===u||M.nodeType===8&&M.parentNode===u))return;v=v.return}for(;w!==null;){if(v=Xl(w),v===null)return;if(M=v.tag,M===5||M===6){d=p=v;continue t}w=w.parentNode}}d=d.return}e5(function(){var T=p,O=w1(s),I=[];t:{var V=D5.get(l);if(V!==void 0){var K=T1,at=l;switch(l){case"keypress":if(Vp(s)===0)break t;case"keydown":case"keyup":K=tT;break;case"focusin":at="focus",K=qv;break;case"focusout":at="blur",K=qv;break;case"beforeblur":case"afterblur":K=qv;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=IL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=UC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=iT;break;case N5:case C5:case T5:K=KC;break;case F5:K=rT;break;case"scroll":K=VC;break;case"wheel":K=aT;break;case"copy":case"cut":case"paste":K=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=zL}var U=(o&4)!==0,Bt=!U&&l==="scroll",b=U?V!==null?V+"Capture":null:V;U=[];for(var _=T,Q;_!==null;){Q=_;var B=Q.stateNode;if(Q.tag===5&&B!==null&&(Q=B,b!==null&&(B=Gd(_,b),B!=null&&U.push(Kd(_,B,Q)))),Bt)break;_=_.return}0<U.length&&(V=new K(V,at,null,s,O),I.push({event:V,listeners:U}))}}if((o&7)===0){t:{if(V=l==="mouseover"||l==="pointerover",K=l==="mouseout"||l==="pointerout",V&&s!==DS&&(at=s.relatedTarget||s.fromElement)&&(Xl(at)||at[ia]))break t;if((K||V)&&(V=O.window===O?O:(V=O.ownerDocument)?V.defaultView||V.parentWindow:window,K?(at=s.relatedTarget||s.toElement,K=T,at=at?Xl(at):null,at!==null&&(Bt=eh(at),at!==Bt||at.tag!==5&&at.tag!==6)&&(at=null)):(K=null,at=T),K!==at)){if(U=IL,B="onMouseLeave",b="onMouseEnter",_="mouse",(l==="pointerout"||l==="pointerover")&&(U=zL,B="onPointerLeave",b="onPointerEnter",_="pointer"),Bt=K==null?V:Lu(K),Q=at==null?V:Lu(at),V=new U(B,_+"leave",K,s,O),V.target=Bt,V.relatedTarget=Q,B=null,Xl(O)===T&&(U=new U(b,_+"enter",at,s,O),U.target=Q,U.relatedTarget=Bt,B=U),Bt=B,K&&at)e:{for(U=K,b=at,_=0,Q=U;Q;Q=yu(Q))_++;for(Q=0,B=b;B;B=yu(B))Q++;for(;0<_-Q;)U=yu(U),_--;for(;0<Q-_;)b=yu(b),Q--;for(;_--;){if(U===b||b!==null&&U===b.alternate)break e;U=yu(U),b=yu(b)}U=null}else U=null;K!==null&&WL(I,V,K,U,!1),at!==null&&Bt!==null&&WL(I,Bt,at,U,!0)}}t:{if(V=T?Lu(T):window,K=V.nodeName&&V.nodeName.toLowerCase(),K==="select"||K==="input"&&V.type==="file")var ot=cT;else if(RL(V))if(x5)ot=vT;else{ot=mT;var gt=pT}else(K=V.nodeName)&&K.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(ot=yT);if(ot&&(ot=ot(l,T))){P5(I,ot,s,O);break t}gt&&gt(l,V,T),l==="focusout"&&(gt=V._wrapperState)&&gt.controlled&&V.type==="number"&&kS(V,"number",V.value)}switch(gt=T?Lu(T):window,l){case"focusin":(RL(gt)||gt.contentEditable==="true")&&(xu=gt,BS=T,jd=null);break;case"focusout":jd=BS=xu=null;break;case"mousedown":GS=!0;break;case"contextmenu":case"mouseup":case"dragend":GS=!1,_L(I,s,O);break;case"selectionchange":if(xT)break;case"keydown":case"keyup":_L(I,s,O)}var Lt;if(D1)t:{switch(l){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else Pu?v5(l,s)&&(mt="onCompositionEnd"):l==="keydown"&&s.keyCode===229&&(mt="onCompositionStart");mt&&(y5&&s.locale!=="ko"&&(Pu||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Pu&&(Lt=m5()):(Ba=O,C1="value"in Ba?Ba.value:Ba.textContent,Pu=!0)),gt=nm(T,mt),0<gt.length&&(mt=new AL(mt,l,null,s,O),I.push({event:mt,listeners:gt}),Lt?mt.data=Lt:(Lt=S5(s),Lt!==null&&(mt.data=Lt)))),(Lt=hT?uT(l,s):gT(l,s))&&(T=nm(T,"onBeforeInput"),0<T.length&&(O=new AL("onBeforeInput","beforeinput",null,s,O),I.push({event:O,listeners:T}),O.data=Lt))}j5(I,o)})}function Kd(l,o,s){return{instance:l,listener:o,currentTarget:s}}function nm(l,o){for(var s=o+"Capture",d=[];l!==null;){var u=l,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=Gd(l,s),p!=null&&d.unshift(Kd(l,p,u)),p=Gd(l,o),p!=null&&d.push(Kd(l,p,u))),l=l.return}return d}function yu(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function WL(l,o,s,d,u){for(var p=o._reactName,v=[];s!==null&&s!==d;){var w=s,M=w.alternate,T=w.stateNode;if(M!==null&&M===d)break;w.tag===5&&T!==null&&(w=T,u?(M=Gd(s,p),M!=null&&v.unshift(Kd(s,M,w))):u||(M=Gd(s,p),M!=null&&v.push(Kd(s,M,w)))),s=s.return}v.length!==0&&l.push({event:o,listeners:v})}var kT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function $L(l){return(typeof l=="string"?l:""+l).replace(kT,`
`).replace(NT,"")}function Fp(l,o,s){if(o=$L(o),$L(l)!==o&&s)throw Error(Pt(425))}function im(){}var RS=null,VS=null;function YS(l,o){return l==="textarea"||l==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var US=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0,JL=typeof Promise=="function"?Promise:void 0,TT=typeof queueMicrotask=="function"?queueMicrotask:typeof JL<"u"?function(l){return JL.resolve(null).then(l).catch(FT)}:US;function FT(l){setTimeout(function(){throw l})}function sS(l,o){var s=o,d=0;do{var u=s.nextSibling;if(l.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(d===0){l.removeChild(u),Yd(o);return}d--}else s!=="$"&&s!=="$?"&&s!=="$!"||d++;s=u}while(s);Yd(o)}function Ua(l){for(;l!=null;l=l.nextSibling){var o=l.nodeType;if(o===1||o===3)break;if(o===8){if(o=l.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return l}function ZL(l){l=l.previousSibling;for(var o=0;l;){if(l.nodeType===8){var s=l.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return l;o--}else s==="/$"&&o++}l=l.previousSibling}return null}var Ku=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Ku,Hd="__reactProps$"+Ku,ia="__reactContainer$"+Ku,XS="__reactEvents$"+Ku,DT="__reactListeners$"+Ku,jT="__reactHandles$"+Ku;function Xl(l){var o=l[Ss];if(o)return o;for(var s=l.parentNode;s;){if(o=s[ia]||s[Ss]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(l=ZL(l);l!==null;){if(s=l[Ss])return s;l=ZL(l)}return o}l=s,s=l.parentNode}return null}function nf(l){return l=l[Ss]||l[ia],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Lu(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(Pt(33))}function Lm(l){return l[Hd]||null}var _S=[],Mu=-1;function Za(l){return{current:l}}function We(l){0>Mu||(l.current=_S[Mu],_S[Mu]=null,Mu--)}function Xe(l,o){Mu++,_S[Mu]=l.current,l.current=o}var $a={},Vi=Za($a),Lo=Za(!1),$l=$a;function Bu(l,o){var s=l.type.contextTypes;if(!s)return $a;var d=l.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in s)u[p]=o[p];return d&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=o,l.__reactInternalMemoizedMaskedChildContext=u),u}function Mo(l){return l=l.childContextTypes,l!=null}function om(){We(Lo),We(Vi)}function QL(l,o,s){if(Vi.current!==$a)throw Error(Pt(168));Xe(Vi,o),Xe(Lo,s)}function E5(l,o,s){var d=l.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return s;d=d.getChildContext();for(var u in d)if(!(u in o))throw Error(Pt(108,pC(l)||"Unknown",u));return gn({},s,d)}function rm(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||$a,$l=Vi.current,Xe(Vi,l),Xe(Lo,Lo.current),!0}function qL(l,o,s){var d=l.stateNode;if(!d)throw Error(Pt(169));s?(l=E5(l,o,$l),d.__reactInternalMemoizedMergedChildContext=l,We(Lo),We(Vi),Xe(Vi,l)):We(Lo),Xe(Lo,s)}var qs=null,Mm=!1,aS=!1;function I5(l){qs===null?qs=[l]:qs.push(l)}function OT(l){Mm=!0,I5(l)}function Qa(){if(!aS&&qs!==null){aS=!0;var l=0,o=Ie;try{var s=qs;for(Ie=1;l<s.length;l++){var d=s[l];do d=d(!0);while(d!==null)}qs=null,Mm=!1}catch(u){throw qs!==null&&(qs=qs.slice(l+1)),r5(L1,Qa),u}finally{Ie=o,aS=!1}}return null}var ku=[],Nu=0,sm=null,am=0,rr=[],sr=0,Jl=null,bs=1,ta="";function Yl(l,o){ku[Nu++]=am,ku[Nu++]=sm,sm=l,am=o}function A5(l,o,s){rr[sr++]=bs,rr[sr++]=ta,rr[sr++]=Jl,Jl=l;var d=bs;l=ta;var u=32-Br(d)-1;d&=~(1<<u),s+=1;var p=32-Br(o)+u;if(30<p){var v=u-u%5;p=(d&(1<<v)-1).toString(32),d>>=v,u-=v,bs=1<<32-Br(o)+u|s<<u|d,ta=p+l}else bs=1<<p|s<<u|d,ta=l}function O1(l){l.return!==null&&(Yl(l,1),A5(l,1,0))}function E1(l){for(;l===sm;)sm=ku[--Nu],ku[Nu]=null,am=ku[--Nu],ku[Nu]=null;for(;l===Jl;)Jl=rr[--sr],rr[sr]=null,ta=rr[--sr],rr[sr]=null,bs=rr[--sr],rr[sr]=null}var Bo=null,zo=null,be=!1,zr=null;function z5(l,o){var s=ar(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=l,o=l.deletions,o===null?(l.deletions=[s],l.flags|=16):o.push(s)}function bL(l,o){switch(l.tag){case 5:var s=l.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(l.stateNode=o,Bo=l,zo=Ua(o.firstChild),!0):!1;case 6:return o=l.pendingProps===""||o.nodeType!==3?null:o,o!==null?(l.stateNode=o,Bo=l,zo=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=Jl!==null?{id:bs,overflow:ta}:null,l.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=ar(18,null,null,0),s.stateNode=o,s.return=l,l.child=s,Bo=l,zo=null,!0):!1;default:return!1}}function KS(l){return(l.mode&1)!==0&&(l.flags&128)===0}function HS(l){if(be){var o=zo;if(o){var s=o;if(!bL(l,o)){if(KS(l))throw Error(Pt(418));o=Ua(s.nextSibling);var d=Bo;o&&bL(l,o)?z5(d,s):(l.flags=l.flags&-4097|2,be=!1,Bo=l)}}else{if(KS(l))throw Error(Pt(418));l.flags=l.flags&-4097|2,be=!1,Bo=l}}}function tM(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Bo=l}function Dp(l){if(l!==Bo)return!1;if(!be)return tM(l),be=!0,!1;var o;if((o=l.tag!==3)&&!(o=l.tag!==5)&&(o=l.type,o=o!=="head"&&o!=="body"&&!YS(l.type,l.memoizedProps)),o&&(o=zo)){if(KS(l))throw B5(),Error(Pt(418));for(;o;)z5(l,o),o=Ua(o.nextSibling)}if(tM(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Pt(317));t:{for(l=l.nextSibling,o=0;l;){if(l.nodeType===8){var s=l.data;if(s==="/$"){if(o===0){zo=Ua(l.nextSibling);break t}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}l=l.nextSibling}zo=null}}else zo=Bo?Ua(l.stateNode.nextSibling):null;return!0}function B5(){for(var l=zo;l;)l=Ua(l.nextSibling)}function Gu(){zo=Bo=null,be=!1}function I1(l){zr===null?zr=[l]:zr.push(l)}var ET=sa.ReactCurrentBatchConfig;function Ir(l,o){if(l&&l.defaultProps){o=gn({},o),l=l.defaultProps;for(var s in l)o[s]===void 0&&(o[s]=l[s]);return o}return o}var lm=Za(null),hm=null,Cu=null,A1=null;function z1(){A1=Cu=hm=null}function B1(l){var o=lm.current;We(lm),l._currentValue=o}function WS(l,o,s){for(;l!==null;){var d=l.alternate;if((l.childLanes&o)!==o?(l.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),l===s)break;l=l.return}}function Iu(l,o){hm=l,A1=Cu=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&o)!==0&&(wo=!0),l.firstContext=null)}function hr(l){var o=l._currentValue;if(A1!==l)if(l={context:l,memoizedValue:o,next:null},Cu===null){if(hm===null)throw Error(Pt(308));Cu=l,hm.dependencies={lanes:0,firstContext:l}}else Cu=Cu.next=l;return o}var _l=null;function G1(l){_l===null?_l=[l]:_l.push(l)}function G5(l,o,s,d){var u=o.interleaved;return u===null?(s.next=s,G1(o)):(s.next=u.next,u.next=s),o.interleaved=s,oa(l,d)}function oa(l,o){l.lanes|=o;var s=l.alternate;for(s!==null&&(s.lanes|=o),s=l,l=l.return;l!==null;)l.childLanes|=o,s=l.alternate,s!==null&&(s.childLanes|=o),s=l,l=l.return;return s.tag===3?s.stateNode:null}var Ia=!1;function R1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R5(l,o){l=l.updateQueue,o.updateQueue===l&&(o.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ea(l,o){return{eventTime:l,lane:o,tag:0,payload:null,callback:null,next:null}}function Xa(l,o,s){var d=l.updateQueue;if(d===null)return null;if(d=d.shared,(Pe&2)!==0){var u=d.pending;return u===null?o.next=o:(o.next=u.next,u.next=o),d.pending=o,oa(l,s)}return u=d.interleaved,u===null?(o.next=o,G1(d)):(o.next=u.next,u.next=o),d.interleaved=o,oa(l,s)}function Yp(l,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var d=o.lanes;d&=l.pendingLanes,s|=d,o.lanes=s,M1(l,s)}}function eM(l,o){var s=l.updateQueue,d=l.alternate;if(d!==null&&(d=d.updateQueue,s===d)){var u=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};p===null?u=p=v:p=p.next=v,s=s.next}while(s!==null);p===null?u=p=o:p=p.next=o}else u=p=o;s={baseState:d.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:d.shared,effects:d.effects},l.updateQueue=s;return}l=s.lastBaseUpdate,l===null?s.firstBaseUpdate=o:l.next=o,s.lastBaseUpdate=o}function um(l,o,s,d){var u=l.updateQueue;Ia=!1;var p=u.firstBaseUpdate,v=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var M=w,T=M.next;M.next=null,v===null?p=T:v.next=T,v=M;var O=l.alternate;O!==null&&(O=O.updateQueue,w=O.lastBaseUpdate,w!==v&&(w===null?O.firstBaseUpdate=T:w.next=T,O.lastBaseUpdate=M))}if(p!==null){var I=u.baseState;v=0,O=T=M=null,w=p;do{var V=w.lane,K=w.eventTime;if((d&V)===V){O!==null&&(O=O.next={eventTime:K,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});t:{var at=l,U=w;switch(V=o,K=s,U.tag){case 1:if(at=U.payload,typeof at=="function"){I=at.call(K,I,V);break t}I=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=U.payload,V=typeof at=="function"?at.call(K,I,V):at,V==null)break t;I=gn({},I,V);break t;case 2:Ia=!0}}w.callback!==null&&w.lane!==0&&(l.flags|=64,V=u.effects,V===null?u.effects=[w]:V.push(w))}else K={eventTime:K,lane:V,tag:w.tag,payload:w.payload,callback:w.callback,next:null},O===null?(T=O=K,M=I):O=O.next=K,v|=V;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;V=w,w=V.next,V.next=null,u.lastBaseUpdate=V,u.shared.pending=null}}while(1);if(O===null&&(M=I),u.baseState=M,u.firstBaseUpdate=T,u.lastBaseUpdate=O,o=u.shared.interleaved,o!==null){u=o;do v|=u.lane,u=u.next;while(u!==o)}else p===null&&(u.shared.lanes=0);Ql|=v,l.lanes=v,l.memoizedState=I}}function nM(l,o,s){if(l=o.effects,o.effects=null,l!==null)for(o=0;o<l.length;o++){var d=l[o],u=d.callback;if(u!==null){if(d.callback=null,d=s,typeof u!="function")throw Error(Pt(191,u));u.call(d)}}}var V5=new GM.Component().refs;function $S(l,o,s,d){o=l.memoizedState,s=s(d,o),s=s==null?o:gn({},o,s),l.memoizedState=s,l.lanes===0&&(l.updateQueue.baseState=s)}var km={isMounted:function(l){return(l=l._reactInternals)?eh(l)===l:!1},enqueueSetState:function(l,o,s){l=l._reactInternals;var d=eo(),u=Ka(l),p=ea(d,u);p.payload=o,s!=null&&(p.callback=s),o=Xa(l,p,u),o!==null&&(Gr(o,l,u,d),Yp(o,l,u))},enqueueReplaceState:function(l,o,s){l=l._reactInternals;var d=eo(),u=Ka(l),p=ea(d,u);p.tag=1,p.payload=o,s!=null&&(p.callback=s),o=Xa(l,p,u),o!==null&&(Gr(o,l,u,d),Yp(o,l,u))},enqueueForceUpdate:function(l,o){l=l._reactInternals;var s=eo(),d=Ka(l),u=ea(s,d);u.tag=2,o!=null&&(u.callback=o),o=Xa(l,u,d),o!==null&&(Gr(o,l,d,s),Yp(o,l,d))}};function iM(l,o,s,d,u,p,v){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(d,p,v):o.prototype&&o.prototype.isPureReactComponent?!Xd(s,d)||!Xd(u,p):!0}function Y5(l,o,s){var d=!1,u=$a,p=o.contextType;return typeof p=="object"&&p!==null?p=hr(p):(u=Mo(o)?$l:Vi.current,d=o.contextTypes,p=(d=d!=null)?Bu(l,u):$a),o=new o(s,p),l.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=km,l.stateNode=o,o._reactInternals=l,d&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=p),o}function oM(l,o,s,d){l=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,d),o.state!==l&&km.enqueueReplaceState(o,o.state,null)}function JS(l,o,s,d){var u=l.stateNode;u.props=s,u.state=l.memoizedState,u.refs=V5,R1(l);var p=o.contextType;typeof p=="object"&&p!==null?u.context=hr(p):(p=Mo(o)?$l:Vi.current,u.context=Bu(l,p)),u.state=l.memoizedState,p=o.getDerivedStateFromProps,typeof p=="function"&&($S(l,o,p,s),u.state=l.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(o=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),o!==u.state&&km.enqueueReplaceState(u,u.state,null),um(l,s,u,d),u.state=l.memoizedState),typeof u.componentDidMount=="function"&&(l.flags|=4194308)}function md(l,o,s){if(l=s.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Pt(309));var d=s.stateNode}if(!d)throw Error(Pt(147,l));var u=d,p=""+l;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===p?o.ref:(o=function(v){var w=u.refs;w===V5&&(w=u.refs={}),v===null?delete w[p]:w[p]=v},o._stringRef=p,o)}if(typeof l!="string")throw Error(Pt(284));if(!s._owner)throw Error(Pt(290,l))}return l}function jp(l,o){throw l=Object.prototype.toString.call(o),Error(Pt(31,l==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":l))}function rM(l){var o=l._init;return o(l._payload)}function U5(l){function o(b,_){if(l){var Q=b.deletions;Q===null?(b.deletions=[_],b.flags|=16):Q.push(_)}}function s(b,_){if(!l)return null;for(;_!==null;)o(b,_),_=_.sibling;return null}function d(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function u(b,_){return b=Ha(b,_),b.index=0,b.sibling=null,b}function p(b,_,Q){return b.index=Q,l?(Q=b.alternate,Q!==null?(Q=Q.index,Q<_?(b.flags|=2,_):Q):(b.flags|=2,_)):(b.flags|=1048576,_)}function v(b){return l&&b.alternate===null&&(b.flags|=2),b}function w(b,_,Q,B){return _===null||_.tag!==6?(_=cS(Q,b.mode,B),_.return=b,_):(_=u(_,Q),_.return=b,_)}function M(b,_,Q,B){var ot=Q.type;return ot===Su?O(b,_,Q.props.children,B,Q.key):_!==null&&(_.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ea&&rM(ot)===_.type)?(B=u(_,Q.props),B.ref=md(b,_,Q),B.return=b,B):(B=Wp(Q.type,Q.key,Q.props,null,b.mode,B),B.ref=md(b,_,Q),B.return=b,B)}function T(b,_,Q,B){return _===null||_.tag!==4||_.stateNode.containerInfo!==Q.containerInfo||_.stateNode.implementation!==Q.implementation?(_=pS(Q,b.mode,B),_.return=b,_):(_=u(_,Q.children||[]),_.return=b,_)}function O(b,_,Q,B,ot){return _===null||_.tag!==7?(_=Wl(Q,b.mode,B,ot),_.return=b,_):(_=u(_,Q),_.return=b,_)}function I(b,_,Q){if(typeof _=="string"&&_!==""||typeof _=="number")return _=cS(""+_,b.mode,Q),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pp:return Q=Wp(_.type,_.key,_.props,null,b.mode,Q),Q.ref=md(b,null,_),Q.return=b,Q;case vu:return _=pS(_,b.mode,Q),_.return=b,_;case Ea:var B=_._init;return I(b,B(_._payload),Q)}if(Ld(_)||gd(_))return _=Wl(_,b.mode,Q,null),_.return=b,_;jp(b,_)}return null}function V(b,_,Q,B){var ot=_!==null?_.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return ot!==null?null:w(b,_,""+Q,B);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Pp:return Q.key===ot?M(b,_,Q,B):null;case vu:return Q.key===ot?T(b,_,Q,B):null;case Ea:return ot=Q._init,V(b,_,ot(Q._payload),B)}if(Ld(Q)||gd(Q))return ot!==null?null:O(b,_,Q,B,null);jp(b,Q)}return null}function K(b,_,Q,B,ot){if(typeof B=="string"&&B!==""||typeof B=="number")return b=b.get(Q)||null,w(_,b,""+B,ot);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Pp:return b=b.get(B.key===null?Q:B.key)||null,M(_,b,B,ot);case vu:return b=b.get(B.key===null?Q:B.key)||null,T(_,b,B,ot);case Ea:var gt=B._init;return K(b,_,Q,gt(B._payload),ot)}if(Ld(B)||gd(B))return b=b.get(Q)||null,O(_,b,B,ot,null);jp(_,B)}return null}function at(b,_,Q,B){for(var ot=null,gt=null,Lt=_,mt=_=0,Ut=null;Lt!==null&&mt<Q.length;mt++){Lt.index>mt?(Ut=Lt,Lt=null):Ut=Lt.sibling;var Jt=V(b,Lt,Q[mt],B);if(Jt===null){Lt===null&&(Lt=Ut);break}l&&Lt&&Jt.alternate===null&&o(b,Lt),_=p(Jt,_,mt),gt===null?ot=Jt:gt.sibling=Jt,gt=Jt,Lt=Ut}if(mt===Q.length)return s(b,Lt),be&&Yl(b,mt),ot;if(Lt===null){for(;mt<Q.length;mt++)Lt=I(b,Q[mt],B),Lt!==null&&(_=p(Lt,_,mt),gt===null?ot=Lt:gt.sibling=Lt,gt=Lt);return be&&Yl(b,mt),ot}for(Lt=d(b,Lt);mt<Q.length;mt++)Ut=K(Lt,b,mt,Q[mt],B),Ut!==null&&(l&&Ut.alternate!==null&&Lt.delete(Ut.key===null?mt:Ut.key),_=p(Ut,_,mt),gt===null?ot=Ut:gt.sibling=Ut,gt=Ut);return l&&Lt.forEach(function(Bn){return o(b,Bn)}),be&&Yl(b,mt),ot}function U(b,_,Q,B){var ot=gd(Q);if(typeof ot!="function")throw Error(Pt(150));if(Q=ot.call(Q),Q==null)throw Error(Pt(151));for(var gt=ot=null,Lt=_,mt=_=0,Ut=null,Jt=Q.next();Lt!==null&&!Jt.done;mt++,Jt=Q.next()){Lt.index>mt?(Ut=Lt,Lt=null):Ut=Lt.sibling;var Bn=V(b,Lt,Jt.value,B);if(Bn===null){Lt===null&&(Lt=Ut);break}l&&Lt&&Bn.alternate===null&&o(b,Lt),_=p(Bn,_,mt),gt===null?ot=Bn:gt.sibling=Bn,gt=Bn,Lt=Ut}if(Jt.done)return s(b,Lt),be&&Yl(b,mt),ot;if(Lt===null){for(;!Jt.done;mt++,Jt=Q.next())Jt=I(b,Jt.value,B),Jt!==null&&(_=p(Jt,_,mt),gt===null?ot=Jt:gt.sibling=Jt,gt=Jt);return be&&Yl(b,mt),ot}for(Lt=d(b,Lt);!Jt.done;mt++,Jt=Q.next())Jt=K(Lt,b,mt,Jt.value,B),Jt!==null&&(l&&Jt.alternate!==null&&Lt.delete(Jt.key===null?mt:Jt.key),_=p(Jt,_,mt),gt===null?ot=Jt:gt.sibling=Jt,gt=Jt);return l&&Lt.forEach(function(No){return o(b,No)}),be&&Yl(b,mt),ot}function Bt(b,_,Q,B){if(typeof Q=="object"&&Q!==null&&Q.type===Su&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Pp:t:{for(var ot=Q.key,gt=_;gt!==null;){if(gt.key===ot){if(ot=Q.type,ot===Su){if(gt.tag===7){s(b,gt.sibling),_=u(gt,Q.props.children),_.return=b,b=_;break t}}else if(gt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ea&&rM(ot)===gt.type){s(b,gt.sibling),_=u(gt,Q.props),_.ref=md(b,gt,Q),_.return=b,b=_;break t}s(b,gt);break}else o(b,gt);gt=gt.sibling}Q.type===Su?(_=Wl(Q.props.children,b.mode,B,Q.key),_.return=b,b=_):(B=Wp(Q.type,Q.key,Q.props,null,b.mode,B),B.ref=md(b,_,Q),B.return=b,b=B)}return v(b);case vu:t:{for(gt=Q.key;_!==null;){if(_.key===gt)if(_.tag===4&&_.stateNode.containerInfo===Q.containerInfo&&_.stateNode.implementation===Q.implementation){s(b,_.sibling),_=u(_,Q.children||[]),_.return=b,b=_;break t}else{s(b,_);break}else o(b,_);_=_.sibling}_=pS(Q,b.mode,B),_.return=b,b=_}return v(b);case Ea:return gt=Q._init,Bt(b,_,gt(Q._payload),B)}if(Ld(Q))return at(b,_,Q,B);if(gd(Q))return U(b,_,Q,B);jp(b,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,_!==null&&_.tag===6?(s(b,_.sibling),_=u(_,Q),_.return=b,b=_):(s(b,_),_=cS(Q,b.mode,B),_.return=b,b=_),v(b)):s(b,_)}return Bt}var Ru=U5(!0),X5=U5(!1),of={},ws=Za(of),Wd=Za(of),$d=Za(of);function Kl(l){if(l===of)throw Error(Pt(174));return l}function V1(l,o){switch(Xe($d,o),Xe(Wd,l),Xe(ws,of),l=o.nodeType,l){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:CS(null,"");break;default:l=l===8?o.parentNode:o,o=l.namespaceURI||null,l=l.tagName,o=CS(o,l)}We(ws),Xe(ws,o)}function Vu(){We(ws),We(Wd),We($d)}function _5(l){Kl($d.current);var o=Kl(ws.current),s=CS(o,l.type);o!==s&&(Xe(Wd,l),Xe(ws,s))}function Y1(l){Wd.current===l&&(We(ws),We(Wd))}var hn=Za(0);function gm(l){for(var o=l;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break;for(;o.sibling===null;){if(o.return===null||o.return===l)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var lS=[];function U1(){for(var l=0;l<lS.length;l++)lS[l]._workInProgressVersionPrimary=null;lS.length=0}var Up=sa.ReactCurrentDispatcher,hS=sa.ReactCurrentBatchConfig,Zl=0,un=null,bn=null,hi=null,dm=!1,Od=!1,Jd=0,IT=0;function Bi(){throw Error(Pt(321))}function X1(l,o){if(o===null)return!1;for(var s=0;s<o.length&&s<l.length;s++)if(!Rr(l[s],o[s]))return!1;return!0}function _1(l,o,s,d,u,p){if(Zl=p,un=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Up.current=l===null||l.memoizedState===null?GT:RT,l=s(d,u),Od){p=0;do{if(Od=!1,Jd=0,25<=p)throw Error(Pt(301));p+=1,hi=bn=null,o.updateQueue=null,Up.current=VT,l=s(d,u)}while(Od)}if(Up.current=fm,o=bn!==null&&bn.next!==null,Zl=0,hi=bn=un=null,dm=!1,o)throw Error(Pt(300));return l}function K1(){var l=Jd!==0;return Jd=0,l}function vs(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?un.memoizedState=hi=l:hi=hi.next=l,hi}function ur(){if(bn===null){var l=un.alternate;l=l!==null?l.memoizedState:null}else l=bn.next;var o=hi===null?un.memoizedState:hi.next;if(o!==null)hi=o,bn=l;else{if(l===null)throw Error(Pt(310));bn=l,l={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},hi===null?un.memoizedState=hi=l:hi=hi.next=l}return hi}function Zd(l,o){return typeof o=="function"?o(l):o}function uS(l){var o=ur(),s=o.queue;if(s===null)throw Error(Pt(311));s.lastRenderedReducer=l;var d=bn,u=d.baseQueue,p=s.pending;if(p!==null){if(u!==null){var v=u.next;u.next=p.next,p.next=v}d.baseQueue=u=p,s.pending=null}if(u!==null){p=u.next,d=d.baseState;var w=v=null,M=null,T=p;do{var O=T.lane;if((Zl&O)===O)M!==null&&(M=M.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),d=T.hasEagerState?T.eagerState:l(d,T.action);else{var I={lane:O,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};M===null?(w=M=I,v=d):M=M.next=I,un.lanes|=O,Ql|=O}T=T.next}while(T!==null&&T!==p);M===null?v=d:M.next=w,Rr(d,o.memoizedState)||(wo=!0),o.memoizedState=d,o.baseState=v,o.baseQueue=M,s.lastRenderedState=d}if(l=s.interleaved,l!==null){u=l;do p=u.lane,un.lanes|=p,Ql|=p,u=u.next;while(u!==l)}else u===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function gS(l){var o=ur(),s=o.queue;if(s===null)throw Error(Pt(311));s.lastRenderedReducer=l;var d=s.dispatch,u=s.pending,p=o.memoizedState;if(u!==null){s.pending=null;var v=u=u.next;do p=l(p,v.action),v=v.next;while(v!==u);Rr(p,o.memoizedState)||(wo=!0),o.memoizedState=p,o.baseQueue===null&&(o.baseState=p),s.lastRenderedState=p}return[p,d]}function K5(){}function H5(l,o){var s=un,d=ur(),u=o(),p=!Rr(d.memoizedState,u);if(p&&(d.memoizedState=u,wo=!0),d=d.queue,H1(J5.bind(null,s,d,l),[l]),d.getSnapshot!==o||p||hi!==null&&hi.memoizedState.tag&1){if(s.flags|=2048,Qd(9,$5.bind(null,s,d,u,o),void 0,null),ui===null)throw Error(Pt(349));(Zl&30)!==0||W5(s,o,u)}return u}function W5(l,o,s){l.flags|=16384,l={getSnapshot:o,value:s},o=un.updateQueue,o===null?(o={lastEffect:null,stores:null},un.updateQueue=o,o.stores=[l]):(s=o.stores,s===null?o.stores=[l]:s.push(l))}function $5(l,o,s,d){o.value=s,o.getSnapshot=d,Z5(o)&&Q5(l)}function J5(l,o,s){return s(function(){Z5(o)&&Q5(l)})}function Z5(l){var o=l.getSnapshot;l=l.value;try{var s=o();return!Rr(l,s)}catch{return!0}}function Q5(l){var o=oa(l,1);o!==null&&Gr(o,l,1,-1)}function sM(l){var o=vs();return typeof l=="function"&&(l=l()),o.memoizedState=o.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:l},o.queue=l,l=l.dispatch=BT.bind(null,un,l),[o.memoizedState,l]}function Qd(l,o,s,d){return l={tag:l,create:o,destroy:s,deps:d,next:null},o=un.updateQueue,o===null?(o={lastEffect:null,stores:null},un.updateQueue=o,o.lastEffect=l.next=l):(s=o.lastEffect,s===null?o.lastEffect=l.next=l:(d=s.next,s.next=l,l.next=d,o.lastEffect=l)),l}function q5(){return ur().memoizedState}function Xp(l,o,s,d){var u=vs();un.flags|=l,u.memoizedState=Qd(1|o,s,void 0,d===void 0?null:d)}function Nm(l,o,s,d){var u=ur();d=d===void 0?null:d;var p=void 0;if(bn!==null){var v=bn.memoizedState;if(p=v.destroy,d!==null&&X1(d,v.deps)){u.memoizedState=Qd(o,s,p,d);return}}un.flags|=l,u.memoizedState=Qd(1|o,s,p,d)}function aM(l,o){return Xp(8390656,8,l,o)}function H1(l,o){return Nm(2048,8,l,o)}function b5(l,o){return Nm(4,2,l,o)}function tk(l,o){return Nm(4,4,l,o)}function ek(l,o){if(typeof o=="function")return l=l(),o(l),function(){o(null)};if(o!=null)return l=l(),o.current=l,function(){o.current=null}}function nk(l,o,s){return s=s!=null?s.concat([l]):null,Nm(4,4,ek.bind(null,o,l),s)}function W1(){}function ik(l,o){var s=ur();o=o===void 0?null:o;var d=s.memoizedState;return d!==null&&o!==null&&X1(o,d[1])?d[0]:(s.memoizedState=[l,o],l)}function ok(l,o){var s=ur();o=o===void 0?null:o;var d=s.memoizedState;return d!==null&&o!==null&&X1(o,d[1])?d[0]:(l=l(),s.memoizedState=[l,o],l)}function rk(l,o,s){return(Zl&21)===0?(l.baseState&&(l.baseState=!1,wo=!0),l.memoizedState=s):(Rr(s,o)||(s=l5(),un.lanes|=s,Ql|=s,l.baseState=!0),o)}function AT(l,o){var s=Ie;Ie=s!==0&&4>s?s:4,l(!0);var d=hS.transition;hS.transition={};try{l(!1),o()}finally{Ie=s,hS.transition=d}}function sk(){return ur().memoizedState}function zT(l,o,s){var d=Ka(l);if(s={lane:d,action:s,hasEagerState:!1,eagerState:null,next:null},ak(l))lk(o,s);else if(s=G5(l,o,s,d),s!==null){var u=eo();Gr(s,l,d,u),hk(s,o,d)}}function BT(l,o,s){var d=Ka(l),u={lane:d,action:s,hasEagerState:!1,eagerState:null,next:null};if(ak(l))lk(o,u);else{var p=l.alternate;if(l.lanes===0&&(p===null||p.lanes===0)&&(p=o.lastRenderedReducer,p!==null))try{var v=o.lastRenderedState,w=p(v,s);if(u.hasEagerState=!0,u.eagerState=w,Rr(w,v)){var M=o.interleaved;M===null?(u.next=u,G1(o)):(u.next=M.next,M.next=u),o.interleaved=u;return}}catch{}finally{}s=G5(l,o,u,d),s!==null&&(u=eo(),Gr(s,l,d,u),hk(s,o,d))}}function ak(l){var o=l.alternate;return l===un||o!==null&&o===un}function lk(l,o){Od=dm=!0;var s=l.pending;s===null?o.next=o:(o.next=s.next,s.next=o),l.pending=o}function hk(l,o,s){if((s&4194240)!==0){var d=o.lanes;d&=l.pendingLanes,s|=d,o.lanes=s,M1(l,s)}}var fm={readContext:hr,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},GT={readContext:hr,useCallback:function(l,o){return vs().memoizedState=[l,o===void 0?null:o],l},useContext:hr,useEffect:aM,useImperativeHandle:function(l,o,s){return s=s!=null?s.concat([l]):null,Xp(4194308,4,ek.bind(null,o,l),s)},useLayoutEffect:function(l,o){return Xp(4194308,4,l,o)},useInsertionEffect:function(l,o){return Xp(4,2,l,o)},useMemo:function(l,o){var s=vs();return o=o===void 0?null:o,l=l(),s.memoizedState=[l,o],l},useReducer:function(l,o,s){var d=vs();return o=s!==void 0?s(o):o,d.memoizedState=d.baseState=o,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:o},d.queue=l,l=l.dispatch=zT.bind(null,un,l),[d.memoizedState,l]},useRef:function(l){var o=vs();return l={current:l},o.memoizedState=l},useState:sM,useDebugValue:W1,useDeferredValue:function(l){return vs().memoizedState=l},useTransition:function(){var l=sM(!1),o=l[0];return l=AT.bind(null,l[1]),vs().memoizedState=l,[o,l]},useMutableSource:function(){},useSyncExternalStore:function(l,o,s){var d=un,u=vs();if(be){if(s===void 0)throw Error(Pt(407));s=s()}else{if(s=o(),ui===null)throw Error(Pt(349));(Zl&30)!==0||W5(d,o,s)}u.memoizedState=s;var p={value:s,getSnapshot:o};return u.queue=p,aM(J5.bind(null,d,p,l),[l]),d.flags|=2048,Qd(9,$5.bind(null,d,p,s,o),void 0,null),s},useId:function(){var l=vs(),o=ui.identifierPrefix;if(be){var s=ta,d=bs;s=(d&~(1<<32-Br(d)-1)).toString(32)+s,o=":"+o+"R"+s,s=Jd++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=IT++,o=":"+o+"r"+s.toString(32)+":";return l.memoizedState=o},unstable_isNewReconciler:!1},RT={readContext:hr,useCallback:ik,useContext:hr,useEffect:H1,useImperativeHandle:nk,useInsertionEffect:b5,useLayoutEffect:tk,useMemo:ok,useReducer:uS,useRef:q5,useState:function(){return uS(Zd)},useDebugValue:W1,useDeferredValue:function(l){var o=ur();return rk(o,bn.memoizedState,l)},useTransition:function(){var l=uS(Zd)[0],o=ur().memoizedState;return[l,o]},useMutableSource:K5,useSyncExternalStore:H5,useId:sk,unstable_isNewReconciler:!1},VT={readContext:hr,useCallback:ik,useContext:hr,useEffect:H1,useImperativeHandle:nk,useInsertionEffect:b5,useLayoutEffect:tk,useMemo:ok,useReducer:gS,useRef:q5,useState:function(){return gS(Zd)},useDebugValue:W1,useDeferredValue:function(l){var o=ur();return bn===null?o.memoizedState=l:rk(o,bn.memoizedState,l)},useTransition:function(){var l=gS(Zd)[0],o=ur().memoizedState;return[l,o]},useMutableSource:K5,useSyncExternalStore:H5,useId:sk,unstable_isNewReconciler:!1};function Yu(l,o){try{var s="",d=o;do s+=cC(d),d=d.return;while(d);var u=s}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:l,source:o,stack:u,digest:null}}function dS(l,o,s){return{value:l,source:null,stack:s!=null?s:null,digest:o!=null?o:null}}function ZS(l,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var YT=typeof WeakMap=="function"?WeakMap:Map;function uk(l,o,s){s=ea(-1,s),s.tag=3,s.payload={element:null};var d=o.value;return s.callback=function(){pm||(pm=!0,s1=d),ZS(l,o)},s}function gk(l,o,s){s=ea(-1,s),s.tag=3;var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var u=o.value;s.payload=function(){return d(u)},s.callback=function(){ZS(l,o)}}var p=l.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(s.callback=function(){ZS(l,o),typeof d!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})}),s}function lM(l,o,s){var d=l.pingCache;if(d===null){d=l.pingCache=new YT;var u=new Set;d.set(o,u)}else u=d.get(o),u===void 0&&(u=new Set,d.set(o,u));u.has(s)||(u.add(s),l=eF.bind(null,l,o,s),o.then(l,l))}function hM(l){do{var o;if((o=l.tag===13)&&(o=l.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return l;l=l.return}while(l!==null);return null}function uM(l,o,s,d,u){return(l.mode&1)===0?(l===o?l.flags|=65536:(l.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=ea(-1,1),o.tag=2,Xa(s,o,1))),s.lanes|=1),l):(l.flags|=65536,l.lanes=u,l)}var UT=sa.ReactCurrentOwner,wo=!1;function to(l,o,s,d){o.child=l===null?X5(o,null,s,d):Ru(o,l.child,s,d)}function gM(l,o,s,d,u){s=s.render;var p=o.ref;return Iu(o,u),d=_1(l,o,s,d,p,u),s=K1(),l!==null&&!wo?(o.updateQueue=l.updateQueue,o.flags&=-2053,l.lanes&=~u,ra(l,o,u)):(be&&s&&O1(o),o.flags|=1,to(l,o,d,u),o.child)}function dM(l,o,s,d,u){if(l===null){var p=s.type;return typeof p=="function"&&!eP(p)&&p.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=p,dk(l,o,p,d,u)):(l=Wp(s.type,null,d,o,o.mode,u),l.ref=o.ref,l.return=o,o.child=l)}if(p=l.child,(l.lanes&u)===0){var v=p.memoizedProps;if(s=s.compare,s=s!==null?s:Xd,s(v,d)&&l.ref===o.ref)return ra(l,o,u)}return o.flags|=1,l=Ha(p,d),l.ref=o.ref,l.return=o,o.child=l}function dk(l,o,s,d,u){if(l!==null){var p=l.memoizedProps;if(Xd(p,d)&&l.ref===o.ref)if(wo=!1,o.pendingProps=d=p,(l.lanes&u)!==0)(l.flags&131072)!==0&&(wo=!0);else return o.lanes=l.lanes,ra(l,o,u)}return QS(l,o,s,d,u)}function fk(l,o,s){var d=o.pendingProps,u=d.children,p=l!==null?l.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Fu,Ao),Ao|=s;else{if((s&1073741824)===0)return l=p!==null?p.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:l,cachePool:null,transitions:null},o.updateQueue=null,Xe(Fu,Ao),Ao|=l,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=p!==null?p.baseLanes:s,Xe(Fu,Ao),Ao|=d}else p!==null?(d=p.baseLanes|s,o.memoizedState=null):d=s,Xe(Fu,Ao),Ao|=d;return to(l,o,u,s),o.child}function ck(l,o){var s=o.ref;(l===null&&s!==null||l!==null&&l.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function QS(l,o,s,d,u){var p=Mo(s)?$l:Vi.current;return p=Bu(o,p),Iu(o,u),s=_1(l,o,s,d,p,u),d=K1(),l!==null&&!wo?(o.updateQueue=l.updateQueue,o.flags&=-2053,l.lanes&=~u,ra(l,o,u)):(be&&d&&O1(o),o.flags|=1,to(l,o,s,u),o.child)}function fM(l,o,s,d,u){if(Mo(s)){var p=!0;rm(o)}else p=!1;if(Iu(o,u),o.stateNode===null)_p(l,o),Y5(o,s,d),JS(o,s,d,u),d=!0;else if(l===null){var v=o.stateNode,w=o.memoizedProps;v.props=w;var M=v.context,T=s.contextType;typeof T=="object"&&T!==null?T=hr(T):(T=Mo(s)?$l:Vi.current,T=Bu(o,T));var O=s.getDerivedStateFromProps,I=typeof O=="function"||typeof v.getSnapshotBeforeUpdate=="function";I||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==d||M!==T)&&oM(o,v,d,T),Ia=!1;var V=o.memoizedState;v.state=V,um(o,d,v,u),M=o.memoizedState,w!==d||V!==M||Lo.current||Ia?(typeof O=="function"&&($S(o,s,O,d),M=o.memoizedState),(w=Ia||iM(o,s,w,d,V,M,T))?(I||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),v.props=d,v.state=M,v.context=T,d=w):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,R5(l,o),w=o.memoizedProps,T=o.type===o.elementType?w:Ir(o.type,w),v.props=T,I=o.pendingProps,V=v.context,M=s.contextType,typeof M=="object"&&M!==null?M=hr(M):(M=Mo(s)?$l:Vi.current,M=Bu(o,M));var K=s.getDerivedStateFromProps;(O=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==I||V!==M)&&oM(o,v,d,M),Ia=!1,V=o.memoizedState,v.state=V,um(o,d,v,u);var at=o.memoizedState;w!==I||V!==at||Lo.current||Ia?(typeof K=="function"&&($S(o,s,K,d),at=o.memoizedState),(T=Ia||iM(o,s,T,d,V,at,M)||!1)?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,at,M),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,at,M)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===l.memoizedProps&&V===l.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===l.memoizedProps&&V===l.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=at),v.props=d,v.state=at,v.context=M,d=T):(typeof v.componentDidUpdate!="function"||w===l.memoizedProps&&V===l.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===l.memoizedProps&&V===l.memoizedState||(o.flags|=1024),d=!1)}return qS(l,o,s,d,p,u)}function qS(l,o,s,d,u,p){ck(l,o);var v=(o.flags&128)!==0;if(!d&&!v)return u&&qL(o,s,!1),ra(l,o,p);d=o.stateNode,UT.current=o;var w=v&&typeof s.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,l!==null&&v?(o.child=Ru(o,l.child,null,p),o.child=Ru(o,null,w,p)):to(l,o,w,p),o.memoizedState=d.state,u&&qL(o,s,!0),o.child}function pk(l){var o=l.stateNode;o.pendingContext?QL(l,o.pendingContext,o.pendingContext!==o.context):o.context&&QL(l,o.context,!1),V1(l,o.containerInfo)}function cM(l,o,s,d,u){return Gu(),I1(u),o.flags|=256,to(l,o,s,d),o.child}var bS={dehydrated:null,treeContext:null,retryLane:0};function t1(l){return{baseLanes:l,cachePool:null,transitions:null}}function mk(l,o,s){var d=o.pendingProps,u=hn.current,p=!1,v=(o.flags&128)!==0,w;if((w=v)||(w=l!==null&&l.memoizedState===null?!1:(u&2)!==0),w?(p=!0,o.flags&=-129):(l===null||l.memoizedState!==null)&&(u|=1),Xe(hn,u&1),l===null)return HS(o),l=o.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((o.mode&1)===0?o.lanes=1:l.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(v=d.children,l=d.fallback,p?(d=o.mode,p=o.child,v={mode:"hidden",children:v},(d&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Fm(v,d,0,null),l=Wl(l,d,s,null),p.return=o,l.return=o,p.sibling=l,o.child=p,o.child.memoizedState=t1(s),o.memoizedState=bS,l):$1(o,v));if(u=l.memoizedState,u!==null&&(w=u.dehydrated,w!==null))return XT(l,o,v,d,w,u,s);if(p){p=d.fallback,v=o.mode,u=l.child,w=u.sibling;var M={mode:"hidden",children:d.children};return(v&1)===0&&o.child!==u?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=Ha(u,M),d.subtreeFlags=u.subtreeFlags&14680064),w!==null?p=Ha(w,p):(p=Wl(p,v,s,null),p.flags|=2),p.return=o,d.return=o,d.sibling=p,o.child=d,d=p,p=o.child,v=l.child.memoizedState,v=v===null?t1(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=l.childLanes&~s,o.memoizedState=bS,d}return p=l.child,l=p.sibling,d=Ha(p,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=s),d.return=o,d.sibling=null,l!==null&&(s=o.deletions,s===null?(o.deletions=[l],o.flags|=16):s.push(l)),o.child=d,o.memoizedState=null,d}function $1(l,o){return o=Fm({mode:"visible",children:o},l.mode,0,null),o.return=l,l.child=o}function Op(l,o,s,d){return d!==null&&I1(d),Ru(o,l.child,null,s),l=$1(o,o.pendingProps.children),l.flags|=2,o.memoizedState=null,l}function XT(l,o,s,d,u,p,v){if(s)return o.flags&256?(o.flags&=-257,d=dS(Error(Pt(422))),Op(l,o,v,d)):o.memoizedState!==null?(o.child=l.child,o.flags|=128,null):(p=d.fallback,u=o.mode,d=Fm({mode:"visible",children:d.children},u,0,null),p=Wl(p,u,v,null),p.flags|=2,d.return=o,p.return=o,d.sibling=p,o.child=d,(o.mode&1)!==0&&Ru(o,l.child,null,v),o.child.memoizedState=t1(v),o.memoizedState=bS,p);if((o.mode&1)===0)return Op(l,o,v,null);if(u.data==="$!"){if(d=u.nextSibling&&u.nextSibling.dataset,d)var w=d.dgst;return d=w,p=Error(Pt(419)),d=dS(p,d,void 0),Op(l,o,v,d)}if(w=(v&l.childLanes)!==0,wo||w){if(d=ui,d!==null){switch(v&-v){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(d.suspendedLanes|v))!==0?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,oa(l,u),Gr(d,l,u,-1))}return tP(),d=dS(Error(Pt(421))),Op(l,o,v,d)}return u.data==="$?"?(o.flags|=128,o.child=l.child,o=nF.bind(null,l),u._reactRetry=o,null):(l=p.treeContext,zo=Ua(u.nextSibling),Bo=o,be=!0,zr=null,l!==null&&(rr[sr++]=bs,rr[sr++]=ta,rr[sr++]=Jl,bs=l.id,ta=l.overflow,Jl=o),o=$1(o,d.children),o.flags|=4096,o)}function pM(l,o,s){l.lanes|=o;var d=l.alternate;d!==null&&(d.lanes|=o),WS(l.return,o,s)}function fS(l,o,s,d,u){var p=l.memoizedState;p===null?l.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:s,tailMode:u}:(p.isBackwards=o,p.rendering=null,p.renderingStartTime=0,p.last=d,p.tail=s,p.tailMode=u)}function yk(l,o,s){var d=o.pendingProps,u=d.revealOrder,p=d.tail;if(to(l,o,d.children,s),d=hn.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=o.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&pM(l,s,o);else if(l.tag===19)pM(l,s,o);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}d&=1}if(Xe(hn,d),(o.mode&1)===0)o.memoizedState=null;else switch(u){case"forwards":for(s=o.child,u=null;s!==null;)l=s.alternate,l!==null&&gm(l)===null&&(u=s),s=s.sibling;s=u,s===null?(u=o.child,o.child=null):(u=s.sibling,s.sibling=null),fS(o,!1,u,s,p);break;case"backwards":for(s=null,u=o.child,o.child=null;u!==null;){if(l=u.alternate,l!==null&&gm(l)===null){o.child=u;break}l=u.sibling,u.sibling=s,s=u,u=l}fS(o,!0,s,null,p);break;case"together":fS(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function _p(l,o){(o.mode&1)===0&&l!==null&&(l.alternate=null,o.alternate=null,o.flags|=2)}function ra(l,o,s){if(l!==null&&(o.dependencies=l.dependencies),Ql|=o.lanes,(s&o.childLanes)===0)return null;if(l!==null&&o.child!==l.child)throw Error(Pt(153));if(o.child!==null){for(l=o.child,s=Ha(l,l.pendingProps),o.child=s,s.return=o;l.sibling!==null;)l=l.sibling,s=s.sibling=Ha(l,l.pendingProps),s.return=o;s.sibling=null}return o.child}function _T(l,o,s){switch(o.tag){case 3:pk(o),Gu();break;case 5:_5(o);break;case 1:Mo(o.type)&&rm(o);break;case 4:V1(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,u=o.memoizedProps.value;Xe(lm,d._currentValue),d._currentValue=u;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Xe(hn,hn.current&1),o.flags|=128,null):(s&o.child.childLanes)!==0?mk(l,o,s):(Xe(hn,hn.current&1),l=ra(l,o,s),l!==null?l.sibling:null);Xe(hn,hn.current&1);break;case 19:if(d=(s&o.childLanes)!==0,(l.flags&128)!==0){if(d)return yk(l,o,s);o.flags|=128}if(u=o.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Xe(hn,hn.current),d)break;return null;case 22:case 23:return o.lanes=0,fk(l,o,s)}return ra(l,o,s)}var vk,e1,Sk,Pk;vk=function(l,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)l.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};e1=function(){};Sk=function(l,o,s,d){var u=l.memoizedProps;if(u!==d){l=o.stateNode,Kl(ws.current);var p=null;switch(s){case"input":u=LS(l,u),d=LS(l,d),p=[];break;case"select":u=gn({},u,{value:void 0}),d=gn({},d,{value:void 0}),p=[];break;case"textarea":u=NS(l,u),d=NS(l,d),p=[];break;default:typeof u.onClick!="function"&&typeof d.onClick=="function"&&(l.onclick=im)}TS(s,d);var v;s=null;for(T in u)if(!d.hasOwnProperty(T)&&u.hasOwnProperty(T)&&u[T]!=null)if(T==="style"){var w=u[T];for(v in w)w.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(zd.hasOwnProperty(T)?p||(p=[]):(p=p||[]).push(T,null));for(T in d){var M=d[T];if(w=u!=null?u[T]:void 0,d.hasOwnProperty(T)&&M!==w&&(M!=null||w!=null))if(T==="style")if(w){for(v in w)!w.hasOwnProperty(v)||M&&M.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in M)M.hasOwnProperty(v)&&w[v]!==M[v]&&(s||(s={}),s[v]=M[v])}else s||(p||(p=[]),p.push(T,s)),s=M;else T==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,w=w?w.__html:void 0,M!=null&&w!==M&&(p=p||[]).push(T,M)):T==="children"?typeof M!="string"&&typeof M!="number"||(p=p||[]).push(T,""+M):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(zd.hasOwnProperty(T)?(M!=null&&T==="onScroll"&&He("scroll",l),p||w===M||(p=[])):(p=p||[]).push(T,M))}s&&(p=p||[]).push("style",s);var T=p;(o.updateQueue=T)&&(o.flags|=4)}};Pk=function(l,o,s,d){s!==d&&(o.flags|=4)};function yd(l,o){if(!be)switch(l.tailMode){case"hidden":o=l.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?l.tail=null:s.sibling=null;break;case"collapsed":s=l.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?o||l.tail===null?l.tail=null:l.tail.sibling=null:d.sibling=null}}function Gi(l){var o=l.alternate!==null&&l.alternate.child===l.child,s=0,d=0;if(o)for(var u=l.child;u!==null;)s|=u.lanes|u.childLanes,d|=u.subtreeFlags&14680064,d|=u.flags&14680064,u.return=l,u=u.sibling;else for(u=l.child;u!==null;)s|=u.lanes|u.childLanes,d|=u.subtreeFlags,d|=u.flags,u.return=l,u=u.sibling;return l.subtreeFlags|=d,l.childLanes=s,o}function KT(l,o,s){var d=o.pendingProps;switch(E1(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(o),null;case 1:return Mo(o.type)&&om(),Gi(o),null;case 3:return d=o.stateNode,Vu(),We(Lo),We(Vi),U1(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(l===null||l.child===null)&&(Dp(o)?o.flags|=4:l===null||l.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,zr!==null&&(h1(zr),zr=null))),e1(l,o),Gi(o),null;case 5:Y1(o);var u=Kl($d.current);if(s=o.type,l!==null&&o.stateNode!=null)Sk(l,o,s,d,u),l.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(Pt(166));return Gi(o),null}if(l=Kl(ws.current),Dp(o)){d=o.stateNode,s=o.type;var p=o.memoizedProps;switch(d[Ss]=o,d[Hd]=p,l=(o.mode&1)!==0,s){case"dialog":He("cancel",d),He("close",d);break;case"iframe":case"object":case"embed":He("load",d);break;case"video":case"audio":for(u=0;u<kd.length;u++)He(kd[u],d);break;case"source":He("error",d);break;case"img":case"image":case"link":He("error",d),He("load",d);break;case"details":He("toggle",d);break;case"input":ML(d,p),He("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!p.multiple},He("invalid",d);break;case"textarea":NL(d,p),He("invalid",d)}TS(s,p),u=null;for(var v in p)if(p.hasOwnProperty(v)){var w=p[v];v==="children"?typeof w=="string"?d.textContent!==w&&(p.suppressHydrationWarning!==!0&&Fp(d.textContent,w,l),u=["children",w]):typeof w=="number"&&d.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&Fp(d.textContent,w,l),u=["children",""+w]):zd.hasOwnProperty(v)&&w!=null&&v==="onScroll"&&He("scroll",d)}switch(s){case"input":xp(d),kL(d,p,!0);break;case"textarea":xp(d),CL(d);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(d.onclick=im)}d=u,o.updateQueue=d,d!==null&&(o.flags|=4)}else{v=u.nodeType===9?u:u.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=WM(s)),l==="http://www.w3.org/1999/xhtml"?s==="script"?(l=v.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof d.is=="string"?l=v.createElement(s,{is:d.is}):(l=v.createElement(s),s==="select"&&(v=l,d.multiple?v.multiple=!0:d.size&&(v.size=d.size))):l=v.createElementNS(l,s),l[Ss]=o,l[Hd]=d,vk(l,o,!1,!1),o.stateNode=l;t:{switch(v=FS(s,d),s){case"dialog":He("cancel",l),He("close",l),u=d;break;case"iframe":case"object":case"embed":He("load",l),u=d;break;case"video":case"audio":for(u=0;u<kd.length;u++)He(kd[u],l);u=d;break;case"source":He("error",l),u=d;break;case"img":case"image":case"link":He("error",l),He("load",l),u=d;break;case"details":He("toggle",l),u=d;break;case"input":ML(l,d),u=LS(l,d),He("invalid",l);break;case"option":u=d;break;case"select":l._wrapperState={wasMultiple:!!d.multiple},u=gn({},d,{value:void 0}),He("invalid",l);break;case"textarea":NL(l,d),u=NS(l,d),He("invalid",l);break;default:u=d}TS(s,u),w=u;for(p in w)if(w.hasOwnProperty(p)){var M=w[p];p==="style"?ZM(l,M):p==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&$M(l,M)):p==="children"?typeof M=="string"?(s!=="textarea"||M!=="")&&Bd(l,M):typeof M=="number"&&Bd(l,""+M):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(zd.hasOwnProperty(p)?M!=null&&p==="onScroll"&&He("scroll",l):M!=null&&v1(l,p,M,v))}switch(s){case"input":xp(l),kL(l,d,!1);break;case"textarea":xp(l),CL(l);break;case"option":d.value!=null&&l.setAttribute("value",""+Wa(d.value));break;case"select":l.multiple=!!d.multiple,p=d.value,p!=null?Du(l,!!d.multiple,p,!1):d.defaultValue!=null&&Du(l,!!d.multiple,d.defaultValue,!0);break;default:typeof u.onClick=="function"&&(l.onclick=im)}switch(s){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Gi(o),null;case 6:if(l&&o.stateNode!=null)Pk(l,o,l.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(Pt(166));if(s=Kl($d.current),Kl(ws.current),Dp(o)){if(d=o.stateNode,s=o.memoizedProps,d[Ss]=o,(p=d.nodeValue!==s)&&(l=Bo,l!==null))switch(l.tag){case 3:Fp(d.nodeValue,s,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Fp(d.nodeValue,s,(l.mode&1)!==0)}p&&(o.flags|=4)}else d=(s.nodeType===9?s:s.ownerDocument).createTextNode(d),d[Ss]=o,o.stateNode=d}return Gi(o),null;case 13:if(We(hn),d=o.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(be&&zo!==null&&(o.mode&1)!==0&&(o.flags&128)===0)B5(),Gu(),o.flags|=98560,p=!1;else if(p=Dp(o),d!==null&&d.dehydrated!==null){if(l===null){if(!p)throw Error(Pt(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Pt(317));p[Ss]=o}else Gu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gi(o),p=!1}else zr!==null&&(h1(zr),zr=null),p=!0;if(!p)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=s,o):(d=d!==null,d!==(l!==null&&l.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(l===null||(hn.current&1)!==0?ti===0&&(ti=3):tP())),o.updateQueue!==null&&(o.flags|=4),Gi(o),null);case 4:return Vu(),e1(l,o),l===null&&_d(o.stateNode.containerInfo),Gi(o),null;case 10:return B1(o.type._context),Gi(o),null;case 17:return Mo(o.type)&&om(),Gi(o),null;case 19:if(We(hn),p=o.memoizedState,p===null)return Gi(o),null;if(d=(o.flags&128)!==0,v=p.rendering,v===null)if(d)yd(p,!1);else{if(ti!==0||l!==null&&(l.flags&128)!==0)for(l=o.child;l!==null;){if(v=gm(l),v!==null){for(o.flags|=128,yd(p,!1),d=v.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=s,s=o.child;s!==null;)p=s,l=d,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=l,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,l=v.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s=s.sibling;return Xe(hn,hn.current&1|2),o.child}l=l.sibling}p.tail!==null&&An()>Uu&&(o.flags|=128,d=!0,yd(p,!1),o.lanes=4194304)}else{if(!d)if(l=gm(v),l!==null){if(o.flags|=128,d=!0,s=l.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),yd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!be)return Gi(o),null}else 2*An()-p.renderingStartTime>Uu&&s!==1073741824&&(o.flags|=128,d=!0,yd(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(s=p.last,s!==null?s.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=An(),o.sibling=null,s=hn.current,Xe(hn,d?s&1|2:s&1),o):(Gi(o),null);case 22:case 23:return b1(),d=o.memoizedState!==null,l!==null&&l.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(Ao&1073741824)!==0&&(Gi(o),o.subtreeFlags&6&&(o.flags|=8192)):Gi(o),null;case 24:return null;case 25:return null}throw Error(Pt(156,o.tag))}function HT(l,o){switch(E1(o),o.tag){case 1:return Mo(o.type)&&om(),l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 3:return Vu(),We(Lo),We(Vi),U1(),l=o.flags,(l&65536)!==0&&(l&128)===0?(o.flags=l&-65537|128,o):null;case 5:return Y1(o),null;case 13:if(We(hn),l=o.memoizedState,l!==null&&l.dehydrated!==null){if(o.alternate===null)throw Error(Pt(340));Gu()}return l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 19:return We(hn),null;case 4:return Vu(),null;case 10:return B1(o.type._context),null;case 22:case 23:return b1(),null;case 24:return null;default:return null}}var Ep=!1,Ri=!1,WT=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Tu(l,o){var s=l.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(d){Dn(l,o,d)}else s.current=null}function n1(l,o,s){try{s()}catch(d){Dn(l,o,d)}}var mM=!1;function $T(l,o){if(RS=tm,l=M5(),j1(l)){if("selectionStart"in l)var s={start:l.selectionStart,end:l.selectionEnd};else t:{s=(s=l.ownerDocument)&&s.defaultView||window;var d=s.getSelection&&s.getSelection();if(d&&d.rangeCount!==0){s=d.anchorNode;var u=d.anchorOffset,p=d.focusNode;d=d.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break t}var v=0,w=-1,M=-1,T=0,O=0,I=l,V=null;e:for(;;){for(var K;I!==s||u!==0&&I.nodeType!==3||(w=v+u),I!==p||d!==0&&I.nodeType!==3||(M=v+d),I.nodeType===3&&(v+=I.nodeValue.length),(K=I.firstChild)!==null;)V=I,I=K;for(;;){if(I===l)break e;if(V===s&&++T===u&&(w=v),V===p&&++O===d&&(M=v),(K=I.nextSibling)!==null)break;I=V,V=I.parentNode}I=K}s=w===-1||M===-1?null:{start:w,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(VS={focusedElem:l,selectionRange:s},tm=!1,Ot=o;Ot!==null;)if(o=Ot,l=o.child,(o.subtreeFlags&1028)!==0&&l!==null)l.return=o,Ot=l;else for(;Ot!==null;){o=Ot;try{var at=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var U=at.memoizedProps,Bt=at.memoizedState,b=o.stateNode,_=b.getSnapshotBeforeUpdate(o.elementType===o.type?U:Ir(o.type,U),Bt);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(B){Dn(o,o.return,B)}if(l=o.sibling,l!==null){l.return=o.return,Ot=l;break}Ot=o.return}return at=mM,mM=!1,at}function Ed(l,o,s){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var u=d=d.next;do{if((u.tag&l)===l){var p=u.destroy;u.destroy=void 0,p!==void 0&&n1(o,s,p)}u=u.next}while(u!==d)}}function Cm(l,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&l)===l){var d=s.create;s.destroy=d()}s=s.next}while(s!==o)}}function i1(l){var o=l.ref;if(o!==null){var s=l.stateNode;switch(l.tag){case 5:l=s;break;default:l=s}typeof o=="function"?o(l):o.current=l}}function xk(l){var o=l.alternate;o!==null&&(l.alternate=null,xk(o)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(o=l.stateNode,o!==null&&(delete o[Ss],delete o[Hd],delete o[XS],delete o[DT],delete o[jT])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function wk(l){return l.tag===5||l.tag===3||l.tag===4}function yM(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||wk(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function o1(l,o,s){var d=l.tag;if(d===5||d===6)l=l.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(l,o):s.insertBefore(l,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(l,s)):(o=s,o.appendChild(l)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=im));else if(d!==4&&(l=l.child,l!==null))for(o1(l,o,s),l=l.sibling;l!==null;)o1(l,o,s),l=l.sibling}function r1(l,o,s){var d=l.tag;if(d===5||d===6)l=l.stateNode,o?s.insertBefore(l,o):s.appendChild(l);else if(d!==4&&(l=l.child,l!==null))for(r1(l,o,s),l=l.sibling;l!==null;)r1(l,o,s),l=l.sibling}var wi=null,Ar=!1;function Oa(l,o,s){for(s=s.child;s!==null;)Lk(l,o,s),s=s.sibling}function Lk(l,o,s){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(Sm,s)}catch{}switch(s.tag){case 5:Ri||Tu(s,o);case 6:var d=wi,u=Ar;wi=null,Oa(l,o,s),wi=d,Ar=u,wi!==null&&(Ar?(l=wi,s=s.stateNode,l.nodeType===8?l.parentNode.removeChild(s):l.removeChild(s)):wi.removeChild(s.stateNode));break;case 18:wi!==null&&(Ar?(l=wi,s=s.stateNode,l.nodeType===8?sS(l.parentNode,s):l.nodeType===1&&sS(l,s),Yd(l)):sS(wi,s.stateNode));break;case 4:d=wi,u=Ar,wi=s.stateNode.containerInfo,Ar=!0,Oa(l,o,s),wi=d,Ar=u;break;case 0:case 11:case 14:case 15:if(!Ri&&(d=s.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){u=d=d.next;do{var p=u,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&n1(s,o,v),u=u.next}while(u!==d)}Oa(l,o,s);break;case 1:if(!Ri&&(Tu(s,o),d=s.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=s.memoizedProps,d.state=s.memoizedState,d.componentWillUnmount()}catch(w){Dn(s,o,w)}Oa(l,o,s);break;case 21:Oa(l,o,s);break;case 22:s.mode&1?(Ri=(d=Ri)||s.memoizedState!==null,Oa(l,o,s),Ri=d):Oa(l,o,s);break;default:Oa(l,o,s)}}function vM(l){var o=l.updateQueue;if(o!==null){l.updateQueue=null;var s=l.stateNode;s===null&&(s=l.stateNode=new WT),o.forEach(function(d){var u=iF.bind(null,l,d);s.has(d)||(s.add(d),d.then(u,u))})}}function Er(l,o){var s=o.deletions;if(s!==null)for(var d=0;d<s.length;d++){var u=s[d];try{var p=l,v=o,w=v;t:for(;w!==null;){switch(w.tag){case 5:wi=w.stateNode,Ar=!1;break t;case 3:wi=w.stateNode.containerInfo,Ar=!0;break t;case 4:wi=w.stateNode.containerInfo,Ar=!0;break t}w=w.return}if(wi===null)throw Error(Pt(160));Lk(p,v,u),wi=null,Ar=!1;var M=u.alternate;M!==null&&(M.return=null),u.return=null}catch(T){Dn(u,o,T)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Mk(o,l),o=o.sibling}function Mk(l,o){var s=l.alternate,d=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Er(o,l),ys(l),d&4){try{Ed(3,l,l.return),Cm(3,l)}catch(U){Dn(l,l.return,U)}try{Ed(5,l,l.return)}catch(U){Dn(l,l.return,U)}}break;case 1:Er(o,l),ys(l),d&512&&s!==null&&Tu(s,s.return);break;case 5:if(Er(o,l),ys(l),d&512&&s!==null&&Tu(s,s.return),l.flags&32){var u=l.stateNode;try{Bd(u,"")}catch(U){Dn(l,l.return,U)}}if(d&4&&(u=l.stateNode,u!=null)){var p=l.memoizedProps,v=s!==null?s.memoizedProps:p,w=l.type,M=l.updateQueue;if(l.updateQueue=null,M!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&KM(u,p),FS(w,v);var T=FS(w,p);for(v=0;v<M.length;v+=2){var O=M[v],I=M[v+1];O==="style"?ZM(u,I):O==="dangerouslySetInnerHTML"?$M(u,I):O==="children"?Bd(u,I):v1(u,O,I,T)}switch(w){case"input":MS(u,p);break;case"textarea":HM(u,p);break;case"select":var V=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var K=p.value;K!=null?Du(u,!!p.multiple,K,!1):V!==!!p.multiple&&(p.defaultValue!=null?Du(u,!!p.multiple,p.defaultValue,!0):Du(u,!!p.multiple,p.multiple?[]:"",!1))}u[Hd]=p}catch(U){Dn(l,l.return,U)}}break;case 6:if(Er(o,l),ys(l),d&4){if(l.stateNode===null)throw Error(Pt(162));u=l.stateNode,p=l.memoizedProps;try{u.nodeValue=p}catch(U){Dn(l,l.return,U)}}break;case 3:if(Er(o,l),ys(l),d&4&&s!==null&&s.memoizedState.isDehydrated)try{Yd(o.containerInfo)}catch(U){Dn(l,l.return,U)}break;case 4:Er(o,l),ys(l);break;case 13:Er(o,l),ys(l),u=l.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||(Q1=An())),d&4&&vM(l);break;case 22:if(O=s!==null&&s.memoizedState!==null,l.mode&1?(Ri=(T=Ri)||O,Er(o,l),Ri=T):Er(o,l),ys(l),d&8192){if(T=l.memoizedState!==null,(l.stateNode.isHidden=T)&&!O&&(l.mode&1)!==0)for(Ot=l,O=l.child;O!==null;){for(I=Ot=O;Ot!==null;){switch(V=Ot,K=V.child,V.tag){case 0:case 11:case 14:case 15:Ed(4,V,V.return);break;case 1:Tu(V,V.return);var at=V.stateNode;if(typeof at.componentWillUnmount=="function"){d=V,s=V.return;try{o=d,at.props=o.memoizedProps,at.state=o.memoizedState,at.componentWillUnmount()}catch(U){Dn(d,s,U)}}break;case 5:Tu(V,V.return);break;case 22:if(V.memoizedState!==null){PM(I);continue}}K!==null?(K.return=V,Ot=K):PM(I)}O=O.sibling}t:for(O=null,I=l;;){if(I.tag===5){if(O===null){O=I;try{u=I.stateNode,T?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=I.stateNode,M=I.memoizedProps.style,v=M!=null&&M.hasOwnProperty("display")?M.display:null,w.style.display=JM("display",v))}catch(U){Dn(l,l.return,U)}}}else if(I.tag===6){if(O===null)try{I.stateNode.nodeValue=T?"":I.memoizedProps}catch(U){Dn(l,l.return,U)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===l)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break t;for(;I.sibling===null;){if(I.return===null||I.return===l)break t;O===I&&(O=null),I=I.return}O===I&&(O=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:Er(o,l),ys(l),d&4&&vM(l);break;case 21:break;default:Er(o,l),ys(l)}}function ys(l){var o=l.flags;if(o&2){try{t:{for(var s=l.return;s!==null;){if(wk(s)){var d=s;break t}s=s.return}throw Error(Pt(160))}switch(d.tag){case 5:var u=d.stateNode;d.flags&32&&(Bd(u,""),d.flags&=-33);var p=yM(l);r1(l,p,u);break;case 3:case 4:var v=d.stateNode.containerInfo,w=yM(l);o1(l,w,v);break;default:throw Error(Pt(161))}}catch(M){Dn(l,l.return,M)}l.flags&=-3}o&4096&&(l.flags&=-4097)}function JT(l,o,s){Ot=l,kk(l)}function kk(l,o,s){for(var d=(l.mode&1)!==0;Ot!==null;){var u=Ot,p=u.child;if(u.tag===22&&d){var v=u.memoizedState!==null||Ep;if(!v){var w=u.alternate,M=w!==null&&w.memoizedState!==null||Ri;w=Ep;var T=Ri;if(Ep=v,(Ri=M)&&!T)for(Ot=u;Ot!==null;)v=Ot,M=v.child,v.tag===22&&v.memoizedState!==null?xM(u):M!==null?(M.return=v,Ot=M):xM(u);for(;p!==null;)Ot=p,kk(p),p=p.sibling;Ot=u,Ep=w,Ri=T}SM(l)}else(u.subtreeFlags&8772)!==0&&p!==null?(p.return=u,Ot=p):SM(l)}}function SM(l){for(;Ot!==null;){var o=Ot;if((o.flags&8772)!==0){var s=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ri||Cm(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Ri)if(s===null)d.componentDidMount();else{var u=o.elementType===o.type?s.memoizedProps:Ir(o.type,s.memoizedProps);d.componentDidUpdate(u,s.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var p=o.updateQueue;p!==null&&nM(o,p,d);break;case 3:var v=o.updateQueue;if(v!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}nM(o,v,s)}break;case 5:var w=o.stateNode;if(s===null&&o.flags&4){s=w;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&s.focus();break;case"img":M.src&&(s.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var T=o.alternate;if(T!==null){var O=T.memoizedState;if(O!==null){var I=O.dehydrated;I!==null&&Yd(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Ri||o.flags&512&&i1(o)}catch(V){Dn(o,o.return,V)}}if(o===l){Ot=null;break}if(s=o.sibling,s!==null){s.return=o.return,Ot=s;break}Ot=o.return}}function PM(l){for(;Ot!==null;){var o=Ot;if(o===l){Ot=null;break}var s=o.sibling;if(s!==null){s.return=o.return,Ot=s;break}Ot=o.return}}function xM(l){for(;Ot!==null;){var o=Ot;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Cm(4,o)}catch(M){Dn(o,s,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var u=o.return;try{d.componentDidMount()}catch(M){Dn(o,u,M)}}var p=o.return;try{i1(o)}catch(M){Dn(o,p,M)}break;case 5:var v=o.return;try{i1(o)}catch(M){Dn(o,v,M)}}}catch(M){Dn(o,o.return,M)}if(o===l){Ot=null;break}var w=o.sibling;if(w!==null){w.return=o.return,Ot=w;break}Ot=o.return}}var ZT=Math.ceil,cm=sa.ReactCurrentDispatcher,J1=sa.ReactCurrentOwner,lr=sa.ReactCurrentBatchConfig,Pe=0,ui=null,Kn=null,Li=0,Ao=0,Fu=Za(0),ti=0,qd=null,Ql=0,Tm=0,Z1=0,Id=null,xo=null,Q1=0,Uu=1/0,Qs=null,pm=!1,s1=null,_a=null,Ip=!1,Ga=null,mm=0,Ad=0,a1=null,Kp=-1,Hp=0;function eo(){return(Pe&6)!==0?An():Kp!==-1?Kp:Kp=An()}function Ka(l){return(l.mode&1)===0?1:(Pe&2)!==0&&Li!==0?Li&-Li:ET.transition!==null?(Hp===0&&(Hp=l5()),Hp):(l=Ie,l!==0||(l=window.event,l=l===void 0?16:p5(l.type)),l)}function Gr(l,o,s,d){if(50<Ad)throw Ad=0,a1=null,Error(Pt(185));tf(l,s,d),((Pe&2)===0||l!==ui)&&(l===ui&&((Pe&2)===0&&(Tm|=s),ti===4&&za(l,Li)),ko(l,d),s===1&&Pe===0&&(o.mode&1)===0&&(Uu=An()+500,Mm&&Qa()))}function ko(l,o){var s=l.callbackNode;EC(l,o);var d=bp(l,l===ui?Li:0);if(d===0)s!==null&&DL(s),l.callbackNode=null,l.callbackPriority=0;else if(o=d&-d,l.callbackPriority!==o){if(s!=null&&DL(s),o===1)l.tag===0?OT(wM.bind(null,l)):I5(wM.bind(null,l)),TT(function(){(Pe&6)===0&&Qa()}),s=null;else{switch(h5(d)){case 1:s=L1;break;case 4:s=s5;break;case 16:s=qp;break;case 536870912:s=a5;break;default:s=qp}s=Ek(s,Nk.bind(null,l))}l.callbackPriority=o,l.callbackNode=s}}function Nk(l,o){if(Kp=-1,Hp=0,(Pe&6)!==0)throw Error(Pt(327));var s=l.callbackNode;if(Au()&&l.callbackNode!==s)return null;var d=bp(l,l===ui?Li:0);if(d===0)return null;if((d&30)!==0||(d&l.expiredLanes)!==0||o)o=ym(l,d);else{o=d;var u=Pe;Pe|=2;var p=Tk();(ui!==l||Li!==o)&&(Qs=null,Uu=An()+500,Hl(l,o));do try{bT();break}catch(w){Ck(l,w)}while(1);z1(),cm.current=p,Pe=u,Kn!==null?o=0:(ui=null,Li=0,o=ti)}if(o!==0){if(o===2&&(u=IS(l),u!==0&&(d=u,o=l1(l,u))),o===1)throw s=qd,Hl(l,0),za(l,d),ko(l,An()),s;if(o===6)za(l,d);else{if(u=l.current.alternate,(d&30)===0&&!QT(u)&&(o=ym(l,d),o===2&&(p=IS(l),p!==0&&(d=p,o=l1(l,p))),o===1))throw s=qd,Hl(l,0),za(l,d),ko(l,An()),s;switch(l.finishedWork=u,l.finishedLanes=d,o){case 0:case 1:throw Error(Pt(345));case 2:Ul(l,xo,Qs);break;case 3:if(za(l,d),(d&130023424)===d&&(o=Q1+500-An(),10<o)){if(bp(l,0)!==0)break;if(u=l.suspendedLanes,(u&d)!==d){eo(),l.pingedLanes|=l.suspendedLanes&u;break}l.timeoutHandle=US(Ul.bind(null,l,xo,Qs),o);break}Ul(l,xo,Qs);break;case 4:if(za(l,d),(d&4194240)===d)break;for(o=l.eventTimes,u=-1;0<d;){var v=31-Br(d);p=1<<v,v=o[v],v>u&&(u=v),d&=~p}if(d=u,d=An()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*ZT(d/1960))-d,10<d){l.timeoutHandle=US(Ul.bind(null,l,xo,Qs),d);break}Ul(l,xo,Qs);break;case 5:Ul(l,xo,Qs);break;default:throw Error(Pt(329))}}}return ko(l,An()),l.callbackNode===s?Nk.bind(null,l):null}function l1(l,o){var s=Id;return l.current.memoizedState.isDehydrated&&(Hl(l,o).flags|=256),l=ym(l,o),l!==2&&(o=xo,xo=s,o!==null&&h1(o)),l}function h1(l){xo===null?xo=l:xo.push.apply(xo,l)}function QT(l){for(var o=l;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var d=0;d<s.length;d++){var u=s[d],p=u.getSnapshot;u=u.value;try{if(!Rr(p(),u))return!1}catch{return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===l)break;for(;o.sibling===null;){if(o.return===null||o.return===l)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function za(l,o){for(o&=~Z1,o&=~Tm,l.suspendedLanes|=o,l.pingedLanes&=~o,l=l.expirationTimes;0<o;){var s=31-Br(o),d=1<<s;l[s]=-1,o&=~d}}function wM(l){if((Pe&6)!==0)throw Error(Pt(327));Au();var o=bp(l,0);if((o&1)===0)return ko(l,An()),null;var s=ym(l,o);if(l.tag!==0&&s===2){var d=IS(l);d!==0&&(o=d,s=l1(l,d))}if(s===1)throw s=qd,Hl(l,0),za(l,o),ko(l,An()),s;if(s===6)throw Error(Pt(345));return l.finishedWork=l.current.alternate,l.finishedLanes=o,Ul(l,xo,Qs),ko(l,An()),null}function q1(l,o){var s=Pe;Pe|=1;try{return l(o)}finally{Pe=s,Pe===0&&(Uu=An()+500,Mm&&Qa())}}function ql(l){Ga!==null&&Ga.tag===0&&(Pe&6)===0&&Au();var o=Pe;Pe|=1;var s=lr.transition,d=Ie;try{if(lr.transition=null,Ie=1,l)return l()}finally{Ie=d,lr.transition=s,Pe=o,(Pe&6)===0&&Qa()}}function b1(){Ao=Fu.current,We(Fu)}function Hl(l,o){l.finishedWork=null,l.finishedLanes=0;var s=l.timeoutHandle;if(s!==-1&&(l.timeoutHandle=-1,CT(s)),Kn!==null)for(s=Kn.return;s!==null;){var d=s;switch(E1(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&om();break;case 3:Vu(),We(Lo),We(Vi),U1();break;case 5:Y1(d);break;case 4:Vu();break;case 13:We(hn);break;case 19:We(hn);break;case 10:B1(d.type._context);break;case 22:case 23:b1()}s=s.return}if(ui=l,Kn=l=Ha(l.current,null),Li=Ao=o,ti=0,qd=null,Z1=Tm=Ql=0,xo=Id=null,_l!==null){for(o=0;o<_l.length;o++)if(s=_l[o],d=s.interleaved,d!==null){s.interleaved=null;var u=d.next,p=s.pending;if(p!==null){var v=p.next;p.next=u,d.next=v}s.pending=d}_l=null}return l}function Ck(l,o){do{var s=Kn;try{if(z1(),Up.current=fm,dm){for(var d=un.memoizedState;d!==null;){var u=d.queue;u!==null&&(u.pending=null),d=d.next}dm=!1}if(Zl=0,hi=bn=un=null,Od=!1,Jd=0,J1.current=null,s===null||s.return===null){ti=1,qd=o,Kn=null;break}t:{var p=l,v=s.return,w=s,M=o;if(o=Li,w.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var T=M,O=w,I=O.tag;if((O.mode&1)===0&&(I===0||I===11||I===15)){var V=O.alternate;V?(O.updateQueue=V.updateQueue,O.memoizedState=V.memoizedState,O.lanes=V.lanes):(O.updateQueue=null,O.memoizedState=null)}var K=hM(v);if(K!==null){K.flags&=-257,uM(K,v,w,p,o),K.mode&1&&lM(p,T,o),o=K,M=T;var at=o.updateQueue;if(at===null){var U=new Set;U.add(M),o.updateQueue=U}else at.add(M);break t}else{if((o&1)===0){lM(p,T,o),tP();break t}M=Error(Pt(426))}}else if(be&&w.mode&1){var Bt=hM(v);if(Bt!==null){(Bt.flags&65536)===0&&(Bt.flags|=256),uM(Bt,v,w,p,o),I1(Yu(M,w));break t}}p=M=Yu(M,w),ti!==4&&(ti=2),Id===null?Id=[p]:Id.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,o&=-o,p.lanes|=o;var b=uk(p,M,o);eM(p,b);break t;case 1:w=M;var _=p.type,Q=p.stateNode;if((p.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(_a===null||!_a.has(Q)))){p.flags|=65536,o&=-o,p.lanes|=o;var B=gk(p,w,o);eM(p,B);break t}}p=p.return}while(p!==null)}Dk(s)}catch(ot){o=ot,Kn===s&&s!==null&&(Kn=s=s.return);continue}break}while(1)}function Tk(){var l=cm.current;return cm.current=fm,l===null?fm:l}function tP(){(ti===0||ti===3||ti===2)&&(ti=4),ui===null||(Ql&268435455)===0&&(Tm&268435455)===0||za(ui,Li)}function ym(l,o){var s=Pe;Pe|=2;var d=Tk();(ui!==l||Li!==o)&&(Qs=null,Hl(l,o));do try{qT();break}catch(u){Ck(l,u)}while(1);if(z1(),Pe=s,cm.current=d,Kn!==null)throw Error(Pt(261));return ui=null,Li=0,ti}function qT(){for(;Kn!==null;)Fk(Kn)}function bT(){for(;Kn!==null&&!MC();)Fk(Kn)}function Fk(l){var o=Ok(l.alternate,l,Ao);l.memoizedProps=l.pendingProps,o===null?Dk(l):Kn=o,J1.current=null}function Dk(l){var o=l;do{var s=o.alternate;if(l=o.return,(o.flags&32768)===0){if(s=KT(s,o,Ao),s!==null){Kn=s;return}}else{if(s=HT(s,o),s!==null){s.flags&=32767,Kn=s;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ti=6,Kn=null;return}}if(o=o.sibling,o!==null){Kn=o;return}Kn=o=l}while(o!==null);ti===0&&(ti=5)}function Ul(l,o,s){var d=Ie,u=lr.transition;try{lr.transition=null,Ie=1,tF(l,o,s,d)}finally{lr.transition=u,Ie=d}return null}function tF(l,o,s,d){do Au();while(Ga!==null);if((Pe&6)!==0)throw Error(Pt(327));s=l.finishedWork;var u=l.finishedLanes;if(s===null)return null;if(l.finishedWork=null,l.finishedLanes=0,s===l.current)throw Error(Pt(177));l.callbackNode=null,l.callbackPriority=0;var p=s.lanes|s.childLanes;if(IC(l,p),l===ui&&(Kn=ui=null,Li=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ip||(Ip=!0,Ek(qp,function(){return Au(),null})),p=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||p){p=lr.transition,lr.transition=null;var v=Ie;Ie=1;var w=Pe;Pe|=4,J1.current=null,$T(l,s),Mk(s,l),PT(VS),tm=!!RS,VS=RS=null,l.current=s,JT(s),kC(),Pe=w,Ie=v,lr.transition=p}else l.current=s;if(Ip&&(Ip=!1,Ga=l,mm=u),p=l.pendingLanes,p===0&&(_a=null),TC(s.stateNode),ko(l,An()),o!==null)for(d=l.onRecoverableError,s=0;s<o.length;s++)u=o[s],d(u.value,{componentStack:u.stack,digest:u.digest});if(pm)throw pm=!1,l=s1,s1=null,l;return(mm&1)!==0&&l.tag!==0&&Au(),p=l.pendingLanes,(p&1)!==0?l===a1?Ad++:(Ad=0,a1=l):Ad=0,Qa(),null}function Au(){if(Ga!==null){var l=h5(mm),o=lr.transition,s=Ie;try{if(lr.transition=null,Ie=16>l?16:l,Ga===null)var d=!1;else{if(l=Ga,Ga=null,mm=0,(Pe&6)!==0)throw Error(Pt(331));var u=Pe;for(Pe|=4,Ot=l.current;Ot!==null;){var p=Ot,v=p.child;if((Ot.flags&16)!==0){var w=p.deletions;if(w!==null){for(var M=0;M<w.length;M++){var T=w[M];for(Ot=T;Ot!==null;){var O=Ot;switch(O.tag){case 0:case 11:case 15:Ed(8,O,p)}var I=O.child;if(I!==null)I.return=O,Ot=I;else for(;Ot!==null;){O=Ot;var V=O.sibling,K=O.return;if(xk(O),O===T){Ot=null;break}if(V!==null){V.return=K,Ot=V;break}Ot=K}}}var at=p.alternate;if(at!==null){var U=at.child;if(U!==null){at.child=null;do{var Bt=U.sibling;U.sibling=null,U=Bt}while(U!==null)}}Ot=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Ot=v;else t:for(;Ot!==null;){if(p=Ot,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ed(9,p,p.return)}var b=p.sibling;if(b!==null){b.return=p.return,Ot=b;break t}Ot=p.return}}var _=l.current;for(Ot=_;Ot!==null;){v=Ot;var Q=v.child;if((v.subtreeFlags&2064)!==0&&Q!==null)Q.return=v,Ot=Q;else t:for(v=_;Ot!==null;){if(w=Ot,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:Cm(9,w)}}catch(ot){Dn(w,w.return,ot)}if(w===v){Ot=null;break t}var B=w.sibling;if(B!==null){B.return=w.return,Ot=B;break t}Ot=w.return}}if(Pe=u,Qa(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(Sm,l)}catch{}d=!0}return d}finally{Ie=s,lr.transition=o}}return!1}function LM(l,o,s){o=Yu(s,o),o=uk(l,o,1),l=Xa(l,o,1),o=eo(),l!==null&&(tf(l,1,o),ko(l,o))}function Dn(l,o,s){if(l.tag===3)LM(l,l,s);else for(;o!==null;){if(o.tag===3){LM(o,l,s);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(_a===null||!_a.has(d))){l=Yu(s,l),l=gk(o,l,1),o=Xa(o,l,1),l=eo(),o!==null&&(tf(o,1,l),ko(o,l));break}}o=o.return}}function eF(l,o,s){var d=l.pingCache;d!==null&&d.delete(o),o=eo(),l.pingedLanes|=l.suspendedLanes&s,ui===l&&(Li&s)===s&&(ti===4||ti===3&&(Li&130023424)===Li&&500>An()-Q1?Hl(l,0):Z1|=s),ko(l,o)}function jk(l,o){o===0&&((l.mode&1)===0?o=1:(o=Mp,Mp<<=1,(Mp&130023424)===0&&(Mp=4194304)));var s=eo();l=oa(l,o),l!==null&&(tf(l,o,s),ko(l,s))}function nF(l){var o=l.memoizedState,s=0;o!==null&&(s=o.retryLane),jk(l,s)}function iF(l,o){var s=0;switch(l.tag){case 13:var d=l.stateNode,u=l.memoizedState;u!==null&&(s=u.retryLane);break;case 19:d=l.stateNode;break;default:throw Error(Pt(314))}d!==null&&d.delete(o),jk(l,s)}var Ok;Ok=function(l,o,s){if(l!==null)if(l.memoizedProps!==o.pendingProps||Lo.current)wo=!0;else{if((l.lanes&s)===0&&(o.flags&128)===0)return wo=!1,_T(l,o,s);wo=(l.flags&131072)!==0}else wo=!1,be&&(o.flags&1048576)!==0&&A5(o,am,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;_p(l,o),l=o.pendingProps;var u=Bu(o,Vi.current);Iu(o,s),u=_1(null,o,d,l,u,s);var p=K1();return o.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Mo(d)?(p=!0,rm(o)):p=!1,o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,R1(o),u.updater=km,o.stateNode=u,u._reactInternals=o,JS(o,d,l,s),o=qS(null,o,d,!0,p,s)):(o.tag=0,be&&p&&O1(o),to(null,o,u,s),o=o.child),o;case 16:d=o.elementType;t:{switch(_p(l,o),l=o.pendingProps,u=d._init,d=u(d._payload),o.type=d,u=o.tag=rF(d),l=Ir(d,l),u){case 0:o=QS(null,o,d,l,s);break t;case 1:o=fM(null,o,d,l,s);break t;case 11:o=gM(null,o,d,l,s);break t;case 14:o=dM(null,o,d,Ir(d.type,l),s);break t}throw Error(Pt(306,d,""))}return o;case 0:return d=o.type,u=o.pendingProps,u=o.elementType===d?u:Ir(d,u),QS(l,o,d,u,s);case 1:return d=o.type,u=o.pendingProps,u=o.elementType===d?u:Ir(d,u),fM(l,o,d,u,s);case 3:t:{if(pk(o),l===null)throw Error(Pt(387));d=o.pendingProps,p=o.memoizedState,u=p.element,R5(l,o),um(o,d,null,s);var v=o.memoizedState;if(d=v.element,p.isDehydrated)if(p={element:d,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},o.updateQueue.baseState=p,o.memoizedState=p,o.flags&256){u=Yu(Error(Pt(423)),o),o=cM(l,o,d,s,u);break t}else if(d!==u){u=Yu(Error(Pt(424)),o),o=cM(l,o,d,s,u);break t}else for(zo=Ua(o.stateNode.containerInfo.firstChild),Bo=o,be=!0,zr=null,s=X5(o,null,d,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Gu(),d===u){o=ra(l,o,s);break t}to(l,o,d,s)}o=o.child}return o;case 5:return _5(o),l===null&&HS(o),d=o.type,u=o.pendingProps,p=l!==null?l.memoizedProps:null,v=u.children,YS(d,u)?v=null:p!==null&&YS(d,p)&&(o.flags|=32),ck(l,o),to(l,o,v,s),o.child;case 6:return l===null&&HS(o),null;case 13:return mk(l,o,s);case 4:return V1(o,o.stateNode.containerInfo),d=o.pendingProps,l===null?o.child=Ru(o,null,d,s):to(l,o,d,s),o.child;case 11:return d=o.type,u=o.pendingProps,u=o.elementType===d?u:Ir(d,u),gM(l,o,d,u,s);case 7:return to(l,o,o.pendingProps,s),o.child;case 8:return to(l,o,o.pendingProps.children,s),o.child;case 12:return to(l,o,o.pendingProps.children,s),o.child;case 10:t:{if(d=o.type._context,u=o.pendingProps,p=o.memoizedProps,v=u.value,Xe(lm,d._currentValue),d._currentValue=v,p!==null)if(Rr(p.value,v)){if(p.children===u.children&&!Lo.current){o=ra(l,o,s);break t}}else for(p=o.child,p!==null&&(p.return=o);p!==null;){var w=p.dependencies;if(w!==null){v=p.child;for(var M=w.firstContext;M!==null;){if(M.context===d){if(p.tag===1){M=ea(-1,s&-s),M.tag=2;var T=p.updateQueue;if(T!==null){T=T.shared;var O=T.pending;O===null?M.next=M:(M.next=O.next,O.next=M),T.pending=M}}p.lanes|=s,M=p.alternate,M!==null&&(M.lanes|=s),WS(p.return,s,o),w.lanes|=s;break}M=M.next}}else if(p.tag===10)v=p.type===o.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(Pt(341));v.lanes|=s,w=v.alternate,w!==null&&(w.lanes|=s),WS(v,s,o),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===o){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}to(l,o,u.children,s),o=o.child}return o;case 9:return u=o.type,d=o.pendingProps.children,Iu(o,s),u=hr(u),d=d(u),o.flags|=1,to(l,o,d,s),o.child;case 14:return d=o.type,u=Ir(d,o.pendingProps),u=Ir(d.type,u),dM(l,o,d,u,s);case 15:return dk(l,o,o.type,o.pendingProps,s);case 17:return d=o.type,u=o.pendingProps,u=o.elementType===d?u:Ir(d,u),_p(l,o),o.tag=1,Mo(d)?(l=!0,rm(o)):l=!1,Iu(o,s),Y5(o,d,u),JS(o,d,u,s),qS(null,o,d,!0,l,s);case 19:return yk(l,o,s);case 22:return fk(l,o,s)}throw Error(Pt(156,o.tag))};function Ek(l,o){return r5(l,o)}function oF(l,o,s,d){this.tag=l,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(l,o,s,d){return new oF(l,o,s,d)}function eP(l){return l=l.prototype,!(!l||!l.isReactComponent)}function rF(l){if(typeof l=="function")return eP(l)?1:0;if(l!=null){if(l=l.$$typeof,l===P1)return 11;if(l===x1)return 14}return 2}function Ha(l,o){var s=l.alternate;return s===null?(s=ar(l.tag,o,l.key,l.mode),s.elementType=l.elementType,s.type=l.type,s.stateNode=l.stateNode,s.alternate=l,l.alternate=s):(s.pendingProps=o,s.type=l.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=l.flags&14680064,s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=l.sibling,s.index=l.index,s.ref=l.ref,s}function Wp(l,o,s,d,u,p){var v=2;if(d=l,typeof l=="function")eP(l)&&(v=1);else if(typeof l=="string")v=5;else t:switch(l){case Su:return Wl(s.children,u,p,o);case S1:v=8,u|=8;break;case SS:return l=ar(12,s,o,u|2),l.elementType=SS,l.lanes=p,l;case PS:return l=ar(13,s,o,u),l.elementType=PS,l.lanes=p,l;case xS:return l=ar(19,s,o,u),l.elementType=xS,l.lanes=p,l;case UM:return Fm(s,u,p,o);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case VM:v=10;break t;case YM:v=9;break t;case P1:v=11;break t;case x1:v=14;break t;case Ea:v=16,d=null;break t}throw Error(Pt(130,l==null?l:typeof l,""))}return o=ar(v,s,o,u),o.elementType=l,o.type=d,o.lanes=p,o}function Wl(l,o,s,d){return l=ar(7,l,d,o),l.lanes=s,l}function Fm(l,o,s,d){return l=ar(22,l,d,o),l.elementType=UM,l.lanes=s,l.stateNode={isHidden:!1},l}function cS(l,o,s){return l=ar(6,l,null,o),l.lanes=s,l}function pS(l,o,s){return o=ar(4,l.children!==null?l.children:[],l.key,o),o.lanes=s,o.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},o}function sF(l,o,s,d,u){this.tag=o,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jv(0),this.expirationTimes=Jv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jv(0),this.identifierPrefix=d,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function nP(l,o,s,d,u,p,v,w,M){return l=new sF(l,o,s,w,M),o===1?(o=1,p===!0&&(o|=8)):o=0,p=ar(3,null,null,o),l.current=p,p.stateNode=l,p.memoizedState={element:d,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},R1(p),l}function aF(l,o,s){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vu,key:d==null?null:""+d,children:l,containerInfo:o,implementation:s}}function Ik(l){if(!l)return $a;l=l._reactInternals;t:{if(eh(l)!==l||l.tag!==1)throw Error(Pt(170));var o=l;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Mo(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(Pt(171))}if(l.tag===1){var s=l.type;if(Mo(s))return E5(l,s,o)}return o}function Ak(l,o,s,d,u,p,v,w,M){return l=nP(s,d,!0,l,u,p,v,w,M),l.context=Ik(null),s=l.current,d=eo(),u=Ka(s),p=ea(d,u),p.callback=o!=null?o:null,Xa(s,p,u),l.current.lanes=u,tf(l,u,d),ko(l,d),l}function Dm(l,o,s,d){var u=o.current,p=eo(),v=Ka(u);return s=Ik(s),o.context===null?o.context=s:o.pendingContext=s,o=ea(p,v),o.payload={element:l},d=d===void 0?null:d,d!==null&&(o.callback=d),l=Xa(u,o,v),l!==null&&(Gr(l,u,v,p),Yp(l,u,v)),v}function vm(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function MM(l,o){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var s=l.retryLane;l.retryLane=s!==0&&s<o?s:o}}function iP(l,o){MM(l,o),(l=l.alternate)&&MM(l,o)}function lF(){return null}var zk=typeof reportError=="function"?reportError:function(l){console.error(l)};function oP(l){this._internalRoot=l}jm.prototype.render=oP.prototype.render=function(l){var o=this._internalRoot;if(o===null)throw Error(Pt(409));Dm(l,o,null,null)};jm.prototype.unmount=oP.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var o=l.containerInfo;ql(function(){Dm(null,l,null,null)}),o[ia]=null}};function jm(l){this._internalRoot=l}jm.prototype.unstable_scheduleHydration=function(l){if(l){var o=d5();l={blockedOn:null,target:l,priority:o};for(var s=0;s<Aa.length&&o!==0&&o<Aa[s].priority;s++);Aa.splice(s,0,l),s===0&&c5(l)}};function rP(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Om(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function kM(){}function hF(l,o,s,d,u){if(u){if(typeof d=="function"){var p=d;d=function(){var T=vm(v);p.call(T)}}var v=Ak(o,d,l,0,null,!1,!1,"",kM);return l._reactRootContainer=v,l[ia]=v.current,_d(l.nodeType===8?l.parentNode:l),ql(),v}for(;u=l.lastChild;)l.removeChild(u);if(typeof d=="function"){var w=d;d=function(){var T=vm(M);w.call(T)}}var M=nP(l,0,!1,null,null,!1,!1,"",kM);return l._reactRootContainer=M,l[ia]=M.current,_d(l.nodeType===8?l.parentNode:l),ql(function(){Dm(o,M,s,d)}),M}function Em(l,o,s,d,u){var p=s._reactRootContainer;if(p){var v=p;if(typeof u=="function"){var w=u;u=function(){var M=vm(v);w.call(M)}}Dm(o,v,l,u)}else v=hF(s,o,l,u,d);return vm(v)}u5=function(l){switch(l.tag){case 3:var o=l.stateNode;if(o.current.memoizedState.isDehydrated){var s=Md(o.pendingLanes);s!==0&&(M1(o,s|1),ko(o,An()),(Pe&6)===0&&(Uu=An()+500,Qa()))}break;case 13:ql(function(){var d=oa(l,1);if(d!==null){var u=eo();Gr(d,l,1,u)}}),iP(l,1)}};k1=function(l){if(l.tag===13){var o=oa(l,134217728);if(o!==null){var s=eo();Gr(o,l,134217728,s)}iP(l,134217728)}};g5=function(l){if(l.tag===13){var o=Ka(l),s=oa(l,o);if(s!==null){var d=eo();Gr(s,l,o,d)}iP(l,o)}};d5=function(){return Ie};f5=function(l,o){var s=Ie;try{return Ie=l,o()}finally{Ie=s}};jS=function(l,o,s){switch(o){case"input":if(MS(l,s),o=s.name,s.type==="radio"&&o!=null){for(s=l;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var d=s[o];if(d!==l&&d.form===l.form){var u=Lm(d);if(!u)throw Error(Pt(90));_M(d),MS(d,u)}}}break;case"textarea":HM(l,s);break;case"select":o=s.value,o!=null&&Du(l,!!s.multiple,o,!1)}};bM=q1;t5=ql;var uF={usingClientEntryPoint:!1,Events:[nf,Lu,Lm,QM,qM,q1]},vd={findFiberByHostInstance:Xl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gF={bundleType:vd.bundleType,version:vd.version,rendererPackageName:vd.rendererPackageName,rendererConfig:vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=i5(l),l===null?null:l.stateNode},findFiberByHostInstance:vd.findFiberByHostInstance||lF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ap.isDisabled&&Ap.supportsFiber)try{Sm=Ap.inject(gF),xs=Ap}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uF;Vo.createPortal=function(l,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rP(o))throw Error(Pt(200));return aF(l,o,null,s)};Vo.createRoot=function(l,o){if(!rP(l))throw Error(Pt(299));var s=!1,d="",u=zk;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(u=o.onRecoverableError)),o=nP(l,1,!1,null,null,s,!1,d,u),l[ia]=o.current,_d(l.nodeType===8?l.parentNode:l),new oP(o)};Vo.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var o=l._reactInternals;if(o===void 0)throw typeof l.render=="function"?Error(Pt(188)):(l=Object.keys(l).join(","),Error(Pt(268,l)));return l=i5(o),l=l===null?null:l.stateNode,l};Vo.flushSync=function(l){return ql(l)};Vo.hydrate=function(l,o,s){if(!Om(o))throw Error(Pt(200));return Em(null,l,o,!0,s)};Vo.hydrateRoot=function(l,o,s){if(!rP(l))throw Error(Pt(405));var d=s!=null&&s.hydratedSources||null,u=!1,p="",v=zk;if(s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),o=Ak(o,null,l,1,s!=null?s:null,u,!1,p,v),l[ia]=o.current,_d(l),d)for(l=0;l<d.length;l++)s=d[l],u=s._getVersion,u=u(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,u]:o.mutableSourceEagerHydrationData.push(s,u);return new jm(o)};Vo.render=function(l,o,s){if(!Om(o))throw Error(Pt(200));return Em(null,l,o,!1,s)};Vo.unmountComponentAtNode=function(l){if(!Om(l))throw Error(Pt(40));return l._reactRootContainer?(ql(function(){Em(null,null,l,!1,function(){l._reactRootContainer=null,l[ia]=null})}),!0):!1};Vo.unstable_batchedUpdates=q1;Vo.unstable_renderSubtreeIntoContainer=function(l,o,s,d){if(!Om(s))throw Error(Pt(200));if(l==null||l._reactInternals===void 0)throw Error(Pt(38));return Em(l,o,s,!1,d)};Vo.version="18.2.0-next-9e3b772b8-20220608";(function(l){function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}o(),l.exports=Vo})(AM);var NM=AM.exports;yS.createRoot=NM.createRoot,yS.hydrateRoot=NM.hydrateRoot;(function(){var l;function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}function d(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var u=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},p;if(typeof Object.setPrototypeOf=="function")p=Object.setPrototypeOf;else{var v;t:{var w={a:!0},M={};try{M.__proto__=w,v=M.a;break t}catch{}v=!1}p=v?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var T=p;function O(t,e){if(t.prototype=u(e.prototype),t.prototype.constructor=t,T)T(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.zA=e.prototype}var I=typeof global<"u"&&global!=null?global:self,V=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},K=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function at(t,e){if(e){var n=I;t=t.split(".");for(var i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&e!=null&&K(n,t,{writable:!0,value:e})}}at("Object.assign",function(t){return t||V}),at("Array.prototype.fill",function(t){return t||function(e,n,i){var r=this.length||0;for(0>n&&(n=Math.max(0,r+n)),(i==null||i>r)&&(i=r),i=Number(i),0>i&&(i=Math.max(0,r+i)),n=Number(n||0);n<i;n++)this[n]=e;return this}});var U=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};U.requestAnimationFrame===void 0&&(U.setImmediate===void 0?U.requestAnimationFrame=function(t){U.setTimeout(t,0)}:U.requestAnimationFrame=U.setImmediate);function Bt(){}function b(t,e){var n=-1;return function(){var i=this,r=arguments;n!==-1&&U.clearTimeout(n),n=_(function(){n=-1,t.apply(i,r)},e)}}function _(t,e){return U.setTimeout(t,e)}function Q(t){return U.document.createElement(t)}function B(t){throw Error(t)}function ot(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),B(t)}function gt(t,e,n,i){n=n===null?"*":typeof n=="string"?n:typeof n=="function"&&typeof n.className=="string"?n.className:"",i!==void 0&&(n+="."+i),B(n+" is not in the range "+e+": "+t)}function Lt(t){U.console&&U.console.log(t)}function mt(t){return typeof t=="object"&&t!==null}function Ut(t){return Array.isArray(t)||U.NodeList&&t instanceof U.NodeList||U.HTMLCollection&&t instanceof U.HTMLCollection}function Jt(t){return Array.prototype.slice.call(t)}function Bn(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):B("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function No(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):B("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Kt(){var t=aa.pop();return t===void 0?[]:t}function Xt(t){t.length=0,aa.push(t)}function gr(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(mt(t)&&t.constructor)return gr(t.constructor);return typeof t}function Hn(t){var e=t;return mt(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function ih(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.lA;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Nt(t,e,n){Object.defineProperty(te.prototype,t,{get:e,set:n})}function St(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(n&15)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,r=0;r<t.length;r+=2)n[i++]=e[t.substr(r,2)];for(t=n.join(""),t=t===""?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)i=(i+e[n]+119)%256,r=e[n],e[n]=e[i],e[i]=r;i=n=0;for(var a="",h=0;h<t.length;h++)n=(n+1)%256,i=(i+e[n])%256,r=e[n],e[n]=e[i],e[i]=r,a+=String.fromCharCode(t.charCodeAt(h)^e[(e[n]+e[i])%256]);return a}var ne=U.navigator!==void 0&&0<U.navigator.userAgent.indexOf("Trident/7"),tn=U.navigator!==void 0&&0<U.navigator.userAgent.indexOf("Edge/"),Ce=U.navigator!==void 0&&U.navigator.platform!==void 0&&U.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,aa=[];Object.freeze([]),Bt.className="Util",Bt.Dx="32ab5ff3b26f42dc0ed90f21462913b5",Bt.adym="gojs.net",Bt.vfo="28e644fdb261",Bt.className="Util";function $(t,e,n){Oe(this),this.j=t,this.va=e,this.m=n}$.prototype.toString=function(){return"EnumValue."+this.va};function Yi(t,e){return e==null||e===""?null:t[e]}I.Object.defineProperties($.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.va}},value:{get:function(){return this.m}}}),$.className="EnumValue";function Uo(){this.Jv=[]}Uo.prototype.toString=function(){return this.Jv.join("")},Uo.prototype.add=function(t){t!==""&&this.Jv.push(t)},Uo.className="StringBuilder";function jn(){}jn.className="PropertyCollection";var rf={nA:!1,sA:!1,pA:!1,rA:!1,xA:!1,vA:!1,Rw:!1,oA:null,trace:function(t){U.console&&U.console.log(t)},qA:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},mA:function(t){var e={},n;for(n in t){if(e.x=n,e.x!=="licenseKey"){var i=t[e.x];if(i.prototype!==void 0){e.Gl=Object.getOwnPropertyNames(i.prototype);for(var r={Lj:0};r.Lj<e.Gl.length;r={Lj:r.Lj},r.Lj++){var a=Object.getOwnPropertyDescriptor(i.prototype,e.Gl[r.Lj]);a.get!==void 0&&a.set===void 0&&Object.defineProperty(i.prototype,e.Gl[r.Lj],{set:function(h,g){return function(){throw Error("Property "+h.Gl[g.Lj]+" of "+h.x+" is read-only.")}}(e,r)})}}}e={Gl:e.Gl,x:e.x}}}};function dn(){}dn.prototype.reset=function(){},dn.prototype.next=function(){return!1},dn.prototype.ud=function(){return!1},dn.prototype.first=function(){return null},dn.prototype.any=function(){return!1},dn.prototype.all=function(){return!0},dn.prototype.each=function(){return this},dn.prototype.map=function(){return this},dn.prototype.filter=function(){return this},dn.prototype.Xd=function(){},dn.prototype.toString=function(){return"EmptyIterator"},I.Object.defineProperties(dn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),dn.prototype.first=dn.prototype.first,dn.prototype.hasNext=dn.prototype.ud,dn.prototype.next=dn.prototype.next,dn.prototype.reset=dn.prototype.reset;var Ui=null;dn.className="EmptyIterator",Ui=new dn;function Re(t){this.key=-1,this.value=t}Re.prototype.reset=function(){this.key=-1},Re.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},Re.prototype.ud=function(){return this.next()},Re.prototype.first=function(){return this.key=0,this.value},Re.prototype.any=function(t){return this.key=-1,t(this.value)},Re.prototype.all=function(t){return this.key=-1,t(this.value)},Re.prototype.each=function(t){return this.key=-1,t(this.value),this},Re.prototype.map=function(t){return new Re(t(this.value))},Re.prototype.filter=function(t){return t(this.value)?new Re(this.value):Ui},Re.prototype.Xd=function(){this.value=null},Re.prototype.toString=function(){return"SingletonIterator("+this.value+")"},I.Object.defineProperties(Re.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Re.prototype.first=Re.prototype.first,Re.prototype.hasNext=Re.prototype.ud,Re.prototype.next=Re.prototype.next,Re.prototype.reset=Re.prototype.reset,Re.className="SingletonIterator";function Ae(t){this.xb=t,this.cf=null,t.Pa=null,this.na=t.Ia,this.Wa=-1}Ae.prototype.reset=function(){var t=this.xb;t.Pa=null,this.na=t.Ia,this.Wa=-1},Ae.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;t=t.s;var e=t.length,n=++this.Wa,i=this.cf;if(i!==null)for(;n<e;){var r=t[n];if(i(r))return this.key=this.Wa=n,this.value=r,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Xd()}return!1},Ae.prototype.ud=function(){return this.next()},Ae.prototype.first=function(){var t=this.xb;this.na=t.Ia,this.Wa=0,t=t.s;var e=t.length,n=this.cf;if(n!==null){for(var i=0;i<e;){var r=t[i];if(n(r))return this.key=this.Wa=i,this.value=r;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Ae.prototype.any=function(t){var e=this.xb;e.Pa=null,this.Wa=-1,e=e.s;for(var n=e.length,i=this.cf,r=0;r<n;r++){var a=e[r];if((i===null||i(a))&&t(a))return!0}return!1},Ae.prototype.all=function(t){var e=this.xb;e.Pa=null,this.Wa=-1,e=e.s;for(var n=e.length,i=this.cf,r=0;r<n;r++){var a=e[r];if((i===null||i(a))&&!t(a))return!1}return!0},Ae.prototype.each=function(t){var e=this.xb;e.Pa=null,this.Wa=-1,e=e.s;for(var n=e.length,i=this.cf,r=0;r<n;r++){var a=e[r];(i===null||i(a))&&t(a)}return this},Ae.prototype.map=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;var n=[];e=e.s;for(var i=e.length,r=this.cf,a=0;a<i;a++){var h=e[a];(r===null||r(h))&&n.push(t(h))}return t=new tt,t.s=n,t.sb(),t.iterator},Ae.prototype.filter=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;var n=[];e=e.s;for(var i=e.length,r=this.cf,a=0;a<i;a++){var h=e[a];(r===null||r(h))&&t(h)&&n.push(h)}return t=new tt,t.s=n,t.sb(),t.iterator},Ae.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.cf=null,this.xb.Pa=this},Ae.prototype.toString=function(){return"ListIterator@"+this.Wa+"/"+this.xb.count},I.Object.defineProperties(Ae.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.cf},set:function(t){this.cf=t}},count:{get:function(){var t=this.cf;if(t!==null){for(var e=0,n=this.xb.s,i=n.length,r=0;r<i;r++)t(n[r])&&e++;return e}return this.xb.s.length}}}),Ae.prototype.first=Ae.prototype.first,Ae.prototype.hasNext=Ae.prototype.ud,Ae.prototype.next=Ae.prototype.next,Ae.prototype.reset=Ae.prototype.reset,Ae.className="ListIterator";function fn(t){this.xb=t,t.yg=null,this.na=t.Ia,this.Wa=t.s.length}fn.prototype.reset=function(){var t=this.xb;t.yg=null,this.na=t.Ia,this.Wa=t.s.length},fn.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=--this.Wa;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.Xd(),!1)},fn.prototype.ud=function(){return this.next()},fn.prototype.first=function(){var t=this.xb;this.na=t.Ia;var e=t.s;return this.Wa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},fn.prototype.any=function(t){var e=this.xb;e.yg=null,e=e.s;var n=e.length;for(this.Wa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},fn.prototype.all=function(t){var e=this.xb;e.yg=null,e=e.s;var n=e.length;for(this.Wa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},fn.prototype.each=function(t){var e=this.xb;e.yg=null,e=e.s;var n=e.length;for(this.Wa=n,--n;0<=n;n--)t(e[n]);return this},fn.prototype.map=function(t){var e=this.xb;e.yg=null;var n=[];e=e.s;var i=e.length;for(this.Wa=i,--i;0<=i;i--)n.push(t(e[i]));return t=new tt,t.s=n,t.sb(),t.iterator},fn.prototype.filter=function(t){var e=this.xb;e.yg=null;var n=[];e=e.s;var i=e.length;for(this.Wa=i,--i;0<=i;i--){var r=e[i];t(r)&&n.push(r)}return t=new tt,t.s=n,t.sb(),t.iterator},fn.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.xb.yg=this},fn.prototype.toString=function(){return"ListIteratorBackwards("+this.Wa+"/"+this.xb.count+")"},I.Object.defineProperties(fn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.xb.s.length}}}),fn.prototype.first=fn.prototype.first,fn.prototype.hasNext=fn.prototype.ud,fn.prototype.next=fn.prototype.next,fn.prototype.reset=fn.prototype.reset,fn.className="ListIteratorBackwards";function tt(t){Oe(this),this._isFrozen=!1,this.s=[],this.Ia=0,this.yg=this.Pa=null,typeof t=="string"&&B("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}l=tt.prototype,l.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return this._isFrozen=!1,this},l.toString=function(){return"List()#"+Te(this)},l.add=function(t){return t===null?this:(this._isFrozen&&ot(this,t),this.s.push(t),this.sb(),this)},l.push=function(t){this.add(t)},l.addAll=function(t){if(t===null)return this;this._isFrozen&&ot(this);var e=this.s;if(Ut(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.sb(),this},l.clear=function(){this._isFrozen&&ot(this),this.s.length=0,this.sb()},l.contains=function(t){return t===null?!1:this.s.indexOf(t)!==-1},l.has=function(t){return this.contains(t)},l.indexOf=function(t){return t===null?-1:this.s.indexOf(t)},l.K=function(t){var e=this.s;return(0>t||t>=e.length)&&gt(t,"0 <= i < length",tt,"elt:i"),e[t]},l.get=function(t){return this.K(t)},l.Vc=function(t,e){var n=this.s;(0>t||t>=n.length)&&gt(t,"0 <= i < length",tt,"setElt:i"),this._isFrozen&&ot(this,t),n[t]=e},l.set=function(t,e){this.Vc(t,e)},l.first=function(){var t=this.s;return t.length===0?null:t[0]},l.fc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},l.pop=function(){this._isFrozen&&ot(this);var t=this.s;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)t(e[i]);return this},tt.prototype.map=function(t){for(var e=new tt,n=[],i=this.s,r=i.length,a=0;a<r;a++)n.push(t(i[a]));return e.s=n,e.sb(),e},tt.prototype.filter=function(t){for(var e=new tt,n=[],i=this.s,r=i.length,a=0;a<r;a++){var h=i[a];t(h)&&n.push(h)}return e.s=n,e.sb(),e},l=tt.prototype,l.Cb=function(t,e){0>t&&gt(t,">= 0",tt,"insertAt:i"),this._isFrozen&&ot(this,t);var n=this.s;t>=n.length?n.push(e):n.splice(t,0,e),this.sb()},l.remove=function(t){if(t===null)return!1;this._isFrozen&&ot(this,t);var e=this.s;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.sb(),!0)},l.delete=function(t){return this.remove(t)},l.mb=function(t){var e=this.s;(0>t||t>=e.length)&&gt(t,"0 <= i < length",tt,"removeAt:i"),this._isFrozen&&ot(this,t),t===e.length-1?e.pop():e.splice(t,1),this.sb()},l.removeRange=function(t,e){var n=this.s,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this._isFrozen&&ot(this);for(var r=t,a=e+1;a<i;)n[r++]=n[a++];return n.length=i-(e-t+1),this.sb(),this},tt.prototype.copy=function(){var t=new tt,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},l=tt.prototype,l.Ea=function(){for(var t=this.s,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},l.lv=function(){for(var t=new Z,e=this.s,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},l.sort=function(t){return this._isFrozen&&ot(this),this.s.sort(t),this.sb(),this},l.ri=function(t,e,n){var i=this.s,r=i.length;e===void 0&&(e=0),n===void 0&&(n=r),this._isFrozen&&ot(this);var a=n-e;if(1>=a)return this;if((0>e||e>=r-1)&&gt(e,"0 <= from < length",tt,"sortRange:from"),a===2)return n=i[e],r=i[e+1],0<t(n,r)&&(i[e]=r,i[e+1]=n,this.sb()),this;if(e===0)if(n>=r)i.sort(t);else for(e=i.slice(0,n),e.sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=r)for(n=i.slice(e),n.sort(t),t=e;t<r;t++)i[t]=n[t-e];else for(r=i.slice(e,n),r.sort(t),t=e;t<n;t++)i[t]=r[t-e];return this.sb(),this},l.reverse=function(){return this._isFrozen&&ot(this),this.s.reverse(),this.sb(),this},I.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return Ui;var t=this.Pa;return t!==null?(t.reset(),t):new Ae(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return Ui;var t=this.yg;return t!==null?(t.reset(),t):new fn(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.ri,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.lv,tt.prototype.toArray=tt.prototype.Ea,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.mb,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.Cb,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.fc,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.Vc,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.K,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.ja,tt.prototype.freeze=tt.prototype.freeze,tt.className="List";function cn(t){this.Xf=t,t.Pa=null,this.na=t.Ia,this.ra=null}cn.prototype.reset=function(){var t=this.Xf;t.Pa=null,this.na=t.Ia,this.ra=null},cn.prototype.next=function(){var t=this.Xf;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},cn.prototype.ud=function(){return this.next()},cn.prototype.first=function(){var t=this.Xf;if(this.na=t.Ia,t=t.ea,t!==null){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},cn.prototype.any=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},cn.prototype.all=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},cn.prototype.each=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;e!==null;)t(e.value),e=e.ta;return this},cn.prototype.map=function(t){var e=this.Xf;e.Pa=null;var n=new tt;for(e=e.ea;e!==null;)n.add(t(e.value)),e=e.ta;return n.iterator},cn.prototype.filter=function(t){var e=this.Xf;e.Pa=null;var n=new tt;for(e=e.ea;e!==null;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},cn.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.Xf.Pa=this},cn.prototype.toString=function(){return this.ra!==null?"SetIterator@"+this.ra.value:"SetIterator"},I.Object.defineProperties(cn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Xf.Ob}}}),cn.prototype.first=cn.prototype.first,cn.prototype.hasNext=cn.prototype.ud,cn.prototype.next=cn.prototype.next,cn.prototype.reset=cn.prototype.reset,cn.className="SetIterator";function Z(t){Oe(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Pa=null,this.Ia=0,this.Ye=this.ea=null,typeof t=="string"&&B("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}l=Z.prototype,l.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return this._isFrozen=!1,this},l.toString=function(){return"Set()#"+Te(this)},l.add=function(t){if(t===null)return this;this._isFrozen&&ot(this,t);var e=t;return mt(t)&&(e=ba(t)),this.Pb[e]===void 0&&(this.Ob++,t=new Wu(t,t),this.Pb[e]=t,e=this.Ye,e===null?this.ea=t:(t.al=e,e.ta=t),this.Ye=t,this.sb()),this},l.addAll=function(t){if(t===null)return this;if(this._isFrozen&&ot(this),Ut(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},l.contains=function(t){if(t===null)return!1;var e=t;return mt(t)&&(e=Te(t),e===void 0)?!1:this.Pb[e]!==void 0},l.has=function(t){return this.contains(t)},l.zy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},l.Ay=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},l.first=function(){var t=this.ea;return t===null?null:t.value},Z.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},Z.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},Z.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e.value),e=e.ta;return this},Z.prototype.map=function(t){for(var e=new Z,n=this.ea;n!==null;)e.add(t(n.value)),n=n.ta;return e},Z.prototype.filter=function(t){for(var e=new Z,n=this.ea;n!==null;){var i=n.value;t(i)&&e.add(i),n=n.ta}return e},l=Z.prototype,l.remove=function(t){if(t===null)return!1;this._isFrozen&&ot(this,t);var e=t;if(mt(t)&&(e=Te(t),e===void 0)||(t=this.Pb[e],t===void 0))return!1;var n=t.ta,i=t.al;return n!==null&&(n.al=i),i!==null&&(i.ta=n),this.ea===t&&(this.ea=n),this.Ye===t&&(this.Ye=i),delete this.Pb[e],this.Ob--,this.sb(),!0},l.delete=function(t){return this.remove(t)},l.Ko=function(t){if(t===null)return this;if(this._isFrozen&&ot(this),Ut(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},l.Wz=function(t){if(t===null||this.count===0)return this;this._isFrozen&&ot(this);var e=new Z;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.Ko(t),this},l.clear=function(){this._isFrozen&&ot(this),this.Pb={},this.Ob=0,this.Pa!==null&&this.Pa.reset(),this.Ye=this.ea=null,this.sb()},Z.prototype.copy=function(){var t=new Z,e=this.Pb,n;for(n in e)t.add(e[n].value);return t},Z.prototype.Ea=function(){var t=Array(this.Ob),e=this.Pb,n=0,i;for(i in e)t[n]=e[i].value,n++;return t},Z.prototype.kv=function(){var t=new tt,e=this.Pb,n;for(n in e)t.add(e[n].value);return t};function Oe(t){t.__gohashid=Ms++}function ba(t){var e=t.__gohashid;return e===void 0&&(e=Ms++,t.__gohashid=e),e}function Te(t){return t.__gohashid}I.Object.defineProperties(Z.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.Ob)return Ui;var t=this.Pa;return t!==null?(t.reset(),t):new cn(this)}}}),Z.prototype.toList=Z.prototype.kv,Z.prototype.toArray=Z.prototype.Ea,Z.prototype.clear=Z.prototype.clear,Z.prototype.retainAll=Z.prototype.Wz,Z.prototype.removeAll=Z.prototype.Ko,Z.prototype.delete=Z.prototype.delete,Z.prototype.remove=Z.prototype.remove,Z.prototype.first=Z.prototype.first,Z.prototype.containsAny=Z.prototype.Ay,Z.prototype.containsAll=Z.prototype.zy,Z.prototype.has=Z.prototype.has,Z.prototype.contains=Z.prototype.contains,Z.prototype.addAll=Z.prototype.addAll,Z.prototype.add=Z.prototype.add,Z.prototype.thaw=Z.prototype.ja,Z.prototype.freeze=Z.prototype.freeze;var Ms=1;Z.className="Set",Z.uniqueHash=Oe,Z.hashIdUnique=ba,Z.hashId=Te;function en(t){this.la=t,this.na=t.Ia,this.ra=null}en.prototype.reset=function(){this.na=this.la.Ia,this.ra=null},en.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=this.key=t=e.key,!0):(this.Xd(),!1)},en.prototype.ud=function(){return this.next()},en.prototype.first=function(){var t=this.la;return this.na=t.Ia,t=t.ea,t!==null?(this.ra=t,this.value=this.key=t=t.key):null},en.prototype.any=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;){if(t(e.key))return!0;e=e.ta}return!1},en.prototype.all=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;){if(!t(e.key))return!1;e=e.ta}return!0},en.prototype.each=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;)t(e.key),e=e.ta;return this},en.prototype.map=function(t){var e=this.la;this.ra=null;var n=new tt;for(e=e.ea;e!==null;)n.add(t(e.key)),e=e.ta;return n.iterator},en.prototype.filter=function(t){var e=this.la;this.ra=null;var n=new tt;for(e=e.ea;e!==null;){var i=e.key;t(i)&&n.add(i),e=e.ta}return n.iterator},en.prototype.Xd=function(){this.value=this.key=null,this.na=-1},en.prototype.toString=function(){return this.ra!==null?"MapKeySetIterator@"+this.ra.value:"MapKeySetIterator"},I.Object.defineProperties(en.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),en.prototype.first=en.prototype.first,en.prototype.hasNext=en.prototype.ud,en.prototype.next=en.prototype.next,en.prototype.reset=en.prototype.reset,en.className="MapKeySetIterator";function ie(t){Z.call(this),Oe(this),this._isFrozen=!0,this.la=t}O(ie,Z),l=ie.prototype,l.freeze=function(){return this},l.ja=function(){return this},l.toString=function(){return"MapKeySet("+this.la.toString()+")"},l.add=function(){B("This Set is read-only: "+this.toString())},l.contains=function(t){return this.la.contains(t)},l.has=function(t){return this.contains(t)},l.remove=function(){B("This Set is read-only: "+this.toString())},l.delete=function(t){return this.remove(t)},l.clear=function(){B("This Set is read-only: "+this.toString())},l.first=function(){var t=this.la.ea;return t!==null?t.key:null},ie.prototype.any=function(t){for(var e=this.la.ea;e!==null;){if(t(e.key))return!0;e=e.ta}return!1},ie.prototype.all=function(t){for(var e=this.la.ea;e!==null;){if(!t(e.key))return!1;e=e.ta}return!0},ie.prototype.each=function(t){for(var e=this.la.ea;e!==null;)t(e.key),e=e.ta;return this},ie.prototype.map=function(t){for(var e=new Z,n=this.la.ea;n!==null;)e.add(t(n.key)),n=n.ta;return e},ie.prototype.filter=function(t){for(var e=new Z,n=this.la.ea;n!==null;){var i=n.key;t(i)&&e.add(i),n=n.ta}return e},ie.prototype.copy=function(){return new ie(this.la)},ie.prototype.lv=function(){var t=new Z,e=this.la.Pb,n;for(n in e)t.add(e[n].key);return t},ie.prototype.Ea=function(){var t=this.la.Pb,e=Array(this.la.Ob),n=0,i;for(i in t)e[n]=t[i].key,n++;return e},ie.prototype.kv=function(){var t=new tt,e=this.la.Pb,n;for(n in e)t.add(e[n].key);return t},I.Object.defineProperties(ie.prototype,{count:{get:function(){return this.la.Ob}},size:{get:function(){return this.la.Ob}},iterator:{get:function(){return 0>=this.la.Ob?Ui:new en(this.la)}}}),ie.prototype.toList=ie.prototype.kv,ie.prototype.toArray=ie.prototype.Ea,ie.prototype.toSet=ie.prototype.lv,ie.prototype.first=ie.prototype.first,ie.prototype.clear=ie.prototype.clear,ie.prototype.delete=ie.prototype.delete,ie.prototype.remove=ie.prototype.remove,ie.prototype.has=ie.prototype.has,ie.prototype.contains=ie.prototype.contains,ie.prototype.add=ie.prototype.add,ie.prototype.thaw=ie.prototype.ja,ie.prototype.freeze=ie.prototype.freeze,ie.className="MapKeySet";function pn(t){this.la=t,t.Xe=null,this.na=t.Ia,this.ra=null}pn.prototype.reset=function(){var t=this.la;t.Xe=null,this.na=t.Ia,this.ra=null},pn.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},pn.prototype.ud=function(){return this.next()},pn.prototype.first=function(){var t=this.la;if(this.na=t.Ia,t=t.ea,t!==null){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},pn.prototype.any=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},pn.prototype.all=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},pn.prototype.each=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;e!==null;)t(e.value),e=e.ta;return this},pn.prototype.map=function(t){var e=this.la;this.ra=e.Xe=null;var n=new tt;for(e=e.ea;e!==null;)n.add(t(e.value)),e=e.ta;return n.iterator},pn.prototype.filter=function(t){var e=this.la;this.ra=e.Xe=null;var n=new tt;for(e=e.ea;e!==null;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},pn.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Xe=this},pn.prototype.toString=function(){return this.ra!==null?"MapValueSetIterator@"+this.ra.value:"MapValueSetIterator"},I.Object.defineProperties(pn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),pn.prototype.first=pn.prototype.first,pn.prototype.hasNext=pn.prototype.ud,pn.prototype.next=pn.prototype.next,pn.prototype.reset=pn.prototype.reset,pn.className="MapValueSetIterator";function Wu(t,e){this.key=t,this.value=e,this.al=this.ta=null}Wu.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Wu.className="KeyValuePair";function mn(t){this.la=t,t.Pa=null,this.na=t.Ia,this.ra=null}mn.prototype.reset=function(){var t=this.la;t.Pa=null,this.na=t.Ia,this.ra=null},mn.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.key=e.key,this.value=e.value,!0):(this.Xd(),!1)},mn.prototype.ud=function(){return this.next()},mn.prototype.first=function(){var t=this.la;return this.na=t.Ia,t=t.ea,t!==null?(this.ra=t,this.key=t.key,this.value=t.value,t):null},mn.prototype.any=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(t(e))return!0;e=e.ta}return!1},mn.prototype.all=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(!t(e))return!1;e=e.ta}return!0},mn.prototype.each=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;)t(e),e=e.ta;return this},mn.prototype.map=function(t){var e=this.la;this.ra=e.Pa=null;var n=new tt;for(e=e.ea;e!==null;)n.add(t(e)),e=e.ta;return n.iterator},mn.prototype.filter=function(t){var e=this.la;this.ra=e.Pa=null;var n=new tt;for(e=e.ea;e!==null;)t(e)&&n.add(e),e=e.ta;return n.iterator},mn.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Pa=this},mn.prototype.toString=function(){return this.ra!==null?"MapIterator@"+this.ra:"MapIterator"},I.Object.defineProperties(mn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),mn.prototype.first=mn.prototype.first,mn.prototype.hasNext=mn.prototype.ud,mn.prototype.next=mn.prototype.next,mn.prototype.reset=mn.prototype.reset,mn.className="MapIterator";function ct(t){Oe(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Xe=this.Pa=null,this.Ia=0,this.Ye=this.ea=null,typeof t=="string"&&B("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}l=ct.prototype,l.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return this._isFrozen=!1,this},l.toString=function(){return"Map()#"+Te(this)},l.add=function(t,e){this._isFrozen&&ot(this,t);var n=t;mt(t)&&(n=ba(t));var i=this.Pb[n];return i===void 0?(this.Ob++,t=new Wu(t,e),this.Pb[n]=t,n=this.Ye,n===null?this.ea=t:(t.al=n,n.ta=t),this.Ye=t,this.sb()):i.value=e,this},l.set=function(t,e){return this.add(t,e)},l.addAll=function(t){if(t===null)return this;if(Ut(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof ct)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},l.first=function(){return this.ea},ct.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e))return!0;e=e.ta}return!1},ct.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e))return!1;e=e.ta}return!0},ct.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e),e=e.ta;return this},ct.prototype.map=function(t){for(var e=new ct,n=this.ea;n!==null;)e.add(n.key,t(n)),n=n.ta;return e},ct.prototype.filter=function(t){for(var e=new ct,n=this.ea;n!==null;)t(n)&&e.add(n.key,n.value),n=n.ta;return e},l=ct.prototype,l.contains=function(t){var e=t;return mt(t)&&(e=Te(t),e===void 0)?!1:this.Pb[e]!==void 0},l.has=function(t){return this.contains(t)},l.I=function(t){var e=t;return mt(t)&&(e=Te(t),e===void 0)?null:(t=this.Pb[e],t===void 0?null:t.value)},l.get=function(t){return this.I(t)},l.remove=function(t){if(t===null)return!1;this._isFrozen&&ot(this,t);var e=t;if(mt(t)&&(e=Te(t),e===void 0)||(t=this.Pb[e],t===void 0))return!1;var n=t.ta,i=t.al;return n!==null&&(n.al=i),i!==null&&(i.ta=n),this.ea===t&&(this.ea=n),this.Ye===t&&(this.Ye=i),delete this.Pb[e],this.Ob--,this.sb(),!0},l.delete=function(t){return this.remove(t)},l.clear=function(){this._isFrozen&&ot(this),this.Pb={},this.Ob=0,this.Pa!==null&&this.Pa.reset(),this.Xe!==null&&this.Xe.reset(),this.Ye=this.ea=null,this.sb()},ct.prototype.copy=function(){var t=new ct,e=this.Pb,n;for(n in e){var i=e[n];t.add(i.key,i.value)}return t},ct.prototype.Ea=function(){var t=this.Pb,e=Array(this.Ob),n=0,i;for(i in t){var r=t[i];e[n]=new Wu(r.key,r.value),n++}return e},ct.prototype.Cf=function(){return new ie(this)},I.Object.defineProperties(ct.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.count)return Ui;var t=this.Pa;return t!==null?(t.reset(),t):new mn(this)}},iteratorKeys:{get:function(){return 0>=this.count?Ui:new en(this)}},iteratorValues:{get:function(){if(0>=this.count)return Ui;var t=this.Xe;return t!==null?(t.reset(),t):new pn(this)}}}),ct.prototype.toKeySet=ct.prototype.Cf,ct.prototype.toArray=ct.prototype.Ea,ct.prototype.clear=ct.prototype.clear,ct.prototype.delete=ct.prototype.delete,ct.prototype.remove=ct.prototype.remove,ct.prototype.get=ct.prototype.get,ct.prototype.getValue=ct.prototype.I,ct.prototype.has=ct.prototype.has,ct.prototype.contains=ct.prototype.contains,ct.prototype.first=ct.prototype.first,ct.prototype.addAll=ct.prototype.addAll,ct.prototype.set=ct.prototype.set,ct.prototype.add=ct.prototype.add,ct.prototype.thaw=ct.prototype.ja,ct.prototype.freeze=ct.prototype.freeze,ct.className="Map";function C(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):B("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}var dr,zm,Bm,Gm,sf;C.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},C.prototype.h=function(t,e){return this.x=t,this.y=e,this},C.prototype.kg=function(t,e){return this.x=t,this.y=e,this},C.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},C.prototype.copy=function(){var t=new C;return t.x=this.x,t.y=this.y,t},l=C.prototype,l.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},l.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this};function uP(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;return(i=t[e++])&&(r=parseFloat(i)),new C(n,r)}return new C}function gP(t){return t.x.toString()+" "+t.y.toString()}l.toString=function(){return"Point("+this.x+","+this.y+")"},l.C=function(t){return t instanceof C?this.x===t.x&&this.y===t.y:!1},l.bi=function(t,e){return this.x===t&&this.y===e},l.$a=function(t){return A.B(this.x,t.x)&&A.B(this.y,t.y)},l.add=function(t){return this.x+=t.x,this.y+=t.y,this},l.je=function(t){return this.x-=t.x,this.y-=t.y,this},l.offset=function(t,e){return this.x+=t,this.y+=e,this},C.prototype.rotate=function(t){if(t===0)return this;var e=this.x,n=this.y;if(e===0&&n===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var i=1}else t===180?(t=-1,i=0):t===270?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.x=t*e-i*n,this.y=i*e+t*n,this},l=C.prototype,l.scale=function(t,e){return this.x*=t,this.y*=e,this},l.rf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},l.td=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},l.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},l.Ya=function(t){return dP(t.x-this.x,t.y-this.y)},l.direction=function(t,e){return dP(t-this.x,e-this.y)};function dP(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}l.yy=function(t,e){return A.sl(t.x,t.y,e.x,e.y,this.x,this.y)},l.Mz=function(t,e,n,i){return A.fh(t,e,n,i,this.x,this.y,this),this},l.Nz=function(t,e){return A.fh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},l.aA=function(t,e,n,i){return A.so(this.x,this.y,t,e,n,i,this),this},l.bA=function(t,e){return A.so(this.x,this.y,t.x,t.y,e.width,e.height,this),this},l.oi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},l.pi=function(t,e,n,i,r){return this.x=t+r.x*n+r.offsetX,this.y=e+r.y*i+r.offsetY,this},l.transform=function(t){return t.Fa(this),this};function yn(t,e){return e.Ld(t),t}function vn(t,e,n,i,r,a){var h=r-n,g=a-i,f=h*h+g*g;n-=t,i-=e;var c=-n*h-i*g;return 0>=c||c>=f?(h=r-t,g=a-e,Math.min(n*n+i*i,h*h+g*g)):(t=h*i-g*n,t*t/f)}function fr(t,e,n,i){return t=n-t,e=i-e,t*t+e*e}function Rm(t,e,n,i){return t=n-t,e=i-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}l.v=function(){return isFinite(this.x)&&isFinite(this.y)},C.alloc=function(){var t=Vm.pop();return t===void 0?new C:t},C.allocAt=function(t,e){var n=Vm.pop();return n===void 0?new C(t,e):(n.x=t,n.y=e,n)},C.free=function(t){Vm.push(t)},C.prototype.isReal=C.prototype.v,C.prototype.setSpot=C.prototype.pi,C.prototype.setRectSpot=C.prototype.oi,C.prototype.snapToGridPoint=C.prototype.bA,C.prototype.snapToGrid=C.prototype.aA,C.prototype.projectOntoLineSegmentPoint=C.prototype.Nz,C.prototype.projectOntoLineSegment=C.prototype.Mz,C.intersectingLineSegments=function(t,e,n,i,r,a,h,g){return A.zl(t,e,n,i,r,a,h,g)},C.prototype.compareWithLineSegmentPoint=C.prototype.yy,C.compareWithLineSegment=function(t,e,n,i,r,a){return A.sl(t,e,n,i,r,a)},C.prototype.direction=C.prototype.direction,C.prototype.directionPoint=C.prototype.Ya,C.prototype.normalize=C.prototype.normalize,C.prototype.distanceSquared=C.prototype.td,C.prototype.distanceSquaredPoint=C.prototype.rf,C.prototype.scale=C.prototype.scale,C.prototype.rotate=C.prototype.rotate,C.prototype.offset=C.prototype.offset,C.prototype.subtract=C.prototype.je,C.prototype.add=C.prototype.add,C.prototype.equalsApprox=C.prototype.$a,C.prototype.equalTo=C.prototype.bi,C.prototype.equals=C.prototype.C,C.prototype.set=C.prototype.set,C.prototype.setTo=C.prototype.kg;var Vm=[];C.className="Point",C.parse=uP,C.stringify=gP,C.distanceLineSegmentSquared=vn,C.distanceSquared=fr,C.direction=Rm,C.Origin=dr=new C(0,0).ha(),C.InfiniteTopLeft=zm=new C(-1/0,-1/0).ha(),C.InfiniteBottomRight=Bm=new C(1/0,1/0).ha(),C.SixPoint=Gm=new C(6,6).ha(),C.NoPoint=sf=new C(NaN,NaN).ha(),C.parse=uP,C.stringify=gP,C.distanceLineSegmentSquared=vn,C.distanceSquared=fr,C.direction=Rm;function dt(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):B("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}var tl,af,Ym,el,fP,Um,lf;dt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},dt.prototype.h=function(t,e){return this.width=t,this.height=e,this},dt.prototype.kg=function(t,e){return this.width=t,this.height=e,this},dt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},dt.prototype.copy=function(){var t=new dt;return t.width=this.width,t.height=this.height,t},l=dt.prototype,l.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},l.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this};function cP(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;return(i=t[e++])&&(r=parseFloat(i)),new dt(n,r)}return new dt}function pP(t){return t.width.toString()+" "+t.height.toString()}l.toString=function(){return"Size("+this.width+","+this.height+")"},l.C=function(t){return t instanceof dt?this.width===t.width&&this.height===t.height:!1},l.bi=function(t,e){return this.width===t&&this.height===e},l.$a=function(t){return A.B(this.width,t.width)&&A.B(this.height,t.height)},l.vc=function(t,e){return t=this.width+t,this.width=0<=t?t:0,e=this.height+e,this.height=0<=e?e:0,this},l.v=function(){return isFinite(this.width)&&isFinite(this.height)},dt.alloc=function(){var t=mP.pop();return t===void 0?new dt:t},dt.free=function(t){mP.push(t)},dt.prototype.isReal=dt.prototype.v,dt.prototype.inflate=dt.prototype.vc,dt.prototype.equalsApprox=dt.prototype.$a,dt.prototype.equalTo=dt.prototype.bi,dt.prototype.equals=dt.prototype.C,dt.prototype.set=dt.prototype.set,dt.prototype.setTo=dt.prototype.kg;var mP=[];dt.className="Size",dt.parse=cP,dt.stringify=pP,dt.ZeroSize=tl=new dt(0,0).ha(),dt.OneSize=af=new dt(1,1).ha(),dt.SixSize=Ym=new dt(6,6).ha(),dt.EightSize=el=new dt(8,8).ha(),dt.TenSize=fP=new dt(10,10).ha(),dt.InfiniteSize=Um=new dt(1/0,1/0).ha(),dt.NoSize=lf=new dt(NaN,NaN).ha(),dt.parse=cP,dt.stringify=pP;function G(t,e,n,i){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof n=="number"&&(0<=n||isNaN(n))&&typeof i=="number"&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):t instanceof C?(n=t.x,t=t.y,e instanceof C?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof dt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):B("Incorrect second argument supplied to Rect constructor "+e)):B("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}l=G.prototype,l.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},l.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this};function cr(t,e,n){t.width=e,t.height=n}l.kg=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},l.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},l.Wc=function(t){return this.x=t.x,this.y=t.y,this},l.$z=function(t){return this.width=t.width,this.height=t.height,this},G.prototype.copy=function(){var t=new G;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},l=G.prototype,l.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},l.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this};function yP(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;(i=t[e++])&&(r=parseFloat(i));for(var a=0;t[e]==="";)e++;(i=t[e++])&&(a=parseFloat(i));for(var h=0;t[e]==="";)e++;return(i=t[e++])&&(h=parseFloat(i)),new G(n,r,a,h)}return new G}function vP(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}l.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},l.C=function(t){return t instanceof G?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},l.bi=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},l.$a=function(t){return A.B(this.x,t.x)&&A.B(this.y,t.y)&&A.B(this.width,t.width)&&A.B(this.height,t.height)};function Xm(t,e){return A.ca(t.x,e.x)&&A.ca(t.y,e.y)&&A.ca(t.width,e.width)&&A.ca(t.height,e.height)}l.ba=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},l.Ee=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},l.contains=function(t,e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},l.offset=function(t,e){return this.x+=t,this.y+=e,this},l.vc=function(t,e){return hf(this,e,t,e,t)},l.fo=function(t){return hf(this,t.top,t.right,t.bottom,t.left)},l.jv=function(t){return hf(this,-t.top,-t.right,-t.bottom,-t.left)},l.oz=function(t,e,n,i){return hf(this,t,e,n,i)};function hf(t,e,n,i,r){var a=t.width;return n+r<=-a?(t.x+=a/2,t.width=0):(t.x-=r,t.width+=n+r),n=t.height,e+i<=-n?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}l.ix=function(t){return SP(this,t.x,t.y,t.width,t.height)},l.Gu=function(t,e,n,i){return SP(this,t,e,n,i)};function SP(t,e,n,i,r){var a=Math.max(t.x,e),h=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+r),t.x=a,t.y=h,t.width=Math.max(0,e-a),t.height=Math.max(0,n-h),t}l.Sc=function(t){return this.Hu(t.x,t.y,t.width,t.height)},l.Hu=function(t,e,n,i){var r=this.width,a=this.x;return r!==1/0&&n!==1/0&&(r+=a,n+=t,isNaN(n)||isNaN(r)||a>n||t>r)?!1:(t=this.height,n=this.y,!(t!==1/0&&i!==1/0&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))};function PP(t,e){var n=t.width,i=t.x,r=e.x-10;return i>e.width+10+10+r||r>n+i?!1:(n=t.height,t=t.y,i=e.y-10,!(t>e.height+10+10+i||i>n+t))}l.Me=function(t){return Ve(this,t.x,t.y,0,0)},l.Xc=function(t){return Ve(this,t.x,t.y,t.width,t.height)},l.nv=function(t,e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),Ve(this,t,e,n,i)};function Ve(t,e,n,i,r){var a=Math.min(t.x,e),h=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+r),t.x=a,t.y=h,t.width=e-a,t.height=n-h,t}l.pi=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this};function oo(t,e,n,i,r,a,h,g){return h===void 0&&(h=0),g===void 0&&(g=0),t<=r&&r+h<=t+n&&e<=a&&a+g<=e+i}function xP(t,e,n,i,r,a,h,g){return t>h+r||r>n+t?!1:!(e>g+a||a>i+e)}l.v=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},l.vz=function(){return this.width===0&&this.height===0},G.alloc=function(){var t=_m.pop();return t===void 0?new G:t},G.allocAt=function(t,e,n,i){var r=_m.pop();return r===void 0?new G(t,e,n,i):r.h(t,e,n,i)},G.free=function(t){_m.push(t)},I.Object.defineProperties(G.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new C(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new dt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new C(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),G.prototype.isEmpty=G.prototype.vz,G.prototype.isReal=G.prototype.v,G.intersectsLineSegment=function(t,e,n,i,r,a,h,g){return A.jx(t,e,n,i,r,a,h,g)},G.prototype.setSpot=G.prototype.pi,G.prototype.union=G.prototype.nv,G.prototype.unionRect=G.prototype.Xc,G.prototype.unionPoint=G.prototype.Me,G.prototype.intersects=G.prototype.Hu,G.prototype.intersectsRect=G.prototype.Sc,G.prototype.intersect=G.prototype.Gu,G.prototype.intersectRect=G.prototype.ix,G.prototype.grow=G.prototype.oz,G.prototype.subtractMargin=G.prototype.jv,G.prototype.addMargin=G.prototype.fo,G.prototype.inflate=G.prototype.vc,G.prototype.offset=G.prototype.offset,G.prototype.contains=G.prototype.contains,G.prototype.containsRect=G.prototype.Ee,G.prototype.containsPoint=G.prototype.ba,G.prototype.equalsApprox=G.prototype.$a,G.prototype.equalTo=G.prototype.bi,G.prototype.equals=G.prototype.C,G.prototype.setSize=G.prototype.$z,G.prototype.setPoint=G.prototype.Wc,G.prototype.set=G.prototype.set,G.prototype.setTo=G.prototype.kg;var uf=null,wP=null,_m=[];G.className="Rect",G.parse=yP,G.stringify=vP,G.contains=oo,G.intersects=xP,G.ZeroRect=uf=new G(0,0,0,0).ha(),G.NoRect=wP=new G(NaN,NaN,NaN,NaN).ha(),G.parse=yP,G.stringify=vP,G.contains=oo,G.intersects=xP;function At(t,e,n,i){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:n===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):i!==void 0?(this.top=t,this.right=e,this.bottom=n,this.left=i):B("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}At.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},At.prototype.kg=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},At.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},At.prototype.copy=function(){var t=new At;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},l=At.prototype,l.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},l.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this};function LP(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=NaN;t[e]==="";)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new At;for(var r=NaN;t[e]==="";)e++;if((i=t[e++])&&(r=parseFloat(i)),isNaN(r))return new At(n);for(var a=NaN;t[e]==="";)e++;if((i=t[e++])&&(a=parseFloat(i)),isNaN(a))return new At(n,r);for(var h=NaN;t[e]==="";)e++;return(i=t[e++])&&(h=parseFloat(i)),isNaN(h)?new At(n,r):new At(n,r,a,h)}return new At}function MP(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}l.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},l.C=function(t){return t instanceof At?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},l.bi=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},l.$a=function(t){return A.B(this.top,t.top)&&A.B(this.right,t.right)&&A.B(this.bottom,t.bottom)&&A.B(this.left,t.left)},l.v=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},At.alloc=function(){var t=kP.pop();return t===void 0?new At:t},At.free=function(t){kP.push(t)},At.prototype.isReal=At.prototype.v,At.prototype.equalsApprox=At.prototype.$a,At.prototype.equalTo=At.prototype.bi,At.prototype.equals=At.prototype.C,At.prototype.set=At.prototype.set,At.prototype.setTo=At.prototype.kg;var oh=null,Km=null,kP=[];At.className="Margin",At.parse=LP,At.stringify=MP,At.ZeroMargin=oh=new At(0,0,0,0).ha(),At.TwoMargin=Km=new At(2,2,2,2).ha(),At.parse=LP,At.stringify=MP;function ht(t,e,n,i){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this._isFrozen=!1}var $e,nn,pr,rh,$u,Gt,Ju,sh,nl,Xo,ah,lh,hh,uh,Hm,Wm,$m,Jm,Zm,Qm,qm,bm,t0,e0,n0,Je,NP,CP,gf,TP,ki,Ni,Wn,Ci,i0,o0;ht.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ht.prototype.kg=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},ht.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ht.prototype.copy=function(){var t=new ht;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},l=ht.prototype,l.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},l.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this};function gi(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function r0(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return $e;if(t==="TopLeft")return nn;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return pr;if(t==="TopRight")return rh;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return $u;if(t==="Center")return Gt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return Ju;if(t==="BottomLeft")return sh;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return nl;if(t==="BottomRight")return Xo;if(t==="TopSide")return ah;if(t==="LeftSide")return lh;if(t==="RightSide")return hh;if(t==="BottomSide")return uh;if(t==="TopBottomSides")return Hm;if(t==="LeftRightSides")return Wm;if(t==="TopLeftSides")return $m;if(t==="TopRightSides")return Jm;if(t==="BottomLeftSides")return Zm;if(t==="BottomRightSides")return Qm;if(t==="NotTopSide")return qm;if(t==="NotLeftSide")return bm;if(t==="NotRightSide")return t0;if(t==="NotBottomSide")return e0;if(t==="AllSides")return n0;if(t==="Default")return Je;t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i!==void 0&&0<i.length&&(n=parseFloat(i));for(var r=0;t[e]==="";)e++;i=t[e++],i!==void 0&&0<i.length&&(r=parseFloat(i));for(var a=0;t[e]==="";)e++;i=t[e++],i!==void 0&&0<i.length&&(a=parseFloat(i));for(var h=0;t[e]==="";)e++;return i=t[e++],i!==void 0&&0<i.length&&(h=parseFloat(i)),new ht(n,r,a,h)}return new ht}function FP(t){return t.pb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}l.toString=function(){return this.pb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.C($e)?"None":this.C(nn)?"TopLeft":this.C(pr)?"Top":this.C(rh)?"TopRight":this.C($u)?"Left":this.C(Gt)?"Center":this.C(Ju)?"Right":this.C(sh)?"BottomLeft":this.C(nl)?"Bottom":this.C(Xo)?"BottomRight":this.C(ah)?"TopSide":this.C(lh)?"LeftSide":this.C(hh)?"RightSide":this.C(uh)?"BottomSide":this.C(Hm)?"TopBottomSides":this.C(Wm)?"LeftRightSides":this.C($m)?"TopLeftSides":this.C(Jm)?"TopRightSides":this.C(Zm)?"BottomLeftSides":this.C(Qm)?"BottomRightSides":this.C(qm)?"NotTopSide":this.C(bm)?"NotLeftSide":this.C(t0)?"NotRightSide":this.C(e0)?"NotBottomSide":this.C(n0)?"AllSides":this.C(Je)?"Default":"None"},l.C=function(t){return t instanceof ht?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},l.Qu=function(){return new ht(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},l.xf=function(t){if(!this.Uc())return!1;if(!t.Uc())if(t.C(NP))t=lh;else if(t.C(CP))t=hh;else if(t.C(gf))t=ah;else if(t.C(TP))t=uh;else return!1;return t=t.offsetY,(this.offsetY&t)===t},l.pb=function(){return!isNaN(this.x)&&!isNaN(this.y)},l.Fc=function(){return isNaN(this.x)||isNaN(this.y)},l.Uc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},l.Wr=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},l.Sb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},ht.alloc=function(){var t=DP.pop();return t===void 0?new ht:t},ht.free=function(t){DP.push(t)},ht.prototype.isDefault=ht.prototype.Sb,ht.prototype.isNone=ht.prototype.Wr,ht.prototype.isSide=ht.prototype.Uc,ht.prototype.isNoSpot=ht.prototype.Fc,ht.prototype.isSpot=ht.prototype.pb,ht.prototype.includesSide=ht.prototype.xf,ht.prototype.opposite=ht.prototype.Qu,ht.prototype.equals=ht.prototype.C,ht.prototype.set=ht.prototype.set,ht.prototype.setTo=ht.prototype.kg;var DP=[];ht.className="Spot",ht.parse=r0,ht.stringify=FP,ht.None=$e=gi(new ht(0,0,0,0),0).ha(),ht.Default=Je=gi(new ht(0,0,-1,0),-1).ha(),ht.TopLeft=nn=new ht(0,0,0,0).ha(),ht.TopCenter=pr=new ht(.5,0,0,0).ha(),ht.TopRight=rh=new ht(1,0,0,0).ha(),ht.LeftCenter=$u=new ht(0,.5,0,0).ha(),ht.Center=Gt=new ht(.5,.5,0,0).ha(),ht.RightCenter=Ju=new ht(1,.5,0,0).ha(),ht.BottomLeft=sh=new ht(0,1,0,0).ha(),ht.BottomCenter=nl=new ht(.5,1,0,0).ha(),ht.BottomRight=Xo=new ht(1,1,0,0).ha(),ht.MiddleTop=ki=pr,ht.MiddleLeft=Ni=$u,ht.MiddleRight=Wn=Ju,ht.MiddleBottom=Ci=nl,ht.Top=gf=pr,ht.Left=NP=$u,ht.Right=CP=Ju,ht.Bottom=TP=nl,ht.TopSide=ah=gi(new ht(0,0,1,1),1).ha(),ht.LeftSide=lh=gi(new ht(0,0,1,2),1).ha(),ht.RightSide=hh=gi(new ht(0,0,1,4),1).ha(),ht.BottomSide=uh=gi(new ht(0,0,1,8),1).ha(),ht.TopBottomSides=Hm=gi(new ht(0,0,1,9),1).ha(),ht.LeftRightSides=Wm=gi(new ht(0,0,1,6),1).ha(),ht.TopLeftSides=$m=gi(new ht(0,0,1,3),1).ha(),ht.TopRightSides=Jm=gi(new ht(0,0,1,5),1).ha(),ht.BottomLeftSides=Zm=gi(new ht(0,0,1,10),1).ha(),ht.BottomRightSides=Qm=gi(new ht(0,0,1,12),1).ha(),ht.NotTopSide=qm=gi(new ht(0,0,1,14),1).ha(),ht.NotLeftSide=bm=gi(new ht(0,0,1,13),1).ha(),ht.NotRightSide=t0=gi(new ht(0,0,1,11),1).ha(),ht.NotBottomSide=e0=gi(new ht(0,0,1,7),1).ha(),ht.AllSides=n0=gi(new ht(0,0,1,15),1).ha(),i0=new ht(.156,.156).ha(),o0=new ht(.844,.844).ha(),ht.parse=r0,ht.stringify=FP;function xt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}xt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},xt.prototype.setTransform=function(t,e,n,i,r,a){return this.m11=t,this.m12=e,this.m21=n,this.m22=i,this.dx=r,this.dy=a,this},xt.prototype.copy=function(){var t=new xt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},xt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},xt.prototype.C=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},xt.prototype.Ur=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},xt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},xt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=r,this},xt.prototype.Ou=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,r=-t.m21*e,a=t.m11*e,h=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*r+this.m21*a,r=this.m12*r+this.m22*a,this.dx=this.m11*h+this.m21*t+this.dx,this.dy=this.m12*h+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=r,this},xt.prototype.Tr=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),a=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=r,this.dy=a,this},xt.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,n),t===90){t=0;var i=1}else t===180?(t=-1,i=0):t===270?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var r=this.m12*t+this.m22*i,a=this.m11*-i+this.m21*t,h=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=r,this.m21=a,this.m22=h,this.translate(-e,-n),this},l=xt.prototype,l.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},l.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},l.Fa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},l.Ld=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},l.Fw=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,i=1.2*t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},l.So=function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=this.m11,h=this.m12,g=this.m21,f=this.m22,c=this.dx,m=this.dy,y=e*a+n*g+c,S=e*h+n*f+m,x=i*a+n*g+c,P=i*h+n*f+m;return n=e*a+r*g+c,e=e*h+r*f+m,a=i*a+r*g+c,i=i*h+r*f+m,r=Math.min(y,x),y=Math.max(y,x),x=Math.min(S,P),S=Math.max(S,P),r=Math.min(r,n),y=Math.max(y,n),x=Math.min(x,e),S=Math.max(S,e),r=Math.min(r,a),y=Math.max(y,a),x=Math.min(x,i),S=Math.max(S,i),t.h(r,x,y-r,S-x),t},xt.alloc=function(){var t=jP.pop();return t===void 0?new xt:t},xt.free=function(t){jP.push(t)},xt.prototype.transformRect=xt.prototype.So,xt.prototype.transformPoint=xt.prototype.Fa,xt.prototype.scale=xt.prototype.scale,xt.prototype.translate=xt.prototype.translate,xt.prototype.rotate=xt.prototype.rotate,xt.prototype.invert=xt.prototype.Tr,xt.prototype.multiplyInverted=xt.prototype.Ou,xt.prototype.multiply=xt.prototype.multiply,xt.prototype.reset=xt.prototype.reset,xt.prototype.isIdentity=xt.prototype.Ur,xt.prototype.equals=xt.prototype.C,xt.prototype.setTransform=xt.prototype.setTransform,xt.prototype.set=xt.prototype.set;var jP=[];xt.className="Transform",xt.xF="54a702f3e53909c447824c6706603faf4c";var A={jA:"7da71ca0ad381e90",ng:(Math.sqrt(2)-1)/3*4,yv:null,sqrt:function(t){if(0>=t)return 0;var e=A.yv;if(e===null){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);A.yv=e}return 1>t?(n=1/t,2e3>=n?1/e[n|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},B:function(t,e){return t-=e,.5>t&&-.5<t},ca:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Tb:function(t,e,n,i,r,a,h){if(0>=r&&(r=1e-6),t<n)var g=t,f=n;else g=n,f=t;if(e<i)var c=e,m=i;else c=i,m=e;if(t===n)return c<=h&&h<=m&&t-r<=a&&a<=t+r;if(e===i)return g<=a&&a<=f&&e-r<=h&&h<=e+r;if(f+=r,g-=r,g<=a&&a<=f&&(m+=r,c-=r,c<=h&&h<=m))if(f-g>m-c)if(t-n>r||n-t>r){if(a=(i-e)/(n-t)*(a-t)+e,a-r<=h&&h<=a+r)return!0}else return!0;else if(e-i>r||i-e>r){if(h=(n-t)/(i-e)*(h-e)+t,h-r<=a&&a<=h+r)return!0}else return!0;return!1},Br:function(t,e,n,i,r,a,h,g,f,c,m,y){if(A.Tb(t,e,h,g,y,n,i)&&A.Tb(t,e,h,g,y,r,a))return A.Tb(t,e,h,g,y,c,m);var S=(t+n)/2,x=(e+i)/2,P=(n+r)/2,L=(i+a)/2;r=(r+h)/2,a=(a+g)/2,i=(S+P)/2,n=(x+L)/2,P=(P+r)/2,L=(L+a)/2;var N=(i+P)/2,k=(n+L)/2;return A.Br(t,e,S,x,i,n,N,k,f,c,m,y)||A.Br(N,k,P,L,r,a,h,g,f,c,m,y)},Gw:function(t,e,n,i,r,a,h,g,f){var c=(n+r)/2,m=(i+a)/2;return f.h((((t+n)/2+c)/2+(c+(r+h)/2)/2)/2,(((e+i)/2+m)/2+(m+(a+g)/2)/2)/2),f},ty:function(t,e,n,i,r,a,h,g){var f=(n+r)/2,c=(i+a)/2;return Rm(((t+n)/2+f)/2,((e+i)/2+c)/2,(f+(r+h)/2)/2,(c+(a+g)/2)/2)},ql:function(t,e,n,i,r,a,h,g,f,c){if(A.Tb(t,e,h,g,f,n,i)&&A.Tb(t,e,h,g,f,r,a))Ve(c,t,e,0,0),Ve(c,h,g,0,0);else{var m=(t+n)/2,y=(e+i)/2,S=(n+r)/2,x=(i+a)/2;r=(r+h)/2,a=(a+g)/2,i=(m+S)/2,n=(y+x)/2,S=(S+r)/2,x=(x+a)/2;var P=(i+S)/2,L=(n+x)/2;A.ql(t,e,m,y,i,n,P,L,f,c),A.ql(P,L,S,x,r,a,h,g,f,c)}return c},De:function(t,e,n,i,r,a,h,g,f,c){if(A.Tb(t,e,h,g,f,n,i)&&A.Tb(t,e,h,g,f,r,a))c.length===0&&(c.push(t),c.push(e)),c.push(h),c.push(g);else{var m=(t+n)/2,y=(e+i)/2,S=(n+r)/2,x=(i+a)/2;r=(r+h)/2,a=(a+g)/2,i=(m+S)/2,n=(y+x)/2,S=(S+r)/2,x=(x+a)/2;var P=(i+S)/2,L=(n+x)/2;A.De(t,e,m,y,i,n,P,L,f,c),A.De(P,L,S,x,r,a,h,g,f,c)}return c},Tu:function(t,e,n,i,r,a,h,g,f,c){if(A.Tb(t,e,r,a,c,n,i))return A.Tb(t,e,r,a,c,g,f);var m=(t+n)/2,y=(e+i)/2;n=(n+r)/2,i=(i+a)/2;var S=(m+n)/2,x=(y+i)/2;return A.Tu(t,e,m,y,S,x,h,g,f,c)||A.Tu(S,x,n,i,r,a,h,g,f,c)},yA:function(t,e,n,i,r,a,h){return h.h(((t+n)/2+(n+r)/2)/2,((e+i)/2+(i+a)/2)/2),h},Su:function(t,e,n,i,r,a,h,g){if(A.Tb(t,e,r,a,h,n,i))Ve(g,t,e,0,0),Ve(g,r,a,0,0);else{var f=(t+n)/2,c=(e+i)/2;n=(n+r)/2,i=(i+a)/2;var m=(f+n)/2,y=(c+i)/2;A.Su(t,e,f,c,m,y,h,g),A.Su(m,y,n,i,r,a,h,g)}return g},Go:function(t,e,n,i,r,a,h,g){if(A.Tb(t,e,r,a,h,n,i))g.length===0&&(g.push(t),g.push(e)),g.push(r),g.push(a);else{var f=(t+n)/2,c=(e+i)/2;n=(n+r)/2,i=(i+a)/2;var m=(f+n)/2,y=(c+i)/2;A.Go(t,e,f,c,m,y,h,g),A.Go(m,y,n,i,r,a,h,g)}return g},io:function(t,e,n,i,r,a,h,g,f,c,m,y,S,x){if(A.Tb(t,e,h,g,S,n,i)&&A.Tb(t,e,h,g,S,r,a))return!A.zl(t,e,h,g,f,c,m,y)||(S=(t-h)*(c-y)-(e-g)*(f-m),S===0)?!1:(x.h(((t*g-e*h)*(f-m)-(t-h)*(f*y-c*m))/S,((t*g-e*h)*(c-y)-(e-g)*(f*y-c*m))/S),!0);var P=(t+n)/2,L=(e+i)/2,N=(n+r)/2,k=(i+a)/2;r=(r+h)/2,a=(a+g)/2,i=(P+N)/2,n=(L+k)/2,N=(N+r)/2,k=(k+a)/2;var F=(i+N)/2,D=(n+k)/2,j=1/0,E=!1,R=0,J=0;return A.io(t,e,P,L,i,n,F,D,f,c,m,y,S,x)&&(t=(x.x-f)*(x.x-f)+(x.y-c)*(x.y-c),t<j&&(j=t,E=!0,R=x.x,J=x.y)),A.io(F,D,N,k,r,a,h,g,f,c,m,y,S,x)&&(x.x-f)*(x.x-f)+(x.y-c)*(x.y-c)<j&&(E=!0,R=x.x,J=x.y),E&&(x.x=R,x.y=J),E},jo:function(t,e,n,i,r,a,h,g,f,c,m,y,S){var x=0;if(A.Tb(t,e,h,g,S,n,i)&&A.Tb(t,e,h,g,S,r,a)){if(S=(t-h)*(c-y)-(e-g)*(f-m),S===0)return x;var P=((t*g-e*h)*(f-m)-(t-h)*(f*y-c*m))/S,L=((t*g-e*h)*(c-y)-(e-g)*(f*y-c*m))/S;if(P>=m)return x;if((f>m?f-m:m-f)<(c>y?c-y:y-c)){if(e<g?(f=e,t=g):(f=g,t=e),L<f||L>t)return x}else if(t<h?(f=t,t=h):f=h,P<f||P>t)return x;0<S?x++:0>S&&x--}else{P=(t+n)/2,L=(e+i)/2;var N=(n+r)/2,k=(i+a)/2;r=(r+h)/2,a=(a+g)/2,i=(P+N)/2,n=(L+k)/2,N=(N+r)/2,k=(k+a)/2;var F=(i+N)/2,D=(n+k)/2;x+=A.jo(t,e,P,L,i,n,F,D,f,c,m,y,S),x+=A.jo(F,D,N,k,r,a,h,g,f,c,m,y,S)}return x},fh:function(t,e,n,i,r,a,h){return A.ca(t,n)?(e<i?(n=e,e=i):n=i,a<n?(h.h(t,n),!1):a>e?(h.h(t,e),!1):(h.h(t,a),!0)):A.ca(e,i)?(t<n?(i=t,t=n):i=n,r<i?(h.h(i,e),!1):r>t?(h.h(t,e),!1):(h.h(r,e),!0)):(r=((t-r)*(t-n)+(e-a)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)),-5e-6>r?(h.h(t,e),!1):1.000005<r?(h.h(n,i),!1):(h.h(t+r*(n-t),e+r*(i-e)),!0))},Je:function(t,e,n,i,r,a,h,g,f){return A.B(t,n)&&A.B(e,i)?(f.h(t,e),!1):A.ca(r,h)?A.ca(t,n)?(A.fh(t,e,n,i,r,a,f),!1):A.fh(t,e,n,i,r,(i-e)/(n-t)*(r-t)+e,f):(g=(g-a)/(h-r),A.ca(t,n)?(n=g*(t-r)+a,e<i?(r=e,e=i):r=i,n<r?(f.h(t,r),!1):n>e?(f.h(t,e),!1):(f.h(t,n),!0)):(h=(i-e)/(n-t),A.ca(g,h)?(A.fh(t,e,n,i,r,a,f),!1):(r=(h*t-g*r+a-e)/(h-g),A.ca(h,0)?(t<n?(i=t,t=n):i=n,r<i?(f.h(i,e),!1):r>t?(f.h(t,e),!1):(f.h(r,e),!0)):A.fh(t,e,n,i,r,h*(r-t)+e,f))))},wA:function(t,e,n,i,r){return A.Je(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,r)},uA:function(t,e,n,i,r,a,h,g,f,c){function m(N,k){var F=(N-t)*(N-t)+(k-e)*(k-e);F<y&&(y=F,f.h(N,k))}var y=1/0;m(f.x,f.y);var S=0,x=0,P=0,L=0;if(r<h?(S=r,x=h):(S=h,x=r),a<g?(P=r,L=h):(P=h,L=r),S=(x-S)/2+c,c=(L-P)/2+c,r=(r+h)/2,a=(a+g)/2,S===0||c===0)return f;if(.5>(n>t?n-t:t-n)){if(S=1-(n-r)*(n-r)/(S*S),0>S)return f;S=Math.sqrt(S),i=-c*S+a,m(n,c*S+a),m(n,i)}else{if(n=(i-e)/(n-t),i=1/(S*S)+n*n/(c*c),g=2*n*(e-n*t)/(c*c)-2*n*a/(c*c)-2*r/(S*S),S=g*g-4*i*(2*n*t*a/(c*c)-2*e*a/(c*c)+a*a/(c*c)+r*r/(S*S)-1+(e-n*t)*(e-n*t)/(c*c)),0>S)return f;S=Math.sqrt(S),c=(-g+S)/(2*i),m(c,n*c-n*t+e),S=(-g-S)/(2*i),m(S,n*S-n*t+e)}return f},wf:function(t,e,n,i,r,a,h,g,f){var c=1e21,m=t,y=e;if(A.Je(t,e,t,i,r,a,h,g,f)){var S=(f.x-r)*(f.x-r)+(f.y-a)*(f.y-a);S<c&&(c=S,m=f.x,y=f.y)}return A.Je(n,e,n,i,r,a,h,g,f)&&(S=(f.x-r)*(f.x-r)+(f.y-a)*(f.y-a),S<c&&(c=S,m=f.x,y=f.y)),A.Je(t,e,n,e,r,a,h,g,f)&&(e=(f.x-r)*(f.x-r)+(f.y-a)*(f.y-a),e<c&&(c=e,m=f.x,y=f.y)),A.Je(t,i,n,i,r,a,h,g,f)&&(t=(f.x-r)*(f.x-r)+(f.y-a)*(f.y-a),t<c&&(c=t,m=f.x,y=f.y)),f.h(m,y),1e21>c},tA:function(t,e,n,i,r,a,h,g,f){return n=t-n,h=r-h,n===0||h===0?n===0?(e=(a-g)/h,g=t,r=e*g+(a-e*r)):(a=(e-i)/n,g=r,r=a*g+(e-a*t)):(i=(e-i)/n,g=(a-g)/h,t=e-i*t,g=(a-g*r-t)/(i-g),r=i*g+t),f.h(g,r),f},Rr:function(t,e,n){return A.jx(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},jx:function(t,e,n,i,r,a,h,g){var f=t+n,c=e+i;return r===h?(a<g?(h=a,a=g):h=g,t<=r&&r<=f&&h<=c&&a>=e):a===g?(r<h?(g=r,r=h):g=h,e<=a&&a<=c&&g<=f&&r>=t):!!(oo(t,e,n,i,r,a)||oo(t,e,n,i,h,g)||A.zl(t,e,f,e,r,a,h,g)||A.zl(f,e,f,c,r,a,h,g)||A.zl(f,c,t,c,r,a,h,g)||A.zl(t,c,t,e,r,a,h,g))},zl:function(t,e,n,i,r,a,h,g){return 0>=A.sl(t,e,n,i,r,a)*A.sl(t,e,n,i,h,g)&&0>=A.sl(r,a,h,g,t,e)*A.sl(r,a,h,g,n,i)},sl:function(t,e,n,i,r,a){return n-=t,i-=e,t=r-t,e=a-e,a=t*i-e*n,a===0&&(a=t*n+e*i,0<a&&(a=(t-n)*n+(e-i)*i,0>a&&(a=0))),a},Eo:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Mw:function(t,e,n,i,r,a){var h=Math.PI;a||(i*=h/180,r*=h/180);var g=i>r?-1:1;a=[];var f=h/2,c=i;if(i=Math.min(2*h,Math.abs(r-i)),1e-5>i)return f=c+g*Math.min(i,f),g=t+n*Math.cos(c),c=e+n*Math.sin(c),t+=n*Math.cos(f),e+=n*Math.sin(f),n=(g+t)/2,f=(c+e)/2,a.push([g,c,n,f,n,f,t,e]),a;for(;1e-5<i;)r=c+g*Math.min(i,f),a.push(A.Cy(n,c,r,t,e)),i-=Math.abs(r-c),c=r;return a},Cy:function(t,e,n,i,r){var a=(n-e)/2,h=t*Math.cos(a),g=t*Math.sin(a),f=-g,c=h*h+f*f,m=c+h*h+f*g;return c=4/3*(Math.sqrt(2*c*m)-m)/(h*g-f*h),g=h-c*f,h=f+c*h,f=-h,c=a+e,a=Math.cos(c),c=Math.sin(c),[i+t*Math.cos(e),r+t*Math.sin(e),i+g*a-h*c,r+g*c+h*a,i+g*a-f*c,r+g*c+f*a,i+t*Math.cos(n),r+t*Math.sin(n)]},so:function(t,e,n,i,r,a,h){n=Math.floor((t-n)/r)*r+n,i=Math.floor((e-i)/a)*a+i;var g=n;return n+r-t<r/2&&(g=n+r),t=i,i+a-e<a/2&&(t=i+a),h.h(g,t),h},Xw:function(t,e){var n=Math.max(t,e);t=Math.min(t,e);var i;do e=n%t,n=i=t,t=e;while(0<e);return i},Hy:function(t,e,n,i){var r=0>n,a=0>i;if(t<e)var h=1,g=0;else h=0,g=1;var f=h===0?t:e,c=h===0?n:i;return(h===0?r:a)&&(c=-c),h=g,n=h===0?n:i,(h===0?r:a)&&(n=-n),A.Iy(f,h===0?t:e,c,n,0,0)},Iy:function(t,e,n,i,r,a){if(0<i)if(0<n){r=t*t,a=e*e,t*=n;var h=e*i,g=-a+h,f=-a+Math.sqrt(t*t+h*h);e=g;for(var c=0;9999999999>c&&(e=.5*(g+f),!(e===g||e===f));++c){var m=t/(e+r),y=h/(e+a);if(m=m*m+y*y-1,0<m)g=e;else if(0>m)f=e;else break}n=r*n/(e+r)-n,i=a*i/(e+a)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else i=t*t-e*e,a=t*n,a<i?(i=a/i,a=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+a*a)):n=Math.abs(n-t);return n},Oe:new jn,dm:new jn,Df:new jn,Ef:0,em:100};A.za=A.jA;function W(t){Oe(this),this.o=2,t===void 0&&(t=W.m),this.qa=t,this.yc=this.xc=this.hd=this.gd=0,t===W.m?this.Yd=new tt:(W.W===null&&(W.W=new tt().freeze()),this.Yd=W.W),this.Ep=this.Yd.Ia,this.lp=new G().freeze(),this.gm=this.gk=null,this.hm=NaN,this.Yf=nn,this.Zf=Xo,this.Gk=this.Hk=NaN,this.Kf=he}W.prototype.copy=function(){var t=new W;if(t.o=this.o&-2,t.qa=this.qa,t.gd=this.gd,t.hd=this.hd,t.xc=this.xc,t.yc=this.yc,this.qa===W.m){for(var e=this.Yd.s,n=t.Yd,i=0;i<e.length;i++)n.add(e[i].copy());t.Yd=n}else t.Yd=this.Yd;return t.Ep=this.Ep,t.lp.assign(this.lp),t.gk=this.gk,t.gm=this.gm,t.hm=this.hm,t.Yf=this.Yf.J(),t.Zf=this.Zf.J(),t.Hk=this.Hk,t.Gk=this.Gk,t.Kf=this.Kf,t},W.prototype.ha=function(){return this.freeze(),Object.freeze(this),this},W.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==W.m)return this;var t=this.figures;t.freeze(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].freeze();return this},W.prototype.ja=function(){if(Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==W.m)return this;var t=this.figures;t.ja(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].ja();return this},W.prototype.$a=function(t){if(!(t instanceof W))return!1;if(this.type!==t.type)return this.type===W.j&&t.type===W.m?OP(this,t):t.type===W.j&&this.type===W.m?OP(t,this):!1;if(this.type===W.m){var e=this.figures.s;t=t.figures.s;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0}return A.B(this.startX,t.startX)&&A.B(this.startY,t.startY)&&A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)};function OP(t,e){return t.type!==W.j||e.type!==W.m?!1:!!(e.figures.count===1&&(e=e.figures.K(0),e.segments.count===1&&A.B(t.startX,e.startX)&&A.B(t.startY,e.startY)&&(e=e.segments.K(0),e.type===qt&&A.B(t.endX,e.endX)&&A.B(t.endY,e.endY))))}W.ga=function(t){return t.toString()},W.prototype.ob=function(t){t.classType===W&&(this.type=t)},W.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case W.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case W.u:var e=new G(this.startX,this.startY,0,0);return e.nv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case W.F:if(e=new G(this.startX,this.startY,0,0),e.nv(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case W.m:e="",n=this.figures.s;for(var i=n.length,r=0;r<i;r++){var a=n[r];0<r&&(e+=" x "),a.isFilled&&(e+="F "),e+=a.toString(t)}return e;default:return this.type.toString()}},W.hb=function(t){t=t.split(/[Xx]/);for(var e=t.length,n="",i=0;i<e;i++){var r=t[i];n=r.match(/[Ff]/)!==null?i===0?n+r:n+("X"+(r[0]===" "?"":" ")+r):n+((i===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return n},W.parse=function(t,e){function n(){return L>=j-1?!0:c[L+1].match(E)!==null}function i(){return L++,c[L]}function r(Y){var vt=parseFloat(i()),ut=parseFloat(i());N===N.toLowerCase()&&(vt=D.x+vt,ut=D.y+ut),Y.h(vt,ut)}function a(){return r(D),D}function h(){return r(F),F}function g(){var Y=k.toLowerCase();return Y!=="c"&&Y!=="s"&&Y!=="q"&&Y!=="t"?D:new C(2*D.x-F.x,2*D.y-F.y)}e===void 0&&(e=!1);var f=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(f,"$1 $2"),t=t.replace(f,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var c=t.split(" ");for(t=0;t<c.length;t++){var m=c[t];if(m.match(/(\.[0-9]*)(\.)/gm)!==null){f=Kt();for(var y="",S=!1,x=0;x<m.length;x++){var P=m[x];P!=="."||S?P==="."?(f.push(y),y="."):y+=P:(S=!0,y+=P)}for(f.push(y),c.splice(t,1),m=0;m<f.length;m++)c.splice(t+m,0,f[m]);t+=f.length-1,Xt(f)}}var L=-1,N="",k="";f=new C(0,0);var F=new C(0,0),D=new C(0,0),j=c.length;t=jw(null),y=m=!1,S=!0,x=null;for(var E=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(L>=j-1);)if(k=N,N=i(),N!=="")switch(N.toUpperCase()){case"X":S=!0,y=m=!1;break;case"M":for(x=a(),t.pc===null||S===!0?(Uh(t,x.x,x.y,m,!y),S=!1):t.moveTo(x.x,x.y),f.assign(D);!n();)x=a(),t.lineTo(x.x,x.y);break;case"L":for(;!n();)x=a(),t.lineTo(x.x,x.y);break;case"H":for(;!n();)D=new C((N===N.toLowerCase()?D.x:0)+parseFloat(i()),D.y),t.lineTo(D.x,D.y);break;case"V":for(;!n();)D=new C(D.x,(N===N.toLowerCase()?D.y:0)+parseFloat(i())),t.lineTo(D.x,D.y);break;case"C":for(;!n();){x=new C,r(x),P=h();var R=a();Qr(t,x.x,x.y,P.x,P.y,R.x,R.y)}break;case"S":for(;!n();)x=g(),P=h(),R=a(),Qr(t,x.x,x.y,P.x,P.y,R.x,R.y);break;case"Q":for(;!n();)x=h(),P=a(),sc(t,x.x,x.y,P.x,P.y);break;case"T":for(;!n();)F=x=g(),P=a(),sc(t,x.x,x.y,P.x,P.y);break;case"B":for(;!n();){x=parseFloat(i()),P=parseFloat(i()),R=parseFloat(i());var J=parseFloat(i()),it=parseFloat(i()),nt=it,et=!1;n()||(nt=parseFloat(i()),n()||(et=parseFloat(i())!==0)),N===N.toLowerCase()&&(R+=D.x,J+=D.y),t.arcTo(x,P,R,J,it,nt,et)}break;case"A":for(;!n();)x=Math.abs(parseFloat(i())),P=Math.abs(parseFloat(i())),R=parseFloat(i()),it=J=!1,et=nt=0,nt=i(),nt.length===1?(J=!!parseFloat(nt),it=!!parseFloat(i()),nt=parseFloat(i())):nt.length===2?(J=!!parseFloat(nt[0]),it=!!parseFloat(nt[1]),nt=parseFloat(i())):(J=!!parseFloat(nt[0]),it=!!parseFloat(nt[1]),nt=parseFloat(nt.slice(2))),et=parseFloat(i()),N===N.toLowerCase()&&(nt=D.x+nt,et=D.y+et),D.h(nt,et),SN(t,x,P,R,J,it,nt,et);break;case"Z":vN(t),D.assign(f);break;case"F":for(x="",P=1;c[L+P];)if(c[L+P].match(/[Uu]/)!==null)P++;else if(c[L+P].match(E)===null)P++;else{x=c[L+P];break}x.match(/[Mm]/)?m=!0:0<t.pc.segments.length&&(t.pc.isFilled=!0);break;case"U":for(x="",P=1;c[L+P];)if(c[L+P].match(/[Ff]/)!==null)P++;else if(c[L+P].match(E)===null)P++;else{x=c[L+P];break}x.match(/[Mm]/)?y=!0:t.Xl(!1)}if(f=t.Lr,ac=t,e)for(e=f.figures.iterator;e.next();)e.value.isFilled=!0;return f},W.Ga=function(t,e){for(var n=t.length,i=C.alloc(),r=0;r<n;r++){var a=t[r];i.x=a[0],i.y=a[1],e.Fa(i),a[0]=i.x,a[1]=i.y,i.x=a[2],i.y=a[3],e.Fa(i),a[2]=i.x,a[3]=i.y,i.x=a[4],i.y=a[5],e.Fa(i),a[4]=i.x,a[5]=i.y,i.x=a[6],i.y=a[7],e.Fa(i),a[6]=i.x,a[7]=i.y}C.free(i)},W.prototype.Lu=function(){if(this._isInvalidBounds)return!0;if(this.type===W.m){if(this.Ep!==this.figures.Ia)return!0;for(var t=this.figures.s,e=t.length,n=0;n<e;n++)if(t[n].Lu())return!0}return!1},W.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.gm=this.gk=null,this.hm=NaN,this.type===W.m){this.Ep=this.figures.Ia;for(var t=this.figures.s,e=t.length,n=0;n<e;n++){var i=t[n];i._isInvalidBounds=!1;var r=i.segments;i.Pq=r.Ia,i=r.s,r=i.length;for(var a=0;a<r;a++){var h=i[a];h._isInvalidBounds=!1,h.Ud=null}}}t=this.lp,t.ja(),isNaN(this.Hk)||isNaN(this.Gk)?t.h(0,0,0,0):t.h(0,0,this.Hk,this.Gk),EP(this,t,!1),Ve(t,0,0,0,0),t.freeze()},W.prototype.Lw=function(){var t=new G;return EP(this,t,!0),t};function EP(t,e,n){switch(t.type){case W.j:case W.u:case W.F:n?e.h(t.gd,t.hd,0,0):Ve(e,t.gd,t.hd,0,0),Ve(e,t.xc,t.yc,0,0);break;case W.m:var i=t.figures;t=i.s,i=i.length;for(var r=0;r<i;r++){var a=t[r];n&&r===0?e.h(a.startX,a.startY,0,0):Ve(e,a.startX,a.startY,0,0);for(var h=a.segments.s,g=h.length,f=a.startX,c=a.startY,m=0;m<g;m++){var y=h[m];switch(y.type){case qt:case Xi:f=y.endX,c=y.endY,Ve(e,f,c,0,0);break;case di:A.ql(f,c,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,e),f=y.endX,c=y.endY;break;case Co:A.Su(f,c,y.point1X,y.point1Y,y.endX,y.endY,.5,e),f=y.endX,c=y.endY;break;case ye:case ro:var S=y.type===ye?mr(y,a):la(y,a,f,c),x=S.length;if(x===0){f=y.type===ye?y.centerX:y.endX,c=y.type===ye?y.centerY:y.endY,Ve(e,f,c,0,0);break}y=null;for(var P=0;P<x;P++)y=S[P],A.ql(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.5,e);y!==null&&(f=y[6],c=y[7]);break;default:B("Unknown Segment type: "+y.type)}}}break;default:B("Unknown Geometry type: "+t.type)}}W.prototype.normalize=function(){this._isFrozen&&ot(this);var t=this.Lw();return this.offset(-t.x,-t.y),new C(-t.x,-t.y)},W.prototype.offset=function(t,e){return this._isFrozen&&ot(this),this.transform(1,0,0,1,t,e),this},W.prototype.scale=function(t,e){return this._isFrozen&&ot(this),this.transform(t,0,0,e,0,0),this},W.prototype.rotate=function(t,e,n){this._isFrozen&&ot(this),e===void 0&&(e=0),n===void 0&&(n=0);var i=xt.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),xt.free(i),this},l=W.prototype,l.transform=function(t,e,n,i,r,a){switch(this.type){case W.j:case W.u:case W.F:var h=this.gd,g=this.hd;this.gd=h*t+g*n+r,this.hd=h*e+g*i+a,h=this.xc,g=this.yc,this.xc=h*t+g*n+r,this.yc=h*e+g*i+a;break;case W.m:for(var f=this.figures.s,c=f.length,m=0;m<c;m++){var y=f[m];h=y.startX,g=y.startY,y.startX=h*t+g*n+r,y.startY=h*e+g*i+a,y=y.segments.s;for(var S=y.length,x=0;x<S;x++){var P=y[x];switch(P.type){case qt:case Xi:h=P.endX,g=P.endY,P.endX=h*t+g*n+r,P.endY=h*e+g*i+a;break;case di:h=P.point1X,g=P.point1Y,P.point1X=h*t+g*n+r,P.point1Y=h*e+g*i+a,h=P.point2X,g=P.point2Y,P.point2X=h*t+g*n+r,P.point2Y=h*e+g*i+a,h=P.endX,g=P.endY,P.endX=h*t+g*n+r,P.endY=h*e+g*i+a;break;case Co:h=P.point1X,g=P.point1Y,P.point1X=h*t+g*n+r,P.point1Y=h*e+g*i+a,h=P.endX,g=P.endY,P.endX=h*t+g*n+r,P.endY=h*e+g*i+a;break;case ye:h=P.centerX,g=P.centerY,P.centerX=h*t+g*n+r,P.centerY=h*e+g*i+a,e!==0&&(h=180*Math.atan2(e,t)/Math.PI,0>h&&(h+=360),P.startAngle+=h),0>t&&(P.startAngle=180-P.startAngle,P.sweepAngle=-P.sweepAngle),0>i&&(P.startAngle=-P.startAngle,P.sweepAngle=-P.sweepAngle),P.radiusX*=Math.sqrt(t*t+n*n),P.radiusY!==void 0&&(P.radiusY*=Math.sqrt(e*e+i*i));break;case ro:if(h=P.endX,g=P.endY,P.endX=h*t+g*n+r,P.endY=h*e+g*i+a,P.radiusX===0||P.radiusY===0)break;e!==0&&(h=180*Math.atan2(e,t)/Math.PI,0>h&&(h+=360),P.xAxisRotation+=h),0>t&&(P.xAxisRotation=180-P.xAxisRotation,P.isClockwiseArc=!P.isClockwiseArc),0>i&&(P.xAxisRotation=-P.xAxisRotation,P.isClockwiseArc=!P.isClockwiseArc),P.radiusX*=Math.sqrt(t*t+n*n),P.radiusY*=Math.sqrt(e*e+i*i);break;default:B("Unknown Segment type: "+P.type)}}}}return this._isInvalidBounds=!0,this},l.ba=function(t,e){e===void 0&&(e=0);var n=this.gd,i=this.hd,r=this.xc,a=this.yc;switch(this.type){case W.j:return A.Tb(n,i,r,a,e,t.x,t.y);case W.u:var h=G.allocAt(Math.min(n,r)-e,Math.min(i,a)-e,Math.abs(r-n)+2*e,Math.abs(a-i)+2*e);return t=h.ba(t),G.free(h),t;case W.F:h=Math.min(n,r)-e;var g=Math.min(i,a)-e;return n=(Math.abs(r-n)+2*e)/2,e=(Math.abs(a-i)+2*e)/2,0>=n||0>=e?!1:(h=t.x-(h+n),g=t.y-(g+e),1>=h*h/(n*n)+g*g/(e*e));case W.m:return s0(this,t,e,!0,!1);default:return!1}};function s0(t,e,n,i,r){var a=e.x;e=e.y;for(var h=t.bounds.x-20,g=0,f,c,m,y,S=t.figures.s,x=S.length,P=0;P<x;P++){var L=S[P];if(L.isFilled){if(i&&L.ba(a,e,n))return!0;var N=L.segments;f=L.startX,c=L.startY;for(var k=f,F=c,D=N.s,j=0;j<=N.length;j++){var E=void 0;if(j!==N.length){E=D[j];var R=E.type;t=E.endX,y=E.endY}else R=qt,t=k,y=F;switch(R){case Xi:if(k=df(a,e,h,e,f,c,k,F),isNaN(k))return!0;g+=k,k=t,F=y;break;case qt:if(f=df(a,e,h,e,f,c,t,y),isNaN(f))return!0;g+=f;break;case di:m=A.jo(f,c,E.point1X,E.point1Y,E.point2X,E.point2Y,t,y,h,e,a,e,.5),g+=m;break;case Co:m=A.jo(f,c,(f+2*E.point1X)/3,(c+2*E.point1Y)/3,(2*E.point1X+t)/3,(2*E.point1Y+y)/3,t,y,h,e,a,e,.5),g+=m;break;case ye:case ro:R=E.type===ye?mr(E,L):la(E,L,f,c);var J=R.length;if(J===0){if(f=df(a,e,h,e,f,c,E.type===ye?E.centerX:E.endX,E.type===ye?E.centerY:E.endY),isNaN(f))return!0;g+=f;break}E=null;for(var it=0;it<J;it++){if(E=R[it],it===0){if(m=df(a,e,h,e,f,c,E[0],E[1]),isNaN(m))return!0;g+=m}m=A.jo(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],h,e,a,e,.5),g+=m}E!==null&&(t=E[6],y=E[7]);break;default:B("Unknown Segment type: "+E.type)}f=t,c=y}if(g!==0)return!0;g=0}else if(L.ba(a,e,r?n:n+2))return!0}return g!==0}function df(t,e,n,i,r,a,h,g){if(A.Tb(r,a,h,g,.05,t,e))return NaN;var f=(t-n)*(a-g);if(f===0)return 0;var c=((t*i-e*n)*(r-h)-(t-n)*(r*g-a*h))/f;if(e=(t*i-e*n)*(a-g)/f,c>=t)return 0;if((r>h?r-h:h-r)<(a>g?a-g:g-a)){if(a<g){if(e<a||e>g)return 0}else if(e<g||e>a)return 0}else if(r<h){if(c<r||c>h)return 0}else if(c<h||c>r)return 0;return 0<f?1:-1}function IP(t,e,n,i){t=t.figures.s;for(var r=t.length,a=0;a<r;a++)if(t[a].ba(e,n,i))return!0;return!1}l.Bu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new C),this.type===W.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,r=n.length,a=this.flattenedTotalLength*t,h=0,g=0;g<r;g++){var f=i[g],c=f.length;for(t=0;t<c;t++){var m=f[t];if(h+m>=a)return i=a-h,i=m===0?0:i/m,n=n[g],g=n[2*t],r=n[2*t+1],e.h(g+(n[2*t+2]-g)*i,r+(n[2*t+3]-r)*i),e;h+=m}}return e},l.Yw=function(t){if(0>t?t=0:1<t&&(t=1),this.type===W.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,r=this.flattenedTotalLength*t,a=0,h=0;h<i;h++){var g=n[h],f=g.length;for(t=0;t<f;t++){var c=g[t];if(a+c>=r)return r=e[h],e=r[2*t],n=r[2*t+1],i=r[2*t+2],t=r[2*t+3],1>Math.abs(i-e)&&1>Math.abs(t-n)?0:1>Math.abs(i-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;a+=c}}return NaN},l.Cu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===W.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,r=n.length,a=this.flattenedTotalLength*t,h=0,g=0;g<r;g++){var f=i[g],c=f.length;for(t=0;t<c;t++){var m=f[t];if(h+m>=a)return i=a-h,i=m===0?0:i/m,m=n[g],n=m[2*t],g=m[2*t+1],r=m[2*t+2],t=m[2*t+3],e[0]=n+(r-n)*i,e[1]=g+(t-g)*i,e[2]=1>Math.abs(r-n)&&1>Math.abs(t-g)?0:1>Math.abs(r-n)?0<=t-g?90:270:1>Math.abs(t-g)?0<=r-n?0:180:180*Math.atan2(t-g,r-n)/Math.PI,e;h+=m}}return e},l.Zw=function(t){if(this.type===W.j){var e=this.startX,n=this.startY,i=this.endX,r=this.endY;if(e!==i||n!==r){var a=t.x;if(t=t.y,e===i){if(n<r){var h=n;i=r}else h=r,i=n;return t<=h?h===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-h)}if(n===r)return e<i?h=e:(h=i,i=e),a<=h?h===e?0:1:a>=i?i===e?0:1:Math.abs(a-e)/(i-h);h=(i-e)*(i-e)+(r-n)*(r-n);var g=C.alloc();return A.fh(e,n,i,r,a,t,g),t=g.x,a=g.y,C.free(g),Math.sqrt(((t-e)*(t-e)+(a-n)*(a-n))/h)}}else if(this.type===W.u){h=this.startX,g=this.startY;var f=this.endX;if(r=this.endY,h!==f||g!==r){e=f-h,n=r-g,a=2*e+2*n,i=t.x,t=t.y,i=Math.min(Math.max(i,h),f),t=Math.min(Math.max(t,g),r),h=Math.abs(i-h),f=Math.abs(i-f),g=Math.abs(t-g),r=Math.abs(t-r);var c=Math.min(h,f,g,r);if(c===g)return i/a;if(c===f)return(e+t)/a;if(c===r)return(2*e+n-i)/a;if(c===h)return(2*e+2*n-t)/a}}else{e=this.flattenedSegments,n=this.flattenedLengths,a=this.flattenedTotalLength,i=C.alloc(),r=1/0,g=h=0,f=e.length;for(var m=c=0,y=0;y<f;y++)for(var S=e[y],x=n[y],P=S.length,L=0;L<P;L+=2){var N=S[L],k=S[L+1];if(L!==0){A.fh(c,m,N,k,t.x,t.y,i);var F=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);F<r&&(r=F,h=g,h+=Math.sqrt((i.x-c)*(i.x-c)+(i.y-m)*(i.y-m))),g+=x[(L-2)/2]}c=N,m=k}return C.free(i),t=h/a,0>t?0:1<t?1:t}return 0};function AP(t){if(t.gk===null){var e=t.gk=[],n=t.gm=[],i=[],r=[];if(t.type===W.j)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(r);else if(t.type===W.u)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),n.push(r);else if(t.type===W.F){var a=new ze;a.startX=t.endX,a.startY=(t.startY+t.endY)/2;var h=new Tt(ye);if(h.startAngle=0,h.sweepAngle=360,h.centerX=(t.startX+t.endX)/2,h.centerY=(t.startY+t.endY)/2,h.radiusX=Math.abs(t.startX-t.endX)/2,h.radiusY=Math.abs(t.startY-t.endY)/2,a.add(h),t=mr(h,a),r=t.length,r===0)i.push(h.centerX),i.push(h.centerY);else{h=a.startX,a=a.startY;for(var g=0;g<r;g++){var f=t[g];A.De(h,a,f[2],f[3],f[4],f[5],f[6],f[7],.5,i),h=f[6],a=f[7]}}e.push(i),n.push(a0(i))}else for(t=t.figures.iterator;t.next();){r=t.value,i=[],i.push(r.startX),i.push(r.startY),h=r.startX,a=r.startY,g=h,f=a;for(var c=r.segments.s,m=c.length,y=0;y<m;y++){var S=c[y];switch(S.type){case Xi:4<=i.length&&(e.push(i),n.push(a0(i))),i=[],i.push(S.endX),i.push(S.endY),h=S.endX,a=S.endY,g=h,f=a;break;case qt:i.push(S.endX),i.push(S.endY),h=S.endX,a=S.endY;break;case di:A.De(h,a,S.point1X,S.point1Y,S.point2X,S.point2Y,S.endX,S.endY,.5,i),h=S.endX,a=S.endY;break;case Co:A.Go(h,a,S.point1X,S.point1Y,S.endX,S.endY,.5,i),h=S.endX,a=S.endY;break;case ye:var x=mr(S,r),P=x.length;if(P===0){i.push(S.centerX),i.push(S.centerY),h=S.centerX,a=S.centerY;break}for(var L=0;L<P;L++){var N=x[L];A.De(h,a,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),h=N[6],a=N[7]}break;case ro:if(x=la(S,r,h,a),P=x.length,L=S.endX,N=S.endY,P===0){i.push(L),i.push(N),h=L,a=N;break}for(L=0;L<P;L++)N=x[L],A.De(h,a,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),h=N[6],a=N[7];break;default:B("Segment not of valid type: "+S.type)}S.isClosed&&(i.push(g),i.push(f))}4<=i.length&&(e.push(i),n.push(a0(i)))}}}function a0(t){for(var e=[],n=0,i=0,r=t.length,a=0;a<r;a+=2){var h=t[a],g=t[a+1];a!==0&&e.push(Math.sqrt(fr(n,i,h,g))),n=h,i=g}return e}l.add=function(t){return this.Yd.add(t),this},l.Yl=function(t,e,n,i,r,a,h,g){return this._isFrozen&&ot(this),this.Yf=new ht(t,e,r,a).freeze(),this.Zf=new ht(n,i,h,g).freeze(),this},I.Object.defineProperties(W.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},flattenedSegments:{get:function(){return AP(this),this.gk}},flattenedLengths:{get:function(){return AP(this),this.gm}},flattenedTotalLength:{get:function(){var t=this.hm;if(isNaN(t)){if(this.type===W.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===W.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var n=e.length,i=t=0;i<n;i++)for(var r=e[i],a=r.length,h=0;h<a;h++)t+=r[h]}this.hm=t}return t}},type:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this._isFrozen&&ot(this,t),this.qa=t,t===W.m?this.Yd=new tt:(W.W===null&&(W.W=new tt().freeze()),this.Yd=W.W),this._isInvalidBounds=!0)}},startX:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this._isFrozen&&ot(this,t),this.gd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this._isFrozen&&ot(this,t),this.hd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.xc},set:function(t){this.xc!==t&&(this._isFrozen&&ot(this,t),this.xc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.yc},set:function(t){this.yc!==t&&(this._isFrozen&&ot(this,t),this.yc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.Yd},set:function(t){this.Yd!==t&&(this._isFrozen&&ot(this,t),this.Yd=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.Yf},set:function(t){this._isFrozen&&ot(this,t),this.Yf=t.J()}},spot2:{get:function(){return this.Zf},set:function(t){this._isFrozen&&ot(this,t),this.Zf=t.J()}},defaultStretch:{get:function(){return this.Kf},set:function(t){this._isFrozen&&ot(this,t),this.Kf=t}},bounds:{get:function(){return this.Lu()&&this.computeBounds(),this.lp}}}),W.prototype.setSpots=W.prototype.Yl,W.prototype.add=W.prototype.add,W.prototype.getFractionForPoint=W.prototype.Zw,W.prototype.getPointAndAngleAlongPath=W.prototype.Cu,W.prototype.getAngleAlongPath=W.prototype.Yw,W.prototype.getPointAlongPath=W.prototype.Bu,W.prototype.containsPoint=W.prototype.ba,W.prototype.transform=W.prototype.transform,W.prototype.rotate=W.prototype.rotate,W.prototype.scale=W.prototype.scale,W.prototype.offset=W.prototype.offset,W.prototype.normalize=W.prototype.normalize,W.prototype.computeBoundsWithoutOrigin=W.prototype.Lw,W.prototype.equalsApprox=W.prototype.$a,W.className="Geometry",W.j=new $(W,"Line",0),W.u=new $(W,"Rectangle",1),W.F=new $(W,"Ellipse",2),W.m=new $(W,"Path",3),W.W=null,W.cb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",W.className="Geometry",W.stringify=W.ga,W.fillPath=W.hb,W.parse=W.parse,W.Line=W.j,W.Rectangle=W.u,W.Ellipse=W.F,W.Path=W.m;function ze(t,e,n,i){Oe(this),n===void 0&&(n=!0),i===void 0&&(i=!0),this.o=2|(n?4:0)|(i?8:0),t!==void 0?this.gd=t:this.gd=0,e!==void 0?this.hd=e:this.hd=0,this.el=new tt,this.Pq=this.el.Ia,this.Kv=null}ze.prototype.copy=function(){var t=new ze;t.o=this.o&-2,t.gd=this.gd,t.hd=this.hd;for(var e=this.el.s,n=e.length,i=t.el,r=0;r<n;r++){var a=e[r].copy();i.add(a)}return t.Pq=this.Pq,t.Kv=this.Kv,t},l=ze.prototype,l.$a=function(t){if(!(t instanceof ze&&A.B(this.startX,t.startX)&&A.B(this.startY,t.startY)))return!1;var e=this.segments.s;t=t.segments.s;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0},l.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.s,i=n.length,r=0;r<i;r++)e+=" "+n[r].toString(t);return e},l.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},l.ja=function(){this._isFrozen=!1;var t=this.segments;t.ja(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].ja();return this},l.Lu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.Pq!==t.Ia)return!0;t=t.s;for(var e=t.length,n=0;n<e;n++)if(t[n]._isInvalidBounds)return!0;return!1},l.add=function(t){return this.el.add(t),this},l.ba=function(t,e,n){for(var i=this.startX,r=this.startY,a=i,h=r,g=this.segments.s,f=g.length,c=0;c<f;c++){var m=g[c];switch(m.type){case Xi:a=m.endX,h=m.endY,i=m.endX,r=m.endY;break;case qt:if(A.Tb(i,r,m.endX,m.endY,n,t,e))return!0;i=m.endX,r=m.endY;break;case di:if(A.Br(i,r,m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY,.5,t,e,n))return!0;i=m.endX,r=m.endY;break;case Co:if(A.Tu(i,r,m.point1X,m.point1Y,m.endX,m.endY,.5,t,e,n))return!0;i=m.endX,r=m.endY;break;case ye:case ro:var y=m.type===ye?mr(m,this):la(m,this,i,r),S=y.length,x=m.type===ye?m.centerX:m.endX,P=m.type===ye?m.centerY:m.endY;if(S===0){if(A.Tb(i,r,x,P,n,t,e))return!0;i=x,r=P;break}for(x=null,P=0;P<S;P++)if(x=y[P],P===0&&A.Tb(i,r,x[0],x[1],n,t,e)||A.Br(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],.5,t,e,n))return!0;x!==null&&(i=x[6],r=x[7]);break;default:B("Unknown Segment type: "+m.type)}if(m.isClosed&&(i!==a||r!==h)&&A.Tb(i,r,a,h,n,t,e))return!0}return!1},I.Object.defineProperties(ze.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isFilled:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&ot(this,t),this.o=t?this.o|4:this.o&-5}},isShadowed:{get:function(){return(this.o&8)!==0},set:function(t){this._isFrozen&&ot(this,t),this.o=t?this.o|8:this.o&-9}},startX:{get:function(){return this.gd},set:function(t){this._isFrozen&&ot(this,t),this.gd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.hd},set:function(t){this._isFrozen&&ot(this,t),this.hd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.el},set:function(t){this._isFrozen&&ot(this,t),this.el=t,this._isInvalidBounds=!0}}}),ze.prototype.add=ze.prototype.add,ze.prototype.equalsApprox=ze.prototype.$a,ze.className="PathFigure";function Tt(t,e,n,i,r,a,h,g){Oe(this),t===void 0&&(t=qt),this.qa=t,this.o=2,e!==void 0?this.xc=e:this.xc=0,n!==void 0?this.yc=n:this.yc=0,i===void 0&&(i=0),r===void 0&&(r=0),a===void 0&&(a=0),h===void 0&&(h=0),t===ro?(t=a%360,0>t&&(t+=360),this.Be=t,this.Oh=0,this.Ph=Math.max(i,0),this.Gg=Math.max(r,0),typeof h=="boolean"?h&&(this.isLargeArc=!0):typeof h=="number"&&h&&(this.isLargeArc=!0),g&&(this.isClockwiseArc=!0)):(this.Be=i,this.Oh=r,t===ye&&(a=Math.max(a,0)),this.Ph=a,typeof h=="number"?(t===ye&&(h=Math.max(h,0)),this.Gg=h):this.Gg=0),this.Ud=null}Tt.prototype.copy=function(){var t=new Tt;return t.qa=this.qa,t.o=this.o&-2,t.xc=this.xc,t.yc=this.yc,t.Be=this.Be,t.Oh=this.Oh,t.Ph=this.Ph,t.Gg=this.Gg,t},l=Tt.prototype,l.$a=function(t){if(!(t instanceof Tt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Xi:case qt:return A.B(this.endX,t.endX)&&A.B(this.endY,t.endY);case di:return A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)&&A.B(this.point1X,t.point1X)&&A.B(this.point1Y,t.point1Y)&&A.B(this.point2X,t.point2X)&&A.B(this.point2Y,t.point2Y);case Co:return A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)&&A.B(this.point1X,t.point1X)&&A.B(this.point1Y,t.point1Y);case ye:return A.B(this.startAngle,t.startAngle)&&A.B(this.sweepAngle,t.sweepAngle)&&A.B(this.centerX,t.centerX)&&A.B(this.centerY,t.centerY)&&A.B(this.radiusX,t.radiusX)&&A.B(this.radiusY,t.radiusY);case ro:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&A.B(this.xAxisRotation,t.xAxisRotation)&&A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)&&A.B(this.radiusX,t.radiusX)&&A.B(this.radiusY,t.radiusY);default:return!1}},l.ob=function(t){t.classType===Tt&&(this.type=t)},l.toString=function(t){switch(t===void 0&&(t=-1),this.type){case Xi:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case qt:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case di:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Co:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case ye:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case ro:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return this._isFrozen=!1,this},l.close=function(){return this.isClosed=!0,this};function mr(t,e){if(t.Ud!==null&&e._isInvalidBounds===!1)return t.Ud;var n=t.radiusX,i=t.radiusY;if(i===void 0&&(i=n),n===0||i===0)return t.Ud=[],t.Ud;e=t.Be;var r=t.Oh,a=A.Mw(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var h=xt.alloc();h.reset(),n<i?h.scale(1,i/n):h.scale(n/i,1),W.Ga(a,h),xt.free(h)}for(n=a.length,i=0;i<n;i++)h=a[i],h[0]+=e,h[1]+=r,h[2]+=e,h[3]+=r,h[4]+=e,h[5]+=r,h[6]+=e,h[7]+=r;return t.Ud=a,t.Ud}function la(t,e,n,i){function r(L,N,k,F){return(L*F<N*k?-1:1)*Math.acos((L*k+N*F)/(Math.sqrt(L*L+N*N)*Math.sqrt(k*k+F*F)))}if(t.Ud!==null&&e._isInvalidBounds===!1)return t.Ud;if(t.radiusX===0||t.radiusY===0)return t.Ud=[],t.Ud;e=t.Ph;var a=t.Gg;e===0&&(e=1e-4),a===0&&(a=1e-4);var h=Math.PI/180*t.Be,g=t.isLargeArc,f=t.isClockwiseArc,c=t.xc,m=t.yc,y=Math.cos(h),S=Math.sin(h),x=y*(n-c)/2+S*(i-m)/2;h=-S*(n-c)/2+y*(i-m)/2;var P=x*x/(e*e)+h*h/(a*a);return 1<P&&(e*=Math.sqrt(P),a*=Math.sqrt(P)),P=(g===f?-1:1)*Math.sqrt((e*e*a*a-e*e*h*h-a*a*x*x)/(e*e*h*h+a*a*x*x)),isNaN(P)&&(P=0),g=P*e*h/a,P=P*-a*x/e,isNaN(g)&&(g=0),isNaN(P)&&(P=0),n=(n+c)/2+y*g-S*P,i=(i+m)/2+S*g+y*P,m=r(1,0,(x-g)/e,(h-P)/a),y=(x-g)/e,c=(h-P)/a,x=(-x-g)/e,g=(-h-P)/a,h=r(y,c,x,g),x=(y*x+c*g)/(Math.sqrt(y*y+c*c)*Math.sqrt(x*x+g*g)),-1>=x?h=Math.PI:1<=x&&(h=0),!f&&0<h&&(h-=2*Math.PI),f&&0>h&&(h+=2*Math.PI),f=e>a?1:e/a,x=e>a?a/e:1,e=A.Mw(0,0,e>a?e:a,m,m+h,!0),a=xt.alloc(),a.reset(),a.translate(n,i),a.rotate(t.Be,0,0),a.scale(f,x),W.Ga(e,a),xt.free(a),t.Ud=e,t.Ud}I.Object.defineProperties(Tt.prototype,{_isFrozen:{get:function(){return(this.o&1)!==0},set:function(t){this.o=t?this.o|1:this.o&-2}},_isInvalidBounds:{get:function(){return(this.o&2)!==0},set:function(t){this.o=t?this.o|2:this.o&-3}},isClosed:{get:function(){return(this.o&8)!==0},set:function(t){this.isClosed!==t&&(this.o=t?this.o|8:this.o&-9,this._isInvalidBounds=!0)}},type:{get:function(){return this.qa},set:function(t){this._isFrozen&&ot(this,t),this.qa=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.xc},set:function(t){this._isFrozen&&ot(this,t),this.xc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.yc},set:function(t){this._isFrozen&&ot(this,t),this.yc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Be},set:function(t){this._isFrozen&&ot(this,t),this.Be=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Oh},set:function(t){this._isFrozen&&ot(this,t),this.Oh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Ph},set:function(t){this._isFrozen&&ot(this,t),this.Ph=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Gg},set:function(t){this._isFrozen&&ot(this,t),this.Gg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Be},set:function(t){this._isFrozen&&ot(this,t),this.Be=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Oh},set:function(t){this._isFrozen&&ot(this,t),this.Oh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Ph},set:function(t){0>t&&gt(t,">= zero",Tt,"radiusX"),this._isFrozen&&ot(this,t),this.Ph=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Gg},set:function(t){0>t&&gt(t,">= zero",Tt,"radiusY"),this._isFrozen&&ot(this,t),this.Gg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.xc},set:function(t){this._isFrozen&&ot(this,t),t%=360,0>t&&(t+=360),this.xc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.yc},set:function(t){this._isFrozen&&ot(this,t),360<t&&(t=360),-360>t&&(t=-360),this.yc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return(this.o&4)!==0},set:function(t){this._isFrozen&&ot(this,t),this.o=t?this.o|4:this.o&-5,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return(this.o&16)!==0},set:function(t){this._isFrozen&&ot(this,t),this.o=t?this.o|16:this.o&-17,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Be},set:function(t){this._isFrozen&&ot(this,t),t%=360,0>t&&(t+=360),this.Be=t,this._isInvalidBounds=!0}}}),Tt.prototype.equalsApprox=Tt.prototype.$a;var Xi=new $(Tt,"Move",0),qt=new $(Tt,"Line",1),di=new $(Tt,"Bezier",2),Co=new $(Tt,"QuadraticBezier",3),ye=new $(Tt,"Arc",4),ro=new $(Tt,"SvgArc",4);Tt.className="PathSegment",Tt.Move=Xi,Tt.Line=qt,Tt.Bezier=di,Tt.QuadraticBezier=Co,Tt.Arc=ye,Tt.SvgArc=ro;function fi(){this.H=null,this.cu=new C(0,0).freeze(),this.Os=new C(0,0).freeze(),this.ep=this.qq=0,this.fp=1,this.yh="",this.vr=this.xp=!1,this.vp=this.hp=0,this.og=this.Pp=this.Vp=!1,this.Cp=null,this.qr=0,this.sd=this.lr=null}fi.prototype.copy=function(){var t=new fi;return this.clone(t)},fi.prototype.clone=function(t){return t.H=this.H,t.cu.assign(this.viewPoint),t.Os.assign(this.documentPoint),t.qq=this.qq,t.ep=this.ep,t.fp=this.fp,t.yh=this.yh,t.xp=this.xp,t.vr=this.vr,t.hp=this.hp,t.vp=this.vp,t.Vp=this.Vp,t.Pp=this.Pp,t.og=this.og,t.Cp=this.Cp,t.qr=this.qr,t.lr=this.lr,t.sd=this.sd,t},fi.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},fi.prototype.vo=function(t,e){var n=this.diagram;return n===null||Lx(n,this.event,t,e),e},fi.prototype.iz=function(t,e){var n=this.diagram;return n===null||(Lx(n,this.event,t,e),e.assign(n.rs(e))),e},I.Object.defineProperties(fi.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.cu},set:function(t){this.cu.assign(t)}},documentPoint:{get:function(){return this.Os},set:function(t){this.Os.assign(t)}},modifiers:{get:function(){return this.qq},set:function(t){this.qq=t}},button:{get:function(){return this.ep},set:function(t){if(this.ep=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.fp},set:function(t){this.fp=t}},key:{get:function(){return this.yh},set:function(t){this.yh=t}},down:{get:function(){return this.xp},set:function(t){this.xp=t}},up:{get:function(){return this.vr},set:function(t){this.vr=t}},clickCount:{get:function(){return this.hp},set:function(t){this.hp=t}},delta:{get:function(){return this.vp},set:function(t){this.vp=t}},isMultiTouch:{get:function(){return this.Vp},set:function(t){this.Vp=t}},handled:{get:function(){return this.Pp},set:function(t){this.Pp=t}},bubbles:{get:function(){return this.og},set:function(t){this.og=t}},event:{get:function(){return this.Cp},set:function(t){this.Cp=t}},isTouchEvent:{get:function(){var t=U.TouchEvent,e=this.event;return t&&e instanceof t?!0:(t=U.PointerEvent)&&e instanceof t&&(e.pointerType==="touch"||e.pointerType==="pen")}},timestamp:{get:function(){return this.qr},set:function(t){this.qr=t}},targetDiagram:{get:function(){return this.lr},set:function(t){this.lr=t}},targetObject:{get:function(){return this.sd},set:function(t){this.sd=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),fi.prototype.getMultiTouchDocumentPoint=fi.prototype.iz,fi.prototype.getMultiTouchViewPoint=fi.prototype.vo,fi.className="InputEvent";function il(){this.H=null,this.va="",this.zq=this.hr=null}il.prototype.copy=function(){var t=new il;return t.H=this.H,t.va=this.va,t.hr=this.hr,t.zq=this.zq,t},il.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},I.Object.defineProperties(il.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.va},set:function(t){this.va=t}},subject:{get:function(){return this.hr},set:function(t){this.hr=t}},parameter:{get:function(){return this.zq},set:function(t){this.zq=t}}}),il.className="DiagramEvent";function bt(){this.nm=Zt,this.df=this.pq="",this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null}bt.prototype.clear=function(){this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null},bt.prototype.copy=function(){var t=new bt;t.nm=this.nm,t.pq=this.pq,t.df=this.df,t.ac=this.ac,t.H=this.H,t.xn=this.xn;var e=this.zn;return t.zn=mt(e)&&typeof e.J=="function"?e.J():e,e=this.yn,t.yn=mt(e)&&typeof e.J=="function"?e.J():e,e=this.tn,t.tn=mt(e)&&typeof e.J=="function"?e.J():e,e=this.sn,t.sn=mt(e)&&typeof e.J=="function"?e.J():e,t},bt.prototype.ob=function(t){t.classType===bt&&(this.change=t)},bt.prototype.toString=function(){var t="";return t=this.change===so?t+"* ":this.change===Zt?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===so?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=Hn(this.object)),this.oldValue!==null&&(t+="  old: "+Hn(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+Hn(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},bt.prototype.I=function(t){return t?this.oldValue:this.newValue},bt.prototype.kz=function(t){return t?this.oldParam:this.newParam},bt.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},bt.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},bt.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},bt.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},I.Object.defineProperties(bt.prototype,{model:{get:function(){return this.ac},set:function(t){this.ac=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.nm},set:function(t){this.nm=t}},modelChange:{get:function(){return this.pq},set:function(t){this.pq=t}},propertyName:{get:function(){return this.df},set:function(t){this.df=t}},isTransactionFinished:{get:function(){return this.nm===so&&(this.df==="CommittedTransaction"||this.df==="FinishedUndo"||this.df==="FinishedRedo")}},object:{get:function(){return this.xn},set:function(t){this.xn=t}},oldValue:{get:function(){return this.zn},set:function(t){this.zn=t}},oldParam:{get:function(){return this.yn},set:function(t){this.yn=t}},newValue:{get:function(){return this.tn},set:function(t){this.tn=t}},newParam:{get:function(){return this.sn},set:function(t){this.sn=t}}}),bt.prototype.redo=bt.prototype.redo,bt.prototype.canRedo=bt.prototype.canRedo,bt.prototype.undo=bt.prototype.undo,bt.prototype.canUndo=bt.prototype.canUndo,bt.prototype.getParam=bt.prototype.kz,bt.prototype.getValue=bt.prototype.I,bt.prototype.clear=bt.prototype.clear;var so=new $(bt,"Transaction",-1),Zt=new $(bt,"Property",0),xe=new $(bt,"Insert",1),Fe=new $(bt,"Remove",2);bt.className="ChangedEvent",bt.Transaction=so,bt.Property=Zt,bt.Insert=xe,bt.Remove=Fe;function Ye(){this.m=new tt().freeze(),this.va="",this.j=!1}Ye.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.K(n);i!==null&&(e+=`
  `+i.toString())}}return e},Ye.prototype.clear=function(){var t=this.changes;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);n!==null&&n.clear()}t.clear(),t.freeze()},Ye.prototype.canUndo=function(){return this.isComplete},Ye.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.K(t);e!==null&&e.undo()}},Ye.prototype.canRedo=function(){return this.isComplete},Ye.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.K(e);n!==null&&n.redo()}},Ye.prototype.Vj=function(){if(this.isComplete){var t=this.changes;t.ja();for(var e=new ct,n=0;n<t.count;n++){var i=t.K(n);if(i!==null&&i.change===Zt&&i.object){var r=e.get(i.object);r||(r=new ct,e.set(i.object,r));var a=r.get(i.propertyName);a===null?r.set(i.propertyName,-1):(0<a&&t.Vc(a,null),r.set(i.propertyName,n))}}for(n=e=0;n<t.count;n++)i=t.K(n),i!==null&&(n>e&&t.Vc(e,i),e++);for(;t.length>e;)t.pop();t.freeze()}},I.Object.defineProperties(Ye.prototype,{changes:{get:function(){return this.m}},name:{get:function(){return this.va},set:function(t){this.va=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),Ye.prototype.optimize=Ye.prototype.Vj,Ye.prototype.redo=Ye.prototype.redo,Ye.prototype.canRedo=Ye.prototype.canRedo,Ye.prototype.undo=Ye.prototype.undo,Ye.prototype.canUndo=Ye.prototype.canUndo,Ye.prototype.clear=Ye.prototype.clear,Ye.className="Transaction";function se(){this.ut=new Z,this.Ad=!1,this.u=new tt().freeze(),this.se=-1,this.m=999,this.ue=!1,this.qp=null,this.Vh=0,this.j=!1,this.xe=new tt().freeze(),this.Wk=new tt,this.Ws=!0,this.ft=this.Tp=this.it=this.ht=!1}se.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.K(i);if(e+="]",t!==void 0&&0<t)for(n=this.history.count,i=0;i<n;i++)e+=`
 `+this.history.K(i).toString(t-1);return e},se.prototype.clear=function(){var t=this.history;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);n!==null&&n.clear()}t.clear(),this.se=-1,t.freeze(),this.ue=!1,this.qp=null,this.Vh=0,this.xe.ja(),this.xe.clear(),this.xe.freeze(),this.Wk.clear(),this.ft=this.Tp=this.it=this.ht=!1},se.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},l=se.prototype,l.Bw=function(t){this.ut.add(t)},l.yx=function(t){this.ut.remove(t)},l.Da=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.Ws===!0&&(this.Ws=!1,this.Vh++,this.isInternalTransaction||this.Kb("StartingFirstTransaction",t,this.currentTransaction),0<this.Vh&&this.Vh--),this.isEnabled&&(this.xe.ja(),this.xe.add(t),this.xe.freeze(),this.currentTransaction===null?this.Wk.add(0):this.Wk.add(this.currentTransaction.changes.count)),this.Vh++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Kb("StartedTransaction",t,this.currentTransaction)),e},l.eb=function(t){return t===void 0&&(t=""),zP(this,!0,t)},l.Bf=function(){return zP(this,!1,"")};function zP(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Lt("Ending transaction without having started a transaction: "+n);var i=t.transactionLevel===1,r=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Kb("CommittingTransaction",n,r));var a=0;if(0<t.transactionLevel&&(t.Vh--,t.isEnabled)){var h=t.xe.count;0<h&&(n===""&&(n=t.xe.K(0)),t.xe.ja(),t.xe.mb(h-1),t.xe.freeze()),h=t.Wk.count,0<h&&(a=t.Wk.K(h-1),t.Wk.mb(h-1))}if(i){if(e){if(t.Tp=!1,r===null&&n!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null){for(r.isComplete||(r.isComplete=!0,r.name=n),e=t.history,e.ja(),i=e.count-1;i>t.historyIndex;i--)a=e.K(i),a!==null&&a.clear(),e.mb(i),t.Tp=!0;i=t.maxHistoryLength,0<=i&&(i===0?e.clear():e.count>=i&&(a=e.K(0),a!==null&&a.clear(),e.mb(0),t.se--)),i===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.se++),e.freeze()}t.isInternalTransaction||t.Kb("CommittedTransaction",n,r)}else{t.ue=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Kb("RolledBackTransaction",n,r),t.ue=!1}r!==null&&r.clear()}return t.qp=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=a,n=r.changes,r=n.count-1;r>=t;r--)e=n.K(r),e!==null&&e.undo(),n.ja(),n.mb(r);n.freeze()}return!1}se.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},se.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ue=!0,this.Kb("StartingUndo","Undo",t),this.se--,t.undo()}catch(e){Lt("undo error: "+e.toString())}finally{this.Kb("FinishedUndo","Undo",t),this.ue=!1}}},se.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},se.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ue=!0,this.Kb("StartingRedo","Redo",t),this.se++,t.redo()}catch(e){Lt("redo error: "+e.toString())}finally{this.Kb("FinishedRedo","Redo",t),this.ue=!1}}},se.prototype.Kb=function(t,e,n){n===void 0&&(n=null);var i=new bt;for(i.change=so,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)e=t.value,i.model=e,e.Cr(i)},se.prototype.Fu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.qp=e=new Ye);var n=t.copy();e=e.changes,e.ja(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ws&&(t=t.diagram,t!==null&&t.ji===!1||Lt("Change not within a transaction: "+n.toString()))}},se.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},I.Object.defineProperties(se.prototype,{models:{get:function(){return this.ut.iterator}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.K(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.K(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ue}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.m},set:function(t){this.m=t}},historyIndex:{get:function(){return this.se}},currentTransaction:{get:function(){return this.qp}},transactionLevel:{get:function(){return this.Vh}},isInTransaction:{get:function(){return 0<this.Vh}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.xe}},isPendingClear:{get:function(){return this.ht},set:function(t){this.ht=t}},isPendingUnmodified:{get:function(){return this.it},set:function(t){this.it=t}},isInternalTransaction:{get:function(){return this.ft},set:function(t){this.ft=t}},isJustDiscarded:{get:function(){return this.Tp}}}),se.prototype.handleChanged=se.prototype.Fu,se.prototype.redo=se.prototype.redo,se.prototype.undo=se.prototype.undo,se.prototype.canUndo=se.prototype.canUndo,se.prototype.rollbackTransaction=se.prototype.Bf,se.prototype.commitTransaction=se.prototype.eb,se.prototype.startTransaction=se.prototype.Da,se.prototype.removeModel=se.prototype.yx,se.prototype.addModel=se.prototype.Bw,se.prototype.clear=se.prototype.clear,se.className="UndoManager";function Ft(){Oe(this),this.H=xh,this.va="",this.Ad=!0,this.hb=!1,this.xi=null,this.gy=new fi,this.yr=-1}Ft.prototype.toString=function(){return this.name!==""?this.name+" Tool":gr(this.constructor)},Ft.prototype.updateAdornments=function(){},Ft.prototype.canStart=function(){return this.isEnabled},Ft.prototype.doStart=function(){},Ft.prototype.doActivate=function(){this.isActive=!0},Ft.prototype.doDeactivate=function(){this.isActive=!1},Ft.prototype.doStop=function(){},Ft.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Ft.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Ft.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Ft.prototype.doMouseMove=function(){},Ft.prototype.doMouseUp=function(){this.stopTool()},Ft.prototype.doMouseWheel=function(){},Ft.prototype.canStartMultiTouch=function(){return!0},Ft.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,C.allocAt(NaN,NaN)),i=e.vo(1,C.allocAt(NaN,NaN));if(n.v()&&i.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){t.fw=t.scale;var r=i.x-n.x,a=i.y-n.y;t.nw=Math.sqrt(r*r+a*a),e.bubbles=!1}C.free(n),C.free(i)},Ft.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,C.allocAt(NaN,NaN)),i=e.vo(1,C.allocAt(NaN,NaN));if(n.v()&&i.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){var r=i.x-n.x,a=i.y-n.y;a=Math.sqrt(r*r+a*a)/t.nw,r=new C((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2),a*=t.fw;var h=t.commandHandler;if(a!==t.scale&&h.canResetZoom(a)){var g=t.zoomPoint;t.zoomPoint=r,h.resetZoom(a),t.zoomPoint=g}e.bubbles=!1}C.free(n),C.free(i)},Ft.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},Ft.prototype.doKeyUp=function(){},Ft.prototype.Da=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.Da(t)},Ft.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.Bf():t.eb(this.transactionResult)},Ft.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.wl(e.documentPoint,!1);if(n!==null){if(Ce?e.meta:e.control){for(t.P("ChangingSelection",t.selection),e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.P("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.P("ChangingSelection",t.selection),e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.P("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(Ce?e.meta:e.control)||e.shift||t.clearSelection()}},Ft.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.ec(i.documentPoint,t,e),i.targetObject=t,Uk(t,i,n),i.handled};function Uk(t,e,n){if(e.handled=!1,t===null||t.yf()){var i=0;e.left?i=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(i=3);var r="ObjectSingleClicked";if(t!==null){switch(i){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}i!==0&&n.P(r,t)}else{switch(i){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}i!==0&&n.P(r)}if(t!==null)for(;t!==null;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(n!==null&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}t!==null&&t(e)}}}Ft.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.zb!==!0){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.ba(e.documentPoint)?t.ec(e.documentPoint,null,null):null;e.targetObject=i;var r=!1;if(i!==t.qk){var a=t.qk,h=a;for(t.qk=i,this.doCurrentObjectChanged(a,i),e.handled=!1;a!==null;){var g=a.mouseLeave;if(g!==null&&(i===a||i!==null&&i.jg(a)||(g(e,a,i),r=!0,e.handled)))break;a=a.panel}for(a=h,e.handled=!1;i!==null&&(h=i.mouseEnter,!(h!==null&&(a===i||a!==null&&a.jg(i)||(h(e,i,a),r=!0,e.handled))));)i=i.panel;i=t.qk}if(i!==null){for(a=i,h="";a!==null&&(h=a.cursor,h==="");)a=a.panel;for(t.currentCursor=h,e.handled=!1,a=i;a!==null&&(i=a.mouseOver,!(i!==null&&(i(e,a),r=!0,e.handled)));)a=a.panel}else t.currentCursor="",i=t.mouseOver,i!==null&&(i(e),r=!0);r&&t.Mb(),t.skipsUndoManager=n}},Ft.prototype.doCurrentObjectChanged=function(){},Ft.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(n!==0&&t.documentBounds.v()){var i=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(i!==null&&(r===Zu&&!e.shift||r===gh&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===Zu&&e.shift||r===gh&&!e.control){i=t.position.copy();var a=0<n?n:-n,h=e.event,g=h.deltaMode;if(r=h.deltaX,h=h.deltaY,(ne||tn)&&(g=1,0<r&&(r=3),0>r&&(r=-3),0<h&&(h=3),0>h&&(h=-3)),g===void 0||r===void 0||h===void 0||r===0&&h===0||e.shift)!e.shift&&t.allowVerticalScroll?(a=3*a*t.scrollVerticalLineChange,0<n?t.scroll("pixel","up",a):t.scroll("pixel","down",a)):e.shift&&t.allowHorizontalScroll&&(a=3*a*t.scrollHorizontalLineChange,0<n?t.scroll("pixel","left",a):t.scroll("pixel","right",a));else{switch(g){case 0:n="pixel";break;case 1:n="line";break;case 2:n="page";break;default:n="pixel"}r!==0&&t.allowHorizontalScroll&&(r*=t.scrollHorizontalLineChange/16,0<r?t.scroll(n,"left",-r):t.scroll(n,"right",r)),h!==0&&t.allowVerticalScroll&&(h*=t.scrollVerticalLineChange/16,0<h?t.scroll(n,"up",-h):t.scroll(n,"down",h))}t.position.C(i)||(e.bubbles=!1)}}},Ft.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.gy);this.yr=_(function(){n.doWaitAfter(i)},t)},Ft.prototype.cancelWaitAfter=function(){this.yr!==-1&&U.clearTimeout(this.yr),this.yr=-1},Ft.prototype.doWaitAfter=function(){},Ft.prototype.findToolHandleAt=function(t,e){return t=this.diagram.ec(t,function(n){for(;n!==null&&!(n.panel instanceof Ct);)n=n.panel;return n}),t===null?null:t.part.category===e?t:null},Ft.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;t===void 0&&(t=n.firstInput.viewPoint),e===void 0&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,r=i.width;return i=i.height,n.firstInput.isTouchEvent&&(r+=6,i+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>i},I.Object.defineProperties(Ft.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof z&&(this.H=t)}},name:{get:function(){return this.va},set:function(t){this.va=t}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},isActive:{get:function(){return this.hb},set:function(t){this.hb=t}},transactionResult:{get:function(){return this.xi},set:function(t){this.xi=t}}}),Ft.prototype.startTransaction=Ft.prototype.Da,Ft.className="Tool";function te(){Ft.call(this),this.name="ToolManager",this.cb=new tt,this.nb=new tt,this.Db=new tt,this.F=this.W=850,this.m=new dt(2,2).ha(),this.Ga=5e3,this.ga=gh,this.u=GP,this.pp=this.j=null,this.uj=-1}O(te,Ft),te.prototype.initializeStandardTools=function(){},te.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Ct&&this.pp===t){var n=e.adornedObject;(t!==null?n.part===t:n===null)?this.showToolTip(e,n):this.hideToolTip()}},te.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===ff&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===l0){e.bubbles=!0;return}if(this.gestureBehavior===ff)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var r=this.mouseDownTools.K(i);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===gh?this.mouseWheelBehavior=Zu:this.mouseWheelBehavior===Zu&&(this.mouseWheelBehavior=gh)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},te.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===l0){e.bubbles=!0;return}if(this.gestureBehavior===ff)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var r=this.mouseMoveTools.K(i);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}BP(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function BP(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}te.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof Ct&&(e===t||e.jg(t))||this.hideToolTip()},te.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ha&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.Wt=!0,e.doMouseUp()))},te.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.ec(e.documentPoint,null,null));var n=e.targetObject;if(n!==null)for(e.handled=!1;n!==null&&(t=this.isActive?n.mouseHold:n.mouseHover,!(t!==null&&(t(e,n),e.handled)));)n=n.panel;else n=this.isActive?t.mouseHold:t.mouseHover,n!==null&&n(e)},te.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.ec(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof Ct)||e!==t&&!e.jg(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},te.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Ct){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=n.scale);var i=t.diagram;i!==null&&i!==n&&i.remove(t),n.add(t),e!==null?t.adornedObject=e:t.data=n.model,t.Za(),this.positionToolTip(t,e)}else t instanceof Yr&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,this.uj!==-1&&(U.clearTimeout(this.uj),this.uj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var r=this;this.uj=_(function(){r.hideToolTip()},t)}},te.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>r.right&&(n.x-=i.width+5/e.scale),n.x<r.x&&(n.x=r.x),n.y=n.y+20/e.scale+i.height>r.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<r.y&&(n.y=r.y),t.position=n}},te.prototype.hideToolTip=function(){this.uj!==-1&&(U.clearTimeout(this.uj),this.uj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof Ct?(t.remove(e),this.pp!==null&&this.pp.Af(e.category),e.data=null,e.adornedObject=null):e instanceof Yr&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},te.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.K(n);if(i.diagram=this.diagram,i.canStart()){t.doFocus(),t.currentTool=i,t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp());return}}t.doFocus(),this.doDeactivate()},te.prototype.doMouseWheel=function(){this.standardMouseWheel()},te.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},te.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},te.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.K(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if(i=this.mouseMoveTools.K(n),i.name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if(i=this.mouseUpTools.K(n),i.name===t)return i;return null},te.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var r=this.mouseDownTools.K(i);if(r.name===t)return e!==null?this.mouseDownTools.Vc(i,e):this.mouseDownTools.mb(i),r}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if(r=this.mouseMoveTools.K(i),r.name===t)return e!==null?this.mouseMoveTools.Vc(i,e):this.mouseMoveTools.mb(i),r;for(n=this.mouseUpTools.length,i=0;i<n;i++)if(r=this.mouseUpTools.K(i),r.name===t)return e!==null?this.mouseUpTools.Vc(i,e):this.mouseUpTools.mb(i),r;return null},te.prototype.gb=function(t,e,n){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&n.add(e)},I.Object.defineProperties(te.prototype,{mouseWheelBehavior:{get:function(){return this.ga},set:function(t){this.ga=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.pp=t!==null&&t instanceof Ct?t.adornedPart:null}},mouseDownTools:{get:function(){return this.cb}},mouseMoveTools:{get:function(){return this.nb}},mouseUpTools:{get:function(){return this.Db}},hoverDelay:{get:function(){return this.W},set:function(t){this.W=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.m},set:function(t){this.m=t.J()}},toolTipDuration:{get:function(){return this.Ga},set:function(t){this.Ga=t}}}),te.prototype.replaceStandardTool=te.prototype.gb;var gh=new $(te,"WheelScroll",0),Zu=new $(te,"WheelZoom",1),Xk=new $(te,"WheelNone",2),GP=new $(te,"GestureZoom",3),ff=new $(te,"GestureCancel",4),l0=new $(te,"GestureNone",5);te.className="ToolManager",te.WheelScroll=gh,te.WheelZoom=Zu,te.WheelNone=Xk,te.GestureZoom=GP,te.GestureCancel=ff,te.GestureNone=l0;function ee(){Ft.call(this),this.name="Dragging",this.u=this.ww=this.nb=!0,this.m=this.Ga=this.W=this.Ce=null,this.Gm=this.Db=!1,this.il=new C(NaN,NaN),this.br=new C,this.cb=!0,this.wk=100,this.tg=[],this.le=new Z().freeze(),this.ga=new Ch,this.hn=null,this.F="copy",this.Hc="",this.Ic="no-drop"}var ol;O(ee,Ft),ee.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.wk)?!1:this.findDraggablePart()!==null},ee.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.wl(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},ee.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.wl(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.P("ChangingSelection",t.selection),e=t.lastInput,(Ce?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.P("ChangedSelection",t.selection))}}},ee.prototype.doActivate=function(){var t=this.diagram;this.hn=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.lu(!0),Ue=null,this.isActive=!0,this.il.set(t.position),h0(this,t.selection),this.tg.length=0,t.animationManager.wc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.ww=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.os=!0,t.Ge("temporaryPixelRatio")===!0&&30<t.Ew&&ig(t),Cf(t,this.draggedParts),this.Da("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Gm=!1,Ue=this,ha=this.diagram,this.doSimulatedDragOut()))};function h0(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.Nj()&&e.count===1&&e.first()instanceof H?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.zj(),t.Ce=n.toolManager.findTool("Relinking"),t.Ce===null&&(t.Ce=new Ti,t.Ce.diagram=n),t.Ce.originalLink=t.draggedLink):(t.draggedLink=null,t.Ce=null))}}ee.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},ee.prototype.Fd=function(t){return t===void 0?new Cs(dr):this.isGridSnapEnabled?new Cs(new C(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new Cs(t.copy())},ee.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.ww,t.lu(!1),t.lg(),u0(this),ag(t,this.draggedParts),this.draggedParts=this.currentPart=this.hn=null,this.Gm=this.isDragOutStarted=!1,0<ol.count){for(var e=ol,n=e.length,i=0;i<n;i++){var r=e.K(i);VP(r),ks(r),u0(r),r.diagram.lg()}e.clear()}VP(this),this.il.h(NaN,NaN),ha!==null&&(ha.currentCursor=""),Ue=ha=null,ks(this),t.isMouseCaptured=!1,t.currentCursor="",t.os=!1,this.stopTransaction(),kf(t,!0)},ee.prototype.stopTransaction=function(){var t=this.diagram,e=Ft.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e};function u0(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,YP(t,e.lastInput,null),e.skipsUndoManager=n,t.tg.length=0}function RP(){var t=Ue;ks(t),d0(t);var e=t.diagram;t.il.v()&&(e.position=t.il),e.lg()}ee.prototype.doCancel=function(){ks(this),d0(this);var t=this.diagram;this.il.v()&&(t.position=this.il),this.stopTool()},ee.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},ee.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function g0(t,e){if(t.copiedParts===null){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&t.draggedParts!==null){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?i.currentTransaction!==null&&0<i.currentTransaction.changes.count&&(n.undoManager.Bf(),n.Da("Drag")):d0(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Cf():n.selection,e=n.Ej(e,n,!0),n=new ct,i=t.draggedParts.iterator;i.next();){var r=i.key;if(r.Tc()&&r.canCopy()){var a=e.I(r);a!==null&&(a.location=r.location,a.Za(),n.add(a,t.Fd(a.location)))}}for(e=e.iterator;e.next();)i=e.value,i instanceof H&&i.canCopy()&&n.add(i,t.Fd());t.copiedParts=n,h0(t,n.Cf()),t.draggedLink!==null&&(n=t.draggedLink,e=n.routeBounds,es(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}function ks(t){var e=t.diagram;if(t.copiedParts!==null){if(e.hs(t.copiedParts.Cf(),!1),t.copiedParts=null,t.draggedParts!==null)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof H&&(n.value.point=new C(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function VP(t){if(t.draggedLink!==null){if(t.dragsLink&&t.Ce!==null){var e=t.Ce;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Ce.originalLink=null}t.draggedLink=null,t.Ce=null}}function rl(t,e,n){var i=t.diagram,r=t.startPoint,a=C.alloc();a.assign(i.lastInput.documentPoint),t.moveParts(e,a.je(r),n),C.free(a),i.Ge("temporaryPixelRatio")===!0&&i.Rh===null&&30<i.Ew&&(ig(i),i.Jo())}ee.prototype.moveParts=function(t,e,n){n===void 0&&(n=!1);var i=this.diagram;i!==null&&A0(i,t,e,this.dragOptions,n)};function d0(t){if(t.draggedParts!==null){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.Tc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if(i=n.key,i instanceof H&&i.suspendsRouting){var r=n.value.point;t.draggedParts.add(i,t.Fd()),es(i,-r.x,-r.y)}e.nd()}}function f0(t,e){var n=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),_P(t,!1));var i=t.findDragOverObject(e),r=n.lastInput;r.targetObject=i,t.doUpdateCursor(i,!1);var a=n.skipsUndoManager,h=!1;try{if(n.skipsUndoManager=!0,h=YP(t,r,i),!t.isActive&&Ue===null)return;var g=i!==null?i.part:null;if(g===null||n.handlesDragDropForTopLevelParts&&g.isTopLevel&&!(g instanceof pt)){var f=n.mouseDragOver;f!==null&&(f(r),h=!0)}if(!t.isActive&&Ue===null||(t.doDragOver(e,i),!t.isActive&&Ue===null))return}finally{n.skipsUndoManager=a,h&&n.nd()}t.hn=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Fr(r.viewPoint)}ee.prototype.findDragOverObject=function(t){var e=this;return T0(this.diagram,t,null,function(n){return n===null?n=!0:(n=n.part,n=!!(n===null||n instanceof Ct||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n))),!n})},ee.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.hn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))};function YP(t,e,n){var i=!1,r=t.tg.length,a=0<r?t.tg[0]:null;if(n===a)return!1;e.handled=!1;for(var h=0;h<r;h++){var g=t.tg[h],f=g.mouseDragLeave;if(f!==null&&(f(e,g,n),i=!0,e.handled))break}if(t.tg.length=0,!t.isActive&&Ue===null||n===null)return i;for(e.handled=!1,r=n;r!==null;)t.tg.push(r),r=UP(r);for(r=t.tg.length,n=0;n<r&&(h=t.tg[n],g=h.mouseDragEnter,g===null||(g(e,h,a),i=!0,!e.handled));n++);return i}function UP(t){var e=t.panel;return e!==null?e:t instanceof lt&&!(t instanceof pt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function XP(t,e,n){var i=t.Ce;if(i===null)return null;var r=t.diagram.hg(e,i.portGravity,function(c){return i.findValidLinkablePort(c,n)});t=C.alloc();var a=1/0,h=null;for(r=r.iterator;r.next();){var g=r.value;if(g.part!==null){var f=g.ia(Gt,t);f=e.rf(f),f<a&&(h=g,a=f)}}return C.free(t),h}function _P(t,e){var n=t.draggedLink;if(n!==null&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var r=t.Ce;if(r!==null){var a=null,h=null;n.fromNode===null&&(a=XP(t,n.i(0),!1),a!==null&&(h=a.part));var g=null,f=null;n.toNode===null&&(g=XP(t,n.i(n.pointsCount-1),!0),g!==null&&(f=g.part)),r.isValidLink(h,a,f,g)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=h,a!==null&&(n.fromPortId=a.portId),n.toNode=f,g!==null&&(n.toPortId=g.portId),n.fromPort!==i.tx&&i.P("LinkRelinked",n,i.tx),n.toPort!==i.ux&&i.P("LinkRelinked",n,i.ux)):QP(r,h,a,f,g):QP(r,null,null,null,null)}}}}ee.prototype.doDragOver=function(){};function KP(t,e){var n=t.diagram;t.dragsLink&&_P(t,!0),u0(t);var i=t.findDragOverObject(e),r=n.lastInput;if(r.targetObject=i,i!==null){r.handled=!1;for(var a=i;a!==null;){var h=a.mouseDrop;if(h!==null&&(h(r,a),r.handled))break;_k(t,r,a),a=UP(a)}}else a=n.mouseDrop,a!==null&&a(r);if(t.isActive||Ue!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)a=r.key,a instanceof q&&a.linksConnected.each(function(g){g.suspendsRouting=!1});if(t.doDropOnto(e,i),t.isActive||Ue!==null){for(t=G.alloc(),e=n.selection.iterator;e.next();)i=e.value,i instanceof q&&Kk(n,i,t);G.free(t)}}}function _k(t,e,n){t=t.diagram,n=n.part,!t.handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof pt||(n=t.mouseDrop,n!==null&&n(e))}function Kk(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.Ee(n)&&(i=!0),t=t.zu(n,function(r){return r.part},function(r){return r instanceof H},!0,function(r){return r instanceof H},i),t.count!==0)for(t=t.iterator;t.next();)n=t.value,!n.Md(e)&&n.isAvoiding&&n.ab()}ee.prototype.doDropOnto=function(){},ee.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(g0(this,!1),Cf(t,this.copiedParts),rl(this,this.copiedParts,!1),ag(t,this.copiedParts)):this.mayMove()?(ks(this),rl(this,this.draggedParts,!0)):this.mayDragOut()?(g0(this,!1),rl(this,this.copiedParts,!1)):ks(this),f0(this,t.lastInput.documentPoint))}},ee.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&this.copiedParts!==null?(ks(this),g0(this,!0),Cf(t,this.copiedParts),rl(this,this.copiedParts,!1),ag(t,this.copiedParts),this.copiedParts!==null&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,ks(this),this.mayMove()&&(rl(this,this.draggedParts,!0),f0(this,t.lastInput.documentPoint))),this.Gm=!0,KP(this,t.lastInput.documentPoint),this.isActive){var i=n?this.copiedParts.Cf():this.draggedParts.Cf();this.copiedParts=null,e&&Hk(this),t.Va(),ag(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.P(n?"SelectionCopied":"SelectionMoved",i)}this.stopTool(),n&&t.P("ChangedSelection",t.selection)}}},ee.prototype.simulatedMouseMove=function(t,e,n){if(Ue===null)return!1;var i=Ue.diagram;n instanceof z||(n=null);var r=ha;return n!==r&&(r!==null&&r!==i&&(r.lg(),Ue.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),ha=n,n!==null&&n!==i&&(RP(),r=n.toolManager.findTool("Dragging"),r!==null&&(ol.contains(r)||ol.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),n===null||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert?!1:(i=n.toolManager.findTool("Dragging"),i!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),!0)},ee.prototype.simulatedMouseUp=function(t,e,n){if(Ue===null)return!1;var i=ha,r=Ue.diagram;if(n===null)return Ue.doCancel(),!0;if(n!==i){var a=i.toolManager.findTool("Dragging");if(i!==null&&i!==r&&a!==null)return i.lg(),Ue.isDragOutStarted=!1,a.doSimulatedDragLeave(),!1;ha=n,i=n.toolManager.findTool("Dragging"),i!==null&&(RP(),ol.contains(i)||ol.add(i),i.doSimulatedDragEnter())}return n!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):e===null&&(e=new C),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!0,t=n.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=Ue,t!==null&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0):!1};function Hk(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof q&&(n=n.containingGroup,n===null||n.placeholder===null||t.draggedParts.contains(n)||n.placeholder.w())}}ee.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(Ce?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},ee.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},ee.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},ee.prototype.computeBorder=function(t,e,n){return this.Gm||this.draggedParts===null||this.draggedParts.contains(t)?null:n.assign(e)},ee.prototype.hz=function(){return Ue},ee.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=Ue;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},ee.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.wc(),Xr(t),t.animationManager.wc(),t=Ue,t!==null&&(t.diagram.os=!1),this.doUpdateCursor(null,!0)}},ee.prototype.doSimulatedDragLeave=function(){var t=Ue;t!==null&&t.doSimulatedDragOut(),this.doCancel()},ee.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.lm=!0;var e=Ue;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;HP(this,e.draggedParts.Cf(),!1,t.firstInput),rl(this,this.copiedParts,!1),f0(this,t.lastInput.documentPoint)}t.animationManager.lm=!1},ee.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Ue;if(e!==null){var n=e.diagram;if(e.Gm=!0,ks(this),!this.mayDragIn())return;t.animationManager.lm=!0,t.P("ChangingSelection",t.selection),this.Da("Drop"),HP(this,e.draggedParts.Cf(),!0,t.lastInput),rl(this,this.copiedParts,!1),this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(i){i.isSelected=!0})),KP(this,t.lastInput.documentPoint),t.Va(),e=t.selection,this.copiedParts!==null?this.transactionResult="ExternalCopy":e=new Z,this.copiedParts=null,t.doFocus(),t.P("ExternalObjectsDropped",e,n),this.stopTransaction(),t.P("ChangedSelection",t.selection)}t.animationManager.lm=!1};function HP(t,e,n,i){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!n,r.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=r.Ej(e,r,!0);var a=G.alloc();r=i=1/0;for(var h=-1/0,g=-1/0,f=e.iterator;f.next();){var c=f.value;if(c.isVisible()){var m=c.location;c=m.x,m=m.y,isNaN(c)||isNaN(m)||(c<i&&(i=c),m<r&&(r=m),c>h&&(h=c),m>g&&(g=m))}}for(i===1/0?a.h(0,0,0,0):a.h(i,r,h-i,g-r),i=a.x+a.width/2,r=a.y+a.height/2,G.free(a),a=t.br,h=new ct,g=C.alloc(),f=e.iterator;f.next();)c=f.value,c instanceof H&&c.canCopy()&&(m=n.I(c),m!==null&&(m.points=c.points,es(m,a.x-i,a.y-r),m.suspendsRouting=!0,h.add(m,t.Fd())));for(e=e.iterator;e.next();)c=e.value,c.Tc()&&c.canCopy()&&(f=n.I(c),f!==null&&(c=c.location,g.h(a.x-(i-c.x),a.y-(r-c.y)),f.location=g,f.Za(),h.add(f,t.Fd(g))));C.free(g),t.copiedParts=h,h0(t,h.Cf()),t.draggedLink!==null&&(n=t.draggedLink,e=n.routeBounds,es(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}ee.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.os=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.hn=null},ee.prototype.computeMove=function(t,e,n,i){return n=this.diagram,n!==null?n.computeMove(t,e,this.dragOptions,i):new C},I.Object.defineProperties(ee.prototype,{isCopyEnabled:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ga},set:function(t){this.ga=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.cb},set:function(t){this.cb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.C(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Hc},set:function(t){this.Hc=t}},nodropCursor:{get:function(){return this.Ic},set:function(t){this.Ic=t}},currentPart:{get:function(){return this.W},set:function(t){this.W=t}},copiedParts:{get:function(){return this.m},set:function(t){this.m=t}},draggedParts:{get:function(){return this.Ga},set:function(t){this.Ga=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.Cf():this.draggedParts!==null?this.draggedParts.Cf():this.le}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Db},set:function(t){this.Db=t}},startPoint:{get:function(){return this.br},set:function(t){this.br.C(t)||this.br.assign(t)}},delay:{get:function(){return this.wk},set:function(t){this.wk=t}}}),ee.prototype.getDraggingSource=ee.prototype.hz;var Ue=null,ha=null;ee.className="DraggingTool",ol=new tt,Nt("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),te.prototype.doCancel=function(){Ue!==null&&Ue.doCancel(),Ft.prototype.doCancel.call(this)};function Ze(){Ft.call(this),this.le=100,this.Ga=!1,this.u="pointer";var t=new H,e=new yt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new yt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.vi=t,t=new q,e=new yt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=af,t.add(e),t.selectable=!1,t.layerName="Tool",this.ui=t,this.j=e,t=new q,e=new yt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=af,t.add(e),t.selectable=!1,t.layerName="Tool",this.wi=t,this.m=e,this.Ic=this.Hc=this.nb=this.cb=this.Db=null,this.ga=!0,this.Wo=new ct,this.Ff=this.bj=this.Gf=null}O(Ze,Ft),Ze.prototype.doStop=function(){this.diagram.lg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Ze.prototype.copyPortProperties=function(t,e,n,i,r){if(t!==null&&e!==null&&n!==null&&i!==null){var a=e.uf(),h=dt.alloc();h.width=e.naturalBounds.width*a,h.height=e.naturalBounds.height*a,i.desiredSize=h,dt.free(h),r?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=Gt,a=C.alloc(),n.location=e.ia(Gt,a),C.free(a),i.angle=e.fi(),this.portTargeted!==null&&this.portTargeted(t,e,n,i,r)}},Ze.prototype.setNoTargetPortProperties=function(t,e,n){e!==null&&(e.desiredSize=af,e.fromSpot=$e,e.toSpot=$e),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,n)},Ze.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Ze.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof q){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},Ze.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var n=t.part;if(!(n instanceof q))return null;for(;t!==null;){var i=e?t.toLinkable:t.fromLinkable;if(i===!0&&(t.portId!==null||t instanceof q)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(i===!1)break;t=t.panel}return null},Ze.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var r=this,a=e.hg(n,i,function(y){return r.findValidLinkablePort(y,t)},null,!0);for(i=1/0,e=null,a=a.iterator;a.next();){var h=a.value,g=h.part;if(g instanceof q){var f=h.ia(Gt,C.alloc()),c=n.x-f.x,m=n.y-f.y;C.free(f),f=c*c+m*m,f<i&&(c=this.validPortsCache.I(h),c!==null?c&&(e=h,i=f):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,g,h)||!t&&this.isValidLink(g,h,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(h,!0),e=h,i=f):this.validPortsCache.add(h,!1))}}return e!==null&&(n=e.part,n instanceof q&&(n.layer===null||n.layer.allowLink))?e:null},Ze.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var n=e.fromMaxLinks;if(1/0>n){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.ro(e).count>=n)return!1}return!0},Ze.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var n=e.toMaxLinks;if(1/0>n){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Kd(e).count>=n)return!1}return!0},Ze.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},Ze.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var n=t.part;if(!(n instanceof q))return!1;t=t.portId,t===null&&(t="");var i=e.part;if(!(i instanceof q))return!1;for(e=e.portId,e===null&&(e=""),e=i.Kd(e);e.next();)if(i=e.value,i.fromNode===n&&i.fromPortId===t)return!0;return!1},Ze.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(e===null||i===null||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||n!==null&&this.isLabelDependentOnLink(n,this.originalLink))||t!==null&&n!==null&&(t.data===null&&n.data!==null||t.data!==null&&n.data===null)||!this.isValidCycle(t,n,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,n,i,this.originalLink))return!1}return n!==null&&(r=n.linkValidation,r!==null&&!r(t,e,n,i,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,n,i,this.originalLink):!0)},Ze.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var n=t.labeledLink;if(n===null)return!1;if(n===e)return!0;var i=new Z;return i.add(t),c0(this,n,e,i)};function c0(t,e,n,i){if(e===n)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(i.add(r),c0(t,r.labeledLink,n,i))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(i.add(e),c0(t,e.labeledLink,n,i))))}Ze.prototype.isValidCycle=function(t,e,n){if(n===void 0&&(n=null),t===null||e===null)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==W0){if(i===Yx){if(i=n||this.temporaryLink,i!==null&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var r=i.value;if(r!==n&&r.isTreeLink&&r.toNode===e)return!1}return!Qu(this,t,e,n,!0)}if(i===Ux){if(i=n||this.temporaryLink,i!==null&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if(r=i.value,r!==n&&r.isTreeLink&&r.fromNode===t)return!1;return!Qu(this,t,e,n,!0)}if(i===Gx)return t===e?t=!0:(i=new Z,i.add(e),t=WP(this,i,t,e,n)),!t;if(i===Rx)return!Qu(this,t,e,n,!1);if(i===Vx)return t===e?t=!0:(i=new Z,i.add(e),t=$P(this,i,t,e,n)),!t}return!0};function Qu(t,e,n,i,r){if(e===n)return!0;if(e===null||n===null)return!1;for(var a=e.linksConnected;a.next();){var h=a.value;if(h!==i&&(!r||h.isTreeLink)&&h.toNode===e&&(h=h.fromNode,h!==e&&Qu(t,h,n,i,r)))return!0}return!1}function WP(t,e,n,i,r){if(n===i)return!0;if(n===null||i===null||e.contains(n))return!1;e.add(n);for(var a=n.linksConnected;a.next();){var h=a.value;if(h!==r&&h.toNode===n&&(h=h.fromNode,h!==n&&WP(t,e,h,i,r)))return!0}return!1}function $P(t,e,n,i,r){if(n===i)return!0;if(n===null||i===null||e.contains(n))return!1;e.add(n);for(var a=n.linksConnected;a.next();){var h=a.value;if(h!==r){var g=h.fromNode;if(h=h.toNode,g=g===n?h:g,g!==n&&$P(t,e,g,i,r))return!0}}return!1}I.Object.defineProperties(Ze.prototype,{portGravity:{get:function(){return this.le},set:function(t){0<=t&&(this.le=t)}},isUnconnectedLinkValid:{get:function(){return this.Ga},set:function(t){this.Ga=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.vi},set:function(t){this.vi=t}},temporaryFromNode:{get:function(){return this.ui},set:function(t){(this.ui=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var n=e.R.indexOf(this.j);e.mb(n),e.Cb(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.wi},set:function(t){(this.wi=t)&&(this.m=t.port)}},temporaryToPort:{get:function(){return this.m},set:function(t){if(this.m!==null){var e=this.m.panel;if(e!==null){var n=e.R.indexOf(this.m);e.mb(n),e.Cb(n,t)}}this.m=t}},originalLink:{get:function(){return this.Db},set:function(t){this.Db=t}},originalFromNode:{get:function(){return this.cb},set:function(t){this.cb=t}},originalFromPort:{get:function(){return this.nb},set:function(t){this.nb=t}},originalToNode:{get:function(){return this.Hc},set:function(t){this.Hc=t}},originalToPort:{get:function(){return this.Ic},set:function(t){this.Ic=t}},isForwards:{get:function(){return this.ga},set:function(t){this.ga=t}},validPortsCache:{get:function(){return this.Wo}},targetPort:{get:function(){return this.Gf},set:function(t){this.Gf=t}},linkValidation:{get:function(){return this.bj},set:function(t){this.bj=t}},portTargeted:{get:function(){return this.Ff},set:function(t){this.Ff=t}}}),Ze.className="LinkingBaseTool";function Gn(){Ze.call(this),this.name="Linking",this.W={},this.F=null,this.L=cf,this.Qd=null}O(Gn,Ze),Gn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Vr()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Gn.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.ec(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof q)))return null;var n=this.direction;if(n===cf||n===JP){var i=this.findValidLinkablePort(e,!1);if(i!==null||this.startObject===t&&(i=t.port,this.findValidLinkablePort(i,!1)))return this.isForwards=!0,i}return(n===cf||n===ZP)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},Gn.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode===null||this.temporaryToNode.location.v()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof q&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode===null||this.temporaryFromNode.location.v()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof q&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0)},Gn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Gn.prototype.doStop=function(){Ze.prototype.doStop.call(this),this.startObject=null},Gn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,i=null,r=null,a=null;try{var h=this.targetPort=this.findTargetPort(this.isForwards);if(h!==null){var g=h.part;g instanceof q&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,n=this.originalFromPort),i=g,r=h):(e=g,n=h,this.originalToNode!==null&&(i=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(i=this.originalToNode,r=this.originalToPort);e!==null||i!==null?(a=this.insertLink(e,n,i,r),a!==null?(h===null&&(this.isForwards?a.defaultToPoint=t.lastInput.documentPoint:a.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),a.isSelected=!0),this.transactionResult=this.name,t.P("LinkDrawn",a)):this.doNoLink(e,n,i,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),a&&t.allowSelect&&t.P("ChangedSelection",t.selection)}}},Gn.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof H)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Gn.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},Gn.prototype.doNoLink=function(){},I.Object.defineProperties(Gn.prototype,{archetypeLinkData:{get:function(){return this.W},set:function(t){this.W=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.L},set:function(t){this.L=t}},startObject:{get:function(){return this.Qd},set:function(t){this.Qd=t}}});var cf=new $(Gn,"Either",0),JP=new $(Gn,"ForwardsOnly",0),ZP=new $(Gn,"BackwardsOnly",0);Gn.className="LinkingTool",Gn.Either=cf,Gn.ForwardsOnly=JP,Gn.BackwardsOnly=ZP;function Ti(){Ze.call(this),this.name="Relinking";var t=new yt;t.figure="Diamond",t.desiredSize=el,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.W=t,t=new yt,t.figure="Diamond",t.desiredSize=el,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Qd=t,this.F=null,this.iw=new G}O(Ti,Ze),Ti.prototype.updateAdornments=function(t){if(t!==null&&t instanceof H){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;i!==null&&t.canRelinkFrom()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.zf()&&(n=t.Hj(e),n===null&&(n=this.makeAdornment(i,!1),t.Tg(e,n)))}n===null&&t.Af(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&(i=t.selectionObject,i!==null&&t.canRelinkTo()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.zf()&&(n=t.Hj(e),n===null?(n=this.makeAdornment(i,!0),t.Tg(e,n)):n.w())),n===null&&t.Af(e)}},Ti.prototype.makeAdornment=function(t,e){var n=new Ct;return n.type=X.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&n.add(e.copy()),n.adornedObject=t,n},Ti.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Vr()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},Ti.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var n=e.part;if(!(n instanceof Ct&&n.adornedPart instanceof H))return;this.handle=e,this.isForwards=n===null||n.category==="RelinkTo",this.originalLink=n.adornedPart}this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.iw.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=tl),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=tl),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0},Ti.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Kh||n===ns)&&(n=Ln),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Ti.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Ti.prototype.doStop=function(){Ze.prototype.doStop.call(this),this.handle=null},Ti.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,r=this.originalToPort,a=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var h=this.targetPort.part;h instanceof q&&(this.isForwards?(i=h,r=this.targetPort):(e=h,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=i=null:n=e=null:a=null;a!==null?(this.reconnectLink(a,this.isForwards?i:e,this.isForwards?r:n,this.isForwards),this.targetPort===null&&(this.isForwards?a.defaultToPoint=t.lastInput.documentPoint:a.defaultFromPoint=t.lastInput.documentPoint,a.ab()),this.transactionResult=this.name,t.P("LinkRelinked",a,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Ao(this.iw)}finally{this.stopTool()}}},Ti.prototype.reconnectLink=function(t,e,n,i){return n=n!==null&&n.portId!==null?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},Ti.prototype.doNoRelink=function(){};function QP(t,e,n,i,r){e!==null?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),i!==null?(t.copyPortProperties(i,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}I.Object.defineProperties(Ti.prototype,{fromHandleArchetype:{get:function(){return this.W},set:function(t){this.W=t}},toHandleArchetype:{get:function(){return this.Qd},set:function(t){this.Qd=t}},handle:{get:function(){return this.F},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),Ti.className="RelinkingTool",Nt("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Nt("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)});function ve(){Ft.call(this),this.name="LinkReshaping";var t=new yt;t.figure="Rectangle",t.desiredSize=Ym,t.fill="lightblue",t.stroke="dodgerblue",this.m=t,t=new yt,t.figure="Diamond",t.desiredSize=el,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.vs=this.j=null,this.jw=new C,this.xq=new tt}O(ve,Ft),ve.prototype.Du=function(t){return t&&t.reshapingBehavior.value!==0?t.reshapingBehavior:p0},ve.prototype.Wl=function(t,e){t.reshapingBehavior=e},ve.prototype.updateAdornments=function(t){if(t!==null&&t instanceof H){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;n!==null&&t.canReshape()&&t.actualBounds.v()&&t.isVisible()&&n.actualBounds.v()&&n.zf()&&(e=t.Hj(this.name),e===null||e.ew!==t.pointsCount||e.yw!==t.resegmentable)&&(e=this.makeAdornment(n),e!==null&&(e.ew=t.pointsCount,e.yw=t.resegmentable,t.Tg(this.name,e)))}e===null&&t.Af(this.name)}},ve.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,r=null;if(e.points!==null&&1<n){r=new Ct,r.type=X.Link,n=e.firstPickIndex;var a=e.lastPickIndex,h=i?1:0;if(e.resegmentable&&e.computeCurve()!==si)for(var g=n+h;g<a-h;g++){var f=this.makeResegmentHandle(t,g);f!==null&&(f.segmentIndex=g,f.segmentFraction=.5,f.fromMaxLinks=999,r.add(f))}for(h=n+1;h<a;h++)if(g=this.makeHandle(t,h),g!==null){if(g.segmentIndex=h,h!==n)if(h===n+1&&i){f=e.i(n);var c=e.i(n+1);A.B(f.x,c.x)&&A.B(f.y,c.y)&&(c=e.i(n-1)),A.B(f.x,c.x)?(this.Wl(g,ch),g.cursor="n-resize"):A.B(f.y,c.y)&&(this.Wl(g,fh),g.cursor="w-resize")}else h===a-1&&i?(f=e.i(a-1),c=e.i(a),A.B(f.x,c.x)&&A.B(f.y,c.y)&&(f=e.i(a+1)),A.B(f.x,c.x)?(this.Wl(g,ch),g.cursor="n-resize"):A.B(f.y,c.y)&&(this.Wl(g,fh),g.cursor="w-resize")):h!==a&&(this.Wl(g,m0),g.cursor="move");r.add(g)}r.adornedObject=t}return r},ve.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},ve.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},ve.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},ve.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof H){if(this.vs=e,t.isMouseCaptured=!0,this.Da(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.Cb(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.Cb(this.handle.segmentIndex+1,i),e.points=n,e.Rb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.jw=e.i(this.handle.segmentIndex),this.xq=e.points.copy(),this.isActive=!0}}},ve.prototype.doDeactivate=function(){this.stopTransaction(),this.vs=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},ve.prototype.stopTransaction=function(){var t=this.diagram,e=Ft.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e},ve.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.xq),this.stopTool()},ve.prototype.getResegmentingPoint=function(){return this.handle.ia(Gt)},ve.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},ve.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),r=e.i(n),a=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var h=e.i(n-2);if(Math.abs(i.x-r.x)<this.resegmentingDistance&&Math.abs(i.y-r.y)<this.resegmentingDistance&&(dh(this,h,i,r,a,!0)||dh(this,h,i,r,a,!1))){var g=e.points.copy();dh(this,h,i,r,a,!0)?(g.Vc(n-2,new C(h.x,(a.y+h.y)/2)),g.Vc(n+1,new C(a.x,(a.y+h.y)/2))):(g.Vc(n-2,new C((a.x+h.x)/2,h.y)),g.Vc(n+1,new C((a.x+h.x)/2,a.y))),g.mb(n),g.mb(n-1),e.points=g,e.Rb()}else h=e.i(n+2),Math.abs(r.x-a.x)<this.resegmentingDistance&&Math.abs(r.y-a.y)<this.resegmentingDistance&&(dh(this,i,r,a,h,!0)||dh(this,i,r,a,h,!1))&&(g=e.points.copy(),dh(this,i,r,a,h,!0)?(g.Vc(n-1,new C(i.x,(i.y+h.y)/2)),g.Vc(n+2,new C(h.x,(i.y+h.y)/2))):(g.Vc(n-1,new C((i.x+h.x)/2,i.y)),g.Vc(n+2,new C((i.x+h.x)/2,h.y))),g.mb(n+1),g.mb(n),e.points=g,e.Rb())}}else h=C.alloc(),A.fh(i.x,i.y,a.x,a.y,r.x,r.y,h)&&h.rf(r)<this.resegmentingDistance*this.resegmentingDistance&&(i=e.points.copy(),i.mb(n),e.points=i,e.Rb()),C.free(h)}t.Va(),this.transactionResult=this.name,t.P("LinkReshaped",this.adornedLink,this.xq)}this.stopTool()};function dh(t,e,n,i,r,a){return a?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-r.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-r.x)<t.resegmentingDistance}ve.prototype.reshape=function(t){var e=this.adornedLink;e.jh();var n=this.handle.segmentIndex,i=this.Du(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===ch?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):i===fh&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===ch?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):i===fh&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{i=n;var r=e.i(i),a=e.i(i-1),h=e.i(i+1);A.B(a.x,r.x)&&A.B(r.y,h.y)?(A.B(a.x,e.i(i-2).x)&&!A.B(a.y,e.i(i-2).y)?(e.l(i,t.x,a.y),n++,i++):e.M(i-1,t.x,a.y),A.B(h.y,e.i(i+2).y)&&!A.B(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.M(i+1,h.x,t.y)):A.B(a.y,r.y)&&A.B(r.x,h.x)?(A.B(a.y,e.i(i-2).y)&&!A.B(a.x,e.i(i-2).x)?(e.l(i,a.x,t.y),n++,i++):e.M(i-1,a.x,t.y),A.B(h.x,e.i(i+2).x)&&!A.B(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.M(i+1,t.x,h.y)):A.B(a.x,r.x)&&A.B(r.x,h.x)?(A.B(a.x,e.i(i-2).x)&&!A.B(a.y,e.i(i-2).y)?(e.l(i,t.x,a.y),n++,i++):e.M(i-1,t.x,a.y),A.B(h.x,e.i(i+2).x)&&!A.B(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.M(i+1,t.x,h.y)):A.B(a.y,r.y)&&A.B(r.y,h.y)&&(A.B(a.y,e.i(i-2).y)&&!A.B(a.x,e.i(i-2).x)?(e.l(i,a.x,t.y),n++,i++):e.M(i-1,a.x,t.y),A.B(h.y,e.i(i+2).y)&&!A.B(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.M(i+1,h.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),i=e.fromNode,r=e.fromPort,i!==null&&(a=i.findVisibleNode(),a!==null&&a!==i&&(i=a,r=i.port)),n===1&&e.computeSpot(!0,r).Fc()&&(a=r.ia(Gt,C.alloc()),i=e.getLinkPointFromPoint(i,r,a,t,!0,C.alloc()),e.M(0,i.x,i.y),C.free(a),C.free(i)),i=e.toNode,r=e.toPort,i!==null&&(a=i.findVisibleNode(),a!==null&&a!==i&&(i=a,r=i.port)),n===e.pointsCount-2&&e.computeSpot(!1,r).Fc()&&(n=r.ia(Gt,C.alloc()),t=e.getLinkPointFromPoint(i,r,n,t,!1,C.alloc()),e.M(e.pointsCount-1,t.x,t.y),C.free(n),C.free(t));e.pf()},ve.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Du(this.handle)){case m0:return t;case ch:return new C(e.i(n).x,t.y);case fh:return new C(t.x,e.i(n).y);default:case p0:return e.i(n)}},I.Object.defineProperties(ve.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.vs}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.jw}},originalPoints:{get:function(){return this.xq}}}),ve.prototype.setReshapingBehavior=ve.prototype.Wl,ve.prototype.getReshapingBehavior=ve.prototype.Du;var p0=new $(ve,"None",0),fh=new $(ve,"Horizontal",1),ch=new $(ve,"Vertical",2),m0=new $(ve,"All",3);ve.className="LinkReshapingTool",ve.None=p0,ve.Horizontal=fh,ve.Vertical=ch,ve.All=m0,Nt("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)});function Sn(){Ft.call(this),this.name="Resizing",this.m=new dt(1,1).freeze(),this.j=new dt(9999,9999).freeze(),this.pg=new dt(NaN,NaN).freeze(),this.W=!1,this.ga=!0,this.me=null;var t=new yt;t.alignmentFocus=Gt,t.figure="Rectangle",t.desiredSize=Ym,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.wq=new C,this.hw=new dt,this.An=new C,this.Us=new dt(0,0),this.Ts=new dt(1/0,1/0),this.Ss=new dt(1,1)}O(Sn,Ft),Sn.prototype.updateAdornments=function(t){if(!(t===null||t instanceof H)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.Hj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.zf()&&((n===null||n.adornedObject!==e)&&(n=this.makeAdornment(e)),n!==null)){e=e.fi(),Ds(t)&&this.updateResizeHandles(n,e),t.Tg(this.name,n);return}}t.Af(this.name)}},Sn.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new Ct,e.type=X.Spot,e.locationSpot=Gt;var n=new wn;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,nn)),e.add(this.makeHandle(t,rh)),e.add(this.makeHandle(t,Xo)),e.add(this.makeHandle(t,sh)),e.add(this.makeHandle(t,ki)),e.add(this.makeHandle(t,Wn)),e.add(this.makeHandle(t,Ci)),e.add(this.makeHandle(t,Ni))}else if(ji(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},Sn.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},Sn.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Sb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.Fc()&&(n=Gt),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else if(1<=n.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof X)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},Sn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},Sn.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.wc(),this.Da(this.name),this.wq.set(this.adornedObject.ia(this.handle.alignment.Qu())),this.An.set(this.adornedObject.part.location),this.hw.set(this.adornedObject.desiredSize),this.Ss=this.computeCellSize(),this.Us=this.computeMinSize(),this.Ts=this.computeMaxSize(),this.isActive=!0))},Sn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.me=this.handle=null,this.isActive=t.isMouseCaptured=!1},Sn.prototype.stopTransaction=function(){var t=this.diagram,e=Ft.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e},Sn.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},Sn.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,i=this.Ss,r=this.adornedObject.Nr(t.lastInput.documentPoint,C.alloc()),a=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,n,i,a),this.resize(e),t.nd(),C.free(r)}},Sn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,i=this.Ss,r=this.adornedObject.Nr(t.lastInput.documentPoint,C.alloc()),a=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,n,i,a),this.resize(e),C.free(r),t.Va(),this.transactionResult=this.name,t.P("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},Sn.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(n!==null){if(n.desiredSize=t.size,t=n.part,t.Za(),n=n.ia(this.handle.alignment.Qu()),t instanceof pt){var i=new tt;if(i.add(t),!this.dragsMembers&&t.placeholder===null){var r=new Ch;r.dragsMembers=!1}e.moveParts(i,this.oppositePoint.copy().je(n),!0,r)}else t.location=t.location.copy().je(n).add(this.oppositePoint);e.nd()}},Sn.prototype.computeResize=function(t,e,n,i,r,a){e.Fc()&&(e=Gt);var h=this.adornedObject.naturalBounds,g=h.x,f=h.y,c=h.x+h.width,m=h.y+h.height,y=1;if(!a){y=h.width;var S=h.height;0>=y&&(y=1),0>=S&&(S=1),y=S/y}return S=C.alloc(),A.so(t.x,t.y,g,f,r.width,r.height,S),t=h.copy(),0>=e.x?0>=e.y?(t.x=Math.max(S.x,c-i.width),t.x=Math.min(t.x,c-n.width),t.width=Math.max(c-t.x,n.width),t.y=Math.max(S.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=Math.max(m-t.y,n.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width),t.x=c-t.width,t.y=m-t.height)):1<=e.y?(t.x=Math.max(S.x,c-i.width),t.x=Math.min(t.x,c-n.width),t.width=Math.max(c-t.x,n.width),t.height=Math.max(Math.min(S.y-f,i.height),n.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width),t.x=c-t.width)):(t.x=Math.max(S.x,c-i.width),t.x=Math.min(t.x,c-n.width),t.width=c-t.x,a||(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y,t.y=f+.5*(m-f-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(S.x-g,i.width),n.width),t.y=Math.max(S.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=Math.max(m-t.y,n.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width),t.y=m-t.height)):1<=e.y?(t.width=Math.max(Math.min(S.x-g,i.width),n.width),t.height=Math.max(Math.min(S.y-f,i.height),n.height),a||(1<=t.height/t.width?(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y):(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width))):(t.width=Math.max(Math.min(S.x-g,i.width),n.width),a||(t.height=Math.max(Math.min(y*t.width,i.height),n.height),t.width=t.height/y,t.y=f+.5*(m-f-t.height))):0>=e.y?(t.y=Math.max(S.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=m-t.y,a||(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width,t.x=g+.5*(c-g-t.width))):1<=e.y&&(t.height=Math.max(Math.min(S.y-f,i.height),n.height),a||(t.width=Math.max(Math.min(t.height/y,i.width),n.width),t.height=y*t.width,t.x=g+.5*(c-g-t.width))),C.free(S),t},Sn.prototype.computeReshape=function(){var t=ae;return this.adornedObject instanceof yt&&(t=xy(this.adornedObject)),!(t===To||this.diagram.lastInput.shift)},Sn.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Sn.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Sn.prototype.computeCellSize=function(){var t=new dt(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},I.Object.defineProperties(Sn.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.me},set:function(t){if(t!==null&&t.part instanceof Ct)throw Error("new handle must not be in an Adornment: "+t);this.me=t}},minSize:{get:function(){return this.m},set:function(t){if(!this.m.C(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.m.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.C(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.pg},set:function(t){this.pg.C(t)||this.pg.assign(t)}},isGridSnapEnabled:{get:function(){return this.W},set:function(t){this.W=t}},dragsMembers:{get:function(){return this.ga},set:function(t){this.ga=t}},oppositePoint:{get:function(){return this.wq},set:function(t){this.wq.C(t)||this.wq.assign(t)}},originalDesiredSize:{get:function(){return this.hw}},originalLocation:{get:function(){return this.An}}}),Sn.className="ResizingTool",Nt("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)});function ei(){Ft.call(this),this.name="Rotating",this.ga=45,this.W=2,this.An=new C,this.me=null;var t=new yt;t.figure="Ellipse",t.desiredSize=el,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.m=t,this.j=null,this.gw=0,this.Jq=new C(NaN,NaN),this.u=0,this.F=50}O(ei,Ft),ei.prototype.updateAdornments=function(t){if(t!==null){if(t.eh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.zf())){var n=t.Hj(this.name);if((n===null||n.adornedObject!==e)&&(n=this.makeAdornment(e)),n!==null){n.angle=e.fi(),n.placeholder===null&&(n.location=this.computeAdornmentLocation(e)),t.Tg(this.name,n);return}}t.Af(this.name)}},ei.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new Ct,e.type=X.Position,e.locationSpot=Gt;var n=this.handleArchetype;n!==null&&e.add(n.copy())}else if(ji(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},ei.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},ei.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Da(this.name),this.gw=this.adornedObject.angle,this.Jq=this.computeRotationPoint(this.adornedObject),this.An=this.adornedObject.part.location.copy(),this.isActive=!0)},ei.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.pb()?t.ia(e.rotationSpot):t===e||t===n?n.ia(e.locationSpot):t.ia(Gt)},ei.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.v()||(e=this.computeRotationPoint(t)),e=t.Nr(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return n===0?e.x=t.naturalBounds.width+i:n===45?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):n===90?e.y=t.naturalBounds.height+i:n===135?(e.x=-i,e.y=t.naturalBounds.height+i):n===180?e.x=-i:n===225?(e.x=-i,e.y=-i):n===270?e.y=-i:n===315&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ia(e)},ei.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.me=this.handle=null,this.Jq=new C(NaN,NaN),this.isActive=t.isMouseCaptured=!1},ei.prototype.stopTransaction=function(){var t=this.diagram,e=Ft.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e},ei.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},ei.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},ei.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Va(),this.transactionResult=this.name,t.P("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},ei.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Za();var n=e.locationObject,i=e.rotateObject;(n===i||n.jg(i))&&(n=this.An.copy(),e.location=n.je(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.nd()}},ei.prototype.computeRotate=function(t){t=this.rotationPoint.Ya(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.fi()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},I.Object.defineProperties(ei.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.me},set:function(t){if(t!==null&&t.part instanceof Ct)throw Error("new handle must not be in an Adornment: "+t);this.me=t}},snapAngleMultiple:{get:function(){return this.ga},set:function(t){this.ga=t}},snapAngleEpsilon:{get:function(){return this.W},set:function(t){this.W=t}},originalAngle:{get:function(){return this.gw}},rotationPoint:{get:function(){return this.Jq},set:function(t){this.Jq=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),ei.className="RotatingTool",Nt("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)});function ph(){Ft.call(this),this.name="ClickSelecting"}O(ph,Ft),ph.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},ph.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},ph.className="ClickSelectingTool";function Vr(){Ft.call(this),this.name="Action",this.ck=null}O(Vr,Ft),Vr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.ec(e.documentPoint,function(i){for(;i.panel!==null&&!i.isActionable;)i=i.panel;return i});return n!==null&&n.isActionable?(this.ck=n,t.qk=t.ec(e.documentPoint,null,null),!0):!1},Vr.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Vr.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},Vr.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;n.panel!==null&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},Vr.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.ck;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},Vr.prototype.doStop=function(){this.ck=null},Vr.className="ActionTool";function ua(){Ft.call(this),this.name="ClickCreating",this.Li=null,this.m=!0,this.j=!1,this.Rv=new C(0,0)}O(ua,Ft),ua.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.Rv=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.Rv))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.wl(t.lastInput.documentPoint,!0)!==null)},ua.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},ua.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(n===null)return null;var i=null;try{if(e.P("ChangingSelection",e.selection),this.Da(this.name),n instanceof lt)n.Tc()&&(ji(n),i=n.copy(),i!==null&&e.add(i));else if(n!==null){var r=e.model.copyNodeData(n);mt(r)&&(e.model.lf(r),i=e.Ec(r))}if(i!==null){var a=C.allocAt(t.x,t.y);this.isGridSnapEnabled&&B0(this.diagram,i,t,a),i.location=a,e.allowSelect&&(e.clearSelection(!0),i.isSelected=!0),C.free(a)}e.Va(),this.transactionResult=this.name,e.P("PartCreated",i)}finally{this.stopTransaction(),e.P("ChangedSelection",e.selection)}return i},I.Object.defineProperties(ua.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){this.Li=t}},isDoubleClick:{get:function(){return this.m},set:function(t){this.m=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),ua.className="ClickCreatingTool";function _o(){Ft.call(this),this.name="DragSelecting",this.wk=175,this.m=!1;var t=new lt;t.layerName="Tool",t.selectable=!1;var e=new yt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}O(_o,Ft),_o.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.wl(e.documentPoint,!0)!==null))},_o.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},_o.prototype.doDeactivate=function(){var t=this.diagram;t.lg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},_o.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),n=this.box.fb("SHAPE");n===null&&(n=this.box.vb());var i=dt.alloc().h(e.width,e.height);n.desiredSize=i,this.box.Ul(e.x,e.y,!1),dt.free(i),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},_o.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.P("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},_o.prototype.computeBoxBounds=function(){var t=this.diagram;return new G(t.firstInput.documentPoint,t.lastInput.documentPoint)},_o.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Ww(t,this.isPartialInclusion),Ce?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(n=new tt,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},I.Object.defineProperties(_o.prototype,{delay:{get:function(){return this.wk},set:function(t){this.wk=t}},isPartialInclusion:{get:function(){return this.m},set:function(t){this.m=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),_o.className="DragSelectingTool";function Ko(){Ft.call(this),this.name="Panning",this.Ct=new C,this.ey=new C,this.og=!1;var t=this;this.ow=function(){var e=t.diagram;e!==null&&e.removeEventListener(U.document,"scroll",t.ow,!1),t.stopTool()}}O(Ko,Ft),Ko.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Ko.prototype.doActivate=function(){var t=this.diagram;this.og?(t.lastInput.bubbles=!0,t.addEventListener(U.document,"scroll",this.ow,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Ct.assign(t.position)),this.isActive=!0},Ko.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Ko.prototype.doCancel=function(){var t=this.diagram;t.position=this.Ct,t.isMouseCaptured=!1,this.stopTool()},Ko.prototype.doMouseMove=function(){this.move()},Ko.prototype.doMouseUp=function(){this.move(),this.stopTool()},Ko.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.og)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,r=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.ey.h(r,n)}},I.Object.defineProperties(Ko.prototype,{bubbles:{get:function(){return this.og},set:function(t){this.og=t}},originalPosition:{get:function(){return this.Ct}}}),Ko.className="PanningTool",Nt("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Nt("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Nt("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Nt("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Nt("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)});function Yr(){this.F=this.u=this.j=this.m=null}I.Object.defineProperties(Yr.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),Yr.className="HTMLInfo";function ao(t,e,n){this.text=t,this.Kw=e,this.visible=n}ao.className="ContextMenuButtonInfo";function ni(){Ft.call(this),this.name="ContextMenu",this.m=this.Js=this.j=null,this.cw=new C,this.Ls=null,this.gt=!1;var t=this;this.Zt=function(){t.stopTool()}}O(ni,Ft);function Wk(t){var e=new Yr;e.show=function(r,a,h){h.showDefaultContextMenu()},e.hide=function(r,a){a.hideDefaultContextMenu()},mh=e,t.Zt=function(){t.stopTool()},e=Q("div");var n=Q("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=Q("style");U.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i=t.diagram,i!==null&&(i.addEventListener(e,"contextmenu",y0,!1),i.addEventListener(e,"selectstart",y0,!1),i.addEventListener(n,"contextmenu",y0,!1)),e.className="goCXforeground",n.className="goCXbackground",U.document.body&&(U.document.body.appendChild(e),U.document.body.appendChild(n)),bu=e,qu=n,v0=!0}function y0(t){return t.preventDefault(),!1}ni.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},ni.prototype.doStart=function(){this.cw.set(this.diagram.firstInput.documentPoint)},ni.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},ni.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.lastInput,i=null;if(t instanceof z||(t instanceof st?i=t:i=e.ec(n.documentPoint,null,function(r){return!r.layer.isTemporary})),i!==null){for(t=i;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(e.contextMenu!==null)return e;return null},ni.prototype.doActivate=function(){},ni.prototype.doMouseDown=function(){if(Ft.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Ct){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&qP(this)},ni.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Ct){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}qP(this)};function qP(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(n!==null){if(!(n instanceof Yr)){var i=e.ec(e.lastInput.documentPoint,null,null);i!==null&&i.jg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(bP(t,!0),t.isActive||t.stopTool())}function bP(t,e,n){if(n===void 0&&(n=null),!t.gt&&(t.gt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.gt=!1,!e)){if(t.isActive=!0,e=mh,n===null&&(n=t.findObjectWithContextMenu()),n!==null){var i=n.contextMenu;i!==null?(t.currentObject=n instanceof st?n:null,t.showContextMenu(i,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof Ct&&!t.currentContextMenu.visible&&t.stopTool()}}ni.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},ni.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Ct){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=n.scale);var i=t.diagram;i!==null&&i!==n&&i.remove(t),n.add(t),e!==null?t.adornedObject=e:t.data=n.model,t.Za(),this.positionContextMenu(t,e)}else t instanceof Yr&&t.show(e,n,this);this.currentContextMenu=t},ni.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>r.right&&(n.x-=i.width+5/e.scale),n.x<r.x&&(n.x=r.x),n.y+i.height>r.bottom&&(n.y-=i.height+5/e.scale),n.y<r.y&&(n.y=r.y),t.position=n}},ni.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof Ct?(t.remove(e),this.Js!==null&&this.Js.Af(e.category),e.data=null,e.adornedObject=null):e instanceof Yr&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function $k(t){var e=new tt;return e.add(new ao("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new ao("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new ao("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new ao("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new ao("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new ao("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new ao("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new ao("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new ao("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new ao("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new ao("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new ao("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new ao("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}ni.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.Ls===null&&(this.Ls=$k(this)),bu.innerHTML="",qu.addEventListener("pointerdown",this.Zt,!1);var e=this,n=Q("ul");n.className="goCXul",bu.appendChild(n),n.innerHTML="";for(var i=this.Ls.iterator;i.next();){var r=i.value,a=r.visible;if(typeof r.Kw=="function"&&(typeof a!="function"||a(t))){a=Q("li"),a.className="goCXli";var h=Q("a");h.className="goCXa",h.href="#",h.Qx=r.Kw,h.addEventListener("pointerdown",function(g){return this.Qx(t),e.stopTool(),g.preventDefault(),!1},!1),h.textContent=r.text,a.appendChild(h),n.appendChild(a)}}bu.style.display="block",qu.style.display="block"},ni.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===mh){bu.style.display="none",qu.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(qu,"pointerdown",this.Zt,!1),this.currentContextMenu=null}},I.Object.defineProperties(ni.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.Js=t instanceof Ct?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return v0===!1&&mh===null&&_i&&Wk(this),mh},set:function(t){t===null&&(v0=!0),mh=t}},currentObject:{get:function(){return this.m},set:function(t){this.m=t}},mouseDownPoint:{get:function(){return this.cw}}});var mh=null,v0=!1,qu=null,bu=null;ni.className="ContextMenuTool",Nt("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)});function $t(){Ft.call(this),this.name="TextEditing",this.Sh=new Rt,this.ga=null,this.W=P0,this.qj=null,this.na=tg,this.u=1,this.F=!0,this.m=null,this.j=new Yr,this.Ms=null,Jk(this,this.j)}O($t,Ft);function Jk(t,e){if(_i){var n=Q("textarea");t.Ms=n,n.addEventListener("input",function(){if(t.textBlock!==null){var i=t.qx(this.value);this.style.width=20+i.measuredBounds.width*this.cA+"px",this.rows=i.lineCount}},!1),n.addEventListener("keydown",function(i){if(t.textBlock!==null){var r=i.key;r==="Enter"?(t.textBlock.isMultiline===!1&&i.preventDefault(),t.acceptText(mf)):r==="Tab"?(t.acceptText(S0),i.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==tg){var i=t.Ms;t.na===eg&&(t.na=yf),typeof i.select=="function"&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==tg){var i=t.Ms;typeof i.focus=="function"&&i.focus(),typeof i.select=="function"&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(i,r,a){if(i instanceof Rt&&a instanceof $t)if(a.state===ng)n.style.border="3px solid red",n.focus();else{var h=i.ia(Gt),g=r.position,f=r.scale,c=i.uf()*f;c<a.minimumEditorScale&&(c=a.minimumEditorScale);var m=i.naturalBounds.width*c+6,y=i.naturalBounds.height*c+2,S=(h.x-g.x)*f;h=(h.y-g.y)*f,g=i.verticalAlignment,f=(i.lineHeight+i.spacingAbove+i.spacingBelow)*i.lineCount*c,y=g.y*y-g.y*f+g.offsetY-(.5*y-.5*f)-f/2,n.value=i.text,r.div.style.font=i.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*c+"%",n.style.lineHeight="normal",n.style.width=m+"px",n.style.left=(S-m/2|0)-1+"px",n.style.top=(h+y|0)-1+"px",n.style.textAlign=i.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=i.lineCount,n.cA=c,n.className="goTXarea",r.div.appendChild(n),n.focus(),a.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(i){i.div.removeChild(n)}}}$t.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||sl&&sl!==this&&(sl.acceptText(pf),sl&&sl!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.ec(t.lastInput.documentPoint);return e!==null&&e instanceof Rt&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===P0&&!e.isSelected||this.starting===nx&&2>t.lastInput.clickCount)):!1},$t.prototype.doStart=function(){sl=this,this.textBlock!==null&&this.doActivate()},$t.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.ec(t.lastInput.documentPoint)),e!==null&&e instanceof Rt&&(this.textBlock=e,e.part!==null)){t.animationManager.wc(),this.isActive=!0,this.na=eg;var n=this.defaultTextEditor;e.textEditor!==null&&(n=e.textEditor),this.Sh=this.textBlock.copy();var i=new G(this.textBlock.ia(nn),this.textBlock.ia(Xo));t.bv(i),n.show(e,t,this),this.currentTextEditor=n}}}},$t.prototype.doCancel=function(){this.stopTool()},$t.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},$t.prototype.doMouseDown=function(){this.isActive&&this.acceptText(pf)},$t.prototype.acceptText=function(t){switch(t){case pf:this.na===w0?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.na===eg||this.na===ng||this.na===yf)&&(this.na=x0,tx(this));break;case ex:case mf:case S0:(mf!==t||this.textBlock.isMultiline!==!0)&&(this.na===eg||this.na===ng||this.na===yf)&&(this.na=x0,tx(this))}};function tx(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(e!==null&&i!==null){var r=e.text,a="";i.valueFunction!==null&&(a=i.valueFunction()),t.isValidText(e,r,a)?(t.Da(t.name),t.na=w0,t.transactionResult=t.name,e.text=a,t.doSuccess(r,a),n!==null&&n.P("TextEdited",e,r),t.stopTransaction(),t.stopTool(),n!==null&&n.doFocus()):(t.na=ng,t.doError(r,a))}}$t.prototype.doError=function(t,e){var n=this.textBlock;n.errorFunction!==null&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},$t.prototype.doSuccess=function(t,e){var n=this.textBlock;n.textEdited!==null&&n.textEdited(n,t,e)},$t.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.na=tg,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},$t.prototype.doStop=function(){sl=null},$t.prototype.isValidText=function(t,e,n){var i=this.textValidation;return i!==null&&!i(t,e,n)?!1:(i=t.textValidation,!!(i===null||i(t,e,n)))},$t.prototype.qx=function(t){var e=this.Sh;return e.text=t,e.measure(this.textBlock.zh,1/0),e},I.Object.defineProperties($t.prototype,{textBlock:{get:function(){return this.ga},set:function(t){this.ga=t}},currentTextEditor:{get:function(){return this.m},set:function(t){this.m=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.W},set:function(t){this.W=t}},textValidation:{get:function(){return this.qj},set:function(t){this.qj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.na},set:function(t){this.na!==t&&(this.na=t)}}}),$t.prototype.measureTemporaryTextBlock=$t.prototype.qx;var ex=new $($t,"LostFocus",0),pf=new $($t,"MouseDown",1),S0=new $($t,"Tab",2),mf=new $($t,"Enter",3),Zk=new $($t,"SingleClick",0),P0=new $($t,"SingleClickSelected",1),nx=new $($t,"DoubleClick",2),tg=new $($t,"StateNone",0),eg=new $($t,"StateActive",1),yf=new $($t,"StateEditing",2),x0=new $($t,"StateValidating",3),ng=new $($t,"StateInvalid",4),w0=new $($t,"StateValidated",5),sl=null;$t.className="TextEditingTool",$t.LostFocus=ex,$t.MouseDown=pf,$t.Tab=S0,$t.Enter=mf,$t.SingleClick=Zk,$t.SingleClickSelected=P0,$t.DoubleClick=nx,$t.StateNone=tg,$t.StateActive=eg,$t.StateEditing=yf,$t.StateValidating=x0,$t.StateInvalid=ng,$t.StateValidated=w0,Nt("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)});function ci(t){xf||(sx(),xf=!0),this.H=xh,this.Dk=this.zb=this.Xp=this.$b=!1,this.uw=!0,this.Ek=wf,this.lm=!1,this.wh=this.Ad=!0,this.ug=600,this.Hv=this.sw=!1,this.Sd=new Z,this.Wd=new on,this.Wd.Rd=this,this.yi=new Z,this.Vt=new Z,this.rr=new Z,this.dl=new Z,t&&Object.assign(this,t)}ci.prototype.Le=function(t){this.H=t},ci.prototype.canStart=function(){return!0};function Ur(t,e){t.Ad&&t.canStart(e)&&(t.Sd.add(e),t.defaultAnimation.isAnimating&&t.wc(),Pn(t.H),t.zb=!0)}function L0(t){if(t.Ad&&t.zb){var e=t.Wd,n=t.H,i=t.Sd.contains("Model");i&&(t.Dk=!0,t.Ek===wf?(e.isViewportUnconstrained=!0,e.rc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.Ek===lx&&e.rc.clear(),t.uw=!!(t.Ek===ax&&n.Jt.C(n.pa)),n.P("InitialAnimationStarting",t)),i&&!t.wh||e.rc.count===0?(t.Sd.clear(),t.zb=!1,e.rc.clear(),Lf(e,n),t.Dk=!1,n.N()):(t.Sd.clear(),n.cg=!1,i=e.rc.get(n),n.autoScale!==pi&&i!==null&&(delete i.start.scale,delete i.end.scale),U.requestAnimationFrame(function(){t.zb===!1||e.$b||(n.Ge("temporaryPixelRatio")&&ig(n),N0(n),t.zb=!1,e.start(),e.$b&&(yh(t),n.Va(),ux(e,0),Xr(n,!0),vh(t),n.P("AnimationStarting",t)))}))}}function vf(t){return t.Sd.contains("Trigger")&&t.Sd.count===1}function ix(t,e,n,i){t.isTicking||vf(t)||e instanceof H&&(e.fromNode!==null||e.toNode!==null)||t.Wd.add(e,"position",n,i,!1)}l=ci.prototype,l.es=function(t){return this.Wd.es(t)},l.Ju=function(t){return this.Wd.Ju(t)};function Qk(t,e){function n(){if(0<r.rr.count&&(i.addAll(r.rr),r.rr.clear(),r.$b=!0),r.$b!==!1&&i.count!==0){r.Vt.addAll(i);for(var a=r.Vt.iterator;a.next();){var h=a.value;if(h.$b!==!1){t:if(0<h.nl.count)var g=!0;else{for(g=h.rc.iterator;g.next();){var f=g.key;if(f instanceof st&&f.diagram!==null||f instanceof z){g=!0;break t}}g=!1}g?hx(h,!1):h.Mk=!0}}r.Vt.clear(),r.$b!==!1&&(yh(r),Xr(r.H),vh(r)),U.requestAnimationFrame(n)}}var i=t.yi,r=t;t.$b?t.rr.add(e):(t.$b=!0,i.add(e),U.requestAnimationFrame(function(){n()}))}function qk(t){for(t=t.yi.iterator;t.next();)t.value.Mk=!1}function yh(t){if(!t.Xp){var e=t.H;t.sw=e.skipsUndoManager,t.Hv=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Xp=!0}}function vh(t){var e=t.H;e.skipsUndoManager=t.sw,e.skipsModelSourceBindings=t.Hv,t.Xp=!1}l.wc=function(t){var e=this.Wd;if(this.zb===!0&&(this.Dk=this.zb=!1,this.Sd.clear(),0<e.rc.count&&this.H.Mb()),this.$b){if(e.ul(!0),e.rc.clear(),Lf(e,null),t===!0)for(t=this.yi.Ea(),e=0;e<t.length;e++)t[e].ul(!0)}else e.rc.clear(),Lf(e,this.H)},l.ul=function(t){t===this.defaultAnimation&&this.defaultAnimation.rc.clear(),this.yi.remove(t),this.yi.count===0&&(this.$b=!1,this.H.Mb()),t===this.defaultAnimation&&(this.defaultAnimation.rc.clear(),this.H.P("AnimationFinished",this))},l.xj=function(t,e){this.zb&&(this.Sd.contains("Expand Tree")||this.Sd.contains("Expand SubGraph"))&&(this.Wd.xj(t,e),rx(this,t))},l.vj=function(t,e){this.zb&&(this.Sd.contains("Collapse Tree")||this.Sd.contains("Collapse SubGraph"))&&(this.Wd.vj(t,e),M0(this.Wd,e,"position",e.position,e.position),rx(this,t))};function ox(t,e,n){!t.zb||e.C(n)||vf(t)||(t.H.ji||(e=n.copy()),M0(t.Wd,t.H,"position",e,n))}function rx(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.ef=n.points.copy(),t.dl.add(n)}}function Sf(t,e,n,i,r){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var a=t[0],h=t[1],g=t[2];t=t[3];var f=e[0],c=e[1],m=e[2];return e=e[3],g===0||g===100?(a=f,h=c):(m===0||m===100)&&(f=a,c=h),180<Math.abs(f-a)&&(f>a?a+=360:f+=360),a=r(n,a,f-a,i)%360,h=r(n,h,c-h,i),g=r(n,g,m-g,i),n=r(n,t,e-t,i),"hsla("+a+", "+h+"%, "+g+"%, "+n+")"}function sx(){function t(n,i,r,a,h,g){n.position=new C(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g))}var e=new ct;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,i,r,a,h,g){h<g?n.Ul(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g),!1):n.position=new C(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g))}),e.add("location",function(n,i,r,a,h,g){h<g?n.Ul(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g),!0):n.location=new C(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g))}),e.add("position:placeholder",function(n,i,r,a,h,g){h<g?n.Ul(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g),!1):n.position=new C(a(h,i.x,r.x-i.x,g),a(h,i.y,r.y-i.y,g))}),e.add("position:nodeCollapse",function(n,i,r,a,h,g){var f=n.actualBounds,c=r.actualBounds;r=c.x+c.width/2-f.width/2,f=c.y+c.height/2-f.height/2,h<g?n.Ul(a(h,i.x,r-i.x,g),a(h,i.y,f-i.y,g),!1):n.position=new C(a(h,i.x,r-i.x,g),a(h,i.y,f-i.y,g))}),e.add("desiredSize",function(n,i,r,a,h,g){n.desiredSize=new G(a(h,i.width,r.width-i.width,g),a(h,i.height,r.height-i.height,g))}),e.add("width",function(n,i,r,a,h,g){n.width=a(h,i,r-i,g)}),e.add("height",function(n,i,r,a,h,g){n.height=a(h,i,r-i,g)}),e.add("fill",function(n,i,r,a,h,g){n.fill=Sf(i,r,h,g,a)}),e.add("stroke",function(n,i,r,a,h,g){n.stroke=Sf(i,r,h,g,a)}),e.add("strokeWidth",function(n,i,r,a,h,g){n.strokeWidth=a(h,i,r-i,g)}),e.add("strokeDashOffset",function(n,i,r,a,h,g){n.strokeDashOffset=a(h,i,r-i,g)}),e.add("background",function(n,i,r,a,h,g){n.background=Sf(i,r,h,g,a)}),e.add("areaBackground",function(n,i,r,a,h,g){n.areaBackground=Sf(i,r,h,g,a)}),e.add("opacity",function(n,i,r,a,h,g){n.opacity=a(h,i,r-i,g)}),e.add("scale",function(n,i,r,a,h,g){n.scale=a(h,i,r-i,g)}),e.add("angle",function(n,i,r,a,h,g){n.angle=a(h,i,r-i,g)}),Pf=e}I.Object.defineProperties(ci.prototype,{animationReasons:{get:function(){return this.Sd}},isEnabled:{get:function(){return this.Ad},set:function(t){(this.Ad=t)&&this.yi.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.ug},set:function(t){1>t&&gt(t,">= 1",ci,"duration"),this.ug=t}},isAnimating:{get:function(){return this.$b}},isTicking:{get:function(){return this.Xp}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t}},defaultAnimation:{get:function(){return this.Wd}},activeAnimations:{get:function(){return this.yi}},initialAnimationStyle:{get:function(){return this.Ek},set:function(t){this.Ek=t}}}),ci.prototype.stopAnimation=ci.prototype.wc;var Pf=null,xf=!1,wf=new $(ci,"Default",1),ax=new $(ci,"AnimateLocations",2),lx=new $(ci,"None",3);ci.className="AnimationManager",ci.defineAnimationEffect=function(t,e){xf||(sx(),xf=!0),Pf.add(t,e)},ci.Default=wf,ci.AnimateLocations=ax,ci.None=lx;function on(t){this.au=this.rw=this.Rd=this.H=null,this.Mk=this.$b=this.j=!1,this.Km=this.Gd=0,this.op=this.Rs=gx,this.Lk=this.Kn=!1,this.It=1,this.Gt=0,this.yd=this.ug=NaN,this.Lv=0,this.Lm=null,this.m=dr,this.rc=new ct,this.yt=new ct,this.nl=new Z,this.zt=new Z,this.Iv=fa,t&&Object.assign(this,t)}on.prototype.suspend=function(){this.Mk=!0},on.prototype.advanceTo=function(t,e){e&&(this.Mk=!1),this.Kn&&t>=this.yd&&(this.Lk=!0,t-=this.yd),this.Lv=t,hx(this,!0),yh(this.Rd),Xr(this.H),vh(this.Rd),this.H.redraw()};function Lf(t,e){if(t.yt.clear(),t.Lk=!1,t.Gt=0,t.yd=NaN,0<t.nl.count&&t.nl.clear(),0<t.zt.count&&t.zt.clear(),e!==null)for(t=e.links;t.next();)t.value.ef=null}l=on.prototype,l.start=function(){if(this.rc.count===0||this.$b)return this;for(var t=this.H,e=this.rc.iterator;e.next();){var n=e.value.end,i=e.key;if(n["position:placeholder"]){var r=i.findVisibleNode();if(r instanceof pt&&r.placeholder!==null){var a=r.placeholder;r=a.ia(nn),a=a.padding,r.x+=a.left,r.y+=a.top,n["position:placeholder"]=r}}t===null&&(i instanceof z?t=i:i instanceof st&&(t=i.diagram))}if(t!==null)this.H=t,this.Rd=t.animationManager;else return this;return e=this.Rd,e.isEnabled===!1?this:(this.yd=isNaN(this.ug)?e.duration:this.ug,this.op=this.Rs,e.Dk&&e.Ek===wf&&this===e.defaultAnimation&&(this.op=dx,this.yd=isNaN(this.ug)?e.duration===600?900:e.duration:this.ug),this.Iv=t.scrollMode,this.isViewportUnconstrained&&(t.nj=$0),yh(e),this.nl.each(function(h){h.data=null,t.add(h)}),vh(e),this.$b=!0,this.Gd=+new Date,this.Km=this.Gd+this.yd,Qk(e,this),this)},l.oy=function(t,e){return t.Tc()?(this.nl.add(t),this.H=e,this):this},l.add=function(t,e,n,i,r){if(e==="position"&&n.C(i))return this;if(this.H===null&&(t instanceof z?this.H=t:t instanceof st&&t.diagram!==null&&(this.H=t.diagram)),t instanceof lt){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return M0(this,t,e,n,i,r),this};function M0(t,e,n,i,r,a){var h=t.rc;if(e instanceof z&&n==="position"&&(n="position:diagram"),(n==="fill"||n==="stroke"||n==="background"||n==="areaBackground")&&(wr(i),oy(),i=[oi.j,oi.u,oi.m,oi.F],wr(r),oy(),r=[oi.j,oi.u,oi.m,oi.F]),h.contains(e)){var g=h.I(e),f=g.start,c=g.end;f[n]===void 0&&(f[n]=Sh(i)),c[n]=Sh(r)}else f={},c={},f[n]=Sh(i),c[n]=Sh(r),g=f.position,e instanceof st&&g instanceof C&&!g.v()&&e.diagram.animationManager.Sd.contains("Expand SubGraph")&&g.assign(c.position),g=new fx(f,c,a),h.add(e,g);h=f[n],h instanceof C&&!h.v()&&h.assign(t.m),a&&n.indexOf("position:")===0&&e instanceof lt?g.uu.location=Sh(e.location):a&&(g.uu[n]=Sh(i))}function Sh(t){return t instanceof C||t instanceof dt?t.copy():t}l.es=function(t){return this.$b?(t=this.rc.I(t),t!==null&&t.Wu):!1},l.Ju=function(t){return this.$b?(t=this.rc.I(t),t!==null&&(t.start.position||t.start.location)):!1};function hx(t,e){if(!t.Mk||e){var n=t.Rd;if(t.$b!==!1){var i=+new Date,r=i>t.Km?t.yd:i-t.Gd;e&&(r=t.Lv,r<t.yd?(t.Gd=+new Date-r,t.Km=t.Gd+t.yd):r=t.yd),yh(n),ux(t,r),Xr(t.H,!0),vh(n),i>t.Km&&(t.Kn&&!t.Lk?(t.Gd=+new Date,t.Km=t.Gd+t.yd,t.Lk=!0):t.ul(!1))}}}function ux(t,e){for(var n=t.yd,i=t.rc.iterator,r=t.Lk;i.next();){var a=i.key;if(!(a instanceof st&&a.diagram===null)){var h=i.value,g=r?h.end:h.start;h=r?h.start:h.end;var f=Pf,c;for(c in h)c==="position"&&(h["position:placeholder"]||h["position:nodeCollapse"])||f.get(c)===null||f.get(c)(a,g[c],h[c],t.op,e,n,t)}}}l.stop=function(){return this.$b?(this.ul(!0),this):this},l.ul=function(t){if(this.au!==null&&this.au.Mn.remove(this.rw),this.$b){var e=this.H,n=this.Rd;this.Mk=this.$b=n.Dk=!1,yh(n);for(var i=this.rc,r=this.nl.iterator;r.next();)e.remove(r.value);for(r=this.zt.iterator;r.next();)r.value.w();r=this.Kn,i=i.iterator;for(var a=Pf;i.next();){var h=i.key,g=i.value,f=r?g.end:g.start,c=r?g.start:g.end,m=g.uu,y;for(y in c)if(a.get(y)!==null){var S=y;!g.ou||S!=="position:nodeCollapse"&&S!=="position:placeholder"||(S="position"),a.get(S)(h,f[y],m[y]!==void 0?m[y]:g.ou?f[y]:c[y],this.op,this.yd,this.yd,this)}g.ou&&m.location!==void 0&&h instanceof lt&&(h.location=m.location),g.Wu&&h instanceof lt&&h.Ub(!1)}if(e.Zr.clear(),kf(e,!1),e.Va(),e.N(),Xr(e,!0),n.defaultAnimation===this){for(y=n.dl.iterator;y.next();)r=y.value,r.ef!==null&&(r.points=r.ef,r.ef=null);n.dl.clear()}Xr(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.Iv),vh(n),this.Gt++,!t&&this.It>this.Gt?(this.Lk=!1,this.start()):(this.Lm&&this.Lm(this),Lf(this,null),n.ul(this),e.Mb())}},l.xj=function(t,e){var n=e.actualBounds,i=null;if(e instanceof pt&&(i=e.placeholder),i!==null?(n=i.ia(nn),i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new C(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof pt)for(t=t.memberParts;t.next();)i=t.value,i instanceof q&&this.xj(i,e)},l.vj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof pt&&(n=e.placeholder),n!==null?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),n=this.rc,n.contains(t)&&(n.I(t).Wu=!0),t instanceof pt)for(t=t.memberParts;t.next();)n=t.value,n instanceof q&&this.vj(n,e)}},l.lz=function(t){var e=this.yt.get(t);return e===null&&(e={},this.yt.add(t,e)),e},I.Object.defineProperties(on.prototype,{duration:{get:function(){return this.ug},set:function(t){1>t&&gt(t,">= 1",on,"duration"),this.ug=t}},reversible:{get:function(){return this.Kn},set:function(t){this.Kn=t}},runCount:{get:function(){return this.It},set:function(t){0<t?this.It=t:B("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},easing:{get:function(){return this.Rs},set:function(t){this.Rs=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.$b}}}),on.prototype.getTemporaryState=on.prototype.lz,on.prototype.stop=on.prototype.stop,on.prototype.add=on.prototype.add,on.prototype.addTemporaryPart=on.prototype.oy;function gx(t,e,n,i){return t/=i/2,1>t?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function dx(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e}on.className="Animation",on.EaseLinear=function(t,e,n,i){return n*t/i+e},on.EaseInOutQuad=gx,on.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},on.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},on.EaseInExpo=function(t,e,n,i){return t===0?e:n*Math.pow(2,10*(t/i-1))+e},on.EaseOutExpo=dx;function fx(t,e,n){this.start=t,this.end=e,this.uu={},this.ou=n,this.Wu=!1}fx.className="AnimationState";function Ho(t,e,n){this.sd=null,this.df=t,this.Vn=n||cx,this.hk=null,e!==void 0&&(this.hk=e,n===void 0&&(this.Vn=k0))}Ho.prototype.copy=function(){var t=new Ho(this.df);t.Vn=this.Vn;var e=this.hk;if(e!==null){var n={};e.duration!==void 0&&(n.duration=e.duration),e.finished!==void 0&&(n.finished=e.finished),e.easing!==void 0&&(n.easing=e.easing),t.hk=n}return t};function bk(t,e){t=t.hk,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}I.Object.defineProperties(Ho.prototype,{propertyName:{get:function(){return this.df},set:function(t){this.df=t}},animationSettings:{get:function(){return this.hk},set:function(t){this.hk=t}},startCondition:{get:function(){return this.Vn},set:function(t){this.Vn=t}}});var cx=new $(Ho,"Default",1),k0=new $(Ho,"Immediate",2),px=new $(Ho,"Bundled",3);Ho.className="AnimationTrigger",Ho.Default=cx,Ho.Immediate=k0,Ho.Bundled=px;function rn(t){Oe(this),this.H=null,this.Ma=new tt,this.va="",this.tb=1,this.m=!1,this.j=this.Nh=this.u=this.Ii=this.Hi=this.Gi=this.Fi=this.Di=this.Ei=this.Ci=this.Ki=this.Bi=this.Ji=this.Ai=this.zi=!0,this.Bn=[],t&&Object.assign(this,t)}l=rn.prototype,l.clear=function(){this.Ma.clear(),this.Bn.length=0},l.Le=function(t){this.H=t},l.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,r=0,a=0,h=0,g=this.Ma.iterator;g.next();){var f=g.value;f instanceof pt?r++:f instanceof q?i++:f instanceof H?a++:f instanceof Ct?h++:n++}if(g="",0<n&&(g+=n+" Parts "),0<i&&(g+=i+" Nodes "),0<r&&(g+=r+" Groups "),0<a&&(g+=a+" Links "),0<h&&(g+=h+" Adornments "),1<t)for(t=this.Ma.iterator;t.next();)n=t.value,g+=`
    `+n.toString(),i=n.data,i!==null&&Te(i)&&(g+=" #"+Te(i)),n instanceof q?g+=" "+Hn(i):n instanceof H&&(g+=" "+Hn(n.fromNode)+" "+Hn(n.toNode));return e+" "+this.Ma.count+": "+g},l.ec=function(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),this.Nh===!1)return null;var i=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(i=!0);for(var r=C.alloc(),a=this.Ma.s,h=a.length;h--;){var g=a[h];if((i!==!0||Ds(g)!==!1)&&g.isVisible()&&(r.assign(t),yn(r,g.ge),g=g.ec(r,e,n),g!==null&&(e!==null&&(g=e(g)),g!==null&&(n===null||n(g)))))return C.free(r),g}return C.free(r),null},l.di=function(t,e,n,i){if(e===void 0&&(e=null),n===void 0&&(n=null),i instanceof tt||i instanceof Z||(i=new Z),this.Nh===!1)return i;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(r=!0);for(var a=C.alloc(),h=this.Ma.s,g=h.length;g--;){var f=h[g];if((r!==!0||Ds(f)!==!1)&&f.isVisible()){a.assign(t),yn(a,f.ge);var c=f;f.di(a,e,n,i)&&(e!==null&&(c=e(c)),c===null||n!==null&&!n(c)||i.add(c))}}return C.free(a),i},l.tf=function(t,e,n,i,r){if(e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=!1),r instanceof tt||r instanceof Z||(r=new Z),this.Nh===!1)return r;var a=!1;this.diagram!==null&&this.diagram.viewportBounds.Ee(t)&&(a=!0);for(var h=this.Ma.s,g=h.length;g--;){var f=h[g];if((a!==!0||Ds(f)!==!1)&&f.isVisible()){var c=f;f.tf(t,e,n,i,r)&&(e!==null&&(c=e(c)),c===null||n!==null&&!n(c)||r.add(c))}}return r},l.zu=function(t,e,n,i,r,a,h){if(this.Nh===!1)return r;for(var g=this.Ma.s,f=g.length;f--;){var c=g[f];if((h!==!0||Ds(c)!==!1)&&a(c)&&c.isVisible()){var m=c;c.tf(t,e,n,i,r)&&(e!==null&&(m=e(m)),m===null||n!==null&&!n(m)||r.add(m))}}return r},l.hg=function(t,e,n,i,r,a){if(n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof Z)&&(a=r),r=!0),a instanceof tt||a instanceof Z||(a=new Z),this.Nh===!1)return a;var h=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(h=!0);for(var g=C.alloc(),f=C.alloc(),c=this.Ma.s,m=c.length;m--;){var y=c[m];if((h!==!0||Ds(y)!==!1)&&y.isVisible()){g.assign(t),yn(g,y.ge),f.h(t.x+e,t.y),yn(f,y.ge);var S=y;y.hg(g,f,n,i,r,a)&&(n!==null&&(S=n(S)),S===null||i!==null&&!i(S)||a.add(S))}}return C.free(g),C.free(f),a},l.Pd=function(t,e){if(this.visible){var n=this.Ma.s,i=n.length;if(i!==0){t=Kt();for(var r=Kt(),a=0;a<i;a++){var h=n[a];if(h.aw=a,h instanceof H){if(h.xd===!1)continue}else if(h instanceof Ct&&h.adornedPart!==null)continue;var g=h.actualBounds;h.isVisible()&&PP(g,e)?(h.Pd(!0),t.push(h)):(h.Pd(!1),h.adornments!==null&&0<h.adornments.count&&r.push(h))}for(e=0;e<t.length;e++)for(n=t[e],Oy(n),n=n.adornments;n.next();)i=n.value,i.measure(1/0,1/0),i.arrange(),i.Pd(!0);for(e=0;e<r.length;e++)Oy(r[e]);Xt(t),Xt(r)}}};function Ph(t,e){var n=1;return t.tb!==1&&(n=e.globalAlpha,e.globalAlpha=n*t.tb),n}l.tc=function(t,e,n){if(this.visible&&this.tb!==0&&(n===void 0&&(n=!0),n||!this.isTemporary)){n=this.Ma.s;var i=n.length;if(i!==0){var r=Ph(this,t),a=this.Bn;a.length=0;for(var h=e.scale,g=G.alloc(),f=0;f<i;f++)this.$h(t,n[f],e,a,h,g,!0);G.free(g),t.globalAlpha=r}}},l.$h=function(t,e,n,i,r,a,h){if(!h||Ds(e)){if(i!==null&&e instanceof H&&(e.isOrthogonal&&i.push(e),e.xd===!1))return;for(h=!1,i=e.containingGroup;i!==null;)h?i.ib!==null&&a.ix(i.ib):i.ib!==null&&(h=!0,a.assign(i.ib)),i=i.containingGroup;var g=e.actualBounds;if(i=!1,h&&e.isVisible()){if(!a.Sc(g))return;i=!a.Ee(g)}i&&(t.save(),t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.clip()),g.width*r>n.nq||g.height*r>n.nq?e.tc(t,n):(r=e.actualBounds,a=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(n=e.transform,e.areaBackground!==null&&(ii(e,t,e.areaBackground,!0,!0,a,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(ii(e,t,"rgba(0,0,0,0.3)",!0,!1,a,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),ii(e,t,e.background,!0,!1,a,r),t.fillRect(0,0,a.width/2,a.height/2),n.Ur()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))))),i&&(t.restore(),t.Oc(!0))}},l.g=function(t,e,n,i,r){var a=this.diagram;a!==null&&a.bb(Zt,t,this,e,n,i,r)},l.ii=function(t,e,n){var i=this.Ma;if(e.Ah=this,t>=i.count)t=i.count;else if(i.K(t)===e)return-1;return i.Cb(t,e),e.yo(n),i=this.diagram,i!==null&&(n?i.N():i.ii(e)),Mf(this,t,e),t},l.lc=function(t,e,n){if(!n&&e.layer!==this&&e.layer!==null)return e.layer.lc(t,e,n);var i=this.Ma;if(0>t||t>=i.length){if(t=i.indexOf(e),0>t)return-1}else if(i.K(t)!==e&&(t=i.indexOf(e),0>t))return-1;return e.zo(n),i.mb(t),i=this.diagram,i!==null&&(n?i.N():i.lc(e)),e.Ah=null,t};function Mf(t,e,n){if(e=tN(t,e,n),n instanceof pt&&n!==null&&isNaN(n.zOrder)){if(n.memberParts.count!==0){for(var i=-1,r=t.Ma.s,a=r.length,h=0;h<a;h++){var g=r[h];if(g===n&&(e=h,0<=i)||0>i&&g.containingGroup===n&&(i=h,0<=e))break}!(0>i)&&i<e&&(r=t.Ma,r.mb(e),r.Cb(i,n))}n=n.containingGroup,n!==null&&Mf(t,-1,n)}}function tN(t,e,n){var i=n.zOrder;if(isNaN(i))return e;t=t.Ma;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var a=e-1,h=NaN;0<=a&&(h=t.K(a).zOrder,!!isNaN(h));)a--;for(var g=e+1,f=NaN;g<r&&(f=t.K(g).zOrder,!!isNaN(f));)g++;if(!isNaN(h)&&h>i)for(;;){if(a===-1||h<=i){if(a++,a===e)break;return t.mb(e),t.Cb(a,n),a}for(h=NaN;0<=--a&&(h=t.K(a).zOrder,isNaN(h)););}else if(!isNaN(f)&&f<i)for(;;){if(g===r||f>=i){if(g--,g===e)break;return t.mb(e),t.Cb(g,n),g}for(f=NaN;++g<r&&(f=t.K(g).zOrder,isNaN(f)););}return e}I.Object.defineProperties(rn.prototype,{parts:{get:function(){return this.Ma.iterator}},partsBackwards:{get:function(){return this.Ma.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.va},set:function(t){var e=this.va;if(e!==t){var n=this.diagram;if(n!==null)for(e===""&&B("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&B("Layer.name is already present in this diagram: "+t);for(this.va=t,this.g("name",e,t),t=this.Ma.iterator;t.next();)t.value.layerName=this.va}}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&gt(t,"0 <= value <= 1",rn,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&((this.m=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Ma.iterator;e.next();)e.value.Ub(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Va())}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}}}),rn.prototype.findObjectsNear=rn.prototype.hg,rn.prototype.findObjectsIn=rn.prototype.tf,rn.prototype.findObjectsAt=rn.prototype.di,rn.prototype.findObjectAt=rn.prototype.ec,rn.className="Layer";function z(t,e){if(_x||(dN(),_x=!0),Oe(this),xh=this,this.wb=!0,this.La=null,this.Aa=this.Ba=0,this.Ha=null,_i){var n=this,i=function(){n.removeEventListener(U.document,"DOMContentLoaded",i,!1),n.setRTL()};U.document.body!==null?this.setRTL():n.addEventListener(U.document,"DOMContentLoaded",i,!1)}this.cl=null,Ff.add("Model",It);var r=this;return this.Db=function(a){var h=r.partManager;if(a.model===h.diagram.model&&h.diagram.$){h.diagram.$=!1;try{var g=a.change;a.modelChange===""&&g===Zt&&h.updateDataBindings(a.object,a.propertyName)}finally{h.diagram.$=!0}}},this.Hc=function(a){r.partManager.doModelChanged(a)},this.Nt=this.Qt=null,yx(this),this.model=lv(),this.Mg=!0,Px(this),this.layout=new Dt,this.Mg=!1,this.Yj=this.Zj=this.Xj=this.Wj=this.Iz=this.Sj=this.sv=null,this.Jo=function(){},this.preventDefault=null,this.Ym=!1,this.vh=new Kx,t!==void 0&&(typeof t=="string"||U.Element&&t instanceof Element?q0(this,t):e=t),this.wb=!1,e&&this.Vl(e),this}var mx,xh;function yx(t){t.Rd=new ci,t.Rd.Le(t),t.Ab=17,t.kw=!1,t.$m=!1,t.Ht="default",t.Ua=new tt,t.Yx=new ct,t.Ax(),t.zx(),t.tb=1,t.pa=new C(NaN,NaN).freeze(),t.Jt=new C(NaN,NaN),t.xa=1,t.sp=1,t.bt=new C(NaN,NaN).freeze(),t.ct=NaN,t.tt=1e-4,t.pt=100,t.Bb=new xt,t.eu=new C(NaN,NaN).freeze(),t.Xs=new G(NaN,NaN,NaN,NaN).freeze(),t.mj=new At(0,0,0,0).freeze(),t.nj=fa,t.Tt=!1,t.Et=null,t.Lt=null,t.nh=pi,t.mk=Je,t.wg=pi,t.Rp=Je,t.at=nn,t.dt=nn,t.bd=!0,t.Wm=!1,t.te=new Z,t.th=new ct,t.Fm=!0,t.Yo=250,t.ik=-1,t.$o=new At(16,16,16,16).freeze(),t.cg=!1,t.xk=!1,t.Nm=!0,t.Fp=new fi,t.Fp.diagram=t,t.Hg=new fi,t.Hg.diagram=t,t.Yi=new fi,t.Yi.diagram=t,t.qg=null,t.bf=null,t.Wt=!1,uN(t),t.Uh=new Z,t.kt=!0,t.$t=ll,t.Vv=!1,t.bu=W0,t.Ks="auto",t.rp="auto",t.oh=null,t.uh=null,t.qh=null,t.Jh=null,t.Hh=null,t.Gh=null,t.vt=null,t.Eh=null,t.$s=!1,t.Fh=null,t.Ih=null,t.Th=null,t.rh=null,t.wt=!1,t.Dt={},t.$k=[null,null],t.Mg=!1,t.mw=!1,t.Ut=!1,t.Ns=!1,t.Xv=!0,t.cd=!1,t.Vi=!1,t.xw=!0,t.se=-2,t.Fg=new ct,t.Fn=new tt,t.xg=!1,t.Ad=!0,t.ws=!0,t.zi=!0,t.Ai=!0,t.xs=!1,t.ys=!0,t.Ji=!0,t.Bi=!0,t.Ki=!0,t.As=!0,t.Ci=!0,t.Ei=!0,t.Di=!0,t.Fi=!0,t.Gi=!0,t.Hi=!0,t.Ii=!0,t.Bs=!0,t.Ds=!0,t.Wv=!1,t.Kk=!1,t.Tm=!0,t.Um=!0,t.zs=!0,t.Cs=!0,t.Ot=16,t.St=16,t.Nq=!1,t.Mt=!1,t.Rt=0,t.Pt=0,t.ub=new At(5).freeze(),t.lw=new Z().freeze(),t.qt=999999999,t.Tv=new Z().freeze(),t.Si=!0,t.Ti=!0,t.Ui=!0,t.We=!1,t.Of=!1,t.mh=!0,t.Qf=!1,t.Xx=new Z,t.Uv=new Z,t.Qh=null,t.Fv=new dt(8,8),t.Gv=999,t.fw=1,t.nw=0,t.kd={scale:1,position:new C,bounds:new G,Hw:new dt,sx:new dt,lx:!1},t.vw=new G(NaN,NaN,NaN,NaN).freeze(),t.Zn=new dt(NaN,NaN).freeze(),t.wp=new G(NaN,NaN,NaN,NaN).freeze(),t.lt=!1,t.Dg=new ct;var e=new q,n=new Rt;n.bind(new ue("text","",Hn)),e.add(n),t.Tx=e,t.Dg.add("",e),e=new q,n=new Rt,n.stroke="brown",n.bind(new ue("text","",Hn)),e.add(n),t.Dg.add("Comment",e),e=new q,e.selectable=!1,e.avoidable=!1,n=new yt,n.figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new dt(3,3).ha(),e.add(n),t.Dg.add("LinkLabel",e),t.Ri=new ct,e=new pt,e.selectionObjectName="GROUPPANEL",e.type=X.Vertical,n=new Rt,n.font="bold 12pt sans-serif",n.bind(new ue("text","",Hn)),e.add(n),n=new X(X.Auto),n.name="GROUPPANEL";var i=new yt;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),i=new wn,i.padding=new At(5,5,5,5).ha(),n.add(i),e.add(n),t.Rx=e,t.Ri.add("",e),t.Ch=new ct,e=new H,n=new yt,n.isPanelMain=!0,e.add(n),n=new yt,n.toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Sx=e,t.Ch.add("",e),e=new H,n=new yt,n.isPanelMain=!0,n.stroke="brown",e.add(n),t.Ch.add("Comment",e),e=new Ct,e.type=X.Auto,n=new yt,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),n=new wn,n.margin=new At(1.5,1.5,1.5,1.5).ha(),e.add(n),t.xt=e,t.Zs=e,e=new Ct,e.type=X.Link,n=new yt,n.isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.nt=e,t.Zd=null,t.Op=!1,t.qk=null,t.partManager=new It,t.toolManager=new te,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.Ps=null,t.Em=new Ch,t.At=null,t.Bt=null,t.jr=!1,t.commandHandler=Sx(),t.kr=!1,t.Hp=null,t.Ip=sf,t.tw=!1,t.kc=1,t.Rh=null,t.nq=1,t.rq=0,t.dw=[0,0,0,0,0],t.sq=0,t.Yp=1,t.Zv=0,t.$v=new C,t.hy=500,t.Zo=new C,t.jt=!1}z.prototype.clear=function(){this.animationManager.wc(),this.model.clear(),Mh=null,lg="",vx(this,!1),this.Fn.clear(),Yh(),this.Fg.clear(),this.Qh=null,this.Va(),this.Za(),this.N()};function vx(t,e){t.animationManager.wc(!0),t.lw=new Z().freeze(),t.Tv=new Z().freeze();var n=t.skipsUndoManager,i=t.ac!==null&&t.ac!==void 0;i&&(t.skipsUndoManager=!0);var r=null;t.Zd!==null&&(r=t.Zd.part,r!==null&&t.remove(r));var a=[],h=t.Ua.length;if(e){for(e=0;e<h;e++)for(var g=t.Ua.s[e].parts;g.next();){var f=g.value;f!==r&&f.data===null&&a.push(f)}for(e=0;e<a.length;e++)t.remove(a[e])}for(e=0;e<h;e++)t.Ua.s[e].clear();return t.partManager.clear(),t.te.clear(),t.th.clear(),t.Uh.clear(),t.qk=null,t.Fn.clear(),Yh(),t.Fg.clear(),aa=[],r!==null&&(t.add(r),t.partManager.parts.remove(r)),i&&(t.skipsUndoManager=n),a}function Sx(){return null}z.prototype.reset=function(){this.clear(),this.wb=!0,yx(this),Hr(this),this.Mg=!0,Px(this),this.layout=new Dt,this.Mg=!1,this.model=lv(),this.model.undoManager=new se,this.wb=this.Ym=!1,this.N()},z.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=U.document.body);var e=Q("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,e.scrollLeft===0&&(n="negative")),t.removeChild(e),this.Ht=n},z.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=U.document.body);var e=0;if(_i){var n=Bx;e=mx,n===null&&(n=Bx=Q("p"),n.style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",e=mx=Q("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",n=n.offsetWidth,i===n&&(n=e.clientWidth),t.removeChild(e),e=i-n,e!==0||Ce||(e=11)}this.Ab=e,this.kw=!0},z.prototype.ob=function(t){t.classType===z&&(this.autoScale=t)},z.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Ua.iterator;n.next();)e+=`
  `+n.value.toString(t-1);return e},z.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},z.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})};function eN(t){var e=t.Ha.Sa;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.Wj,!1),t.addEventListener(e,"pointermove",t.Xj,!1),t.addEventListener(e,"pointerup",t.Zj,!1),t.addEventListener(e,"pointerout",t.Yj,!1),t.addEventListener(e,"pointerenter",t.Jy,!1),t.addEventListener(e,"pointerleave",t.Ky,!1),t.addEventListener(e,"wheel",t.Sj,!1),t.addEventListener(e,"keydown",t.yz,!1),t.addEventListener(e,"keyup",t.zz,!1),t.addEventListener(e,"blur",t.vy,!1),t.addEventListener(e,"focus",t.wy,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(U,"resize",t.sv,!1),Ce&&t.addEventListener(e,"touchstart",function(n){n.preventDefault()},!1))}function ig(t){30<t.rq&&(t.Rh=1)}function kf(t,e){t.Rh!==null&&(t.Rh=null,e&&t.Jo(),rf&&rf.Rw||(t.rq=0,t.dw=[0,0,0,0,0],t.sq=0))}z.prototype.computePixelRatio=function(){return this.Rh!==null?this.Rh:U.devicePixelRatio||1},z.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},z.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},z.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},z.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},z.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},z.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},z.prototype.doFocus=function(){this.focus()},z.prototype.focus=function(){if(this.Ha)if(this.scrollsPageOnFocus)this.Ha.focus();else{var t=U.scrollX||U.pageXOffset,e=U.scrollY||U.pageYOffset;this.Ha.focus(),U.scrollTo(t,e)}},z.prototype.wy=function(){this.H.P("GainedFocus")},z.prototype.vy=function(){this.H.P("LostFocus")};function N0(t){if(t.Ha!==null){var e=t.La;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.kw||t.setScrollWidth();var n=t.Of?t.Ab:0,i=t.We?t.Ab:0,r=t.kc;t.kc=t.computePixelRatio(),t.kc!==r&&(t.Wm=!0,t.Mb()),(e.clientWidth!==t.Ba+n||e.clientHeight!==t.Aa+i)&&(t.Ti=!0,t.bd=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===pi&&(t.xk=!0,e.D()),t.cd||t.Mb())}}}function Px(t){var e=new rn;e.name="Background",t.pl(e),e=new rn,e.name="",t.pl(e),e=new rn,e.name="Foreground",t.pl(e),e=new rn,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.pl(e),e=new rn,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.pl(e),e=new rn,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Aw(e,t.Ij("Background"))}function xx(t){var e=new X(X.Grid);e.name="GRID";var n=new yt;return n.figure="LineH",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),n=new yt,n.figure="LineH",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),n=new yt,n.figure="LineH",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),n=new yt,n.figure="LineV",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),n=new yt,n.figure="LineV",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),n=new yt,n.figure="LineV",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),n=new lt,n.add(e),n.layerName="Grid",n.zOrder=0,n.isInDocumentBounds=!1,n.isAnimated=!1,n.pickable=!1,n.locationObjectName="GRID",t.add(n),t.partManager.parts.remove(n),e.visible=!1,e}function nN(){this.H.Mt?this.H.Mt=!1:this.H.isEnabled?this.H.Nw(this):E0(this.H)}function iN(t){this.H.isEnabled?(this.H.Rt=t.target.scrollTop,this.H.Pt=t.target.scrollLeft):E0(this.H)}z.prototype.Nw=function(t){if(this.Ha!==null){var e=this.Qt,n=this.Nt;this.Nq=!0;var i=this.documentBounds,r=this.viewportBounds,a=this.mj,h=i.x-a.left,g=i.y-a.top,f=i.width+a.left+a.right,c=i.height+a.top+a.bottom,m=i.right+a.right;a=i.bottom+a.bottom;var y=r.x;i=r.y;var S=r.width,x=r.height,P=r.right,L=r.bottom;r=this.scale;var N=t.scrollLeft;if(this.$m)switch(this.Ht){case"negative":N=N+t.scrollWidth-t.clientWidth;break;case"reverse":N=t.scrollWidth-N-t.clientWidth}var k=N;S<f||x<c?(N=C.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Pt!==k&&(N.x=k/r+h,this.Pt=k),this.allowVerticalScroll&&this.Rt!==t.scrollTop&&(N.y=t.scrollTop/r+g,this.Rt=t.scrollTop),this.position=N,C.free(N),this.Ti=this.Nq=!1):(N=C.alloc(),t.$x&&this.allowHorizontalScroll&&(h<y&&(this.position=N.h(k+h,this.position.y)),m>P&&(this.position=N.h(-(e.scrollWidth-this.Ba)+k-this.Ba/r+m,this.position.y))),t.ay&&this.allowVerticalScroll&&(g<i&&(this.position=N.h(this.position.x,t.scrollTop+g)),a>L&&(this.position=N.h(this.position.x,-(e.scrollHeight-this.Aa)+t.scrollTop-this.Aa/r+a))),C.free(N),da(this),this.Ti=this.Nq=!1,i=this.documentBounds,r=this.viewportBounds,m=i.right,P=r.right,a=i.bottom,L=r.bottom,h=i.x,y=r.x,g=i.y,i=r.y,S>=f&&h>=y&&m<=P&&(n.style.width="1px"),x>=c&&g>=i&&a<=L&&(n.style.height="1px"))}},z.prototype.computeBounds=function(t){return t===void 0&&(t=new G),Pn(this),wx(this,t)};function wx(t,e){if(t.fixedBounds.v())return e.assign(t.fixedBounds),e.fo(t.ub),e;for(var n=!0,i=t.Ua.s,r=i.length,a=0;a<r;a++){var h=i[a];if(h.visible&&h.isInDocumentBounds){h=h.Ma.s;for(var g=h.length,f=0;f<g;f++){var c=h[f];c.isInDocumentBounds&&c.isVisible()&&(c=c.actualBounds,c.v()&&(n?(n=!1,e.assign(c)):e.Xc(c)))}}}return n&&e.h(0,0,0,0),e.fo(t.ub),e}z.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var n=null;if(Ut(t))for(var i=0;i<t.length;i++){var r=t[i];!e&&r instanceof H||(r.Za(),n===null?n=r.actualBounds.copy():n.Xc(r.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof H||(i.Za(),n===null?n=i.actualBounds.copy():n.Xc(i.actualBounds));return n===null?new G(NaN,NaN,0,0):n};function lo(t,e){if((e||t.Qf)&&!t.wb&&t.Ha!==null&&t.documentBounds.v()){if(e){var n=t.initialPosition;if(n.v()){t.position=n;return}n=C.alloc(),n.oi(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds;i=G.allocAt(0,0,i.width,i.height);var r=C.alloc();r.oi(i,t.initialViewportSpot),r.h(n.x-r.x,n.y-r.y),t.position=r,G.free(i),C.free(r),C.free(n)}t.wb=!0,n=t.nh,e&&t.wg!==pi&&(n=t.wg);var a=n!==pi?wh(t,n):t.scale;n=t.pa.x,i=t.pa.y,r=t.Ba/a;var h=t.Aa/a,g=t.mk,f=t.Rp;e&&!g.pb()&&(f.pb()||f.Sb())&&(g=f.Sb()?Gt:f),C0(t,t.documentBounds,r,h,g,e),e=t.scale,t.scale=a,t.wb=!1,Ns(t),Lh(t,!0,!1),a=t.viewportBounds,A.B(a.x,n)&&A.B(a.y,i)&&A.B(a.width,r)&&A.B(a.height,h)||t.onViewportBoundsChanged(new G(n,i,r,h),a,e,!1)}}function wh(t,e){var n=t.sp;if(t.Ha===null)return n;t.Za();var i=t.documentBounds;if(!i.v())return n;var r=i.width;i=i.height;var a=t.Ba+(t.Of?t.Ab:0),h=t.Aa+(t.We?t.Ab:0),g=a/r,f=h/i;return e===kh?(e=Math.min(f,g),e>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Df?(e=f>g?(h-t.Ab)/i:(a-t.Ab)/r,e>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}z.prototype.zoomToFit=function(){var t=this.nj;this.nj=fa,this.scale=wh(this,kh),t!==fa&&(lo(this,!1),C0(this,this.documentBounds,this.Ba/this.xa,this.Aa/this.xa,this.mk,!1)),this.nj=t},l=z.prototype,l.kA=function(t,e){e===void 0&&(e=kh);var n=t.width,i=t.height;if(!(n===0||i===0||isNaN(n)&&isNaN(i))){var r=1;if(e===kh||e===Df)if(isNaN(n))r=this.viewportBounds.height*this.scale/i;else if(isNaN(i))r=this.viewportBounds.width*this.scale/n;else{r=this.Ba;var a=this.Aa;r=e===Df?a/i>r/n?(a-(this.We?this.Ab:0))/i:(r-(this.Of?this.Ab:0))/n:Math.min(a/i,r/n)}this.scale=r,this.position=new C(t.x,t.y)}},l.py=function(t,e){this.Za();var n=this.documentBounds,i=this.viewportBounds;this.position=new C(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},l.gz=function(t){if(t instanceof st){this.Hp=t;var e=C.alloc();this.Ip=this.Ro(t.ia(nn,e)),C.free(e)}else this.Hp=null,this.Ip=sf};function C0(t,e,n,i,r,a){var h=C.allocAt(t.pa.x,t.pa.y),g=h.x,f=h.y;if(t.Hp!==null){var c=C.alloc();c=t.Hp.ia(nn,c),g=c.x-t.Ip.x/t.scale,f=c.y-t.Ip.y/t.scale,r=$e,C.free(c)}(a||t.scrollMode===fa)&&(r.pb()&&(n>e.width&&(g=e.x+(r.x*e.width+r.offsetX)-(r.x*n-r.offsetX)),i>e.height&&(f=e.y+(r.y*e.height+r.offsetY)-(r.y*i-r.offsetY))),r=t.mj,a=n-e.width,n<e.width+r.left+r.right?(g=Math.min(g+n/2,e.right+Math.max(a,r.right)-n/2),g=Math.max(g,e.left-Math.max(a,r.left)+n/2),g-=n/2):g>e.left?g=e.left:g<e.right-n&&(g=e.right-n),n=i-e.height,i<e.height+r.top+r.bottom?(f=Math.min(f+i/2,e.bottom+Math.max(n,r.bottom)-i/2),f=Math.max(f,e.top-Math.max(n,r.top)+i/2),f-=i/2):f>e.top?f=e.top:f<e.bottom-i&&(f=e.bottom-i)),h.x=isFinite(g)?g:-t.ub.left,h.y=isFinite(f)?f:-t.ub.top,t.positionComputation!==null&&(e=t.positionComputation(t,h),h.x=e.x,h.y=e.y),ox(t.Rd,t.pa,h),t.pa.h(h.x,h.y),Hr(t),C.free(h)}l.wl=function(t,e){if(e===void 0&&(e=!0),e){if(t=T0(this,t,function(n){return n.part},function(n){return n.canSelect()}),t instanceof lt)return t}else if(t=T0(this,t,function(n){return n.part}),t instanceof lt)return t;return null},l.ec=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null),Pn(this);for(var i=this.Ua.iteratorBackwards;i.next();){var r=i.value;if(r.visible&&(r=r.ec(t,e,n),r!==null))return r}return null};function T0(t,e,n,i){for(n===void 0&&(n=null),i===void 0&&(i=null),Pn(t),t=t.Ua.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.ec(e,n,i),r!==null))return r}return null}l.Uy=function(t,e,n){return e===void 0&&(e=!0),oN(this,t,function(i){return i.part},e?function(i){return i instanceof lt&&i.canSelect()}:null,n)};function oN(t,e,n,i,r){for(n===void 0&&(n=null),i===void 0&&(i=null),r instanceof tt||r instanceof Z||(r=new Z),Pn(t),t=t.Ua.iteratorBackwards;t.next();){var a=t.value;a.visible&&!a.isTemporary&&a.di(e,n,i,r)}return r}l.di=function(t,e,n,i){e===void 0&&(e=null),n===void 0&&(n=null),i instanceof tt||i instanceof Z||(i=new Z),Pn(this);for(var r=this.Ua.iteratorBackwards;r.next();){var a=r.value;a.visible&&a.di(t,e,n,i)}return i},l.Ww=function(t,e,n,i){return e===void 0&&(e=!1),n===void 0&&(n=!0),rN(this,t,function(r){return r instanceof lt&&(!n||r.canSelect())},e,i)},l.tf=function(t,e,n,i,r){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=!1),r instanceof tt||r instanceof Z||(r=new Z),Pn(this);for(var a=this.Ua.iteratorBackwards;a.next();){var h=a.value;h.visible&&h.tf(t,e,n,i,r)}return r},l.zu=function(t,e,n,i,r,a){var h=new Z;Pn(this);for(var g=this.Ua.iteratorBackwards;g.next();){var f=g.value;f.visible&&f.zu(t,e,n,i,h,r,a)}return h};function rN(t,e,n,i,r){var a=null;for(n===void 0&&(n=null),i===void 0&&(i=!1),r instanceof tt||r instanceof Z||(r=new Z),Pn(t),t=t.Ua.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.tf(e,a,n,i,r)}return r}l.Vy=function(t,e,n,i,r){return n===void 0&&(n=!0),i===void 0&&(i=!0),sN(this,t,e,function(a){return a instanceof lt&&(!i||a.canSelect())},n,r)},l.hg=function(t,e,n,i,r,a){n===void 0&&(n=null),i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof Z)&&(a=r),r=!0),a instanceof tt||a instanceof Z||(a=new Z),Pn(this);for(var h=this.Ua.iteratorBackwards;h.next();){var g=h.value;g.visible&&g.hg(t,e,n,i,r,a)}return a};function sN(t,e,n,i,r,a){var h=null;for(i===void 0&&(i=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof tt||r instanceof Z)&&(a=r),r=!0),a instanceof tt||a instanceof Z||(a=new Z),Pn(t),t=t.Ua.iteratorBackwards;t.next();){var g=t.value;g.visible&&!g.isTemporary&&g.hg(e,n,h,i,r,a)}return a}z.prototype.acceptEvent=function(t){return al(this,t,t instanceof MouseEvent)};function al(t,e,n){var i=t.Hg;return t.Hg=t.Yi,t.Yi=i,i.diagram=t,i.event=e,n?og(t,e,i):(i.viewPoint=t.Hg.viewPoint,i.documentPoint=t.Hg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,e.buttons!==void 0&&(i.buttons=e.buttons),Ce&&e.button===0&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=F0(e,e.target),i.targetObject=null,i}function F0(t,e){return e===null?null:(e=e.H)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function D0(t,e,n,i,r,a){var h=t.Hg;return t.Hg=t.Yi,t.Yi=h,h.diagram=t,h.clickCount=1,t=h.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),h.modifiers=t,h.event=e,h.timestamp=e.timeStamp,h.button=e.button,h.buttons=e.buttons,Ce&&e.button===0&&e.ctrlKey&&(h.button=2),h.down=n,h.up=i,h.handled=!1,h.bubbles=r,h.isMultiTouch=a,h}function ga(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}z.prototype.yz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var n=al(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),ga(n,t)},z.prototype.zz=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=al(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),ga(n,t)},z.prototype.Jy=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=al(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(n),ga(n,t)},z.prototype.Ky=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=al(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(n),ga(n,t)},z.prototype.getMouse=function(t){var e=this.Ha;if(e===null)return new C(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.Ba/n.width*n.left,t=t.clientY-this.Aa/n.height*n.top,this.Bb!==null?yn(new C(e,t),this.Bb):new C(e,t)};function og(t,e,n){var i=t.Ha,r=t.Ba,a=t.Aa,h=0,g=0;i!==null&&(i=i.getBoundingClientRect(),h=e.clientX-r/i.width*i.left,g=e.clientY-a/i.height*i.top),n.viewPoint.h(h,g),t.Bb!==null?(e=C.allocAt(h,g),t.Bb.Ld(e),n.documentPoint.assign(e),C.free(e)):n.documentPoint.h(h,g)}function Lx(t,e,n,i){if(e.targetTouches!==void 0){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else if(t.$k[0]!==null)e=t.$k[n];else return;n=t.Ha,n!==null&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Ba/n.width*n.left,e.clientY-t.Aa/n.height*n.top))}z.prototype.Va=function(){this.Si||(this.Si=!0,this.Mb(!0))};function aN(t){t.cd||Pn(t),t.Za()}z.prototype.redraw=function(){this.wb||this.cd||(this.N(),Ns(this),this.nd())},l=z.prototype,l.xz=function(){return this.cg},l.Ey=function(t){t===void 0&&(t=null);var e=this.animationManager,n=e.isEnabled;e.wc(),e.isEnabled=!1,Xr(this),this.Qf=!1,this.Jt=new C(NaN,NaN),e.isEnabled=n,this.cd=!0;var i=this;t!==null&&_(function(){i.cd=!1,Ur(e,"Model"),t(i)},1)},l.Mb=function(t){if(t===void 0&&(t=!1),this.cg!==!0&&!(this.wb||t===!1&&this.cd)){this.cg=!0;var e=this;U.requestAnimationFrame(function(){e.cg&&e.nd()})}},l.nd=function(){(!this.Nm||this.cg)&&(this.Nm&&(this.Nm=!1),Xr(this))};function Lh(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.wb||!t.Ti||E0(t)||(e&&Pn(t),n&&lo(t,!1))}function Xr(t,e){if(!t.cd&&(t.cg=!1,t.La!==null||t.Zn.v())){t.cd=!0;var n=t.animationManager,i=t.Fn;if(!n.isAnimating&&i.length!==0){for(var r=i.s,a=r.length,h=0;h<a;h++){var g=r[h];mi(g,!1),g.w()}i.clear()}i=t.Uv,0<i.count&&(i.each(function(f){f.rv()}),i.clear()),r=i=!1,n.defaultAnimation.isAnimating&&(r=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.zb||N0(t),Lh(t,!1,!0),t.Zd!==null&&(t.Zd.visible&&!t.Op&&(Kr(t),t.Op=!0),!t.Zd.visible&&t.Op&&(t.Op=!1)),Pn(t),a=!1,(!t.Qf||t.mh)&&(t.Qf?U0(t,!t.xk):(t.Da("Initial Layout"),n.isEnabled===!1&&n.wc(),U0(t,!1)),a=!0),t.xk=!1,Pn(t),t.Ut||aN(t),Lh(t,!0,!1),h=!1,a?(n=G.alloc(),n.assign(t.viewportBounds),t.Qf||(h=t.Qf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,lN(t)),t.P("LayoutCompleted"),n.C(t.viewportBounds)||Lh(t,!0,!1),G.free(n)):n.Dk&&n.uw&&(t.wg!==pi?t.scale=wh(t,t.wg):t.nh!==pi?t.scale=wh(t,t.nh):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),lo(t,!0)),Pn(t),a&&h&&t.eb("Initial Layout"),t.mu(),e||t.tc(t.Zb),r&&(t.skipsUndoManager=i),t.cd=!1}}function lN(t){var e=t.xa;if(t.wg!==pi)t.scale=wh(t,t.wg);else if(t.nh!==pi)t.scale=wh(t,t.nh);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.xa!==e&&(Ns(t),Lh(t,!0,!1)),lo(t,!0),e=t.Ua.s,t.Pd(e,e.length,t,t.viewportBounds),t.P("InitialLayoutCompleted"),t.Jt.assign(t.pa),Kr(t)}function Pn(t){if(t.te.count!==0&&(t.cd||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.te.iterator;if(n===null||t.te.count===0)break;t.te=new Z,t.rv(n,t.te)}t.nodes.each(function(i){i instanceof pt&&(i.U&65536)!==0&&(i.U=i.U^65536)})}}l.rv=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Tc()||n instanceof pt||(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)n=t.value,n instanceof pt&&n.isVisible()&&j0(this,n);for(t.reset();t.next();)n=t.value,n instanceof H&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)n=t.value,n instanceof Ct&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))};function j0(t,e){for(var n=Kt(),i=Kt(),r=e.memberParts;r.next();){var a=r.value;a.isVisible()&&(a instanceof pt?(Sr(a)||Fi(a)||br(a))&&j0(t,a):a instanceof H?a.fromNode===e||a.toNode===e?i.push(a):n.push(a):(a.measure(1/0,1/0),a.arrange()))}for(t=n.length,r=0;r<t;r++)a=n[r],a.measure(1/0,1/0),a.arrange();for(Xt(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)n=i[e],n.measure(1/0,1/0),n.arrange();Xt(i)}l.Pd=function(t,e,n,i){if(this.Ui||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].Pd(n,i)},l.tc=function(t,e){if(this.La!==null){this.Ha===null&&B("No canvas specified");var n=this.animationManager;if(!n.zb&&(!n.isAnimating||n.isTicking)){var i=new Date;if(sg(this),this.La.style.opacity!=="0"){var r=t!==this.Zb,a=this.Ua.s,h=a.length,g=this;if(this.Pd(a,h,g,g.viewportBounds),r)t.Oc(!0),da(this);else if(!this.bd&&e===void 0&&!n.isAnimating)return;h=this.pa;var f=this.xa,c=Math.round(h.x*f)/f,m=Math.round(h.y*f)/f;for(n=this.Bb,n.reset(),f!==1&&n.scale(f),h.x===0&&h.y===0||n.translate(-c,-m),f=this.kc,t.setTransform(f,0,0,f,0,0),t.clearRect(0,0,this.Ba,this.Aa),this.tb!==1&&(t.globalAlpha=this.tb),O0(this,t),c=e!==void 0?function(y){if(y.visible&&y.tb!==0){var S=y.Ma.s,x=S.length;if(x!==0){var P=Ph(y,t),L=y.Bn;L.length=0;for(var N=g.scale,k=G.alloc(),F=0;F<x;F++){var D=S[F];e.contains(D)||y.$h(t,D,g,L,N,k,!0)}G.free(k),t.globalAlpha=P}}}:function(y){y.tc(t,g)},h=a.length,m=0;m<h;m++)t.setTransform(f,0,0,f,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),t.Pc(),c(a[m]);if(a=!1,this.vh?hg(this.vh,this)&&(a=this.Qs()):a=!0,a&&(xt.prototype.Ld=xt.prototype.Fw),r?(this.Zb.Oc(!0),da(this)):this.bd=this.Ui=!1,a=+new Date-+i,r=rf&&rf.Rw,i=this.dw,r||this.Rh===null){for(i[this.sq]=a,this.sq=(this.sq+1)%i.length,n=a=0;n<i.length;n++)a+=i[n];this.rq=a/i.length}if(this.tb!==1&&(t.globalAlpha=1),r)for(t.setTransform(1,0,0,1,0,0),r=0;r<i.length;r++)t.fillText(i[r].toString(),20,150+ +(20*r))}}}};function Nf(t,e,n,i,r,a,h,g,f,c){if(t.La!==null){t.Ha===null&&B("No canvas specified"),h===void 0&&(h=null),g===void 0&&(g=null),f===void 0&&(f=!1),c===void 0&&(c=!1),sg(t),t.Zb.Oc(!0),da(t),t.Vi=!0;var m=t.xa;t.xa=r;var y=t.Ua.s,S=y.length;try{var x=new G(a.x,a.y,i.width/r,i.height/r),P=x.copy();P.fo(n),Kr(t,P),Pn(t),t.Pd(y,S,t,x),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),g!==null&&g!==""&&(e.fillStyle=g,e.fillRect(0,0,i.width,i.height));var L=t.kc;e.scale(L,L);var N=xt.alloc();N.reset(),N.translate(n.left,n.top),N.scale(r),a.x===0&&a.y===0||N.translate(-a.x,-a.y),e.setTransform(N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),e.Pc(),xt.free(N),O0(t,e),e.globalAlpha=t.tb;var k=t.Ij("Grid");if(h){var F=new Z,D=h.iterator;for(D.reset();D.next();){var j=D.value;j instanceof lt&&(c||j.layer!==k)&&F.add(j)}for(c=0;c<S;c++){var E=y[c];k=e;var R=t;if(E.visible&&E.tb!==0&&(f||!E.isTemporary)){var J=E.Ma.s,it=J.length;if(it!==0){var nt=Ph(E,k),et=E.Bn;et.length=0;var Y=R.scale,vt=G.alloc();for(n=0;n<it;n++){var ut=J[n];F.contains(ut)&&E.$h(k,ut,R,et,Y,vt,!1)}G.free(vt),k.globalAlpha=nt}}}}else for(F=0;F<S;F++)R=y[F],R===k?c&&R.tc(e,t,!0):R.tc(e,t,f);t.Vi=!1,t.vh&&hg(t.vh,t)&&t.Qs()}finally{t.xa=m,t.Zb.Oc(!0),da(t),t.Pd(y,S,t,t.viewportBounds),Kr(t)}}}l.Ge=function(t){return this.Ig[t]},l.Fx=function(t,e){t==="minDrawingLength"&&(this.nq=e),this.Ig[t]=e,this.redraw()},l.Ax=function(){this.Ig=new jn,this.Ig.drawShadows=!0,this.Ig.textGreeking=!0,this.Ig.viewportOptimizations=!(Ce||ne),this.Ig.temporaryPixelRatio=!0,this.Ig.pictureRatioOptimization=!0,this.nq=this.Ig.minDrawingLength=1};function O0(t,e){t=t.Ig,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.Ex(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}l.yl=function(t){return this.Vm[t]},l.Zz=function(t,e){this.Vm[t]=e},l.zx=function(){this.Vm=new jn,this.Vm.extraTouchArea=10,this.Vm.extraTouchThreshold=10,this.Vm.hasGestureZoom=!0},l.set=function(t){return Object.assign(this,t),this},l.ku=function(t){return this.Vl(t)},l.Vl=function(t){return rg(this,t),this};function rg(t,e){var n=t instanceof X,i=t instanceof z,r;for(r in e){r===""&&B("Setting properties requires non-empty property names");var a=t,h=r;if(n||i){var g=r.indexOf(".");if(0<g){var f=r.substring(0,g);n?a=t.fb(f):(a=t[f],a==null&&(a=t.toolManager[f])),mt(a)?h=r.substr(g+1):B("Unable to find object named: "+f+" in "+t.toString()+" when trying to set property: "+r)}}if(h[0]!=="_"&&!ih(a,h))if(i&&h==="ModelChanged"){t.Cw(e[h]);continue}else if(i&&h==="Changed"){t.Ug(e[h]);continue}else if(i&&ih(t.toolManager,h))a=t.toolManager;else if(i&&jx(t,h)){t.wj(h,e[h]);continue}else if(t instanceof rt&&h==="Changed"){t.Ug(e[h]);continue}else B('Trying to set undefined property "'+h+'" on object: '+a.toString());a[h]=e[r],h[0]==="_"&&a instanceof st&&a.zw(h)}}l.mu=function(){if(this.undoManager.transactionLevel===0&&this.th.count!==0){for(;0<this.th.count;){var t=this.th;for(this.th=new ct,t=t.iterator;t.next();){var e=t.key;e.Ao(t.value),e.mc(!1)}}this.N()}},l.N=function(t){if(t===void 0)this.bd=!0,this.Mb();else{var e=this.viewportBounds;t.v()&&e.Sc(t)&&(this.bd=!0,this.Mb())}this.P("InvalidateDraw")},z.prototype.invalidateViewport=function(t,e){if(this.bd!==!0){this.bd=!0;var n=this.Ge("temporaryPixelRatio")===!0;if(this.Ge("viewportOptimizations")===!0&&this.scrollMode!==$0&&this.mj.bi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,r=Math.max(t.x,e.x),a=Math.max(t.y,e.y);if(i=G.allocAt(r,a,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-r)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-a)*i),!this.kr&&0<i.width&&0<i.height){if(!(this.cd||(this.cg=!1,this.La===null||(this.cd=!0,this.mu(),this.documentBounds.v()||(r=G.alloc(),Y0(this,this.computeBounds(r)),G.free(r)),r=this.Ha,r===null||r instanceof Pr)))){var h=this.kc;a=this.Ba*h;var g=this.Aa*h,f=this.scale*h,c=Math.round(Math.round(e.x*f)-Math.round(t.x*f));e=Math.round(Math.round(e.y*f)-Math.round(t.y*f)),f=this.Ov,t=this.Ux,f.width!==a&&(f.width=a),f.height!==g&&(f.height=g),t.clearRect(0,0,a,g),f=190*h;var m=70*h,y=Math.max(c,0),S=Math.max(e,0),x=Math.floor(a-y),P=Math.floor(g-S);t.drawImage(r.Sa,y,S,x,P,0,0,x,P),hg(this.vh,this)&&t.clearRect(0,0,f,m),r=Kt(),t=Kt(),P=Math.abs(c),x=Math.abs(e);var L=y===0?0:a-P;y=C.allocAt(L,0),P=C.allocAt(P+L,g),t.push(new G(Math.min(y.x,P.x),Math.min(y.y,P.y),Math.abs(y.x-P.x),Math.abs(y.y-P.y)));var N=this.Bb;if(N.reset(),N.scale(h,h),this.xa!==1&&N.scale(this.xa),h=this.pa,(h.x!==0||h.y!==0)&&isFinite(h.x)&&isFinite(h.y)&&N.translate(-h.x,-h.y),yn(y,N),yn(P,N),r.push(new G(Math.min(y.x,P.x),Math.min(y.y,P.y),Math.abs(y.x-P.x),Math.abs(y.y-P.y))),L=S===0?0:g-x,y.h(0,L),P.h(a,x+L),t.push(new G(Math.min(y.x,P.x),Math.min(y.y,P.y),Math.abs(y.x-P.x),Math.abs(y.y-P.y))),yn(y,N),yn(P,N),r.push(new G(Math.min(y.x,P.x),Math.min(y.y,P.y),Math.abs(y.x-P.x),Math.abs(y.y-P.y))),hg(this.vh,this)&&(a=0<c?0:-c,g=0<e?0:-e,y.h(a,g),P.h(f+a,m+g),t.push(new G(Math.min(y.x,P.x),Math.min(y.y,P.y),Math.abs(y.x-P.x),Math.abs(y.y-P.y))),yn(y,N),yn(P,N),r.push(new G(Math.min(y.x,P.x),Math.min(y.y,P.y),Math.abs(y.x-P.x),Math.abs(y.y-P.y)))),C.free(y),C.free(P),Lh(this,!1,!0),this.La===null&&B("No div specified"),this.Ha===null&&B("No canvas specified"),!this.animationManager.zb&&(a=this.Zb,this.bd)){for(sg(this),g=this.kc,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.Ba*g,this.Aa*g),a.drawImage(this.Ov.Sa,0<c?0:Math.round(-c),0<e?0:Math.round(-e)),c=this.pa,h=this.xa,f=Math.round(c.x*h)/h,m=Math.round(c.y*h)/h,e=this.Bb,e.reset(),h!==1&&e.scale(h),c.x===0&&c.y===0||e.translate(-f,-m),a.save(),a.beginPath(),c=t.length,h=0;h<c;h++)f=t[h],f.width!==0&&f.height!==0&&a.rect(Math.floor(f.x),Math.floor(f.y),Math.ceil(f.width),Math.ceil(f.height));for(a.clip(),a.setTransform(g,0,0,g,0,0),a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),a.Pc(),e=this.Ua.s,c=e.length,this.Pd(e,c,this,this.viewportBounds),O0(this,a),a.globalAlpha=this.tb,g=0;g<c;g++)if(h=e[g],f=r,h.visible&&h.tb!==0){m=Ph(h,a),S=h.Bn,S.length=0,y=this.scale,x=G.alloc(),P=h.Ma.s,N=P.length,L=f.length;for(var k=0;k<N;k++){var F=P[k],D=yl(F,F.actualBounds);t:{for(var j=2/y,E=4/y,R=0;R<L;R++){var J=f[R];if(J.width!==0&&J.height!==0&&D.Hu(J.x-j,J.y-j,J.width+E,J.height+E)){D=!0;break t}}D=!1}D&&h.$h(a,F,this,S,y,x,!0)}G.free(x),a.globalAlpha=m}a.restore(),a.Oc(!0),this.vh&&hg(this.vh,this)&&this.Qs(),this.bd=this.Ui=!1,this.Jo()}Xt(r),Xt(t),this.cd=!1}}else this.nd();G.free(i),n&&(ig(this),this.nd(),kf(this,!0))}else n?(ig(this),this.nd(),kf(this,!0)):this.nd()}};function Ns(t){t.Ti===!1&&(t.Ti=!0)}function da(t){t.Ui===!1&&(t.Ui=!0)}function sg(t){t.Wm!==!1&&(t.Wm=!1,Mx(t,t.Ba,t.Aa))}function Mx(t,e,n){Hr(t);var i=t.kc;t.Ha.resize(e*i,n*i,e,n)&&(t.bd=!0,t.Zb.Oc(!0))}function E0(t){var e=t.Ha;if(e===null||t.Zn.v())return!0;var n=t.Ba,i=t.Aa,r=t.viewportBounds;if(!t.viewportBounds.v())return!0;var a=r.x,h=r.y,g=r.width,f=r.height,c=t.Qt,m=t.Nt,y=t.La,S=!1,x=t.Of?t.Ab:0,P=t.We?t.Ab:0,L=y.clientWidth||n+x,N=y.clientHeight||i+P;if((L!==n+x||N!==i+P)&&(t.Of=!1,t.We=!1,P=x=0,t.Ba=L,t.Aa=N,S=t.Wm=!0,Hr(t)),!(S||t.Of||t.We||t.Tm||t.Um))return!0;t.Ti=!1;var k=t.documentBounds,F=0,D=0,j=0,E=0;y=r.width;var R=r.height,J=t.mj;t.contentAlignment.pb()?(k.width>y&&(F=J.left,D=J.right),k.height>R&&(j=J.top,E=J.bottom)):(F=J.left,D=J.right,j=J.top,E=J.bottom),J=k.width+F+D;var it=k.height+j+E;F=k.x-F;var nt=r.x;D=k.right+D;var et=r.right+x;j=k.y-j;var Y=r.y;k=k.bottom+E,E=r.bottom+P;var vt="1px",ut="1px";if(r=t.scale,L=J>L/r,N=it>N/r,t.scrollMode===fa&&(L||N)&&(L&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(L=1,F+1<nt&&(L=Math.max((nt-F)*r+t.Ba,L)),D>et+1&&(L=Math.max((D-et)*r+t.Ba,L)),y+x+1<J&&(L=Math.max((J-y)*r+t.Ba,L)),vt=L.toString()+"px"),N&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(L=1,j+1<Y&&(L=Math.max((Y-j)*r+t.Aa,L)),k>E+1&&(L=Math.max((k-E)*r+t.Aa,L)),R+P+1<it&&(L=Math.max((it-R)*r+t.Aa,L)),ut=L.toString()+"px")),L=vt!=="1px",N=ut!=="1px",L&&N||!L&&!N||(N&&(et-=t.Ab),L&&(E-=t.Ab),J<y+x||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(x=1,F+1<nt&&(x=Math.max((nt-F)*r+t.Ba,x)),D>et+1&&(x=Math.max((D-et)*r+t.Ba,x)),y+1<J&&(x=Math.max((J-y)*r+t.Ba,x)),vt=x.toString()+"px"),L=vt!=="1px",x=t.Aa,L!==t.We&&(x=L?t.Aa-t.Ab:t.Aa+t.Ab),it<R+P||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(P=1,j+1<Y&&(P=Math.max((Y-j)*r+x,P)),k>E+1&&(P=Math.max((k-E)*r+x,P)),R+1<it&&(P=Math.max((it-R)*r+x,P)),ut=P.toString()+"px"),N=ut!=="1px"),t.Nq&&L===t.We&&N===t.Of)return n===t.Ba&&i===t.Aa||t.nd(),!1;if(L!==t.We&&(vt==="1px"?t.Aa=t.Aa+t.Ab:t.Aa=Math.max(t.Aa-t.Ab,1),S=!0),t.We=L,m.style.width=vt,N!==t.Of&&(ut==="1px"?t.Ba=t.Ba+t.Ab:t.Ba=Math.max(t.Ba-t.Ab,1),S=!0,t.$m&&(P=C.alloc(),N?(e.style.left=t.Ab+"px",t.position=P.h(t.pa.x+t.Ab/t.scale,t.pa.y)):(e.style.left="0px",t.position=P.h(t.pa.x-t.Ab/t.scale,t.pa.y)),C.free(P))),S&&Hr(t),t.Of=N,m.style.height=ut,t.Mt=!0,S&&(t.Wm=!0),e=c.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(y+1<J?e=(t.position.x-F)*r:F+1<nt?e=c.scrollWidth-c.clientWidth:D>et+1&&(e=t.position.x*r)),t.$m)switch(t.Ht){case"negative":e=-(c.scrollWidth-e-c.clientWidth);break;case"reverse":e=c.scrollWidth-e-c.clientWidth}return c.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(R+1<it?c.scrollTop=(t.position.y-j)*r:j+1<Y?c.scrollTop=c.scrollHeight-c.clientHeight:k>E+1&&(c.scrollTop=t.position.y*r)),L=t.Ba,N=t.Aa,c.style.width=L+(t.Of?t.Ab:0)+"px",c.style.height=N+(t.We?t.Ab:0)+"px",n!==L||i!==N||t.animationManager.zb?(n=G.allocAt(a,h,g,f),t.onViewportBoundsChanged(n,t.viewportBounds,r,S),G.free(n),!1):!0}l=z.prototype,l.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&B("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Ij(t.layerName),e===null&&(e=this.Ij("")),e===null&&B('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.ii(99999999,t,t.diagram===this);0<=n&&this.bb(xe,"parts",e,null,t,null,n),e.isTemporary||this.Va(),t.D(1),n=t.layerChanged,n!==null&&n(t,null,e)}},l.ii=function(t){this.partManager.ii(t);var e=this;va(t,function(n){Tx(e,n)}),(t instanceof Ct||t instanceof pt&&t.placeholder!==null)&&t.w(),t.data!==null&&va(t,function(n){rv(e.partManager,n)}),Fi(t)!==!0&&br(t)!==!0||this.te.add(t),Bw(t,!0,this),Rw(t)?(t.actualBounds.v()&&this.N(yl(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(yl(t,t.actualBounds)),this.Mb()},l.lc=function(t){t.zj(),this.partManager.lc(t);var e=this;t.data!==null&&va(t,function(n){sv(e.partManager,n,e)}),this.te.remove(t),Rw(t)?(t.actualBounds.v()&&this.N(yl(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(yl(t,t.actualBounds)),this.Mb()},l.remove=function(t){I0(this,t,!0)};function I0(t,e,n){var i=e.layer;i!==null&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.D(2),n&&e.Fj(),n=i.lc(-1,e,!1),0<=n&&t.bb(Fe,"parts",i,e,null,n,null),t=e.layerChanged,t!==null&&t(e,i,null))}l.hs=function(t,e){if(e===void 0&&(e=!1),Ut(t))for(var n=t.length,i=0;i<n;i++){var r=t[i];e&&!r.canDelete()||this.remove(r)}else for(n=new Z,n.addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},l.Ej=function(t,e,n){return n===void 0&&(n=!1),this.partManager.Ej(t,e,n)},z.prototype.moveParts=function(t,e,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=z0(this)),this.toolManager!==null){var r=new ct;if(t!==null)if(Ut(t))for(var a=0;a<t.length;a++)_r(this,r,t[a],n,i);else for(t=t.iterator;t.next();)_r(this,r,t.value,n,i);else{for(t=this.parts;t.next();)_r(this,r,t.value,n,i);for(t=this.nodes;t.next();)_r(this,r,t.value,n,i);for(t=this.links;t.next();)_r(this,r,t.value,n,i)}A0(this,r,e,i,n)}};function _r(t,e,n,i,r,a){if(!e.contains(n)&&(a===void 0&&(a=!1),!i||a||n.canMove()||n.canCopy()))if(r===void 0&&(r=z0(t)),n instanceof q){if(e.add(n,t.Fd(r,n,n.location)),n instanceof pt&&(n.placeholder!==null||r.dragsMembers))for(a=n.memberParts;a.next();)_r(t,e,a.value,i,r,r.groupsAlwaysMove);for(a=n.linksConnected;a.next();){var h=a.value;if(!e.contains(h)){var g=h.fromNode,f=h.toNode;g!==null&&e.contains(g)&&f!==null&&e.contains(f)&&_r(t,e,h,i,r)}}if(r.dragsTree)for(n=n.Au();n.next();)_r(t,e,n.value,i,r)}else if(n instanceof H)for(e.add(n,t.Fd(r,n)),n=n.labelNodes;n.next();)_r(t,e,n.value,i,r);else n instanceof Ct||e.add(n,t.Fd(r,n,n.location))}function A0(t,e,n,i,r){if(e!==null&&e.count!==0){var a=C.alloc(),h=C.alloc();h.assign(n),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),(n=t.jr)||Cf(t,e);for(var g=Kt(),f=Kt(),c=e.iterator,m=C.alloc();c.next();){var y=c.key,S=c.value;if(y.Tc()){var x=kx(t,y,e);x!==null?g.push(new Wx(y,S,x)):(!r||y.canMove())&&(x=S.point,a.assign(x),t.computeMove(y,a.add(h),i,m),y.location=m,S.shifted===void 0&&(S.shifted=new C),S.shifted.assign(m.je(x)))}else c.key instanceof H&&f.push(c.ra)}for(C.free(m),r=g.length,c=0;c<r;c++)y=g[c],a.assign(y.info.point),y.Eu.shifted===void 0&&(y.Eu.shifted=new C),y.node.location=a.add(y.Eu.shifted);for(r=C.alloc(),c=C.alloc(),y=f.length,S=0;S<y;S++){var P=f[S];if(x=P.key,x instanceof H)if(x.suspendsRouting){x.ef=null,m=x.fromNode;var L=x.toNode;if(t.draggedLink!==null&&i.dragsLink)if(L=P.value.point,x.dragComputation===null)e.add(x,t.Fd(i,x,h)),es(x,h.x-L.x,h.y-L.y);else{P=C.allocAt(0,0),(m=x.i(0))&&m.v()&&P.assign(m);var N=m=C.alloc().assign(P).add(h);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&(N=C.alloc(),B0(t,x,m,N,i)),m.assign(x.dragComputation(x,m,N)).je(P),e.add(x,t.Fd(i,x,m)),es(x,m.x-L.x,m.y-L.y),C.free(P),C.free(m),N!==m&&C.free(N)}else m!==null&&(r.assign(m.location),N=e.I(m),N!==null&&r.je(N.point)),L!==null&&(c.assign(L.location),N=e.I(L),N!==null&&c.je(N.point)),m!==null&&L!==null?r.$a(c)?(m=P.value.point,L=a,L.assign(r),L.je(m),e.add(x,t.Fd(i,x,r)),es(x,L.x,L.y)):(x.suspendsRouting=!1,x.ab()):(P=P.value.point,m=m!==null?r:L!==null?c:h,e.add(x,t.Fd(i,x,m)),es(x,m.x-P.x,m.y-P.y))}else(x.fromNode===null||x.toNode===null)&&(m=P.value.point,e.add(x,t.Fd(i,x,h)),es(x,h.x-m.x,h.y-m.y))}C.free(a),C.free(h),C.free(r),C.free(c),Xt(g),Xt(f),n||(Pn(t),ag(t,e))}}z.prototype.computeMove=function(t,e,n,i){if(i===void 0&&(i=new C),i.assign(e),t===null)return i;var r=e,a=n.isGridSnapEnabled;a&&(n.isGridSnapRealtime||this.lastInput.up)&&(r=C.alloc(),B0(this,t,e,r,n)),n=t.dragComputation!==null?t.dragComputation(t,e,r):r;var h=t.minLocation,g=h.x;isNaN(g)&&(g=a?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=a?Math.round(1e3*t.location.y)/1e3:t.location.y);var f=t.maxLocation,c=f.x;return isNaN(c)&&(c=a?Math.round(1e3*t.location.x)/1e3:t.location.x),f=f.y,isNaN(f)&&(f=a?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(g,Math.min(n.x,c)),Math.max(h,Math.min(n.y,f))),r!==e&&C.free(r),i};function z0(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.Em}function B0(t,e,n,i,r){if(r===void 0&&(r=z0(t)),i.assign(n),e!==null){var a=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var h=r.gridSnapOrigin,g=h.x;if(h=h.y,r=r.gridSnapCellSpot,a!==null){var f=a.gridCellSize;isNaN(t)&&(t=f.width),isNaN(e)&&(e=f.height),a=a.gridOrigin,isNaN(g)&&(g=a.x),isNaN(h)&&(h=a.y)}a=C.allocAt(0,0),a.pi(0,0,t,e,r),A.so(n.x,n.y,g+a.x,h+a.y,t,e,i),C.free(a)}}function Cf(t,e){if(e!==null)for(t.jr=!0,t=e.iterator;t.next();)e=t.key,e instanceof H&&(e.suspendsRouting=!0)}function ag(t,e){if(e!==null){for(e=e.iterator;e.next();){var n=e.key;n instanceof H&&(n.suspendsRouting=!1,_y(n)&&n.ab())}t.jr=!1}}function kx(t,e,n){return e=e.containingGroup,e!==null&&(t=kx(t,e,n),t!==null||(t=n.I(e),t!==null))?t:null}l=z.prototype,l.Fd=function(t,e,n){if(n===void 0)return new Cs(dr);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(i=!1),i?new Cs(new C(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3)):new Cs(n.copy())};function G0(t,e,n){if(e.diagram!==null&&e.diagram!==t&&B("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),n===null?e.diagram!==null&&B("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&B("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&B("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Ua,n=t.count;for(var i=0;i<n;i++)t.K(i).name===e&&B("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}l.pl=function(t){G0(this,t,null),t.Le(this);var e=this.Ua,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.K(n).isTemporary;)n--;return e.Cb(n+1,t),this.ac!==null&&this.bb(xe,"layers",this,null,t,null,n+1),this.N(),this.Va(),this},l.Aw=function(t,e){G0(this,t,e),t.Le(this);var n=this.Ua,i=n.indexOf(t);0<=i&&(n.remove(t),this.ac!==null&&this.bb(Fe,"layers",this,t,null,i,null));var r=n.count,a;for(a=0;a<r;a++)if(n.K(a)===e){n.Cb(a,t);break}return this.ac!==null&&this.bb(xe,"layers",this,null,t,null,a),this.N(),0>i&&this.Va(),this},l.jy=function(t,e){G0(this,t,e),t.Le(this);var n=this.Ua,i=n.indexOf(t);0<=i&&(n.remove(t),this.ac!==null&&this.bb(Fe,"layers",this,t,null,i,null));var r=n.count,a;for(a=0;a<r;a++)if(n.K(a)===e){n.Cb(a+1,t);break}return this.ac!==null&&this.bb(xe,"layers",this,null,t,null,a+1),this.N(),0>i&&this.Va(),this},l.Rz=function(t){if(t.diagram!==this&&B("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Ua,n=e.indexOf(t);if(e.remove(t)){for(e=t.Ma.copy().iterator;e.next();){var i=e.value,r=i.layerName;r!==t.name?i.layerName=r:i.layerName=""}this.ac!==null&&this.bb(Fe,"layers",this,t,null,n,null),this.N(),this.Va()}}},l.Ij=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},l.Cw=function(t){return this.bf===null&&(this.bf=new tt),this.bf.add(t),this.model.Ug(t),this},l.Tz=function(t){this.bf!==null&&(this.bf.remove(t),this.bf.count===0&&(this.bf=null)),this.model.ak(t)},l.Ug=function(t){return this.qg===null&&(this.qg=new tt),this.qg.add(t),this},l.ak=function(t){this.qg!==null&&(this.qg.remove(t),this.qg.count===0&&(this.qg=null))},l.Cr=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Fu(t),t.change!==so&&(this.isModified=!0),this.qg!==null)for(var e=this.qg,n=e.length,i=0;i<n;i++)e.K(i)(t)},l.bb=function(t,e,n,i,r,a,h){a===void 0&&(a=null),h===void 0&&(h=null);var g=new bt;g.diagram=this,g.change=t,g.propertyName=e,g.object=n,g.oldValue=i,g.oldParam=a,g.newValue=r,g.newParam=h,this.Cr(g)},l.g=function(t,e,n,i,r){this.bb(Zt,t,this,e,n,i,r)},z.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===Zt){var r=t.object;if(Wt(r,t.propertyName,t.I(e)),r instanceof st){var a=r.part;a!==null&&a.Rb()}this.isModified=!0}else if(i===xe){var h=t.object,g=t.newParam,f=t.newValue;if(h instanceof X)if(typeof g=="number"&&f instanceof st){e?h.lc(g):h.Cb(g,f);var c=h.part;c!==null&&c.Rb()}else typeof g=="number"&&f instanceof Le&&(f.isRow?gw(h,g,e?void 0:f):dw(h,g,e?void 0:f));else if(h instanceof rn){var m=t.oldParam===!0;typeof g=="number"&&f instanceof lt&&(e?(f.isSelected=!1,f.isHighlighted=!1,f.Rb(),h.lc(m?g:-1,f,m)):h.ii(g,f,m))}else h instanceof z?typeof g=="number"&&f instanceof rn&&(e?this.Ua.mb(g):(f.Le(this),this.Ua.Cb(g,f))):B("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===Fe){var y=t.object,S=t.oldParam,x=t.oldValue;if(y instanceof X)typeof S=="number"&&x instanceof st?e?y.Cb(S,x):y.lc(S):typeof S=="number"&&x instanceof Le&&(x.isRow?gw(y,S,e?x:void 0):dw(y,S,e?x:void 0));else if(y instanceof rn){var P=t.newParam===!0;typeof S=="number"&&x instanceof lt&&(e?0>y.Ma.indexOf(x)&&y.ii(S,x,P):(x.isSelected=!1,x.isHighlighted=!1,x.Rb(),y.lc(P?S:-1,x,P)))}else y instanceof z?typeof S=="number"&&x instanceof rn&&(e?(x.Le(this),this.Ua.Cb(S,x)):this.Ua.mb(S)):B("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==so&&B("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},z.prototype.Da=function(t){return this.undoManager.Da(t)},z.prototype.eb=function(t){return this.undoManager.eb(t)},z.prototype.Bf=function(){return this.undoManager.Bf()},z.prototype.commit=function(t,e){e===void 0&&(e="");var n=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.eb(e):this.undoManager.Bf(),this.skipsUndoManager=n}},z.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},z.prototype.Uo=function(){this.partManager.Uo()};function Nx(t,e,n){var i=t.animationManager;if(t.wb||t.cd)t.xa=n,Hr(t),i.zb&&(vf(i)||i.Wd.add(i.H,"scale",e,t.xa));else if(t.Ha===null)t.xa=n,Hr(t);else{t.wb=!0;var r=t.viewportBounds.copy(),a=t.Ba,h=t.Aa;r.width=t.Ba/e,r.height=t.Aa/e;var g=t.zoomPoint.x,f=t.zoomPoint.y,c=t.contentAlignment;isNaN(g)&&(c.Uc()?c.xf(lh)?g=0:c.xf(hh)&&(g=a-1):g=c.pb()?c.x*(a-1):a/2),isNaN(f)&&(c.Uc()?c.xf(ah)?f=0:c.xf(uh)&&(f=h-1):f=c.pb()?c.y*(h-1):h/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),a=C.allocAt(t.pa.x+g/e-g/n,t.pa.y+f/e-f/n),t.position=a,C.free(a),t.xa=n,Hr(t),t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),t.wb=!1,lo(t,!1),i.zb&&(vf(i)||i.Wd.add(i.H,"scale",e,t.xa)),t.N(),Ns(t)}}z.prototype.onViewportBoundsChanged=function(t,e,n,i){if(!t.C(e)){i===void 0&&(i=!1),i||Ns(this),da(this);var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==pi||i||t.width===e.width&&t.height===e.height||r.D(),r=this.currentTool,this.Kk===!0&&r instanceof te&&(this.lastInput.documentPoint=this.rs(this.lastInput.viewPoint),BP(r,this)),this.wb||this.invalidateViewport(t,e),Kr(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.Hw.width=Math.round(t.width*n),this.kd.Hw.height=Math.round(t.height*n),this.kd.sx.width=this.Ba,this.kd.sx.height=this.Aa,this.kd.lx=i,this.P("ViewportBoundsChanged",this.kd,t),this.isVirtualized&&this.links.each(function(a){a.isAvoiding&&a.actualBounds.Sc(e)&&a.ab()})}};function Kr(t,e){var n=t.Zd;if(n!==null&&n.visible){for(var i=dt.alloc(),r=1,a=1,h=n.R.s,g=h.length,f=0;f<g;f++){var c=h[f],m=Math.abs(c.interval);2>m||(dy(c.figure)?a=a*m/A.Xw(a,m):r=r*m/A.Xw(r,m))}if(h=n.gridCellSize,i.h(a*h.width,r*h.height),e!==void 0)r=e.width,a=e.height,t=e.x,h=e.y;else{if(e=G.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.v()){G.free(e);return}r=e.width,a=e.height,t=e.x,h=e.y,G.free(e)}n.width=r+2*i.width,n.height=a+2*i.height,e=C.alloc(),A.so(t,h,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),dt.free(i),n.part.location=e,C.free(e)}}z.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.P("ChangingSelection",e);for(var n=e.Ea(),i=n.length,r=0;r<i;r++)n[r].isSelected=!1;e.ja(),e.clear(),e.freeze(),t||this.P("ChangedSelection",e)}},z.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.P("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.P("ChangedSelection",this.selection))},z.prototype.Yz=function(t){if(this.P("ChangingSelection",this.selection),this.clearSelection(!0),Ut(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof lt||B("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof lt||B("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.P("ChangedSelection",this.selection)},z.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Ea(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ja(),t.clear(),t.freeze()}},l=z.prototype,l.qz=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},l.rz=function(t){t=new Z().addAll(t);for(var e=this.highlighteds.copy().Ko(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof lt||B("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},l.scroll=function(t,e,n){n===void 0&&(n=1);var i=e==="up"||e==="down",r=0;if(t==="pixel")r=n;else if(t==="line")r=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=i?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,n=this.viewportBounds,i=C.alloc(),e==="up"?this.position=i.h(n.x,r.y):e==="left"?this.position=i.h(r.x,n.y):e==="down"?this.position=i.h(n.x,r.bottom-n.height):e==="right"&&(this.position=i.h(r.right-n.width,n.y)),C.free(i);return}B("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,n=this.position.copy(),e==="up"?n.y=this.position.y-r:e==="down"?n.y=this.position.y+r:e==="left"?n.x=this.position.x-r:e==="right"?n.x=this.position.x+r:B("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},l.bv=function(t){var e=this.viewportBounds;e.Ee(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},l.Dr=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},l.Ro=function(t){var e=this.Bb;e.reset(),this.xa!==1&&e.scale(this.xa);var n=this.pa;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.Bb)},l.gA=function(t){var e=this.Bb,n=t.x,i=t.y,r=n+t.width,a=i+t.height,h=e.m11,g=e.m12,f=e.m21,c=e.m22,m=e.dx,y=e.dy,S=n*h+i*f+m;e=n*g+i*c+y;var x=r*h+i*f+m;return t=r*g+i*c+y,i=n*h+a*f+m,n=n*g+a*c+y,h=r*h+a*f+m,r=r*g+a*c+y,a=Math.min(S,x),S=Math.max(S,x),x=Math.min(e,t),e=Math.max(e,t),a=Math.min(a,i),S=Math.max(S,i),x=Math.min(x,n),e=Math.max(e,n),a=Math.min(a,h),S=Math.max(S,h),x=Math.min(x,r),e=Math.max(e,r),new G(a,x,S-a,e-x)},l.rs=function(t){var e=this.Bb;e.reset(),this.xa!==1&&e.scale(this.xa);var n=this.pa;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),yn(t.copy(),this.Bb)};function Cx(t){var e=t.isModified;t.xw!==e&&(t.xw=e,t.P("Modified"))}function hN(t){return t=Ff.get(t),t!==null?new t:new It}z.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,i=t.propertyName;if(n===so&&i[0]==="S")if(i==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(f){f.diagram=r}),t.mouseMoveTools.each(function(f){f.diagram=r}),t.mouseUpTools.each(function(f){f.diagram=r}),this.cd||this.Qf||(this.xk=!0,this.Nm&&(this.cg=!0))}else i==="StartingUndo"||i==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc(),this.P("ChangingSelection",this.selection)):i==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc());else if(this.$){this.$=!1;try{if(t.modelChange===""&&n===so){(i==="FinishedUndo"||i==="FinishedRedo")&&(this.P("ChangedSelection",this.selection),Pn(this));var a=this.animationManager;i==="RolledBackTransaction"&&a.wc(),this.xk=!0,this.nd(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||L0(a),i==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.se=Math.min(this.se,this.undoManager.historyIndex-1)),i!=="CommittedTransaction"&&i!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var h=t.isTransactionFinished;if(h&&(Cx(this),this.Zr.clear(),qk(this.animationManager)),!this.wt&&h&&this.lastInput.targetDiagram){this.wt=!0;var g=this;_(function(){g.currentTool.standardMouseOver(),g.wt=!1},10)}}}finally{this.$=!0}}}};function Tx(t,e){e=e.R.s;for(var n=e.length,i=0;i<n;i++)R0(t,e[i])}function R0(t,e){if(e instanceof Rn){var n=e.element;if(n!==null&&n instanceof HTMLImageElement){n.sg instanceof Z&&n.sg.add(t);var i=e.vg;if(i!==null&&i.Up===!0&&e.diagram!==null&&e.diagram.Fn.add(e),n.Pm)if(n=n.getAttribute("src")||"",i=t.Fg.I(n),i===null)i=[],i.push(e),t.Fg.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function V0(t,e){if(e instanceof Rn){var n=e.element;if(n!==null&&n instanceof HTMLImageElement&&n.Pm){var i=n.getAttribute("src")||"",r=t.Fg.I(i);if(r!==null){for(var a=0;a<r.length;a++)if(r[a]===e){r.splice(a,1),r.length===0&&(t.Fg.remove(i),n.fq&&n.removeEventListener("load",n.fq),n.Bp&&n.removeEventListener("error",n.Bp),delete n.fq,delete n.Bp,n.sg instanceof Z&&n.sg.remove(t),Yh(i));break}}}}}z.prototype.Od=function(){this.partManager.Od()},z.prototype.vj=function(t,e){this.Rd.vj(t,e)},z.prototype.xj=function(t,e){this.Rd.xj(t,e)},z.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},z.prototype.Lb=function(t){return this.partManager.Lb(t)},z.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},l=z.prototype,l.Ec=function(t){return this.partManager.Ec(t)},l.ci=function(t){return this.partManager.ci(t)},l.Dc=function(t){return this.partManager.Dc(t)},l.Jr=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Jr.apply(this.partManager,e instanceof Array?e:d(s(e)))},l.Ir=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ir.apply(this.partManager,e instanceof Array?e:d(s(e)))};function Hr(t){var e=t.pa,n=t.xa;t.vw.h(e.x,e.y,Math.max(t.Ba,0)/n,Math.max(t.Aa,0)/n)}function Y0(t,e){t.Si=!1;var n=t.wp;n.C(e)||(n=n.copy(),t.wp.assign(e),lo(t,!1),t.P("DocumentBoundsChanged",void 0,n),Ns(t))}l.Za=function(){if(this.Si){var t=G.alloc();Y0(this,this.computeBounds(t)),G.free(t)}},l.$y=function(){for(var t=new Z,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)n=e.value,n.isTopLevel&&t.add(n);return t.iterator},l.Zy=function(){return this.Uh.iterator},l.Bz=function(t){Pn(this),t&&Tf(this,!0),this.cd?U0(this,!1):(this.xk=!0,Xr(this))};function Tf(t,e){for(var n=t.Uh.iterator;n.next();)Fx(t,n.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.D())}function Fx(t,e,n){if(e!==null){for(var i=e.Vk.iterator;i.next();)Fx(t,i.value,n);e.layout!==null&&(n?e.layout.isValidLayout=!1:e.layout.D())}}function U0(t,e){if(t.mh&&!t.Ns){var n=t.$;t.$=!0;var i=t.undoManager.transactionLevel,r=t.layout,a=t.animationManager;try{i===0&&(t.undoManager.isInternalTransaction=!0,t.Da("Layout")),1>=i&&!a.defaultAnimation.isAnimating&&!a.zb&&(e||Ur(a,"Layout")),t.mh=!1;for(var h=t.Uh.iterator;h.next();)Dx(t,h.value,e,i);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||i===0?(r.doLayout(t),Pn(t),r.isValidLayout=!0):t.mh=!0)}finally{e=t.undoManager.isInternalTransaction,i===0&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||i!==0&&i!==1||L0(a),t.$=n}}}function Dx(t,e,n,i){if(e!==null){for(var r=e.Vk.iterator;r.next();)Dx(t,r.value,n,i);r=e.layout,r===null||r.isValidLayout||(!n||r.isRealtime||i===0?(e.gh=!e.location.v(),r.doLayout(e),e.D(32),j0(t,e),r.isValidLayout=!0):t.mh=!0)}}l.fz=function(){for(var t=new tt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&n.$g()===null&&t.add(n)}return t.iterator};function uN(t){function e(r){var a=r.toLowerCase(),h=new tt;n.add(r,h),n.add(a,h),i.add(r,r),i.add(a,r)}var n=new ct,i=new ct;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Nv=n,t.Mv=i}function jx(t,e){var n=t.Mv.I(e);return n!==null?n:t.Mv.I(e.toLowerCase())}function X0(t,e){var n=t.Nv.I(e);if(n!==null||(n=t.Nv.I(e.toLowerCase()),n!==null))return n;B("Unknown DiagramEvent name: "+e)}l.wj=function(t,e){return t=X0(this,t),t!==null&&t.add(e),this},l.Il=function(t,e){t=X0(this,t),t!==null&&t.remove(e)},l.P=function(t,e,n){var i=X0(this,t),r=new il;if(r.diagram=this,t=jx(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),n!==void 0&&(r.parameter=n),e=i.length,e===1)i.K(0)(r);else if(e!==0)for(i=i.Ea(),n=0;n<e;n++)(0,i[n])(r)};function Ox(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.jr||e.isComplexRoutingRealtime:!0}l.Pj=function(t,e){return _0(this,!1,null,e||null).Pj(t.x,t.y,t.width,t.height)},z.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Si?wx(this,t):t.assign(this.documentBounds)};function _0(t,e,n,i){var r=t.Qh;if(r===null&&(t.Qh=r=new Bg(t.avoidanceCellSize)),r.Sr||r.group!==n||r.Hx!==i){if(r.mx=Math.max(r.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),r.nx=Math.max(r.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),n!==null&&(n=Ex(t,n)),n===null){e=G.alloc(),t.computeOccupiedArea(e),e.vc(100,100),r.initialize(e);for(var a=t.nodes;a.next();){var h=a.value,g=h.layer;g!==null&&g.visible&&!g.isTemporary&&K0(t,h,i,e)}G.free(e)}else{for(0<n.memberParts.count&&(e=t.computePartsBounds(n.memberParts,!1),e.vc(20,20),r.initialize(e)),e=G.alloc(),a=n.memberParts;a.next();)h=a.value,h instanceof q&&K0(t,h,i,e);G.free(e)}r.group=n,r.Hx=i,r.Sr=!1}else e&&o2(r);return r}function Ex(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?Ex(t,e.containingGroup):null}function K0(t,e,n,i){if(e!==n&&e.isVisible()){if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(i),t=t.Qh;var r=e.x,a=e.y;if(Hh(t,r,a))for(n=(a-t.Ed)/t.oc|0,i=Math.min((r+e.width-t.Dd)/t.nc|0,t.Wh),e=Math.min((a+e.height-t.Ed)/t.oc|0,t.Xh),r=(r-t.Dd)/t.nc|0;r<=i;r++)if(a=t.Xb[r],a.fill)a.fill(is,n,e+1);else for(var h=n;h<=e;h++)a[h]=is}else if(e instanceof pt)for(e=e.memberParts;e.next();)r=e.value,r instanceof q&&K0(t,r,n,i)}}function H0(t,e){t.Qh===null||t.Qh.Sr||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Qh.Sr=!0)}z.prototype.Fr=function(t){this.Zo.assign(t),this.computeAutoScrollPosition(this.Zo).$a(this.position)?this.lg():Ix(this)};function Ix(t){t.ik===-1&&(t.ik=_(function(){if(t.ik!==-1&&(t.lg(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.Zo);e.$a(t.position)||(t.position=e,t.lastInput.documentPoint=t.rs(t.Zo),t.doMouseMove(),t.Si=!0,e=G.alloc(),t.computeBounds(e),e.Xc(t.documentBounds),Y0(t,e),G.free(e),t.bd=!0,t.nd(),Ix(t))}},t.Yo))}z.prototype.lg=function(){this.ik!==-1&&(U.clearTimeout(this.ik),this.ik=-1)},z.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.$o;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var i=this.viewportBounds,r=this.scale;i=G.allocAt(0,0,i.width*r,i.height*r);var a=C.allocAt(0,0);if(t.x>=i.x&&t.x<i.x+n.left&&this.allowHorizontalScroll){var h=Math.max(this.scrollHorizontalLineChange,1);h|=0,a.x-=h,t.x<i.x+n.left/2&&(a.x-=h),t.x<i.x+n.left/4&&(a.x-=4*h)}else t.x<=i.x+i.width&&t.x>i.x+i.width-n.right&&this.allowHorizontalScroll&&(h=Math.max(this.scrollHorizontalLineChange,1),h|=0,a.x+=h,t.x>i.x+i.width-n.right/2&&(a.x+=h),t.x>i.x+i.width-n.right/4&&(a.x+=4*h));return t.y>=i.y&&t.y<i.y+n.top&&this.allowVerticalScroll?(h=Math.max(this.scrollVerticalLineChange,1),h|=0,a.y-=h,t.y<i.y+n.top/2&&(a.y-=h),t.y<i.y+n.top/4&&(a.y-=4*h)):t.y<=i.y+i.height&&t.y>i.y+i.height-n.bottom&&this.allowVerticalScroll&&(h=Math.max(this.scrollVerticalLineChange,1),h|=0,a.y+=h,t.y>i.y+i.height-n.bottom/2&&(a.y+=h),t.y>i.y+i.height-n.bottom/4&&(a.y+=4*h)),a.$a(dr)||(e=new C(e.x+a.x/r,e.y+a.y/r)),G.free(i),C.free(a),e},l=z.prototype,l.bs=function(){return null},l.Nu=function(){return null},l.ny=function(t,e){this.Yx.add(t,e)},l.lu=function(t){(this.tw=t)||this.nodes.each(function(e){e instanceof pt&&(e.Dp=null)})};function Ax(t,e,n){function i(){var m=+new Date;for(a=!0,h.reset();h.next();)if(!h.value[0].Qk){a=!1;break}a||m-c>f?e(n,r,g):U.requestAnimationFrame(i)}for(var r=n.callback,a=!0,h=t.Fg.iterator;h.next();)if(!h.value[0].Qk){a=!1;break}if(typeof r!="function"||a)return e(n,r,t);var g=t,f=n.callbackTimeout||300,c=+new Date;return U.requestAnimationFrame(function(){i()}),null}l.Dz=function(t){return _i?(t===void 0&&(t={}),t.returnType="Image",this.ox(t)):null},l.ox=function(t){return t===void 0&&(t={}),Ax(this,this.Ez,t)},l.Ez=function(t,e,n){var i=zx(n,t,"canvas",null);if(i===null)return null;n=i.Z.canvas;var r=null;if(n!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case Nh+"data":r=i.getImageData(0,0,n.width,n.height);break;case Nh:i=(t.document||document).createElement("img"),i.src=n.toDataURL(t.type,t.details),r=i;break;case"blob":return typeof e!="function"&&B('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof n.toBlob=="function"?(n.toBlob(e,t.type,t.details),"toBlob"):typeof n.msToBlob=="function"?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:r=n.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function zx(t,e,n,i){if(t.animationManager.wc(),t.nd(),t.Ha===null)return null;typeof e!="object"&&B("properties argument must be an Object.");var r=e.size||null,a=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(a="NaN");var h=e.maxSize;e.maxSize===void 0&&(h=n==="SVG"?new dt(1/0,1/0):new dt(2e3,2e3));var g=e.position||null,f=e.parts||null,c=e.padding===void 0?1:e.padding,m=e.background||null,y=e.omitTemporary;y===void 0&&(y=!0);var S=e.document||document,x=e.elementFinished||null,P=e.showTemporary;P===void 0&&(P=!y),e=e.showGrid,e===void 0&&(e=P),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof c=="number"?c=new At(c):c instanceof At||B("MakeImage padding must be a Margin or a number."),c.left=Math.max(c.left,0),c.right=Math.max(c.right,0),c.top=Math.max(c.top,0),c.bottom=Math.max(c.bottom,0),t.Zb.Oc(!0),y=new Di(null,S);var L=y.context;if(!(r||a||f||g))return y.width=t.Ba+Math.ceil(c.left+c.right),y.height=t.Aa+Math.ceil(c.top+c.bottom),n==="SVG"?i===null?null:(i.resize(y.width,y.height,y.width,y.height),i.ownerDocument=S,i.po=x,Nf(t,i.context,c,new dt(y.width,y.height),t.xa,t.pa,f,m,P,e),i.context):(t.Fm=!1,Nf(t,L,c,new dt(y.width,y.height),t.xa,t.pa,f,m,P,e),t.Fm=!0,y.context);var N=t.sp,k=t.documentBounds.copy();if(k.jv(t.ub),P)for(var F=t.Ua.s,D=F.length,j=0;j<D;j++){var E=F[j];if(E.visible&&E.isTemporary){E=E.Ma.s;for(var R=E.length,J=0;J<R;J++){var it=E[J];it.isInDocumentBounds&&it.isVisible()&&(it=it.actualBounds,it.v()&&k.Xc(it))}}}if(F=new C(k.x,k.y),f!==null){for(D=new G(0,0,0,0),j=!0,E=f.iterator,E.reset();E.next();)R=E.value,R instanceof lt&&(J=R.layer,J!==null&&!J.visible||J!==null&&!P&&J.isTemporary||!R.isVisible()||(R=R.actualBounds,R.v()&&(j?(j=!1,D.assign(R)):D.Xc(R))));k.width=D.width,k.height=D.height,F.x=D.x,F.y=D.y}return g!==null&&g.v()&&(F=g,a||(a=N)),D=g=0,c!==null&&(g=c.left+c.right,D=c.top+c.bottom),j=E=0,r!==null&&(E=r.width,j=r.height,isFinite(E)&&(E=Math.max(0,E-g)),isFinite(j)&&(j=Math.max(0,j-D))),r!==null&&a!==null?(a==="NaN"&&(a=N),r.v()?(r=E,k=j):isNaN(j)?(r=E,k=k.height*a):(r=k.width*a,k=j)):r!==null?r.v()?(a=Math.min(E/k.width,j/k.height),r=E,k=j):isNaN(j)?(a=E/k.width,r=E,k=k.height*a):(a=j/k.height,r=k.width*a,k=j):a!==null?a==="NaN"&&h.v()?(a=Math.min((h.width-g)/k.width,(h.height-D)/k.height),a>N?(a=N,r=k.width,k=k.height):(r=h.width,k=h.height)):(r=k.width*a,k=k.height*a):(a=N,r=k.width,k=k.height),c!==null?(r+=g,k+=D):c=new At(0),h!==null&&(N=h.width,h=h.height,isNaN(N)&&(N=2e3),isNaN(h)&&(h=2e3),isFinite(N)&&(r=Math.min(r,N)),isFinite(h)&&(k=Math.min(k,h))),y.width=Math.ceil(r),y.height=Math.ceil(k),n==="SVG"?i===null?null:(i.resize(y.width,y.height,y.width,y.height),i.ownerDocument=S,i.po=x,Nf(t,i.context,c,new dt(Math.ceil(r),Math.ceil(k)),a,F,f,m,P,e),i.context):(t.Fm=!1,Nf(t,L,c,new dt(Math.ceil(r),Math.ceil(k)),a,F,f,m,P,e),t.Fm=!0,y.context)}I.Object.defineProperties(z.prototype,{div:{get:function(){return this.La},set:function(t){if(this.La!==t){var e=this.La;e!==null?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.Ha!==null&&(e=this.Ha.Sa,this.removeEventListener(e,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.Ha.Pw()),this.cl&&(this.cl.disconnect(),this.cl=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ha=null,this.removeEventListener(U,"resize",this.sv,!1),this.removeEventListener(U,"wheel",this.Sj,!0),xh===this&&(xh=null)):this.Qf=!1,this.La=null,t!==null&&((e=t.H)&&(e.div=null),q0(this,t),this.redraw())}}},Ew:{get:function(){return this.rq}},ji:{get:function(){return this.Qf}},draggedLink:{get:function(){return this.Ps},set:function(t){this.Ps!==t&&(this.Ps=t,t!==null&&(this.At=t.fromPort,this.Bt=t.toPort))}},tx:{get:function(){return this.At},set:function(t){this.At=t}},ux:{get:function(){return this.Bt},set:function(t){this.Bt=t}},animationManager:{get:function(){return this.Rd}},undoManager:{get:function(){return this.ac.undoManager}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t,this.ac.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Ns},set:function(t){this.Ns=t}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&gt(t,"0 <= value <= 1",z,"opacity"),this.tb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.bu},set:function(t){var e=this.bu;e!==t&&(this.bu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Ua.iterator}},isModelReadOnly:{get:function(){var t=this.ac;return t===null?!1:t.isReadOnly},set:function(t){var e=this.ac;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.ws},set:function(t){var e=this.ws;e!==t&&(this.ws=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.xs},set:function(t){var e=this.xs;e!==t&&(this.xs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.ys},set:function(t){var e=this.ys;e!==t&&(this.ys=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.As},set:function(t){var e=this.As;e!==t&&(this.As=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Bs},set:function(t){var e=this.Bs;e!==t&&(this.Bs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Ds},set:function(t){var e=this.Ds;e!==t&&(this.Ds=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Um},set:function(t){var e=this.Um;e!==t&&(this.Um=t,Ns(this),this.N(),this.g("hasVerticalScrollbar",e,t),lo(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e!==t&&(this.Tm=t,Ns(this),this.N(),this.g("hasHorizontalScrollbar",e,t),lo(this,!1))}},allowHorizontalScroll:{get:function(){return this.zs},set:function(t){var e=this.zs;e!==t&&(this.zs=t,this.g("allowHorizontalScroll",e,t),lo(this,!1))}},allowVerticalScroll:{get:function(){return this.Cs},set:function(t){var e=this.Cs;e!==t&&(this.Cs=t,this.g("allowVerticalScroll",e,t),lo(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0>t&&gt(t,">= 0",z,"scrollHorizontalLineChange"),this.Ot=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(0>t&&gt(t,">= 0",z,"scrollVerticalLineChange"),this.St=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.Yi},set:function(t){this.Yi=t}},previousInput:{get:function(){return this.Hg},set:function(t){this.Hg=t}},firstInput:{get:function(){return this.Fp},set:function(t){this.Fp=t}},currentCursor:{get:function(){return this.Ks},set:function(t){if(t===""&&(t=this.rp),this.Ks!==t){var e=this.Ha,n=this.La;if(e!==null&&n!==null){this.Ks=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.rp},set:function(t){t===""&&(t="auto");var e=this.rp;e!==t&&(this.rp=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.qh},set:function(t){var e=this.qh;e!==t&&(this.qh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.vt},set:function(t){var e=this.vt;e!==t&&(this.vt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Eh},set:function(t){var e=this.Eh;e!==t&&(this.Eh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.rh},set:function(t){var e=this.rh;e!==t&&(this.rh=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t,t.Le(this))}},toolManager:{get:function(){return this.le},set:function(t){this.le!==t&&(this.le=t,t.diagram=this)}},defaultTool:{get:function(){return this.nb},set:function(t){var e=this.nb;e!==t&&(this.nb=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.cb},set:function(t){var e=this.cb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.cb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.lw}},maxSelectionCount:{get:function(){return this.qt},set:function(t){var e=this.qt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.qt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.P("ChangingSelection",this.selection),e=this.selection.Ea();for(var n=0;n<t;n++)e[n].isSelected=!1;this.P("ChangedSelection",this.selection)}}else gt(t,">= 0",z,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Tv}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.Ym&&this.se!==t.historyIndex:this.Ym},set:function(t){if(this.Ym!==t){this.Ym=t;var e=this.undoManager;!t&&e.isEnabled&&(this.se=e.historyIndex),t||Cx(this)}}},model:{get:function(){return this.ac},set:function(t){var e=this.ac;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&B("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.wc(!0);var n=vx(this,!0);this.Qf=!1,this.Nm=!0,this.se=-2,this.cg=!1;var i=this.wb;this.wb=!0,Ur(this.animationManager,"Model"),e&&(this.bf!==null&&this.bf.each(function(a){e.ak(a)}),e.ak(this.Hc)),this.ac=t,this.partManager=hN(this.ac.type);for(var r=0;r<n.length;r++)this.add(n[r]);t.Ug(this.Db),this.partManager.addAllModeledParts(),t.ak(this.Db),t.Ug(this.Hc),this.bf!==null&&this.bf.each(function(a){t.Ug(a)}),this.wb=i,this.Va(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},$:{get:function(){return this.Xv},set:function(t){this.Xv=t}},Zr:{get:function(){return this.Xx}},skipsModelSourceBindings:{get:function(){return this.mw},set:function(t){this.mw=t}},os:{get:function(){return this.Ut},set:function(t){this.Ut=t}},nodeTemplate:{get:function(){return this.Dg.I("")},set:function(t){var e=this.Dg.I("");e!==t&&(this.Dg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},nodeTemplateMap:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplate:{get:function(){return this.Ri.I("")},set:function(t){var e=this.Ri.I("");e!==t&&(this.Ri.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplateMap:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplate:{get:function(){return this.Ch.I("")},set:function(t){var e=this.Ch.I("");e!==t&&(this.Ch.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplateMap:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},isMouseCaptured:{get:function(){return this.Wv},set:function(t){var e=this.Ha;e!==null&&(e=e.Sa,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.addEventListener(U,"pointermove",this.Xj,!0),this.addEventListener(U,"pointerdown",this.Wj,!0),this.addEventListener(U,"pointerup",this.Zj,!0),this.addEventListener(U,"pointerout",this.Yj,!0),this.removeEventListener(e,"wheel",this.Sj,!1),this.addEventListener(U,"wheel",this.Sj,!0),this.addEventListener(U,"selectstart",this.preventDefault,!1)):(this.removeEventListener(U,"pointermove",this.Xj,!0),this.removeEventListener(U,"pointerdown",this.Wj,!0),this.removeEventListener(U,"pointerup",this.Zj,!0),this.removeEventListener(U,"pointerout",this.Yj,!0),this.addEventListener(e,"pointermove",this.Xj,!1),this.addEventListener(e,"pointerdown",this.Wj,!1),this.addEventListener(e,"pointerup",this.Zj,!1),this.addEventListener(e,"pointerout",this.Yj,!1),this.removeEventListener(U,"wheel",this.Sj,!0),this.removeEventListener(U,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Sj,!1)),this.Wv=t))}},position:{get:function(){return this.pa},set:function(t){var e=C.alloc().assign(this.pa);if(!e.C(t)){var n=this.viewportBounds.copy();this.pa.assign(t),ox(this.animationManager,e,this.pa),this.wb||this.Ha===null&&!this.Zn.v()?Hr(this):(this.wb=!0,t=this.scale,C0(this,this.wp,this.Ba/t,this.Aa/t,this.mk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(n,this.viewportBounds,this.xa,!1)}C.free(e)}},initialPosition:{get:function(){return this.bt},set:function(t){this.bt.C(t)||(this.bt=t.J())}},initialScale:{get:function(){return this.ct},set:function(t){this.ct!==t&&(this.ct=t)}},grid:{get:function(){return this.Zd===null&&(this.Zd=xx(this)),this.Zd},set:function(t){var e=this.Zd;if(e!==t){e===null&&(e=this.Zd=xx(this)),t.type!==X.Grid&&B("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;n!==null&&n.remove(e),this.Zd=t,t.name="GRID",n!==null&&n.add(t),Kr(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.vw}},viewSize:{get:function(){return this.Zn},set:function(t){var e=this.viewSize;e.C(t)||(this.Zn=t=t.J(),this.Aa=this.Ba=0,t.v()?(this.Ba=t.width,this.Aa=t.height):this.La!==null&&(this.Ba=this.La.clientWidth||1,this.Aa=this.La.clientHeight||1),Hr(this),this.Va(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e.C(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||B("fixedBounds width/height must not be Infinity"),this.Xs=t=t.J(),this.Va(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.mj},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.mj;e.C(t)||(this.mj=t=t.J(),this.g("scrollMargin",e,t),this.Jo())}},scrollMode:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,t===fa&&lo(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.Tt},set:function(t){var e=this.Tt;e!==t&&(this.Tt=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Et},set:function(t){var e=this.Et;e!==t&&(this.Et=t,lo(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Lt},set:function(t){var e=this.Lt;e!==t&&(this.Lt=t,Nx(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.wp}},isVirtualized:{get:function(){return this.lt},set:function(t){var e=this.lt;e!==t&&(this.lt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&Nx(this,e,t)}},defaultScale:{get:function(){return this.sp},set:function(t){this.sp=t}},autoScale:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&(this.nh=t,this.g("autoScale",e,t),t!==pi&&lo(this,!1))}},initialAutoScale:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(t.pb()||B("initialViewportSpot must be a specific Spot: "+t),this.dt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(t.pb()||B("initialViewportSpot must be a specific Spot: "+t),this.at=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(0<t?(this.tt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):gt(t,"> 0",z,"minScale"))}},maxScale:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(0<t?(this.pt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):gt(t,"> 0",z,"maxScale"))}},zoomPoint:{get:function(){return this.eu},set:function(t){this.eu.C(t)||(this.eu=t=t.J())}},contentAlignment:{get:function(){return this.mk},set:function(t){var e=this.mk;e.C(t)||(this.mk=t=t.J(),this.g("contentAlignment",e,t),lo(this,!1))}},initialContentAlignment:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e.C(t)||(this.Rp=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ub},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.Va(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(t.diagram!==null&&B("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Le(null),this.Ic=t,t.Le(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Kc},set:function(t){var e=this.Kc;e!==t&&(this.Kc=t,t.diagram=this,t.group=null,this.mh=!0,this.g("layout",e,t),this.Mb())}},isTreePathToChildren:{get:function(){return this.kt},set:function(t){var e=this.kt;if(e!==t&&(this.kt=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Cg(t.value)}},treeCollapsePolicy:{get:function(){return this.$t},set:function(t){var e=this.$t;e!==t&&(t!==ll&&t!==J0&&t!==Z0&&B("Unknown Diagram.treeCollapsePolicy: "+t),this.$t=t,this.g("treeCollapsePolicy",e,t))}},Ie:{get:function(){return this.Vv},set:function(t){this.Vv=t}},avoidanceCellSize:{get:function(){return this.Fv},set:function(t){this.Qh=null,this.Fv=new dt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.Gv},set:function(t){this.Gv=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.$o},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.$o;e.C(t)||(this.$o=t=t.J(),this.Va(),this.g("autoScrollRegion",e,t))}}}),I.Object.defineProperties(z,{licenseKey:{get:function(){return Q0.fc()},set:function(t){Q0.add(t.replace(/\s/g,""))}},version:{get:function(){return gN}}}),z.prototype.makeImageData=z.prototype.ox,z.prototype.makeImage=z.prototype.Dz,z.prototype.cacheGroupExternalLinks=z.prototype.lu,z.prototype.addRenderer=z.prototype.ny,z.prototype.makeSVG=z.prototype.Nu,z.prototype.makeSvg=z.prototype.bs,z.prototype.stopAutoScroll=z.prototype.lg,z.prototype.doAutoScroll=z.prototype.Fr,z.prototype.isUnoccupied=z.prototype.Pj,z.prototype.raiseDiagramEvent=z.prototype.P,z.prototype.removeDiagramListener=z.prototype.Il,z.prototype.addDiagramListener=z.prototype.wj,z.prototype.findTreeRoots=z.prototype.fz,z.prototype.layoutDiagram=z.prototype.Bz,z.prototype.findTopLevelGroups=z.prototype.Zy,z.prototype.findTopLevelNodesAndLinks=z.prototype.$y,z.prototype.ensureBounds=z.prototype.Za,z.prototype.findLinksByExample=z.prototype.Ir,z.prototype.findNodesByExample=z.prototype.Jr,z.prototype.findLinkForData=z.prototype.Dc,z.prototype.findNodeForData=z.prototype.ci,z.prototype.findPartForData=z.prototype.Ec,z.prototype.findLinkForKey=z.prototype.findLinkForKey,z.prototype.findNodeForKey=z.prototype.Lb,z.prototype.findPartForKey=z.prototype.findPartForKey,z.prototype.rebuildParts=z.prototype.Od,z.prototype.transformViewToDoc=z.prototype.rs,z.prototype.transformRectDocToView=z.prototype.gA,z.prototype.transformDocToView=z.prototype.Ro,z.prototype.centerRect=z.prototype.Dr,z.prototype.scrollToRect=z.prototype.bv,z.prototype.scroll=z.prototype.scroll,z.prototype.highlightCollection=z.prototype.rz,z.prototype.highlight=z.prototype.qz,z.prototype.selectCollection=z.prototype.Yz,z.prototype.select=z.prototype.select,z.prototype.updateAllRelationshipsFromData=z.prototype.Uo,z.prototype.updateAllTargetBindings=z.prototype.updateAllTargetBindings,z.prototype.commit=z.prototype.commit,z.prototype.rollbackTransaction=z.prototype.Bf,z.prototype.commitTransaction=z.prototype.eb,z.prototype.startTransaction=z.prototype.Da,z.prototype.raiseChanged=z.prototype.g,z.prototype.raiseChangedEvent=z.prototype.bb,z.prototype.removeChangedListener=z.prototype.ak,z.prototype.addChangedListener=z.prototype.Ug,z.prototype.removeModelChangedListener=z.prototype.Tz,z.prototype.addModelChangedListener=z.prototype.Cw,z.prototype.findLayer=z.prototype.Ij,z.prototype.removeLayer=z.prototype.Rz,z.prototype.addLayerAfter=z.prototype.jy,z.prototype.addLayerBefore=z.prototype.Aw,z.prototype.addLayer=z.prototype.pl,z.prototype.moveParts=z.prototype.moveParts,z.prototype.copyParts=z.prototype.Ej,z.prototype.removeParts=z.prototype.hs,z.prototype.remove=z.prototype.remove,z.prototype.add=z.prototype.add,z.prototype.clearDelayedGeometries=z.prototype.mu,z.prototype.setProperties=z.prototype.Vl,z.prototype.attach=z.prototype.ku,z.prototype.set=z.prototype.set,z.prototype.resetInputOptions=z.prototype.zx,z.prototype.setInputOption=z.prototype.Zz,z.prototype.getInputOption=z.prototype.yl,z.prototype.resetRenderingHints=z.prototype.Ax,z.prototype.setRenderingHint=z.prototype.Fx,z.prototype.getRenderingHint=z.prototype.Ge,z.prototype.maybeUpdate=z.prototype.nd,z.prototype.requestUpdate=z.prototype.Mb,z.prototype.delayInitialization=z.prototype.Ey,z.prototype.isUpdateRequested=z.prototype.xz,z.prototype.invalidateDocumentBounds=z.prototype.Va,z.prototype.findObjectsNear=z.prototype.hg,z.prototype.findPartsNear=z.prototype.Vy,z.prototype.findObjectsIn=z.prototype.tf,z.prototype.findPartsIn=z.prototype.Ww,z.prototype.findObjectsAt=z.prototype.di,z.prototype.findPartsAt=z.prototype.Uy,z.prototype.findObjectAt=z.prototype.ec,z.prototype.findPartAt=z.prototype.wl,z.prototype.focusObject=z.prototype.gz,z.prototype.alignDocument=z.prototype.py,z.prototype.zoomToRect=z.prototype.kA,z.prototype.zoomToFit=z.prototype.zoomToFit,z.prototype.diagramScroll=z.prototype.Nw,z.prototype.focus=z.prototype.focus;var Ff=new ct,Bx=null,_i=U.document!==void 0,Mh=null,lg="",pi=new $(z,"None",0),kh=new $(z,"Uniform",1),Df=new $(z,"UniformToFill",2),W0=new $(z,"CycleAll",10),Gx=new $(z,"CycleNotDirected",11),Rx=new $(z,"CycleNotDirectedFast",12),Vx=new $(z,"CycleNotUndirected",13),Yx=new $(z,"CycleDestinationTree",14),Ux=new $(z,"CycleSourceTree",15),fa=new $(z,"DocumentScroll",1),$0=new $(z,"InfiniteScroll",2),ll=new $(z,"TreeParentCollapsed",21),J0=new $(z,"AllParentsCollapsed",22),Z0=new $(z,"AnyParentsCollapsed",23),Q0=new tt,gN="2.2.17",Nh="image",Xx=null,_x=!1;function dN(){if(_i){var t=U.document.createElement("canvas"),e=t.getContext("2d"),n=St("7ca11abfd022028846");e[n]=St("398c3597c01238");for(var i=["5da73c80a36455d6038e4972187c3cae51fd22",Bt.Dx+"4ae6247590da4bb21c324ba3a84e385776",xt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",A.za],r=1;5>r;r++)e[St("7ca11abfd7330390")](St(i[r-1]),10,15*r);for(e[n]=St("39f046ebb36e4b"),n=1;5>n;n++)e[St("7ca11abfd7330390")](St(i[n-1]),10,15*n);(i.length!==4||i[0][0]!=="5"||i[3][0]!=="7")&&(xt.prototype.Ld=xt.prototype.Fw),Xx=t}}z.className="Diagram",z.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=U.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof z?e.H:null},z.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},z.useDOM=function(t){_i=t?U.document!==void 0:!1},z.isUsingDOM=function(){return _i},z.None=pi,z.Uniform=kh,z.UniformToFill=Df,z.CycleAll=W0,z.CycleNotDirected=Gx,z.CycleNotDirectedFast=Rx,z.CycleNotUndirected=Vx,z.CycleDestinationTree=Yx,z.CycleSourceTree=Ux,z.DocumentScroll=fa,z.InfiniteScroll=$0,z.TreeParentCollapsed=ll,z.AllParentsCollapsed=J0,z.AnyParentsCollapsed=Z0;function Kx(){this.by=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.pd=this.j=!0:this.pd=null}function hg(t,e){if(e.Zb.setTransform(e.kc,0,0,e.kc,0,0),e.Zb.Pc(),t.pd===null)t:{e="f";var n=U[St("76a715b2f73f148a")][St("72ba13b5")];if(t.pd=!0,_i){var i=z[St("76a115b6ed251eaf4692")];if(i)for(var r=Q0.iterator;r.next()&&(i=r.value,i=St(i).split(St("39e9")),!(6>i.length));){var a=St(i[1]).split(".");if(i[4]!=="7da71ca0")break;var h=St(Bt[St("6cae19")]).split(".");if(a[0]>h[0]||a[0]===h[0]&&a[1]>=h[1]){var g=U[St("74a900bae4370f8b51")][St("6fbb13a1c2311e8a57")].toLowerCase();if(h=g[St("73a612b6fb191d")](St("3aad1ab6e022098b4dc4")),a=St(i[2]),-1<h&&(g=g[St("73a612b6fb191d")](a.toLowerCase()+"/"),t.pd=!(-1<g&&g<h),!t.pd))break;for(h=n[St("76ad18b4f73e")],g=n[St("73a612b6fb191d")](St("35e7"))+2;g<h;g++)e+=n[g];if(h=e[St("73a612b6fb191d")](a),0>h&&a!==St("7da71ca0ad381e90")&&(h=e[St("73a612b6fb191d")](St("76a715b2ef3e149757"))),0>h&&(h=e[St("73a612b6fb191d")](St("76a715b2ef3e149757"))),0>h&&(h=n[St("73a612b6fb191d")](St("7baa19a6f76c1988428554"))),t.pd=!(0<=h&&h<e[St("73a612b6fb191d")](St("35"))||e[St("73a612b6fb191d")](St("35"))===-1),!t.pd||n[St("73a612b6fb191d")](St("7fb002b6ed25128b4da25b2e"))&&n[St("73a612b6fb191d")](St("75ba1beee63a1e875799507d"))&&(t.pd=!(-1<n[St("73a612b6fb191d")](a)),!t.pd))break;if(a[0]==="#"){h=U.document.createElement("div");for(var f=i[0].replace(/[A-Za-z]/g,"");4>f.length;)f+="9";if(g=f,f=f.substr(f.length-4),i="",i+=["gsh","gsf"][parseInt(f.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(f.substr(0,1),10)%4],h[St("79a417a0f0181a8946")]=i,U.document[St("78a712aa")]){U.document[St("78a712aa")][St("7bb806b6ed32388c4a875b")](h),f=U.getComputedStyle(h).getPropertyValue(St("78a704b7e62456904c9b12701b6532a8"));var c=U.getComputedStyle(h).getPropertyValue(St("75b817b0ea2202"));if(U.document[St("78a712aa")][St("68ad1bbcf533388c4a875b")](h),f){if(h=U[St("77a902b0eb1b1e804a8a")],c==="0."+parseInt(g,10)%100||f.indexOf(parseInt(a[1]+a[2],16))!==-1&&f.indexOf(parseInt(a[3]+a[4],16))!==-1){t.pd=!1;break}else if(h&&h(St("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(i="."+i,a=0;a<document.styleSheets.length;a++){h=document.styleSheets[a].rules||document.styleSheets[a].cssRules;for(var m in h)if(i===h[m].selectorText){t.pd=!1;break t}}}}else t.pd=null,t.pd=!1}}}else{for(m=n[St("76ad18b4f73e")],r=n[St("73a612b6fb191d")](St("35e7"))+2;r<m;r++)e+=n[r];n=e[St("73a612b6fb191d")](St("7da71ca0ad381e90")),t.pd=!(0<=n&&n<e[St("73a612b6fb191d")](St("35")))}}}return 0<t.pd&&t!==t.by}function q0(t,e){if(_i){if(e!=null||B("Diagram setup requires an argument DIV."),t.La!==null&&B("Diagram has already completed setup."),typeof e=="string"?t.La=U.document.getElementById(e):e instanceof HTMLDivElement?t.La=e:B("No DIV or DIV id supplied: "+e),t.La===null&&B("Invalid DIV id; could not get element with id: "+e),t.La.H!==void 0&&B("Invalid div id; div already has a Diagram associated with it."),!t.cl&&U.ResizeObserver){var n=b(function(){t.Mb()},250);t.cl=new U.ResizeObserver(function(){n()}),t.cl.observe(t.La)}U.getComputedStyle(t.La,null).position==="static"&&(t.La.style.position="relative"),e=5;var i="rgba(2"+e+"5, 255, 255, 0)";e--,t.La.style["-webkit-tap-highlight-color"]=i,t.La.innerHTML="",t.La.H=t,t.La.goDiagram=t,t.La.go=U.go;var r=t.kr?new Pr(t):new Di(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",U.getComputedStyle(t.La,null).getPropertyValue("direction")==="rtl"&&(t.$m=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none"),t.Ha=r,t.Zb=r.context,i=t.Zb,t.kc=t.computePixelRatio(),t.viewSize.v()||(t.Ba=t.La.clientWidth||1,t.Aa=t.La.clientHeight||1),Mx(t,t.Ba,t.Aa),t.La.insertBefore(r.Sa,t.La.firstChild),r=new Di(null),r.width=1,r.height=1,t.Ov=r,t.Ux=r.context,_i){r=Q("div");var a=Q("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.Ba+"px",r.style.height=t.Aa+"px",r.style.zIndex="1",a.style.position="absolute",a.style.width="1px",a.style.height="1px",t.La.appendChild(r),r.appendChild(a),r.onscroll=nN,r.addEventListener("pointerdown",iN),r.H=t,r.$x=!0,r.ay=!0,t.Qt=r,t.Nt=a}t.Jo=b(function(){t.Rh=null,t.N()},300),t.sv=b(function(){N0(t)},250),t.preventDefault=function(h){return h.preventDefault(),!1},t.Sj=function(h){if(t.isEnabled){var g=al(t,h,!0);g.bubbles=!0;var f=0,c=0;g.delta=0,h.deltaX!==void 0?(h.deltaX!==0&&(f=0<h.deltaX?1:-1),h.deltaY!==0&&(c=0<h.deltaY?1:-1),g.delta=Math.abs(h.deltaX)>Math.abs(h.deltaY)?-f:-c):h.wheelDeltaX!==void 0?(h.wheelDeltaX!==0&&(f=0<h.wheelDeltaX?-1:1),h.wheelDeltaY!==0&&(c=0<h.wheelDeltaY?-1:1),g.delta=Math.abs(h.wheelDeltaX)>Math.abs(h.wheelDeltaY)?-f:-c):h.wheelDelta!==void 0&&h.wheelDelta!==0&&(g.delta=0<h.wheelDelta?1:-1),t.doMouseWheel(),ga(g,h)}},t.Iz=function(h){t.isEnabled&&(t.Kk=!1,al(t,h,!0),h=t.currentTool,h.cancelWaitAfter(),h.standardMouseOver())},t.Wj=function(h){if(t.isEnabled){t.Kk=!0;var g=t.Dt;g[h.pointerId]===void 0&&(g[h.pointerId]=h),g=t.$k;var f=!1;if(g[0]!==null&&g[0].pointerId===h.pointerId)g[0]=h;else if(g[1]!==null&&g[1].pointerId===h.pointerId)g[1]=h,f=!0;else if(g[0]===null)g[0]=h;else if(g[1]===null)g[1]=h,f=!0;else{h.preventDefault();return}(g=h.pointerType==="touch"||h.pointerType==="pen")&&(t.Wt=!1,t.jt=!0);var c=f;f=D0(t,h,!0,!1,!0,c),og(t,h,f),f.targetDiagram=F0(h,h.target),f.targetObject=null,c||f.clone(t.Fp),c=t.$v,g=g?25:10,h.timeStamp-t.Zv<t.hy&&!(Math.abs(c.x-h.screenX)>g||Math.abs(c.y-h.screenY)>g)?t.Yp++:t.Yp=1,f.clickCount=t.Yp,t.Zv=h.timeStamp,t.$v.kg(h.screenX,h.screenY),t.doMouseDown(),h.button===1?h.preventDefault():ga(f,h)}},t.Xj=function(h){if(t.isEnabled){t.Kk=!0;var g=t.$k;if(g[0]!==null&&g[0].pointerId===h.pointerId)g[0]=h;else{if(g[1]!==null&&g[1].pointerId===h.pointerId){g[1]=h;return}if(g[0]===null)g[0]=h;else return}if(g[0].pointerId===h.pointerId){g=D0(t,h,!1,!1,!1,g[1]!==null);var f=U.document.elementFromPoint(h.clientX,h.clientY);f!==null&&f.shadowRoot!==void 0&&f.shadowRoot!==null&&(f=f.shadowRoot.elementFromPoint(h.clientX,h.clientY));var c=t,m=h;f&&f.H&&(m=h,c=f.H),g.targetDiagram=c,og(t,m,g),g.targetObject=null,t.doMouseMove(),ga(g,h)}}},t.Zj=function(h){if(t.isEnabled){t.Kk=!0;var g=h.pointerType==="touch"||h.pointerType==="pen",f=t.Dt;if(g&&t.Wt)delete f[h.pointerId],h.preventDefault();else if(f=t.$k,f[0]!==null&&f[0].pointerId===h.pointerId){f[0]=null,f=D0(t,h,!1,!0,!0,!1);var c=U.document.elementFromPoint(h.clientX,h.clientY);c!==null&&c.shadowRoot!==void 0&&c.shadowRoot!==null&&(c=c.shadowRoot.elementFromPoint(h.clientX,h.clientY)),c!==null&&c.H instanceof z&&c.H!==t&&og(c.H,h,f),c===null&&(c=h.target),og(t,h,f),f.clickCount=t.Yp,f.targetDiagram=F0(h,c),f.targetObject=null,t.doMouseUp(),ga(f,h),g&&(t.jt=!1)}else f[1]!==null&&f[1].pointerId===h.pointerId&&(f[1]=null)}},t.Yj=function(h){if(t.isEnabled){t.Kk=!1;var g=t.Dt;g[h.pointerId]&&delete g[h.pointerId],g=t.$k,g[0]!==null&&g[0].pointerId===h.pointerId&&(g[0]=null),g[1]!==null&&g[1].pointerId===h.pointerId&&(g[1]=null),h.pointerType!=="touch"&&h.pointerType!=="pen"&&(h=t.currentTool,h.cancelWaitAfter(),h.standardMouseOver())}},t.Qs=i.Z["d"+Hx[1]+Hx[2]+"wI"+Nh.slice(1,5)]["b"+DN.slice(1,e)](i.Z,Xx,e,e),i.Oc(!0),eN(t)}}Kx.className="DiagramHelper";function Cs(t){this.j=t===void 0?new C:t,this.m=new C}I.Object.defineProperties(Cs.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.m},set:function(t){this.m=t}}});var Hx="DraggingInfo";Cs.className="DraggingInfo";function Wx(t,e,n){this.node=t,this.info=e,this.Eu=n}Wx.className="DraggingNodeInfoPair";function Ch(){this.reset()}Ch.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new dt(NaN,NaN).freeze(),this.gridSnapCellSpot=nn,this.gridSnapOrigin=new C(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Ch.className="DraggingOptions";function jf(t,e){if(typeof t=="string"||U.Element&&t instanceof Element)var n=z.call(this,t)||this;else n=z.call(this)||this,e=t;return $x(n),e&&n.Vl(e),n}O(jf,z);function $x(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=pr,t.layout=new Be}jf.prototype.reset=function(){z.prototype.reset.call(this),$x(this)},jf.className="Palette";function yr(t,e){if(typeof t=="string"||U.Element&&t instanceof Element)var n=z.call(this,t)||this;else n=z.call(this)||this,e=t;var i=n;n.animationManager.isEnabled=!1,n.wb=!0,n.W=null,n.Tm=!1,n.Um=!1,n.F=!0,n.u=!0,n.ga=0,n.m=!1,n.fl=null,n.Fx("drawShadows",!1),t=new lt;var r=new yt;return r.stroke="magenta",r.strokeWidth=2,r.fill="transparent",r.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(r),n.j=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new At(0,0,0,0),n.pa.h(0,0),n.toolManager.gb("Dragging",new hl,n.toolManager.mouseMoveTools),n.click=function(){var a=i.observed;if(a!==null){var h=a.viewportBounds,g=i.lastInput.documentPoint;a.position=new C(g.x-h.width/2,g.y-h.height/2)}},n.Gf=function(){i.Va(),ug(i)},n.Qd=function(){i.observed!==null&&(i.Va(),i.N())},n.Ga=function(){1>i.updateDelay?i.N():i.m||(i.m=!0,setTimeout(function(){return i.redraw()},i.updateDelay))},n.Ff=function(){i.observed!==null&&ug(i)},n.autoScale=kh,n.wb=!1,e&&Object.assign(n,e),n}O(yr,z),yr.prototype.computePixelRatio=function(){return 1},yr.prototype.redraw=function(){if(this.m&&1<=this.updateDelay){this.m=!1;var t=this.Ha,e=this.Zb;if(t!==null&&e!==null){if(sg(this),this.fl===null){var n=new Di(null);n.width=t.width,n.height=t.height,this.fl=n}try{this.Ha=this.fl,this.Zb=this.Ha.context,this.Zb.Oc(!0),this.Zb.setTransform(1,0,0,1,0,0),this.Zb.clearRect(0,0,this.Ha.width,this.Ha.height),Jx(this)}finally{this.Ha=t,this.Zb=e}}}z.prototype.redraw.call(this)},yr.prototype.tc=function(){if(this.La===null&&B("No div specified"),this.Ha===null&&B("No canvas specified"),!(this.Ha instanceof Pr)&&(Oy(this.box),this.bd)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.ji){sg(this);var e=this.Ha;t=this.Zb,t.Oc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Jx(this):this.fl!==null&&(t.drawImage(this.fl.Sa,0,0),e=this.Bb,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.kc,this.kc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)),e=this.Ua.s;for(var n=e.length,i=0;i<n;i++)e[i].tc(t,this);this.bd=this.Ui=!1}}};function Jx(t){var e=t.observed;if(e!==null){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,r=e.grid;i&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=G.alloc().assign(t.viewportBounds).Xc(e.viewportBounds),Kr(e,r),G.free(r),Pn(e));var a=t.Bb;a.reset(),t.scale!==1&&a.scale(t.scale),t.position.x===0&&t.position.y===0||a.translate(-t.position.x,-t.position.y),r=t.Zb,r.scale(t.kc,t.kc),r.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),e=e.Ua.s,a=e.length;for(var h=0;h<a;h++){var g=e[h],f=t;if(g.visible&&g.opacity!==0){var c=g.diagram.grid.part;if(!n&&g.isTemporary)i&&c.layer===g&&(g=Ph(g,r),c.tc(r,f),r.globalAlpha=g);else{for(var m=Ph(g,r),y=f.scale,S=G.alloc(),x=g.Ma.s,P=x.length,L=0;L<P;L++){var N=x[L];(i||N!==c)&&g.$h(r,N,f,null,y,S,!1)}G.free(S),r.globalAlpha=m}}}}}function ug(t){var e=t.box;if(e!==null){var n=t.observed;if(n!==null){t.bd=!0,n=n.viewportBounds;var i=e.selectionObject,r=dt.alloc();r.h(n.width,n.height),i.desiredSize=r,dt.free(r),t=2/t.scale,i instanceof yt&&(i.strokeWidth=t),e.location=new C(n.x-t/2,n.y-t/2),e.isSelected=!0}}}yr.prototype.computeBounds=function(){var t=this.observed;if(t===null)return uf;var e=t.documentBounds.copy();return e.Xc(t.viewportBounds),e},yr.prototype.invalidateViewport=function(){this.bd!==!0&&(this.bd=!0,this.Mb())},yr.prototype.onViewportBoundsChanged=function(t,e,n,i){this.wb||(da(this),this.N(),Ns(this),this.Va(),ug(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.lx=i,this.P("ViewportBoundsChanged",this.kd,t))},I.Object.defineProperties(yr.prototype,{observed:{get:function(){return this.W},set:function(t){var e=this.W;if(t instanceof yr&&B("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.Il("ViewportBoundsChanged",this.Gf),e.Il("DocumentBoundsChanged",this.Qd),e.Il("InvalidateDraw",this.Ga),e.Il("AnimationFinished",this.Ff)),this.W=t,t!==null&&(t.wj("ViewportBoundsChanged",this.Gf),t.wj("DocumentBoundsChanged",this.Qd),t.wj("InvalidateDraw",this.Ga),t.wj("AnimationFinished",this.Ff),this.add(this.box)),this.Va(),t===null){this.fl=null;var n=this.Ha,i=this.Zb;n&&i&&(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height))}else this.Ga(null),ug(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),ug(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ga},set:function(t){0>t&&(t=0),this.ga!==t&&(this.ga=t)}}}),yr.className="Overview";function hl(){ee.call(this),this.j=null}O(hl,ee),hl.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var n=t.lastInput;return!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(n=e.viewportBounds,this.j=new C(n.width/2,n.height/2),t=t.firstInput.documentPoint,e.position=new C(t.x-this.j.x,t.y-this.j.y)),!0)},hl.prototype.doActivate=function(){this.j=null,ee.prototype.doActivate.call(this)},hl.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},hl.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var n=t.box;if(n!==null){if(this.j===null){var i=t.firstInput.documentPoint;n=n.location,this.j=new C(i.x-n.x,i.y-n.y)}t=t.lastInput.documentPoint,e.position=new C(t.x-this.j.x,t.y-this.j.y)}}},hl.className="OverviewDraggingTool";function Vt(){Oe(this),this.H=xh,this.Ga=this.u=this.m=!0,this.F=this.W=this.hb=this.ga=!1,this.dj=this.j=null,this.Db=1.05,this.mt=NaN,this.Yv=null,this.fu=NaN,this.du=uf,this.cb=!0,this.Vf=null,this.nb=200}Vt.prototype.toString=function(){return"CommandHandler"},Vt.prototype.Le=function(t){this.H=t},Vt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=Ce?e.meta:e.control,i=e.shift,r=e.alt,a=e.key;!n||a!=="C"&&a!=="Insert"?n&&a==="X"||i&&a==="Del"?this.canCutSelection()&&this.cutSelection():n&&a==="V"||i&&a==="Insert"?this.canPasteSelection()&&this.pasteSelection():n&&a==="Y"||r&&i&&a==="Backspace"?this.canRedo()&&this.redo():n&&a==="Z"||r&&a==="Backspace"?this.canUndo()&&this.undo():a==="Del"||a==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():n&&a==="A"?this.canSelectAll()&&this.selectAll():a==="Esc"?this.canStopCommand()&&this.stopCommand():a==="Up"?t.allowVerticalScroll&&(n?t.scroll("pixel","up"):t.scroll("line","up")):a==="Down"?t.allowVerticalScroll&&(n?t.scroll("pixel","down"):t.scroll("line","down")):a==="Left"?t.allowHorizontalScroll&&(n?t.scroll("pixel","left"):t.scroll("line","left")):a==="Right"?t.allowHorizontalScroll&&(n?t.scroll("pixel","right"):t.scroll("line","right")):a==="PageUp"?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):a==="PageDown"?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):a==="Home"?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):a==="End"?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):a===" "?this.canScrollToPart()&&this.scrollToPart():a==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():a==="Add"?this.canIncreaseZoom()&&this.increaseZoom():n&&a==="0"?this.canResetZoom()&&this.resetZoom():i&&a==="Z"?this.canZoomToFit()&&this.zoomToFit():n&&!i&&a==="G"?this.canGroupSelection()&&this.groupSelection():n&&i&&a==="G"?this.canUngroupSelection()&&this.ungroupSelection():a==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():a==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Vt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Vt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof te&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},Vt.prototype.canStopCommand=function(){return!0},Vt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.P("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.P("ChangedSelection",t.selection),t.currentCursor=""}},Vt.prototype.canSelectAll=function(){return this.diagram.allowSelect},Vt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Delete"),t.P("SelectionDeleting",t.selection);for(var e=new Z,n=t.selection.iterator;n.next();)js(e,n.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(i){return i.canDelete()});t.hs(e,!0),t.P("SelectionDeleted",e)}finally{t.eb("Delete"),t.P("ChangedSelection",t.selection),t.currentCursor=""}},Vt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},Vt.prototype.copySelection=function(){var t=this.diagram,e=new Z;for(t=t.selection.iterator;t.next();)js(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},Vt.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},Vt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Vt.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},Vt.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(t===null)Mh=null,lg="";else{n=e.model;var i=!1,r=!1,a=null;try{n.Bl()&&(i=n.Dj,n.Dj=this.copiesParentKey),n.Nj()&&(r=n.Cj,n.Cj=this.copiesGroupKey),a=e.Ej(t,null,!0)}finally{n.Bl()&&(n.Dj=i),n.Nj()&&(n.Cj=r),n=new tt,n.addAll(a),Mh=n,lg=e.model.dataFormat}}e.P("ClipboardChanged",n)},Vt.prototype.pasteFromClipboard=function(){var t=new Z,e=Mh;if(e===null)return t;var n=this.diagram;if(lg!==n.model.dataFormat)return t;var i=n.model,r=!1,a=!1,h=null;try{i.Bl()&&(r=i.Dj,i.Dj=this.copiesParentKey),i.Nj()&&(a=i.Cj,i.Cj=this.copiesGroupKey),h=n.Ej(e,n,!1)}finally{for(i.Bl()&&(i.Dj=r),i.Nj()&&(i.Cj=a),e=h.iterator;e.next();)n=e.value,i=e.key,n.location.v()||(i.location.v()?n.location=i.location:!n.position.v()&&i.position.v()&&(n.position=i.position)),t.add(n)}return t},Vt.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.v()){var a=this.computeEffectiveCollection(e.selection,e.Em);A0(e,a,new C(t.x-r.centerX,t.y-r.centerY),e.Em,!1)}}e.P("ClipboardPasted",n)}finally{e.eb("Paste"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},Vt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||Mh===null||Mh.count===0||lg!==t.model.dataFormat)},Vt.prototype.undo=function(){this.diagram.undoManager.undo()},Vt.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},Vt.prototype.redo=function(){this.diagram.undoManager.redo()},Vt.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},Vt.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===pi&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Vt.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==pi?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Vt.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===pi&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},Vt.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==pi?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},Vt.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Vt.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},Vt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.wc(),t.redraw();var n=t.position,i=t.scale;Ur(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.fu&&!isNaN(this.mt)&&t.documentBounds.C(this.du)?(t.scale=this.mt,t.position=this.Yv,this.fu=NaN,this.du=uf):(this.mt=i,this.Yv=n.copy(),t.zoomToFit(),this.fu=t.scale,this.du=t.documentBounds.copy()),L0(e)},Vt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Vt.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Za(),t===null){try{this.Vf!==null&&(this.Vf.next()?t=this.Vf.value:this.Vf=null)}catch{this.Vf=null}t===null&&(0<e.highlighteds.count?this.Vf=e.highlighteds.iterator:0<e.selection.count&&(this.Vf=e.selection.iterator),this.Vf!==null&&this.Vf.next()&&(t=this.Vf.value))}if(t!==null){var n=e.animationManager;Ur(n,"Scroll To Part");var i=this.scrollToPartPause;if(0<i){var r=ul(this,t,[t]);if(r.length===1)e.Da(),e.Dr(t.actualBounds),e.eb("Scroll To Part");else{var a=function(){e.Da();for(var f=r.pop();0<r.length&&f instanceof q&&f.isTreeExpanded&&(!(f instanceof pt)||f.isSubGraphExpanded);)f=r.pop();0<r.length?(f instanceof lt&&e.bv(f.actualBounds),f instanceof q&&!f.isTreeExpanded&&(f.isTreeExpanded=!0),f instanceof pt&&!f.isSubGraphExpanded&&(f.isSubGraphExpanded=!0)):(f instanceof lt&&e.Dr(f.actualBounds),e.Il("LayoutCompleted",h)),e.eb("Scroll To Part")},h=function(){_(a,(n.isEnabled?n.duration:0)+i)};e.wj("LayoutCompleted",h),a()}}else{var g=e.position.copy();e.Dr(t.actualBounds),g.$a(e.position)&&n.wc()}}};function ul(t,e,n){if(e.isVisible())return n;if(e instanceof Ct)ul(t,e.adornedPart,n);else if(e instanceof H){var i=e.fromNode;i!==null&&ul(t,i,n),e=e.toNode,e!==null&&ul(t,e,n)}else e instanceof q&&(i=e.labeledLink,i!==null&&ul(t,i,n),i=e.ig(),i!==null&&(i.isTreeExpanded||i.wasTreeExpanded||n.push(i),ul(t,i,n))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),ul(t,e,n));return n}Vt.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof lt)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},Vt.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Collapse Tree"),Ur(e.animationManager,"Collapse Tree");var n=new tt;if(t!==null&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof q&&r.isTreeExpanded&&(r.collapseTree(),n.add(r))}e.P("TreeCollapsed",n)}finally{e.eb("Collapse Tree")}},Vt.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof q&&t.isTreeExpanded))return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof q&&e.isTreeExpanded&&0<e.to().count)return!0;return!1},Vt.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Expand Tree"),Ur(e.animationManager,"Expand Tree");var n=new tt;if(t!==null&&!t.isTreeExpanded)t.expandTree(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof q&&!r.isTreeExpanded&&(r.expandTree(),n.add(r))}e.P("TreeExpanded",n)}finally{e.eb("Expand Tree")}},Vt.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof q)||t.isTreeExpanded)return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof q&&!e.isTreeExpanded&&0<e.to().count)return!0;return!1},Vt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Oj()){var n=this.archetypeGroupData;if(n!==null){var i=null;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Group");for(var r=new tt,a=t.selection.iterator;a.next();){var h=a.value;h.Tc()&&h.canGroup()&&r.add(h)}for(var g=new tt,f=r.iterator;f.next();){var c=f.value;a=!1;for(var m=r.iterator;m.next();)if(c.Md(m.value)){a=!0;break}a||g.add(c)}if(0<g.count){var y=g.first().containingGroup;if(y!==null)for(;y!==null;){r=!1;for(var S=g.iterator;S.next();)if(!S.value.Md(y)){r=!0;break}if(r)y=y.containingGroup;else break}if(n instanceof pt)ji(n),i=n.copy(),i!==null&&t.add(i);else if(e.Ku(n)){var x=e.copyNodeData(n);mt(x)&&(e.lf(x),i=t.ci(x))}if(i!==null){y!==null&&this.isValidMember(y,i)&&(i.containingGroup=y);for(var P=g.iterator;P.next();){var L=P.value;this.isValidMember(i,L)&&(L.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.P("SelectionGrouped",i)}finally{t.eb("Group"),t.P("ChangedSelection",t.selection),t.currentCursor=""}}}},Vt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Oj()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Tc()&&e.canGroup())return!0}return!1};function b0(t){var e=Kt();for(t=t.iterator;t.next();){var n=t.value;n instanceof H||e.push(n)}t=new Z,n=e.length;for(var i=0;i<n;i++){for(var r=e[i],a=!0,h=0;h<n;h++)if(r.Md(e[h])){a=!1;break}a&&t.add(r)}return Xt(e),t}Vt.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof H)return!1;if(t!==null){if(t===e||t.Md(e))return!1;var n=t.memberValidation;if(n!==null&&!n(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return n=this.memberValidation,n!==null?n(t,e):!0},Vt.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.model;if(n.Oj())try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Ungroup");var i=new tt;if(t!==null)i.add(t);else for(var r=e.selection.iterator;r.next();){var a=r.value;a instanceof pt&&a.canUngroup()&&i.add(a)}var h=new tt;if(0<i.count){e.clearSelection(!0);for(var g=i.iterator;g.next();){var f=g.value;f.expandSubGraph();var c=f.containingGroup,m=c!==null&&c.data!==null?n.ua(c.data):void 0;h.addAll(f.memberParts);for(var y=h.iterator;y.next();){var S=y.value;if(S.isSelected=!0,!(S instanceof H)){var x=S.data;x!==null?n.Po(x,m):S.containingGroup=c}}e.remove(f)}}e.P("SelectionUngrouped",i,h)}finally{e.eb("Ungroup"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},Vt.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Oj())return!1;if(t!==null){if(!(t instanceof pt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof pt&&e.canUngroup())return!0;return!1},Vt.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=b0(t).iterator;t.next();){var i=t.value;i.containingGroup!==null&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},Vt.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Collapse SubGraph"),Ur(e.animationManager,"Collapse SubGraph");var n=new tt;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof pt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),n.add(r))}e.P("SubGraphCollapsed",n)}finally{e.eb("Collapse SubGraph")}},Vt.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof pt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof pt&&e.isSubGraphExpanded)return!0;return!1},Vt.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Expand SubGraph"),Ur(e.animationManager,"Expand SubGraph");var n=new tt;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var r=i.value;r instanceof pt&&!r.isSubGraphExpanded&&(r.expandSubGraph(),n.add(r))}e.P("SubGraphExpanded",n)}finally{e.eb("Expand SubGraph")}},Vt.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof pt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof pt&&!e.isSubGraphExpanded)return!0;return!1},Vt.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(n!==null){if(t===null){t=null;for(var i=e.selection.iterator;i.next();){var r=i.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.vl(function(a){return a instanceof Rt&&a.editable})}t!==null&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},Vt.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Rt))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.vl(function(n){return n instanceof Rt&&n.editable}),t!==null))return!0;return!1},Vt.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(n!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=n.findObjectWithContextMenu(t),t!==null)){var i=e.lastInput,r=null;t instanceof st?r=t.ia(Gt):e.viewportBounds.ba(i.documentPoint)||(r=e.viewportBounds,r=new C(r.x+r.width/2,r.y+r.height/2)),r!==null&&(i.viewPoint=e.Ro(r),i.documentPoint=r,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,bP(n,!1,t)}},Vt.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return n===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),n.findObjectWithContextMenu(t)!==null)},Vt.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),r=n.currentTool===i;if(e===void 0&&(e=r?i.dragOptions:n.Em),i=new ct,t===null)return i;for(var a=t.iterator;a.next();)_r(n,i,a.value,r,e);if(n.draggedLink!==null&&e.dragsLink)return i;for(a=t.iterator;a.next();)t=a.value,t instanceof H&&(e=t.fromNode,e===null||i.contains(e)?(e=t.toNode,e===null||i.contains(e)||i.remove(t)):i.remove(t));return i},I.Object.defineProperties(Vt.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.m},set:function(t){this.m=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ga},set:function(t){this.Ga=t}},copiesTree:{get:function(){return this.ga},set:function(t){this.ga=t}},deletesTree:{get:function(){return this.hb},set:function(t){this.hb=t}},copiesParentKey:{get:function(){return this.W},set:function(t){this.W=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.dj},set:function(t){this.dj=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Db},set:function(t){1<t||B("zoomFactor must be larger than 1.0, not: "+t),this.Db=t}},isZoomToFitRestoreEnabled:{get:function(){return this.cb},set:function(t){this.cb=t}},scrollToPartPause:{get:function(){return this.nb},set:function(t){this.nb=t}}}),Vt.className="CommandHandler",Sx=function(){return new Vt};function st(){Oe(this),this.o=30723,this.tb=1,this.Yb=this.Uf=null,this.pa=new C(NaN,NaN).freeze(),this.$c=lf,this.Bb=new xt,this.lh=new xt,this.Ib=null,this.xa=this.yk=1,this.Gb=0,this.Ag=oh,this.qc=new G(NaN,NaN,NaN,NaN).freeze(),this.Eb=new G(NaN,NaN,NaN,NaN).freeze(),this.bc=new G(0,0,NaN,NaN).freeze(),this.aa=this.Gn=this.Hn=null,this.fk=this.Fb=Je,this.rg=this.Ln=0,this.Mn=this.jj=this.ib=this.sh=this.A=this.Ra=null}var he,ae,To,_e,Qe,Ki,gg,dg,fg,cg;st.prototype.cloneProtected=function(t){t.o=this.o|6144,t.tb=this.tb,t.Yb=this.Yb,t.pa.assign(this.pa),t.$c=this.$c.J(),this.Ib!==null?t.Ib=this.Ib.copy():t.Ib=null,t.xa=this.xa,t.Gb=this.Gb,t.Ag=this.Ag.J(),t.qc.assign(this.qc),t.Eb.assign(this.Eb),t.bc.assign(this.bc),t.Gn=this.Gn,this.aa!==null&&(t.aa=this.aa.copy()),t.Fb=this.Fb.J(),t.fk=this.fk.J(),t.Ln=this.Ln,t.rg=this.rg,this.Ra!==null&&(t.Ra=this.Ra.copy()),this.A!==null&&(t.A=this.A.ic?this.A:this.A.copy()),this.sh!==null&&(t.sh=Jt(this.sh)),this.ib!==null&&(t.ib=this.ib.copy())},st.prototype.zw=function(t){var e=this.sh;if(Ut(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.sh=e=[];e.push(t)},st.prototype.qf=function(t){t.Hn=null,t.jj=null,t.w()},st.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.sh!==null)for(var e=0;e<this.sh.length;e++){var n=this.sh[e];t[n]=this[n]}return t},st.prototype.copy=function(){return this.clone()},l=st.prototype,l.ob=function(t){t.classType===H?t.name.indexOf("Orient")===0?this.segmentOrientation=t:B("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===st&&(this.stretch=t)},l.toString=function(){return gr(this.constructor)+"#"+Te(this)},l.ih=function(){this.A!==null&&(this.A.ic=!0)};function we(t){t.A===null?t.A=new dl:t.A.ic&&(t.A=t.A.copy())}l.Rc=function(){if(this.aa===null){var t=new mg;t.Qi=$e,t.tj=$e,t.Oi=10,t.rj=10,t.Pi=0,t.sj=0,this.aa=t}},l.bb=function(t,e,n,i,r,a,h){var g=this.part;if(g!==null&&(g.$j(t,e,n,i,r,a,h),n===this&&t===Zt&&gl(this)&&ca(this,g,e),a=this.diagram,this.animationTriggers===null||a===null||!a.ji||a.undoManager.isUndoingRedoing||a.animationManager.lm||(t=this.animationTriggers.get(e),t!==null&&a.animationManager.isEnabled&&!a.animationManager.isTicking&&(this.Mn===null&&(this.Mn=new ct),h=a.undoManager.transactionLevel===0,t.startCondition===k0?h=!0:t.startCondition===px&&(h=!1),h?(a=new on,bk(t,a),h=this.Mn.get(t),h!==null&&h.stop(),this.Mn.add(t,a),a.au=this,a.rw=t,a.add(this,e,i,r),a.start()):(Ur(a.animationManager,"Trigger"),a.animationManager.defaultAnimation.add(this,e,i,r)))),this instanceof X&&n===g&&(g.o&16777216)!==0&&g.data!==null))for(n=this.R.s,i=n.length,r=0;r<i;r++)g=n[r],g instanceof X&&va(g,function(f){f.data!==null&&(f.o&16777216)!==0&&f.Ka(e)})};function ca(t,e,n){var i=t.Yg();if(i!==null)for(var r=t.localBindings.iterator;r.next();){var a=r.value,h=null;if(a.sourceName!==null){if(h=O2(a,i,t),h===null)continue;a.Vo(t,h,n,null)}else if(a.isToModel){var g=e.diagram;g===null||g.skipsModelSourceBindings||a.Vo(t,g.model.modelData,n,i)}else{if(g=i.data,g===null)continue;var f=e.diagram;f===null||f.skipsModelSourceBindings||a.Vo(t,g,n,i)}h===t&&(g=i.Hr(a.ti),g!==null&&a.pv(g,h,n))}}l.Hr=function(t){return this.bindingId===t?this:null},l.g=function(t,e,n){this.bb(Zt,t,this,e,n)},l.ve=function(t,e,n,i){var r=this.qc;if(r.h(t,e,n,i),this.xa!==1||this.Gb!==0){this.Ib===null&&(this.Ib=new xt);var a=this.Ib;a.reset(),this.Qn(a,t,e,n,i),a.So(r)}};function Zx(t,e,n,i){return t.pickable===!1?!1:(i.multiply(t.transform),n?t.Sc(e,i):t.Wg(e,i))}l.Vw=function(t,e,n){if(this.pickable===!1)return!1;var i=this.naturalBounds;return e=t.rf(e),n?vn(t.x,t.y,0,0,0,i.height)<=e||vn(t.x,t.y,0,i.height,i.width,i.height)<=e||vn(t.x,t.y,i.width,i.height,i.width,0)<=e||vn(t.x,t.y,i.width,0,0,0)<=e:t.td(0,0)<=e&&t.td(0,i.height)<=e&&t.td(i.width,0)<=e&&t.td(i.width,i.height)<=e},l.ke=function(){return!0},l.ba=function(t){var e=C.alloc();e.assign(t),this.transform.Fa(e);var n=this.actualBounds;if(!n.v())return C.free(e),!1;var i=this.diagram;if(i!==null&&i.jt){var r=i.yl("extraTouchThreshold"),a=i.yl("extraTouchArea"),h=a/2,g=this.naturalBounds;i=this.uf()*i.scale;var f=1/i;if(g.width*i<r&&g.height*i<r)return t=oo(n.x-h*f,n.y-h*f,n.width+a*f,n.height+a*f,e.x,e.y),C.free(e),t}return r=!1,(this instanceof Ct||this instanceof yt?oo(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.ba(e))&&(this.ib&&!this.ib.ba(e)?r=!1:this.areaBackground!==null&&n.ba(e)||this.Yb!==null&&this.bc.ba(t)?r=!0:r=this.Xg(t)),C.free(e),r},l.Xg=function(t){var e=this.naturalBounds;return oo(0,0,e.width,e.height,t.x,t.y)},l.Ee=function(t){if(this.angle===0)return this.actualBounds.Ee(t);var e=this.naturalBounds;e=G.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,r=C.allocAt(t.x,t.y);return e.ba(n.Ld(r))&&(r.h(t.x,t.bottom),e.ba(n.Ld(r))&&(r.h(t.right,t.bottom),e.ba(n.Ld(r))&&(r.h(t.right,t.y),e.ba(n.Ld(r))&&(i=!0)))),C.free(r),G.free(e),i},l.Wg=function(t,e){if(e===void 0)return t.Ee(this.actualBounds);var n=this.naturalBounds,i=!1,r=C.allocAt(0,0);return t.ba(e.Fa(r))&&(r.h(0,n.height),t.ba(e.Fa(r))&&(r.h(n.width,n.height),t.ba(e.Fa(r))&&(r.h(n.width,0),t.ba(e.Fa(r))&&(i=!0)))),C.free(r),i},l.Sc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Sc(this.actualBounds);var n=this.naturalBounds,i=C.allocAt(0,0),r=C.allocAt(0,n.height),a=C.allocAt(n.width,n.height),h=C.allocAt(n.width,0),g=!1;if(t.ba(e.Fa(i))||t.ba(e.Fa(r))||t.ba(e.Fa(a))||t.ba(e.Fa(h)))g=!0;else{n=G.allocAt(0,0,n.width,n.height);var f=C.allocAt(t.x,t.y);n.ba(e.Ld(f))?g=!0:(f.h(t.x,t.bottom),n.ba(e.Ld(f))?g=!0:(f.h(t.right,t.bottom),n.ba(e.Ld(f))?g=!0:(f.h(t.right,t.y),n.ba(e.Ld(f))&&(g=!0)))),C.free(f),G.free(n),!g&&(A.Rr(t,i,r)||A.Rr(t,r,a)||A.Rr(t,a,h)||A.Rr(t,h,i))&&(g=!0)}return C.free(i),C.free(r),C.free(a),C.free(h),g},l.ia=function(t,e){if(e===void 0&&(e=new C),t instanceof ht){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.ge.Fa(e),e},l.gi=function(t){t===void 0&&(t=new G);var e=this.naturalBounds,n=this.ge,i=C.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),Ve(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),Ve(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),Ve(t,i.x,i.y,0,0),C.free(i),t},l.fi=function(){var t=this.ge;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},l.uf=function(){if((this.o&4096)===0)return this.yk;var t=this.xa;return this.panel!==null?t*this.panel.uf():t},l.Nr=function(t,e){return e===void 0&&(e=new C),e.assign(t),this.ge.Ld(e),e},l.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},l.Kj=function(t,e,n,i,r){var a=this.transform,h=1/(a.m11*a.m22-a.m12*a.m21),g=a.m22*h,f=-a.m12*h,c=-a.m21*h,m=a.m11*h,y=h*(a.m21*a.dy-a.m22*a.dx),S=h*(a.m12*a.dx-a.m11*a.dy);return this.areaBackground!==null?(a=this.actualBounds,A.wf(a.left,a.top,a.right,a.bottom,t,e,n,i,r)):(h=t*g+e*c+y,t=t*f+e*m+S,e=n*g+i*c+y,n=n*f+i*m+S,r.h(0,0),i=this.naturalBounds,n=A.wf(0,0,i.width,i.height,h,t,e,n,r),r.transform(a),n)},st.prototype.measure=function(t,e,n,i){if(Sr(this)!==!1){var r=this.Ag,a=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-a,0),e=Math.max(e-r,0),n=Math.max((n||0)-a,0),i=Math.max((i||0)-r,0),a=this.angle,r=this.desiredSize;var h=0;this instanceof yt&&(h=this.strokeWidth),a===90||a===270?(t=isFinite(r.height)?r.height+h:t,e=isFinite(r.width)?r.width+h:e):(t=isFinite(r.width)?r.width+h:t,e=isFinite(r.height)?r.height+h:e),r=n||0,h=i||0;var g=this instanceof X;switch(ho(this,!0)){case ae:h=r=0,g&&(e=t=1/0);break;case he:isFinite(t)&&t>n&&(r=t),isFinite(e)&&e>i&&(h=e);break;case _e:isFinite(t)&&t>n&&(r=t),h=0,g&&(e=1/0);break;case Qe:isFinite(e)&&e>i&&(h=e),r=0,g&&(t=1/0)}g=this.maxSize;var f=this.minSize;r>g.width&&f.width<g.width&&(r=g.width),h>g.height&&f.height<g.height&&(h=g.height),n=Math.max(r/this.scale,f.width),i=Math.max(h/this.scale,f.height),g.width<n&&(n=Math.min(f.width,n)),g.height<i&&(i=Math.min(f.height,i)),t=Math.min(g.width,t),e=Math.min(g.height,e),t=Math.max(n,t),e=Math.max(i,e),(a===90||a===270)&&(a=t,t=e,e=a,a=n,n=i,i=a),this.qc.ja(),this.El(t,e,n,i),this.qc.freeze(),this.qc.v()||B("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),mi(this,!1)}},st.prototype.El=function(){},st.prototype.li=function(){return!1},st.prototype.arrange=function(t,e,n,i,r){this.Jk();var a=G.alloc();a.assign(this.Eb),this.Eb.ja(),Fi(this)===!1?this.Eb.h(t,e,n,i):this.Vg(t,e,n,i),this.Eb.freeze(),r===void 0?this.ib=null:this.ib=r,n=!1,r!==void 0?n=!0:(r=this.panel,r===null||r.type!==X.TableRow&&r.type!==X.TableColumn||(r=r.panel),r!==null&&(r=r.bc,i=this.measuredBounds,this.areaBackground!==null&&(i=this.Eb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=r.width+.05&&0<=e+.05&&n<=r.height+.05),this instanceof Rt&&(t=this.naturalBounds,this.kq>t.height||this.yb>t.width))&&(n=!0)),this.o=n?this.o|256:this.o&-257,this.Eb.v()||B("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Eb.toString()),this.Fl(a,this.Eb),pa(this,!1),G.free(a)},l=st.prototype,l.Vg=function(){};function ty(t,e,n,i,r){if(t.Eb.h(e,n,i,r),!t.desiredSize.v()){var a=t.qc;n=t.Ag,e=n.right+n.left;var h=n.top+n.bottom;switch(n=a.width+e,a=a.height+h,i+=e,r+=h,e=ho(t,!0),n===i&&a===r&&(e=ae),e){case ae:(n>i||a>r)&&(mi(t,!0),t.measure(n>i?i:n,a>r?r:a,0,0));break;case he:mi(t,!0),t.measure(i,r,0,0);break;case _e:mi(t,!0),t.measure(i,a,0,0);break;case Qe:mi(t,!0),t.measure(n,r,0,0)}}}l.Fl=function(t,e){var n=this.part;n!==null&&n.diagram!==null&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||Ay(n,!0),this.N(),Xm(t,e)||(n.dh(),this.wn(n)))},l.wn=function(t){this.portId!==null&&(Ay(t,!0),t instanceof q&&Xw(t,this))},l.tc=function(t,e){if(this.visible){var n=this.opacity;if(n!==0){var i=this instanceof X&&(this.type===X.TableRow||this.type===X.TableColumn),r=this.Eb;if(i||r.width!==0&&r.height!==0&&!isNaN(r.x)&&!isNaN(r.y)){var a=1;if(n!==1&&(a=t.globalAlpha,t.globalAlpha=a*n),i){r=this.Eb,i=this.bc;var h=this.areaBackground,g=this.Yb;h===null&&g===null||t.Pc(),h!==null&&(ii(this,t,h,!0,!0,i,r),h instanceof Et&&h.type===ri?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.sf(h)):t.fillRect(r.x,r.y,r.width,r.height)),g!==null&&(ii(this,t,g,!0,!1,i,r),g instanceof Et&&g.type===ri?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.sf(g)):t.fillRect(r.x,r.y,r.width,r.height)),this.ai(t,e)}else if(!this.Qw(t,e)){this instanceof H&&this.Rj(!1),i=this.transform,h=this.panel,(this.o&4096)!==0&&Of(this);var f=this.part;g=!1;var c=0;if(f&&e.Ge("drawShadows")&&(g=f.isShadowed)){var m=f.shadowOffset;c=Math.max(m.y,m.x)*e.scale*e.kc}m=this.li();var y;if(!(y=e.Vi||!m)){var S=this.naturalBounds;y=this.lh;var x=y.m11,P=y.m21,L=y.dx,N=y.m12,k=y.m22,F=y.dy,D,j=D=0;y=D*x+j*P+L;var E=D*N+j*k+F;D=S.width+c,j=0;var R=D*x+j*P+L;D=D*N+j*k+F,j=Math.min(y,R);var J=Math.min(E,D),it=Math.max(y+0,R)-j,nt=Math.max(E+0,D)-J;y=j,E=J,D=S.width+c,j=S.height+c,R=D*x+j*P+L,D=D*N+j*k+F,j=Math.min(y,R),J=Math.min(E,D),it=Math.max(y+it,R)-j,nt=Math.max(E+nt,D)-J,y=j,E=J,D=0,j=S.height+c,R=D*x+j*P+L,D=D*N+j*k+F,j=Math.min(y,R),J=Math.min(E,D),it=Math.max(y+it,R)-j,nt=Math.max(E+nt,D)-J,y=j,E=J,c=e.viewportBounds,S=c.x,x=c.y,y=!(y>c.width+S||S>it+y||E>c.height+x||x>nt+E)}if(y){if(y=(this.o&256)!==0,t.clipInsteadOfFill&&(y=!1),this instanceof Rt&&(t.font=this.font),y){if(E=h.ke()?h.naturalBounds:h.actualBounds,this.ib!==null?(S=this.ib,it=S.x,nt=S.y,c=S.width,S=S.height):(it=Math.max(r.x,E.x),nt=Math.max(r.y,E.y),c=Math.min(r.right,E.right)-it,S=Math.min(r.bottom,E.bottom)-nt),it>r.width+r.x||r.x>E.width+E.x){n!==1&&(t.globalAlpha=a);return}t.save(),t.beginPath(),t.rect(it,nt,c,S),t.clip()}if(m){if(!f.isVisible()){n!==1&&(t.globalAlpha=a);return}g&&(E=f.shadowOffset,t.iv(E.x*e.scale*e.kc,E.y*e.scale*e.kc,f.shadowBlur),Jr(t),t.shadowColor=f.shadowColor)}g&&this.shadowVisible===!0?Jr(t):g&&this.shadowVisible===!1&&xr(t),f=this.naturalBounds,this.areaBackground!==null&&(t.Pc(),ii(this,t,this.areaBackground,!0,!0,f,r),this.areaBackground instanceof Et&&this.areaBackground.type===ri?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.sf(this.areaBackground)):t.fillRect(r.x,r.y,r.width,r.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),g&&(h!==null&&(h.o&512)!==0||h!==null&&(h.type===X.Auto||h.type===X.Spot)&&h.vb()!==this)&&this.shadowVisible===null&&xr(t),this.Yb!==null&&(t.Pc(),Qx(this,t,f,r)),g&&(this.Yb!==null||this.areaBackground!==null||h!==null&&(h.o&512)!==0||h!==null&&(h.type===X.Auto||h.type===X.Spot)&&h.vb()!==this)?(Ef(this,!0),this.shadowVisible===null&&xr(t)):Ef(this,!1),this.ai(t,e),g&&(this.o&512)!==0&&Jr(t),m&&g&&xr(t),y&&(t.restore(),t.Oc(this instanceof X)),i.Ur()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))}}n!==1&&(t.globalAlpha=a)}}}};function Qx(t,e,n,i){var r=t.naturalBounds,a=0,h=0,g=r.width;r=r.height;var f=t.Sv();t instanceof yt&&(r=t.sa.bounds,a=r.x,h=r.y,g=r.width,r=r.height),ii(t,e,t.Yb,!0,!1,n,i),t.Yb instanceof Et&&t.Yb.type===ri?(e.beginPath(),e.rect(a-f/2,h-f/2,g+f,r+f),e.sf(t.Yb)):e.fillRect(a-f/2,h-f/2,g+f,r+f)}l.Qw=function(){return!1},l.ai=function(){};function ii(t,e,n,i,r,a,h){if(n!==null){var g=1,f=1;if(typeof n=="string")i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===Zr)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var c=0;if(t instanceof yt&&(c=t.strokeWidth),g=a.width,f=a.height,r?(g=h.width,f=h.height):i||(g+=c,f+=c),(a=e instanceof ya)&&n.oe&&(n.type===zh||n.lk===g&&n.Hs===f))var m=n.oe;else{var y=0,S=0,x=0,P=0,L=0,N=0;if(N=L=0,r?(L=h.x,N=h.y):i||(L-=c/2,N-=c/2),y=n.start.x*g+n.start.offsetX,S=n.start.y*f+n.start.offsetY,x=n.end.x*g+n.end.offsetX,P=n.end.y*f+n.end.offsetY,y+=L,x+=L,S+=N,P+=N,n.type===Lr)m=e.createLinearGradient(y,S,x,P);else if(n.type===ri)N=isNaN(n.endRadius)?Math.max(g,f)/2:n.endRadius,isNaN(n.startRadius)?(L=0,N=Math.max(g,f)/2):L=n.startRadius,m=e.createRadialGradient(y,S,L,x,P,N);else if(n.type===zh)try{m=e.createPattern(n.pattern,"repeat")}catch{m=null}if(n.type!==zh&&(r=n.colorStops,r!==null))for(r=r.iterator;r.next();)m.addColorStop(r.key,r.value);if(a&&(n.oe=m,m!==null&&(n.lk=g,n.Hs=f),m===null&&n.type===zh&&n.lk!==-1)){n.lk=-1;var k=t.diagram;k!==null&&n.lk===-1&&_(function(){k.redraw()},600)}}i?e.fillStyle=m:e.strokeStyle=m}}}l.jg=function(t){if(t instanceof X)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},l.zf=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.zf():!0},l.yf=function(){for(var t=this instanceof X?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function Of(t){if((t.o&2048)!==0){var e=t.Bb;if(e.reset(),!t.Eb.v()||!t.qc.v()){Fh(t,!1);return}if(e.translate(t.Eb.x-t.qc.x,t.Eb.y-t.qc.y),t.scale!==1||t.angle!==0){var n=t.naturalBounds;t.Qn(e,n.x,n.y,n.width,n.height)}Fh(t,!1),Ts(t,!0)}(t.o&4096)!==0&&(e=t.panel,e===null?(t.lh.set(t.Bb),t.yk=t.scale,Ts(t,!1)):e.ge!==null&&(n=t.lh,n.reset(),e.ke()?n.multiply(e.lh):e.panel!==null&&n.multiply(e.panel.lh),n.multiply(t.Bb),t.yk=t.scale*e.yk,Ts(t,!1)))}l.Qn=function(t,e,n,i,r){if(this.xa!==1&&t.scale(this.xa),this.Gb!==0){var a=C.alloc();a.pi(e,n,i,r,Gt),t.rotate(this.Gb,a.x,a.y),C.free(a)}},l.w=function(t){if(!Sr(this)){t===void 0&&(t=!1),mi(this,!0),pa(this,!0);var e=this.panel;e===null||t||e.w()}},l.Mj=function(){Sr(this)||(mi(this,!0),pa(this,!0))};function Th(t){if(!Fi(t)){var e=t.panel;e!==null?e.w():t.li()&&(e=t.diagram,e!==null&&(e.te.add(t),t instanceof q&&t.vd(),e.Mb())),pa(t,!0)}}l.Jk=function(){(this.o&2048)===0&&(Fh(this,!0),Ts(this,!0))},l.Iu=function(){Ts(this,!0)},l.N=function(){var t=this.part;t!==null&&t.N()};function ho(t,e){var n=t.stretch,i=t.panel;return i!==null&&i.type===X.Table?pg(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):i!==null&&i.type===X.Auto&&i.vb()===t?vr(t,he,e):n===Ki?i!==null?i.type===X.Spot&&i.vb()===t?vr(t,he,e):(n=i.defaultStretch,n===Ki?vr(t,ae,e):vr(t,n,e)):vr(t,ae,e):vr(t,n,e)}function pg(t,e,n,i){var r=t.stretch;if(r!==Ki)return vr(t,r,i);var a=r=null;switch(e.stretch){case Qe:a=!0;break;case he:a=!0}switch(n.stretch){case _e:r=!0;break;case he:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===_e||e===he),a===null&&(a=e===Qe||e===he),r===!0&&a===!0?vr(t,he,i):r===!0?vr(t,_e,i):a===!0?vr(t,Qe,i):vr(t,ae,i)}function vr(t,e,n){if(n)return e;if(e===ae||(n=t.desiredSize,n.v()))return ae;if(t=t.angle,!isNaN(n.width))if(t!==90&&t!==270){if(e===_e)return ae;if(e===he)return Qe}else{if(e===Qe)return ae;if(e===he)return _e}if(!isNaN(n.height))if(t!==90&&t!==270){if(e===Qe)return ae;if(e===he)return _e}else{if(e===_e)return ae;if(e===he)return Qe}return e}function Ef(t,e){t.o=e?t.o|512:t.o&-513}function gl(t){return(t.o&1024)!==0}function ey(t,e){t.o=e?t.o|1024:t.o&-1025}function Fh(t,e){t.o=e?t.o|2048:t.o&-2049}function Ts(t,e){t.o=e?t.o|4096:t.o&-4097}function Sr(t){return(t.o&8192)!==0}function mi(t,e){t.o=e?t.o|8192:t.o&-8193}function Fi(t){return(t.o&16384)!==0}function pa(t,e){t.o=e?t.o|16384:t.o&-16385}l.ni=function(t){this.Uf=t},l.ns=function(){},l.fv=function(t){return this.pa=t,Th(this),!0},l.Ul=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Jk())},l.Sv=function(){return 0};function ma(t){var e=t.part;if(e instanceof q&&(t.portId!==null||t===e.port)){var n=e.diagram;n===null||n.undoManager.isUndoingRedoing||Xw(e,t)}}function qx(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof X?t instanceof q?t.vd():t.$l(t,function(n){ma(n)}):ma(t))}l.bind=function(t,e,n,i){var r=null;return typeof t=="string"?r=new ue(t,e,n,i):r=t,r.sd=this,t=this.Yg(),t!==null&&fw(t)&&B("Cannot add a Binding to a template that has already been copied: "+r),this.localBindings===null&&(this.localBindings=new tt),this.localBindings.add(r),this},l.set=function(t){return Object.assign(this,t),this},l.ku=function(t){return ny(this,t),this},l.apply=function(t){return t(this),this},l.Vl=function(t){return rg(this,t),this},l.Yy=function(){return this.Yg()},l.Yg=function(){for(var t=this instanceof X?this:this.panel;t!==null;){if(t.allBindings!==null)return t;t=t.panel}return null},l.mv=function(t){return t.sd=this,this.animationTriggers===null&&(this.animationTriggers=new ct),this.animationTriggers.add(t.propertyName,t),this};function yi(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var a=Dh.I(t);typeof a=="function"?(n=Jt(arguments),i=a(n),mt(i)||B('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=U.go[t]}if(i===null&&(r!=null&&r.constructor||B("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new r),r=1,i instanceof z&&1<n.length){a=i;var h=n[1];(typeof h=="string"||h instanceof HTMLDivElement)&&(q0(a,h),r++)}for(;r<n.length;r++)a=n[r],a===void 0?B("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+i):ny(i,a);return i}function ny(t,e){if(typeof e=="string")if(t instanceof Rt)t.text=e;else if(t instanceof yt)t.figure=e;else if(t instanceof Rn)t.source=e;else if(t instanceof X)e=Hi.I(e),e!==null&&(t.type=e);else if(t instanceof Et){var n=Yi(Et,e);n!==null?t.type=n:B("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof W?(e=Yi(W,e),e!==null&&(t.type=e)):t instanceof Tt&&(e=Yi(Tt,e),e!==null&&(t.type=e));else if(e instanceof st)t instanceof X||B("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof Le){var i;e.isRow&&typeof t.getRowDefinition=="function"?i=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(i=t.getColumnDefinition(e.index)),i instanceof Le?(t=i,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.Wf=e.separatorPadding===null?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.oj=null,e.separatorDashArray&&(t.oj=Jt(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.Vd=e.Vd):B("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof $)typeof t.ob=="function"&&t.ob(e);else if(e instanceof Se)t.type=e;else if(e instanceof ue)t instanceof st||t instanceof Le?t.bind(e):B("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Ho)t instanceof st?t.mv(e):B("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof ze)t instanceof W&&t.type===W.m?t.figures.add(e):B("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof Tt)t instanceof ze?t.segments.add(e):B("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Dt)t instanceof z||t instanceof pt?t.layout=e:B("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)ny(t,e[n]);else if(typeof e=="object"&&e!==null)if(t instanceof Et){n=new jn;for(var r in e)i=parseFloat(r),isNaN(i)?n[r]=e[r]:t.addColorStop(i,e[r]);rg(t,n)}else if(t instanceof Le){e.row!==void 0?(r=e.row,(r==null||r===1/0||isNaN(r)||0>r)&&B("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===1/0||isNaN(r)||0>r)&&B("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new jn;for(n in e)n!=="row"&&n!=="column"&&(r[n]=e[n]);rg(t,r)}else rg(t,e);else B('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Wr(t,e){Dh.add(t,e)}function If(t,e,n){n===void 0&&(n=null);var i=t[1];if(typeof n=="function"?n(i):typeof i=="string")return t.splice(1,1),i;if(e===void 0)throw Error("no "+(typeof n=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}I.Object.defineProperties(st.prototype,{bindingId:{get:function(){return this.A!==null?this.A.bp:-1},set:function(t){this.bindingId!==t&&(this.A===null&&(this.A=new dl),this.A.bp=t)}},localBindings:{get:function(){return this.A!==null?this.A.Ff:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new dl),this.A.Ff=t)}},srcBindings:{get:function(){return this.A!==null?this.A.Wo:null},set:function(t){this.srcBindings!==t&&(this.A===null&&(this.A=new dl),this.A.Wo=t)}},shadowVisible:{get:function(){return this.A!==null?this.A.wi:null},set:function(t){var e=this.shadowVisible;e!==t&&(we(this),this.A.wi=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.A!==null?this.A.Hc:null},set:function(t){var e=this.enabledChanged;e!==t&&(we(this),this.A.Hc=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ra!==null?this.Ra.Oq:Ln},set:function(t){var e=this.segmentOrientation;e!==t&&(this.Ra===null&&(this.Ra=new Fs),this.Ra.Oq=t,this.w(),this.g("segmentOrientation",e,t),t===Ln&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ra!==null?this.Ra.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(this.Ra===null&&(this.Ra=new Fs),this.Ra.u=t,this.w(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Ra!==null?this.Ra.m:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(this.Ra===null&&(this.Ra=new Fs),this.Ra.m=t,this.w(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Ra!==null?this.Ra.F:dr},set:function(t){var e=this.segmentOffset;e.C(t)||(t=t.J(),this.Ra===null&&(this.Ra=new Fs),this.Ra.F=t,this.w(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.A!==null?this.A.$f:Ki},set:function(t){var e=this.stretch;e!==t&&(we(this),this.A.$f=t,this.w(),this.g("stretch",e,t))}},name:{get:function(){return this.A!==null?this.A.va:""},set:function(t){var e=this.name;e!==t&&(we(this),this.A.va=t,this.part!==null&&(this.part.Kh=null),this.g("name",e,t))}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&gt(t,"0 <= value <= 1",st,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(yl(e,e.actualBounds)))}},visible:{get:function(){return(this.o&1)!==0},set:function(t){var e=(this.o&1)!==0;e!==t&&(this.o^=1,this.g("visible",e,t),e=this.panel,e!==null?e.w():this.li()&&this.Ub(t),this.N(),qx(this))}},pickable:{get:function(){return(this.o&2)!==0},set:function(t){var e=(this.o&2)!==0;e!==t&&(this.o^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.o&4)!==0},set:function(t){var e=(this.o&4)!==0;e!==t&&(this.o^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.o&8)!==0},set:function(t){var e=(this.o&8)!==0;e!==t&&(this.o^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.o&16)!==0},set:function(t){var e=(this.o&16)!==0;e!==t&&(this.o^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.o&32)!==0},set:function(t){var e=(this.o&32)!==0;e!==t&&(this.o^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.o&64)!==0},set:function(t){var e=(this.o&64)!==0;e!==t&&(this.o^=64,this.w(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.o&128)!==0},set:function(t){var e=(this.o&128)!==0;e!==t&&(this.o^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.A!==null?this.A.nb:null},set:function(t){var e=this.areaBackground;e!==t&&(t!==null&&pl(t,"GraphObject.areaBackground"),t instanceof Et&&t.freeze(),we(this),this.A.nb=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(t!==null&&pl(t,"GraphObject.background"),t instanceof Et&&t.freeze(),this.Yb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.li())return this;if(this.jj!==null)return this.jj;var t;for(t=this.panel;t;){if(t instanceof lt)return this.jj=t;t=t.panel}return null}},svg:{get:function(){return this.kr},set:function(t){this.kr=t}},panel:{get:function(){return this.Uf}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,n=t.y,i=this.pa,r=i.x;i=i.y,(r===e||isNaN(r)&&isNaN(e))&&(i===n||isNaN(i)&&isNaN(n))?this.ns():(t=t.copy(),this.fv(t,r,i)&&this.g("position",new C(r,i),t))}},actualBounds:{get:function(){return this.Eb}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(0>=t&&B("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.xa=t,this.w(),this.g("scale",e,t))}},angle:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Gb=t,qx(this),this.w(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.$c},set:function(t){var e=t.width,n=t.height,i=this.$c,r=i.width,a=i.height;(r===e||isNaN(r)&&isNaN(e))&&(a===n||isNaN(a)&&isNaN(n))||(this.$c=t=t.J(),this.w(),this instanceof yt&&this.mc(),this.g("desiredSize",i,t),gl(this)&&(t=this.part,t!==null&&(ca(this,t,"width"),ca(this,t,"height"))))}},width:{get:function(){return this.$c.width},set:function(t){var e=this.$c.width;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new dt(t,this.$c.height).freeze(),this.w(),this instanceof yt&&this.mc(),this.g("desiredSize",e,t),gl(this)&&(t=this.part,t!==null&&ca(this,t,"width")))}},height:{get:function(){return this.$c.height},set:function(t){var e=this.$c.height;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new dt(this.$c.width,t).freeze(),this.w(),this instanceof yt&&this.mc(),this.g("desiredSize",e,t),gl(this)&&(t=this.part,t!==null&&ca(this,t,"height")))}},minSize:{get:function(){return this.A!==null?this.A.u:tl},set:function(t){var e=this.minSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),we(this),this.A.u=t,this.w(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.A!==null?this.A.m:Um},set:function(t){var e=this.maxSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),we(this),this.A.m=t,this.w(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.bc}},margin:{get:function(){return this.Ag},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.Ag;e.C(t)||(this.Ag=t=t.J(),this.w(),this.g("margin",e,t))}},transform:{get:function(){return(this.o&2048)!==0&&Of(this),this.Bb}},ge:{get:function(){return(this.o&4096)!==0&&Of(this),this.lh}},animationTriggers:{get:function(){return this.A!==null?this.A.cb:null},set:function(t){this.animationTriggers!==t&&(we(this),this.A.cb=t)}},reshapingBehavior:{get:function(){return this.A!==null?this.A.ui:ae},set:function(t){this.reshapingBehavior!==t&&(we(this),this.A.ui=t)}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(t.Fc()&&!t.Sb()&&B("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Fb=t=t.J(),Th(this),this.g("alignment",e,t))}},column:{get:function(){return this.rg},set:function(t){t=Math.round(t);var e=this.rg;e!==t&&(0>t&&gt(t,">= 0",st,"column"),this.rg=t,this.w(),this.g("column",e,t))}},columnSpan:{get:function(){return this.A!==null?this.A.Db:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&gt(t,">= 1",st,"columnSpan"),we(this),this.A.Db=t,this.w(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Ln},set:function(t){t=Math.round(t);var e=this.Ln;e!==t&&(0>t&&gt(t,">= 0",st,"row"),this.Ln=t,this.w(),this.g("row",e,t))}},rowSpan:{get:function(){return this.A!==null?this.A.vi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&gt(t,">= 1",st,"rowSpan"),we(this),this.A.vi=t,this.w(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.A!==null?this.A.xi:null},set:function(t){var e=this.spanAllocation;e!==t&&(we(this),this.A.xi=t,this.w(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.fk},set:function(t){var e=this.fk;e.C(t)||(this.fk=t=t.J(),this.w(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Gn},set:function(t){var e=this.Gn;if(e!==t){var n=this.part;n===null||n instanceof q||B("Cannot set portID on a Link: "+t),e!==null&&n!==null&&Ry(n,this),this.Gn=t,t!==null&&n!==null&&(n.He=!0,Hw(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.aa!==null?this.aa.tj:$e},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),ma(this))}},toEndSegmentLength:{get:function(){return this.aa!==null?this.aa.rj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&gt(t,">= 0",st,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),ma(this))}},toShortLength:{get:function(){return this.aa!==null?this.aa.sj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.g("toShortLength",e,t),ma(this))}},toLinkable:{get:function(){return this.aa!==null?this.aa.sr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Rc(),this.aa.sr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.aa!==null?this.aa.tr:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&gt(t,">= 0",st,"toMaxLinks"),this.Rc(),this.aa.tr=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.aa!==null?this.aa.Qi:$e},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),ma(this))}},fromEndSegmentLength:{get:function(){return this.aa!==null?this.aa.Oi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&gt(t,">= 0",st,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),ma(this))}},fromShortLength:{get:function(){return this.aa!==null?this.aa.Pi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.g("fromShortLength",e,t),ma(this))}},fromLinkable:{get:function(){return this.aa!==null?this.aa.Kp:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Rc(),this.aa.Kp=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.aa!==null?this.aa.Lp:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&gt(t,">= 0",st,"fromMaxLinks"),this.Rc(),this.aa.Lp=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.A!==null?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(we(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return this.A!==null?this.A.oh:null},set:function(t){var e=this.click;e!==t&&(we(this),this.A.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.A!==null?this.A.uh:null},set:function(t){var e=this.doubleClick;e!==t&&(we(this),this.A.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.A!==null?this.A.qh:null},set:function(t){var e=this.contextClick;e!==t&&(we(this),this.A.qh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.A!==null?this.A.Fh:null},set:function(t){var e=this.mouseEnter;e!==t&&(we(this),this.A.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.A!==null?this.A.Ih:null},set:function(t){var e=this.mouseLeave;e!==t&&(we(this),this.A.Ih=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.A!==null?this.A.Jh:null},set:function(t){var e=this.mouseOver;e!==t&&(we(this),this.A.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.A!==null?this.A.Hh:null},set:function(t){var e=this.mouseHover;e!==t&&(we(this),this.A.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.A!==null?this.A.Gh:null},set:function(t){var e=this.mouseHold;e!==t&&(we(this),this.A.Gh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.A!==null?this.A.Qd:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(we(this),this.A.Qd=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.A!==null?this.A.Gf:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(we(this),this.A.Gf=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.A!==null?this.A.Eh:null},set:function(t){var e=this.mouseDrop;e!==t&&(we(this),this.A.Eh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.A!==null?this.A.W:null},set:function(t){var e=this.actionDown;e!==t&&(we(this),this.A.W=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.A!==null?this.A.ga:null},set:function(t){var e=this.actionMove;e!==t&&(we(this),this.A.ga=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.A!==null?this.A.Ga:null},set:function(t){var e=this.actionUp;e!==t&&(we(this),this.A.Ga=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.A!==null?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(we(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.A!==null?this.A.Th:null},set:function(t){var e=this.toolTip;e!==t&&(we(this),this.A.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.A!==null?this.A.rh:null},set:function(t){var e=this.contextMenu;e!==t&&(we(this),this.A.rh=t,this.g("contextMenu",e,t))}}}),st.prototype.trigger=st.prototype.mv,st.prototype.findBindingPanel=st.prototype.Yg,st.prototype.findTemplateBinder=st.prototype.Yy,st.prototype.setProperties=st.prototype.Vl,st.prototype.apply=st.prototype.apply,st.prototype.attach=st.prototype.ku,st.prototype.set=st.prototype.set,st.prototype.isEnabledObject=st.prototype.yf,st.prototype.isVisibleObject=st.prototype.zf,st.prototype.isContainedBy=st.prototype.jg,st.prototype.getNearestIntersectionPoint=st.prototype.Or,st.prototype.getLocalPoint=st.prototype.Nr,st.prototype.getDocumentScale=st.prototype.uf,st.prototype.getDocumentAngle=st.prototype.fi,st.prototype.getDocumentBounds=st.prototype.gi,st.prototype.getDocumentPoint=st.prototype.ia,st.prototype.intersectsRect=st.prototype.Sc,st.prototype.containedInRect=st.prototype.Wg,st.prototype.containsRect=st.prototype.Ee,st.prototype.containsPoint=st.prototype.ba,st.prototype.raiseChanged=st.prototype.g,st.prototype.raiseChangedEvent=st.prototype.bb,st.prototype.addCopyProperty=st.prototype.zw;var Dh=null;st.className="GraphObject",Dh=new ct,Wr("Button",function(){function t(n,i){return n.diagram.ec(n.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===i})!==null}var e=yi(X,X.Auto,{isActionable:!0,enabledChanged:function(n,i){if(n instanceof X){var r=n.fb("ButtonBorder");r!==null&&(r.fill=i?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},yi(yt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new ht(0,0,2.76142374915397,2.761423749153969),spot2:new ht(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,i){if(i.yf()&&i instanceof X&&(n=i.fb("ButtonBorder"),n instanceof yt)){var r=i._buttonFillOver;i._buttonFillNormal=n.fill,n.fill=r,r=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=r}},e.mouseLeave=function(n,i){i.yf()&&i instanceof X&&(n=i.fb("ButtonBorder"),n instanceof yt&&(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal))},e.actionDown=function(n,i){if(i.yf()&&i instanceof X&&i._buttonFillPressed!==null&&n.button===0){var r=i.fb("ButtonBorder");if(r instanceof yt){n=n.diagram;var a=n.skipsUndoManager;n.skipsUndoManager=!0;var h=i._buttonFillPressed;i._buttonFillOver=r.fill,r.fill=h,h=i._buttonStrokePressed,i._buttonStrokeOver=r.stroke,r.stroke=h,n.skipsUndoManager=a}}},e.actionUp=function(n,i){if(i.yf()&&i instanceof X&&i._buttonFillPressed!==null&&n.button===0){var r=i.fb("ButtonBorder");if(r instanceof yt){var a=n.diagram,h=a.skipsUndoManager;a.skipsUndoManager=!0,t(n,i)?(r.fill=i._buttonFillOver,r.stroke=i._buttonStrokeOver):(r.fill=i._buttonFillNormal,r.stroke=i._buttonStrokeNormal),a.skipsUndoManager=h}}},e.actionCancel=function(n,i){if(i.yf()&&i instanceof X&&i._buttonFillPressed!==null){var r=i.fb("ButtonBorder");if(r instanceof yt){var a=n.diagram,h=a.skipsUndoManager;a.skipsUndoManager=!0,t(n,i)?(r.fill=i._buttonFillOver,r.stroke=i._buttonStrokeOver):(r.fill=i._buttonFillNormal,r.stroke=i._buttonStrokeNormal),a.skipsUndoManager=h}}},e.actionMove=function(n,i){if(i.yf()&&i instanceof X&&i._buttonFillPressed!==null){var r=n.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(n,i)&&(n=i.fb("ButtonBorder"),n instanceof yt))){var a=r.skipsUndoManager;r.skipsUndoManager=!0;var h=i._buttonFillPressed;n.fill!==h&&(n.fill=h),h=i._buttonStrokePressed,n.stroke!==h&&(n.stroke=h),r.skipsUndoManager=a}}},e}),Wr("TreeExpanderButton",function(){var t=yi("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},yi(yt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:el},new ue("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).Fo()),{visible:!1},new ue("visible","isTreeLeaf",function(e){return!e}).Fo());return t.click=function(e,n){if(n=n.part,n instanceof Ct&&(n=n.adornedPart),n instanceof q){var i=n.diagram;if(i!==null){if(i=i.commandHandler,n.isTreeExpanded){if(!i.canCollapseTree(n))return}else if(!i.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?i.collapseTree(n):i.expandTree(n)}}},t}),Wr("SubGraphExpanderButton",function(){var t=yi("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},yi(yt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:el},new ue("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).Fo()));return t.click=function(e,n){if(n=n.part,n instanceof Ct&&(n=n.adornedPart),n instanceof pt){var i=n.diagram;if(i!==null){if(i=i.commandHandler,n.isSubGraphExpanded){if(!i.canCollapseSubGraph(n))return}else if(!i.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?i.collapseSubGraph(n):i.expandSubGraph(n)}}},t}),Wr("ToolTip",function(){return yi(Ct,X.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new C(0,3),shadowBlur:5},yi(yt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new ht(0,0,4,6),spot2:new ht(1,1,-4,-4)}))}),Wr("ContextMenu",function(){return yi(Ct,X.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new C(0,3),shadowBlur:5},new ue("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),Wr("ContextMenuButton",function(){var t=yi("Button");t.stretch=_e;var e=t.fb("ButtonBorder");return e instanceof yt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new ht(0,0,2,3),e.spot2=new ht(1,1,-2,-2)),t}),Wr("PanelExpanderButton",function(t){var e=If(t,"COLLAPSIBLE"),n=yi("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},yi(yt,{name:"ButtonIcon",strokeWidth:2},new ue("geometryString","visible",function(i){return i?n._buttonExpandedFigure:n._buttonCollapsedFigure}).Fo(e)));return t=n.fb("ButtonBorder"),t instanceof yt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(i,r){var a=r.diagram;if(a!==null&&!a.isReadOnly){var h=r.Yg();h===null&&(h=r.part),h!==null&&(r=h.fb(e),r!==null&&(i.handled=!0,a.Da("Collapse/Expand Panel"),r.visible=!r.visible,a.eb("Collapse/Expand Panel")))}},n}),Wr("CheckBoxButton",function(t){var e=If(t);return t=yi("Button",{desiredSize:new dt(14,14)},yi(yt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:he,geometryStretch:To,visible:!1},e!==""?new ue("visible",e).px():[])),t.click=function(n,i){if(i instanceof X){var r=n.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){n.handled=!0;var a=i.fb("ButtonIcon");r.Da("checkbox"),a.visible=!a.visible,typeof i._doClick=="function"&&i._doClick(n,i),r.eb("checkbox")}}},t}),Wr("CheckBox",function(t){t=If(t),t=yi("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new At(0,1,0,0)});var e=yi(X,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),st.None=ae=new $(st,"None",0),st.Default=Ki=new $(st,"Default",0),st.Vertical=Qe=new $(st,"Vertical",4),st.Horizontal=_e=new $(st,"Horizontal",5),st.Fill=he=new $(st,"Fill",3),st.Uniform=To=new $(st,"Uniform",1),st.UniformToFill=gg=new $(st,"UniformToFill",2),st.FlipVertical=dg=new $(st,"FlipVertical",1),st.FlipHorizontal=fg=new $(st,"FlipHorizontal",2),st.FlipBoth=cg=new $(st,"FlipBoth",3),st.make=yi,st.getBuilders=function(){var t=new ct,e;for(e in Dh)if(e!==e.toLowerCase()){var n=Dh.I(e);typeof n=="function"&&t.add(e,n)}return t.freeze(),t},st.defineBuilder=Wr,st.build=function(t,e){var n=Dh.I(t);if(typeof n=="function"&&(n=n(null),n instanceof st))return e&&n.set(e),n;B('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},st.takeBuilderArgument=If;function dl(){this.ic=!1,this.va="",this.bp=-1,this.hb=this.Wo=this.Ff=null,this.j="",this.cb=this.xi=this.Hc=this.rh=this.Th=this.F=this.Ga=this.ga=this.W=this.Eh=this.Gf=this.Qd=this.Gh=this.Hh=this.Jh=this.Ih=this.Fh=this.qh=this.uh=this.oh=null,this.u=tl,this.m=Um,this.$f=Ki,this.Db=this.vi=1,this.ui=ae,this.le=this.wi=this.nb=null,this.Ic="category"}dl.prototype.copy=function(){var t=new dl;return t.va=this.va,t.bp=this.bp,t.Ff=this.Ff,t.hb=this.hb,t.j=this.j,t.oh=this.oh,t.uh=this.uh,t.qh=this.qh,t.Fh=this.Fh,t.Ih=this.Ih,t.Jh=this.Jh,t.Hh=this.Hh,t.Gh=this.Gh,t.Qd=this.Qd,t.Gf=this.Gf,t.Eh=this.Eh,t.W=this.W,t.ga=this.ga,t.Ga=this.Ga,t.F=this.F,t.Th=this.Th,t.rh=this.rh,t.Hc=this.Hc,t.xi=this.xi,t.cb=this.cb,t.u=this.u.J(),t.m=this.m.J(),t.$f=this.$f,t.vi=this.vi,t.Db=this.Db,t.ui=this.ui,t.nb=this.nb,t.wi=this.wi,t.le=this.le,t.Ic=this.Ic,t};function Fs(){this.u=-1/0,this.m=0,this.F=dr,this.Oq=Ln,this.j=this.W="None"}Fs.prototype.copy=function(){var t=new Fs;return t.u=this.u,t.m=this.m,t.F=this.F.J(),t.Oq=this.Oq,t.W=this.W,t.j=this.j,t},Fs.className="LinkElementSettings";function mg(){this.tj=this.Qi=Je,this.sj=this.Pi=this.rj=this.Oi=NaN,this.sr=this.Kp=null,this.tr=this.Lp=1/0}mg.prototype.copy=function(){var t=new mg;return t.Qi=this.Qi.J(),t.tj=this.tj.J(),t.Oi=this.Oi,t.rj=this.rj,t.Pi=this.Pi,t.sj=this.sj,t.Kp=this.Kp,t.sr=this.sr,t.Lp=this.Lp,t.tr=this.tr,t},mg.className="LinkSettings";function fl(){this.Ta=[1,0,0,1,0,0]}fl.prototype.copy=function(){var t=new fl;return t.Ta[0]=this.Ta[0],t.Ta[1]=this.Ta[1],t.Ta[2]=this.Ta[2],t.Ta[3]=this.Ta[3],t.Ta[4]=this.Ta[4],t.Ta[5]=this.Ta[5],t},fl.prototype.translate=function(t,e){this.Ta[4]+=this.Ta[0]*t+this.Ta[2]*e,this.Ta[5]+=this.Ta[1]*t+this.Ta[3]*e},fl.prototype.scale=function(t,e){this.Ta[0]*=t,this.Ta[1]*=t,this.Ta[2]*=e,this.Ta[3]*=e},fl.className="STransform";function jh(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Jw=[],this.pattern=null}jh.prototype.addColorStop=function(t,e){this.Jw.push({offset:t,color:e})},jh.className="SGradient";function Pr(t,e){this.ownerDocument=t=e===void 0?U.document:e,this.Jz="http://www.w3.org/2000/svg",t!==void 0&&(this.Sa=this.Vb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.po=null,this.context=new cl(this)}Pr.prototype.resize=function(t,e,n,i){return this.width!==t||this.height!==e?(this.style.width=n+"px",this.style.height=i+"px",this.Sa.setAttributeNS(null,"width",n+"px"),this.Sa.setAttributeNS(null,"height",i+"px"),this.Sa.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.bw.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.bw.firstElementChild.setAttributeNS(null,"height",i+"px"),!0):!1},Pr.prototype.Vb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.Jz,t),mt(e))for(var i in e)t.setAttributeNS(i==="href"?"http://www.w3.org/1999/xlink":"",i,e[i]);return n!==void 0&&(t.textContent=n),t},Pr.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},Pr.prototype.focus=function(){this.Sa.focus()},Pr.prototype.Pw=function(){this.ownerDocument=null},I.Object.defineProperties(Pr.prototype,{width:{get:function(){return this.Sa.width.baseVal.value},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height.baseVal.value},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),Pr.className="SVGSurface";function cl(t){this.qs=t,this.svg=t.Sa,this.stack=[],this.md=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Lg=this.Yq=this.Xq=0,this.Xr=null,this.path=[],this.et=!1,this.Og=null,this.pj=0,this.Fe=new fl,$r(this,1,0,0,1,0,0);var e=Ms++,n=this.Vb("clipPath",{id:"mainClip"+e});n.appendChild(this.Vb("rect",{x:0,y:0,width:t.width,height:t.height})),this.bw=n,this.qs.Sa.appendChild(n),this.md[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.Lz={}}l=cl.prototype,l.arc=function(t,e,n,i,r,a,h,g){var f=2*Math.PI,c=f-1e-6,m=n*Math.cos(i),y=n*Math.sin(i),S=t+m,x=e+y,P=a?0:1;i=a?i-r:r-i,(1e-6<Math.abs(h-S)||1e-6<Math.abs(g-x))&&this.path.push(["L",S,+x]),0>i&&(i=i%f+f),i>c?(this.path.push(["A",n,n,0,1,P,t-m,e-y]),this.path.push(["A",n,n,0,1,P,S,x])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),P,t+n*Math.cos(r),e+n*Math.sin(r)])},l.beginPath=function(){this.path=[]},l.bezierCurveTo=function(t,e,n,i,r,a){this.path.push(["C",t,e,n,i,r,a])},l.clearRect=function(){},l.clip=function(){this.addPath("clipPath",this.path,this.Fe)},l.closePath=function(){this.path.push(["z"])},l.createLinearGradient=function(t,e,n,i){var r=new jh("linear");return r.x1=t,r.y1=e,r.x2=n,r.y2=i,r},l.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.Lz;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+Ms++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Vb("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Vb(Nh,r)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},l.createRadialGradient=function(t,e,n,i,r,a){var h=new jh("radial");return h.x1=t,h.y1=e,h.r1=n,h.x2=i,h.y2=r,h.r2=a,h},l.drawImage=function(t,e,n,i,r,a,h,g,f){var c="";t instanceof HTMLCanvasElement&&(c=t.toDataURL()),t instanceof HTMLImageElement&&(c=t.getAttribute("src"));var m=t instanceof HTMLImageElement?t.naturalWidth:t.width,y=t instanceof HTMLImageElement?t.naturalHeight:t.height;i===void 0&&(a=e,h=n,g=i=m,f=r=y),i=i||0,r=r||0,a=a||0,h=h||0,g=g||0,f=f||0,t={x:0,y:0,width:m||i,height:y||r,href:c},A.ca(i,g)&&A.ca(r,f)?c.toLowerCase().indexOf(".svg")===-1&&c.toLowerCase().indexOf("data:image/svg")===-1&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",c="",g/=i,f/=r,(a!==0||h!==0)&&(c+=" translate("+a+", "+h+")"),(g!==1||f!==1)&&(c+=" scale("+g+", "+f+")"),(e!==0||n!==0)&&(c+=" translate("+-e+", "+-n+")"),(e!==0||n!==0||i!==m||r!==y)&&(a="CLIP"+Ms++,h=this.Vb("clipPath",{id:a}),h.appendChild(this.Vb("rect",{x:e,y:n,width:i,height:r})),this.svg.appendChild(h),t["clip-path"]="url(#"+a+")"),yg(this,Nh,t,this.Fe,c),this.addElement(Nh,t)},l.fill=function(){this.addPath("fill",this.path,this.Fe)},l.sf=function(){this.clipInsteadOfFill?this.clip():this.fill()},l.fillRect=function(t,e,n,i){t=[t,e,n,i],t={x:t[0],y:t[1],width:t[2],height:t[3]},yg(this,"fill",t,this.Fe),this.addElement("rect",t)},l.fillText=function(t,e,n){t=[t,e,n],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},yg(this,"fill",e,this.Fe),this.addElement("text",e,t[0])},l.lineTo=function(t,e){this.path.push(["L",t,e])},l.moveTo=function(t,e){this.path.push(["M",t,e])},l.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},l.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},l.restore=function(){this.Fe=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},l.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Fe.copy())},l.setTransform=function(t,e,n,i,r,a){t===1&&e===0&&n===0&&i===1&&r===0&&a===0||$r(this,t,e,n,i,r,a)},l.scale=function(t,e){this.Fe.scale(t,e)},l.translate=function(t,e){this.Fe.translate(t,e)},l.transform=function(){},l.Pc=function(){},l.stroke=function(){this.addPath("stroke",this.path,this.Fe)},l.si=function(){this.clipInsteadOfFill||this.stroke()},l.Vb=function(t,e,n){return this.qs.Vb(t,e,n)},l.addElement=function(t,e,n){return t=this.Vb(t,e,n),0<this.md.length?this.md[this.md.length-1].appendChild(t):this.svg.appendChild(t),this.Xr=t};function yg(t,e,n,i,r){t.globalAlpha!==1&&(n.opacity=t.globalAlpha),e==="fill"?(t.fillStyle instanceof jh?n.fill=bx(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):e==="stroke"&&(n.fill="none",t.strokeStyle instanceof jh?n.stroke=bx(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i=i.Ta,i="matrix("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",r!==void 0&&(i+=r),n.transform=i}function bx(t,e){var n="GRAD"+Ms++;if(e.type==="linear")var i=t.Vb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")i=t.Vb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else throw Error("invalid gradient");var r=e.Jw;e=r.length;for(var a=[],h=0;h<e;h++){var g=r[h],f=g.color;g={offset:g.offset,"stop-color":f},/^rgba\(/.test(f)&&(f=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(f),g["stop-color"]="rgb("+f[1]+","+f[2]+","+f[3]+")",g["stop-opacity"]=f[4]),a.push(g)}for(a.sort(function(c,m){return c.offset>m.offset?1:-1}),r=0;r<e;r++)i.appendChild(t.Vb("stop",a[r]));return t.svg.appendChild(i),"url(#"+n+")"}l.addPath=function(t,e,n){for(var i=[],r=0;r<e.length;r++){var a=Jt(e[r]),h=[a.shift()];if(h[0]==="A")h.push(a.shift()+","+a.shift(),a.shift(),a.shift()+","+a.shift(),a.shift()+","+a.shift());else for(;a.length;)h.push(a.shift()+","+a.shift());i.push(h.join(" "))}e={d:i.join(" ")},t==="stroke"&&this.et&&(e["stroke-dasharray"]=this.Og.toString(),e["stroke-dashoffset"]=this.pj),yg(this,t,e,n),t==="clipPath"?(t="CLIP"+Ms++,n=this.Vb("clipPath",{id:t}),n.appendChild(this.Vb("path",e)),this.svg.appendChild(n),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)};function $r(t,e,n,i,r,a,h){var g=new fl;g.Ta=[e,n,i,r,a,h],e={},yg(t,"g",e,g),g=t.addElement("g",e),t.md.push(g)}l.Xl=function(t){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var e="SHADOW"+Ms++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=t.computePixelRatio();t=this.Vb("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/i});var r=this.Vb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),a=this.Vb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});i=this.Vb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/i,dy:this.shadowOffsetY/i});var h=this.Vb("feMerge",{});h.appendChild(this.Vb("feMergeNode",{in:"offsetBlur"})),h.appendChild(this.Vb("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(r),n.appendChild(a),n.appendChild(i),n.appendChild(h),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},l.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n};function xr(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Jr(t){t.shadowOffsetX=t.Xq,t.shadowOffsetY=t.Yq,t.shadowBlur=t.Lg}l.Gr=function(t,e){this.et=!0,this.Og=t,this.pj=e},l.Er=function(){this.et=!1},l.Oc=function(){},l.Ex=function(){},cl.prototype.rotate=function(){},cl.prototype.getImageData=function(){return null},cl.prototype.measureText=function(){return null},cl.className="SVGContext",z.prototype.bs=function(t){var e=new Pr(this,U.document);t===void 0&&(t=new jn);var n=this;return Ax(this,function(i,r){return i=zx(n,i,"SVG",e),i=i!==null?i.svg:null,typeof r=="function"?(r(i),null):i},t)},z.prototype.makeSvg=z.prototype.bs,z.prototype.Nu=function(t){return this.bs(t)},z.prototype.makeSVG=z.prototype.Nu,st.prototype.Qw=function(t,e){if(!(t instanceof cl))return!1;var n=null,i=t.Xr,r=this.transform,a=this.panel;(this.o&4096)!==0&&Of(this);var h=this.Eb,g=(this.o&256)!==0;t.clipInsteadOfFill&&(g=!1);var f=!1;if(this instanceof Rt&&(t.font=this.font),g){if(f=a.ke()?a.naturalBounds:a.actualBounds,this.ib!==null){var c=this.ib,m=c.x,y=c.y,S=c.width;c=c.height}else m=Math.max(h.x,f.x),y=Math.max(h.y,f.y),S=Math.min(h.right,f.right)-m,c=Math.min(h.bottom,f.bottom)-y;if(m>h.width+h.x||h.x>f.width+f.x||y>h.height+h.y||h.y>f.height+f.y)return!0;f=!0,$r(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(m,y,S,c),t.clip()}return this.li()&&!this.isVisible()||(t.Fe.Ta=[1,0,0,1,0,0],(this instanceof Rt&&1<this.lineCount||this instanceof yt&&1<this.geometry.figures.length)&&$r(t,1,0,0,1,0,0),m=!1,this.li()&&this.isShadowed&&e.Ge("drawShadows")&&(y=this.shadowOffset,t.iv(y.x*e.scale*e.kc,y.y*e.scale*e.kc,this.shadowBlur),Jr(t),t.shadowColor=this.shadowColor),y=!1,this.part&&e.Ge("drawShadows")&&(y=this.part.isShadowed),t.clipInsteadOfFill&&(y=!1),this.shadowVisible===!0?(Jr(t),m===!1&&y&&($r(t,1,0,0,1,0,0),t.Xl(e),m=!0)):this.shadowVisible===!1&&xr(t),S=this.naturalBounds,this.areaBackground!==null&&(ii(this,t,this.areaBackground,!0,!0,S,h),m===!1&&y&&($r(t,1,0,0,1,0,0),t.Xl(e),m=!0),this.areaBackground instanceof Et&&this.areaBackground.type===ri?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.sf(this.areaBackground)):t.fillRect(h.x,h.y,h.width,h.height)),c=!1,this instanceof X?$r(t,r.m11,r.m12,r.m21,r.m22,r.dx,r.dy):(t.Fe.Ta=[r.m11,r.m12,r.m21,r.m22,r.dx,r.dy],m===!1&&y&&(c=!0)),this.background!==null&&(m===!1&&y&&($r(t,1,0,0,1,0,0),t.Xl(e),m=!0),Qx(this,t,S,h)),y&&(this.background!==null||this.areaBackground!==null||a!==null&&(a.o&512)!==0||a!==null&&(a.type===X.Auto||a.type===X.Spot)&&a.vb()!==this)?(Ef(this,!0),this.shadowVisible===null&&xr(t),c=!1):Ef(this,!1),c&&m===!1&&($r(t,1,0,0,1,0,0),t.Xl(e),m=!0),this.ai(t,e),y&&(this.o&512)!==0&&Jr(t),this.li()&&y&&xr(t),g&&(t.restore(),f&&t.md.pop()),this instanceof X&&(n=t.md.pop()),m===!0&&t.md.pop(),(this instanceof Rt&&1<this.lineCount||this instanceof yt&&1<this.geometry.figures.length)&&(n=t.md.pop()),t.qs.po!==null&&(n===null&&(i===t.Xr?($r(t,1,0,0,1,0,0),n=t.md.pop()):n=t.Xr),t.qs.po(this,n)),this.svg=n),!0};function Di(t,e,n){this.ownerDocument=e=e===void 0?U.document:e,this.po=null,e=e.createElement("canvas"),e.tabIndex=0,this.Sa=e,this.Sa.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new ya(e,n),e.H=t}Di.prototype.resize=function(t,e,n,i){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0):!1},Di.prototype.toDataURL=function(t,e){return this.Sa.toDataURL(t,e)},Di.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},Di.prototype.focus=function(){this.Sa.focus()},Di.prototype.Pw=function(){this.ownerDocument=this.Sa.H=null},I.Object.defineProperties(Di.prototype,{width:{get:function(){return this.Sa.width},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),Di.className="CanvasSurface";function ya(t,e){this.Z=t.getContext?t.getContext("2d",e):null,this.Z===null&&B("Browser does not support HTML Canvas Element"),this.Es=this.Gs=this.Fs="",this.pm=!1,this.Lg=this.Yq=this.Xq=0,this.rl=new xt}l=ya.prototype,l.Ex=function(t){this.Z.imageSmoothingEnabled=t},l.arc=function(t,e,n,i,r,a){this.Z.arc(t,e,n,i,r,a)},l.beginPath=function(){this.Z.beginPath()},l.bezierCurveTo=function(t,e,n,i,r,a){this.Z.bezierCurveTo(t,e,n,i,r,a)},l.clearRect=function(t,e,n,i){this.Pc(),this.Z.clearRect(t,e,n,i)},l.clip=function(){this.Z.clip()},l.closePath=function(){this.Z.closePath()},l.createLinearGradient=function(t,e,n,i){return this.Z.createLinearGradient(t,e,n,i)},l.createPattern=function(t,e){return this.Z.createPattern(t,e)},l.createRadialGradient=function(t,e,n,i,r,a){return this.Z.createRadialGradient(t,e,n,i,r,a)},l.drawImage=function(t,e,n,i,r,a,h,g,f){i===void 0?this.Z.drawImage(t,e,n):this.Z.drawImage(t,e,n,i,r,a,h,g,f)},l.fill=function(){this.Z.fill()},l.fillRect=function(t,e,n,i){this.Z.fillRect(t,e,n,i)},l.fillText=function(t,e,n){this.Z.fillText(t,e,n)},l.getImageData=function(t,e,n,i){return this.Z.getImageData(t,e,n,i)},l.lineTo=function(t,e){this.Z.lineTo(t,e)},l.measureText=function(t){return this.Z.measureText(t)},l.moveTo=function(t,e){this.Z.moveTo(t,e)},l.quadraticCurveTo=function(t,e,n,i){this.Z.quadraticCurveTo(t,e,n,i)},l.rect=function(t,e,n,i){this.Z.rect(t,e,n,i)},l.restore=function(){this.Z.restore()},l.save=function(){this.Pc(),this.Z.save()},ya.prototype.rotate=function(t){this.rl.rotate(57.2958*t,0,0)},l=ya.prototype,l.setTransform=function(t,e,n,i,r,a){this.rl.setTransform(t,e,n,i,r,a)},l.scale=function(t,e){this.rl.scale(t,e)},l.translate=function(t,e){this.rl.translate(t,e)},l.stroke=function(){this.Z.stroke()},l.transform=function(t,e,n,i,r,a){if(t!==1||e!==0||n!==0||i!==1||r!==0||a!==0){var h=this.rl,g=h.m11*t+h.m21*e;t=h.m12*t+h.m22*e,e=h.m11*n+h.m21*i,n=h.m12*n+h.m22*i,h.dx=h.m11*r+h.m21*a+h.dx,h.dy=h.m12*r+h.m22*a+h.dy,h.m11=g,h.m12=t,h.m21=e,h.m22=n}},l.Pc=function(){var t=this.rl;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},l.sf=function(t){if(t instanceof Et&&t.type===ri){var e=t.lk;t=t.Hs,t>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.pm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.pm?this.clip():this.fill()},l.si=function(){this.pm||this.stroke()},l.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n},l.Gr=function(t,e){var n=this.Z;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)},l.Er=function(){var t=this.Z;t.setLineDash!==void 0&&(t.setLineDash(fN),t.lineDashOffset=0)},l.Oc=function(t){t&&(this.Fs=""),this.Es=this.Gs=""},I.Object.defineProperties(ya.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.Es!==t&&(this.Es=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.Fs!==t&&(this.Fs=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.Gs!==t&&(this.Gs=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.pm},set:function(t){this.pm=t}}});var fN=Object.freeze([]);ya.className="CanvasSurfaceContext";function vg(){this.F=this.m=this.u=this.j=0}vg.className="ColorNumbers";function Et(t,e){Ah||(ly(),Ah=!0),Oe(this),this._isFrozen=!1,t===void 0?(this.qa=Zr,this.kk="black"):typeof t=="string"?(this.qa=Zr,this.kk=t):(this.qa=t,this.kk="black"),t=this.qa,t===Lr?(this.Gd=pr,this.zk=nl):this.zk=t===ri?this.Gd=Gt:this.Gd=$e,this.cr=0,this.Ap=NaN,this.oe=this.Bq=this.ne=null,this.Hs=this.lk=0,e&&Object.assign(this,e)}Et.prototype.copy=function(){var t=new Et;return t.qa=this.qa,t.kk=this.kk,t.Gd=this.Gd.J(),t.zk=this.zk.J(),t.cr=this.cr,t.Ap=this.Ap,this.ne!==null&&(t.ne=this.ne.copy()),t.Bq=this.Bq,t},l=Et.prototype,l.freeze=function(){return this._isFrozen=!0,this.ne!==null&&this.ne.freeze(),this},l.ja=function(){return Object.isFrozen(this)&&B("cannot thaw constant: "+this),this._isFrozen=!1,this.ne!==null&&this.ne.ja(),this},l.ob=function(t){t.classType===Et&&(this.type=t)},l.toString=function(){var t="Brush(";if(this.type===Zr)t+=this.color;else if(t=this.type===Lr?t+"Linear ":this.type===ri?t+"Radial ":this.type===zh?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},l.addColorStop=function(t,e){return this._isFrozen&&ot(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&gt(t,"0 <= loc <= 1",Et,"addColorStop:loc"),this.ne===null&&(this.ne=new ct),this.ne.add(t,e),this.qa===Zr&&(this.type=Lr),this.oe=null,this},l.Cz=function(t,e){if(this._isFrozen&&ot(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Bh:e,this.type===Zr)wr(this.color),this.color=Eh(t,e);else if((this.type===Lr||this.type===ri)&&this.colorStops!==null)for(var n=this.colorStops.iterator;n.next();)wr(n.value),this.addColorStop(n.key,Eh(t,e));return this};function tw(t,e,n){return e=e===void 0||typeof e!="number"?.2:e,n=n===void 0?Bh:n,wr(t),Eh(e,n)}l.Dy=function(t,e){if(this._isFrozen&&ot(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Bh:e,this.type===Zr)wr(this.color),this.color=Eh(-t,e);else if((this.type===Lr||this.type===ri)&&this.colorStops!==null)for(var n=this.colorStops.iterator;n.next();)wr(n.value),this.addColorStop(n.key,Eh(-t,e));return this};function ew(t,e,n){return e=e===void 0||typeof e!="number"?.2:e,n=n===void 0?Bh:n,wr(t),Eh(-e,n)}function iy(t,e,n){wr(t),t=_t.j;var i=_t.u,r=_t.m,a=_t.F;return wr(e),n===void 0&&(n=.5),"rgba("+Math.round((_t.j-t)*n+t)+", "+Math.round((_t.u-i)*n+i)+", "+Math.round((_t.m-r)*n+r)+", "+Math.round((_t.F-a)*n+a)+")"}l.kx=function(){if(this.type===Zr)return Oh(this.color);if((this.type===Lr||this.type===ri)&&this.colorStops!==null){var t=this.colorStops;if(this.type===ri)return Oh(t.first().value);if(t.get(.5)!==null)return Oh(t.get(.5));if(t.count===2)return t=t.Ea(),Oh(iy(t[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,r=1,a=1;e.next();){var h=e.key,g=Math.abs(.5-e.key);r>a&&g<r?(n=h,r=g):a>=r&&g<a&&(i=h,a=g)}return n>i&&(a=n,n=i,i=a,a=r),r=i-n,Oh(iy(t.get(n),t.get(i),1-a/r))}return!1};function Oh(t){return t?t instanceof Et?t.kx():(wr(t),128>(299*_t.j+587*_t.u+114*_t.m)/1e3):!1}function Eh(t,e){switch(e){case Bh:e=100*ry(_t.j);var n=100*ry(_t.u),i=100*ry(_t.m);return xn.j=.4124564*e+.3575761*n+.1804375*i,xn.u=.2126729*e+.7151522*n+.072175*i,xn.m=.0193339*e+.119192*n+.9503041*i,xn.F=_t.F,e=ay(xn.j/Ih[0]),n=ay(xn.u/Ih[1]),i=ay(xn.m/Ih[2]),Wo.j=116*n-16,Wo.u=500*(e-n),Wo.m=200*(n-i),Wo.F=xn.F,Wo.j=Math.min(100,Math.max(0,Wo.j+100*t)),t=(Wo.j+16)/116,e=t-Wo.m/200,xn.j=Ih[0]*nw(Wo.u/500+t),xn.u=Ih[1]*(Wo.j>Af*hy?Math.pow(t,3):Wo.j/Af),xn.m=Ih[2]*nw(e),xn.F=Wo.F,t=-.969266*xn.j+1.8760108*xn.u+.041556*xn.m,e=.0556434*xn.j+-.2040259*xn.u+1.0572252*xn.m,_t.j=255*sy((3.2404542*xn.j+-1.5371385*xn.u+-.4985314*xn.m)/100),_t.u=255*sy(t/100),_t.m=255*sy(e/100),_t.F=xn.F,_t.j=Math.round(_t.j),255<_t.j?_t.j=255:0>_t.j&&(_t.j=0),_t.u=Math.round(_t.u),255<_t.u?_t.u=255:0>_t.u&&(_t.u=0),_t.m=Math.round(_t.m),255<_t.m?_t.m=255:0>_t.m&&(_t.m=0),"rgba("+_t.j+", "+_t.u+", "+_t.m+", "+_t.F+")";case iw:return oy(),oi.m=Math.min(100,Math.max(0,oi.m+100*t)),"hsla("+oi.j+", "+oi.u+"%, "+oi.m+"%, "+oi.F+")";default:B("Unknown color space: "+e)}}function wr(t){Ah||(ly(),Ah=!0);var e=uy;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,_t.j=t[0],_t.u=t[1],_t.m=t[2],_t.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,_t.j=0,_t.u=0,_t.m=0,_t.F=1)}}function oy(){var t=_t.j/255,e=_t.u/255,n=_t.m/255,i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r;if(r=(i+r)/2,a===0)var h=t=0;else{switch(i){case t:h=(e-n)/a%6;break;case e:h=(n-t)/a+2;break;case n:h=(t-e)/a+4}h*=60,0>h&&(h+=360),t=a/(1-Math.abs(2*r-1))}oi.j=Math.round(h),oi.u=Math.round(100*t),oi.m=Math.round(100*r),oi.F=_t.F}function ry(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function sy(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function ay(t){return t>hy?Math.pow(t,1/3):(Af*t+16)/116}function nw(t){var e=t*t*t;return e>hy?e:(116*t-16)/Af}function pl(t,e){typeof t!="string"&&(t instanceof Et||B("Value for "+e+" must be a color string or a Brush, not "+t))}function ly(){uy=_i?new Di(null,void 0,{AA:!0}).context:null}I.Object.defineProperties(Et.prototype,{type:{get:function(){return this.qa},set:function(t){this._isFrozen&&ot(this,t),this.qa=t,this.start.Fc()&&(t===Lr?this.start=pr:t===ri&&(this.start=Gt)),this.end.Fc()&&(t===Lr?this.end=nl:t===ri&&(this.end=Gt)),this.oe=null}},color:{get:function(){return this.kk},set:function(t){this._isFrozen&&ot(this,t),this.kk=t,this.oe=null}},start:{get:function(){return this.Gd},set:function(t){this._isFrozen&&ot(this,t),this.Gd=t.J(),this.oe=null}},end:{get:function(){return this.zk},set:function(t){this._isFrozen&&ot(this,t),this.zk=t.J(),this.oe=null}},startRadius:{get:function(){return this.cr},set:function(t){this._isFrozen&&ot(this,t),0>t&&gt(t,">= zero",Et,"startRadius"),this.cr=t,this.oe=null}},endRadius:{get:function(){return this.Ap},set:function(t){this._isFrozen&&ot(this,t),0>t&&gt(t,">= zero",Et,"endRadius"),this.Ap=t,this.oe=null}},colorStops:{get:function(){return this.ne},set:function(t){this._isFrozen&&ot(this,t),this.ne=t,this.oe=null}},pattern:{get:function(){return this.Bq},set:function(t){this._isFrozen&&ot(this,t),this.Bq=t,this.oe=null}}}),Et.prototype.isDark=Et.prototype.kx,Et.prototype.darkenBy=Et.prototype.Dy,Et.prototype.lightenBy=Et.prototype.Cz,Et.prototype.addColorStop=Et.prototype.addColorStop;var hy=216/24389,Af=24389/27,Ih=[95.047,100,108.883],uy=null,_t=new vg,oi=new vg,xn=new vg,Wo=new vg,Ah=!1;Et.className="Brush";var Zr;Et.Solid=Zr=new $(Et,"Solid",0);var Lr;Et.Linear=Lr=new $(Et,"Linear",1);var ri;Et.Radial=ri=new $(Et,"Radial",2);var zh;Et.Pattern=zh=new $(Et,"Pattern",4);var Bh;Et.Lab=Bh=new $(Et,"Lab",5);var iw;Et.HSL=iw=new $(Et,"HSL",6),Et.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},Et.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;Ah||(ly(),Ah=!0);var e=uy;if(e===null)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n?!0:(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},Et.lighten=function(t){return tw(t)},Et.lightenBy=tw,Et.darken=function(t){return ew(t)},Et.darkenBy=ew,Et.mix=iy,Et.isDark=Oh;function Se(){this.va="Base"}Se.prototype.measure=function(){},Se.prototype.Fz=function(t,e,n,i,r){t.measure(e,n,i,r)},Se.prototype.arrange=function(){},Se.prototype.sy=function(t,e,n,i,r,a){t.arrange(e,n,i,r,a)},Se.prototype.Pz=function(t){t.Mj()},Se.prototype.tc=function(){},I.Object.defineProperties(Se.prototype,{name:{get:function(){return this.va},set:function(t){this.va=t}},classType:{get:function(){return X}}}),Se.prototype.remeasureObject=Se.prototype.Pz,Se.prototype.arrangeElement=Se.prototype.sy,Se.prototype.measureElement=Se.prototype.Fz,Se.className="PanelLayout";function zf(){this.va="Base"}O(zf,Se),zf.prototype.measure=function(t,e,n,i,r,a,h){var g=i.length;t=Mr(t);for(var f=0;f<g;f++){var c=i[f];if(c.visible||c===t){var m=c.margin,y=m.right+m.left;m=m.top+m.bottom,c.measure(e,n,a,h);var S=c.measuredBounds;y=Math.max(S.width+y,0),m=Math.max(S.height+m,0),S=c.position.x;var x=c.position.y;isFinite(S)||(S=0),isFinite(x)||(x=0),c instanceof yt&&c.isGeometryPositioned&&(c=c.strokeWidth/2,S-=c,x-=c),Ve(r,S,x,y,m)}}},zf.prototype.arrange=function(t,e,n){var i=e.length,r=t.padding;for(t=n.x-r.left,n=n.y-r.top,r=0;r<i;r++){var a=e[r],h=a.measuredBounds,g=a.margin,f=a.position.x,c=a.position.y;if(f=isNaN(f)?-t:f-t,c=isNaN(c)?-n:c-n,a instanceof yt&&a.isGeometryPositioned){var m=a.strokeWidth/2;f-=m,c-=m}a.visible&&a.arrange(f+g.left,c+g.top,h.width,h.height)}};function Bf(){this.va="Base"}O(Bf,Se),Bf.prototype.measure=function(t,e,n,i,r,a,h){var g=i.length;e=Kt(),a=Mr(t);for(var f=0;f<g;f++){var c=i[f];if(c.visible||c===a){var m=ho(c,!1);if(m!==ae&&m!==_e)e.push(c);else{c.measure(1/0,n,0,h),m=c.margin,c=c.measuredBounds;var y=Math.max(c.height+m.top+m.bottom,0);r.width+=Math.max(c.width+m.right+m.left,0),r.height=Math.max(r.height,y)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(n=Math.min(r.height,t.maxSize.height)),t=0;t<i;t++)f=e[t],(f.visible||f===a)&&(m=f.margin,g=m.right+m.left,m=m.top+m.bottom,f.measure(1/0,n,0,h),f=f.measuredBounds,m=Math.max(f.height+m,0),r.width+=Math.max(f.width+g,0),r.height=Math.max(r.height,m));Xt(e)},Bf.prototype.arrange=function(t,e,n){for(var i=e.length,r=t.padding,a=r.top,h=t.isOpposite,g=h?n.width:r.left,f=0;f<i;f++){var c=a,m=e[f];if(m.visible){var y=m.measuredBounds,S=m.margin,x=S.top+S.bottom,P=a+r.bottom,L=y.height,N=ho(m,!1);(isNaN(m.desiredSize.height)&&N===he||N===Qe)&&(L=Math.max(n.height-x-P,0)),x=L+x+P,P=m.alignment,P.Sb()&&(P=t.defaultAlignment),P.pb()||(P=Gt),h&&(g-=y.width+S.left+S.right),m.arrange(g+P.offsetX+S.left,c+P.offsetY+S.top+(n.height*P.y-x*P.y),y.width,L),h||(g+=y.width+S.left+S.right)}}};function Gf(){this.va="Base"}O(Gf,Se),Gf.prototype.measure=function(t,e,n,i,r,a){var h=i.length;n=Kt();for(var g=Mr(t),f=0;f<h;f++){var c=i[f];if(c.visible||c===g){var m=ho(c,!1);if(m!==ae&&m!==Qe)n.push(c);else{var y=c.margin;m=y.right+y.left,y=y.top+y.bottom,c.measure(e,1/0,a,0),c=c.measuredBounds,cr(r,Math.max(r.width,Math.max(c.width+m,0)),r.height+Math.max(c.height+y,0))}}}if(i=n.length,i!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<i;t++)f=n[t],(f.visible||f===g)&&(c=f.margin,h=c.right+c.left,c=c.top+c.bottom,f.measure(e,1/0,a,0),f=f.measuredBounds,c=Math.max(f.height+c,0),r.width=Math.max(r.width,Math.max(f.width+h,0)),r.height+=c);Xt(n)}},Gf.prototype.arrange=function(t,e,n){for(var i=e.length,r=t.padding,a=r.left,h=t.isOpposite,g=h?n.height:r.top,f=0;f<i;f++){var c=a,m=e[f];if(m.visible){var y=m.measuredBounds,S=m.margin,x=S.left+S.right,P=a+r.right,L=y.width,N=ho(m,!1);(isNaN(m.desiredSize.width)&&N===he||N===_e)&&(L=Math.max(n.width-x-P,0)),x=L+x+P,P=m.alignment,P.Sb()&&(P=t.defaultAlignment),P.pb()||(P=Gt),h&&(g-=y.height+S.bottom+S.top),m.arrange(c+P.offsetX+S.left+(n.width*P.x-x*P.x),g+P.offsetY+S.top,L,y.height),h||(g+=y.height+S.bottom+S.top)}}};function Rf(){this.va="Base"}O(Rf,Se),Rf.prototype.measure=function(t,e,n,i,r,a,h){var g=i.length,f=t.vb(),c=f.margin,m=c.right+c.left,y=c.top+c.bottom;f.measure(e,n,a,h);var S=f.measuredBounds;a=S.width,h=S.height;var x=Math.max(a+m,0),P=Math.max(h+y,0),L=t.isClipping,N=G.allocAt(-c.left,-c.top,x,P),k=G.allocAt(0,0,a,h);gy(f,k,!0),a=k.width,h=k.height;for(var F=!0,D=Mr(t),j=0;j<g;j++){var E=i[j],R=e,J=n;if(E!==f&&(E.visible||E===D)){switch(c=E.margin,x=c.right+c.left,P=c.top+c.bottom,S=ho(E,!1),S){case he:R=a,J=h;break;case _e:R=a;break;case Qe:J=h}E.measure(R,J,0,0),S=E.measuredBounds,x=Math.max(S.width+x,0),P=Math.max(S.height+P,0),R=E.alignment,R.Sb()&&(R=t.defaultAlignment),R.pb()||(R=Gt);var it=E.alignmentFocus;it.Sb()&&(it=Gt),J=null,E instanceof X&&E.Pe!==""&&(J=E.fb(E.Pe),J===E&&(J=null));var nt=k.x,et=k.y;if(J!==null){for(E.arrange(0,0,S.width,S.height),c=J.actualBounds,c=C.allocAt(c.x+(it.x*c.width-it.offsetX),c.y+(it.y*c.height-it.offsetY)),J=J.panel;J!==E;)J.transform.Fa(c),J=J.panel;nt+=R.x*a+R.offsetX-c.x,et+=R.y*h+R.offsetY-c.y,C.free(c)}else nt+=R.x*a+R.offsetX-(it.x*S.width+it.offsetX)-c.left,et+=R.y*h+R.offsetY-(it.y*S.height+it.offsetY)-c.top;F?(F=!1,r.h(nt,et,x,P)):Ve(r,nt,et,x,P)}}switch(F?r.assign(N):L?r.Gu(k.x,k.y,k.width,k.height):Ve(r,N.x,N.y,N.width,N.height),G.free(N),G.free(k),S=f.stretch,S===Ki&&(S=ho(f,!1)),S){case ae:return;case he:if(!isFinite(e)&&!isFinite(n))return;break;case _e:if(!isFinite(e))return;break;case Qe:if(!isFinite(n))return}for(S=f.measuredBounds,a=S.width,h=S.height,x=Math.max(a+m,0),P=Math.max(h+y,0),c=f.margin,k=G.allocAt(-c.left,-c.top,x,P),gy(f,k,!0),a=k.width,h=k.height,e=0;e<g;e++)n=i[e],n===f||!n.visible&&n!==D||(c=n.margin,x=c.right+c.left,P=c.top+c.bottom,S=n.measuredBounds,x=Math.max(S.width+x,0),P=Math.max(S.height+P,0),m=n.alignment,m.Sb()&&(m=t.defaultAlignment),m.pb()||(m=Gt),n=n.alignmentFocus,n.Sb()&&(n=Gt),F?(F=!1,r.h(m.x*a+m.offsetX-(n.x*S.width+n.offsetX)-c.left,m.y*h+m.offsetY-(n.y*S.height+n.offsetY)-c.top,x,P)):Ve(r,m.x*a+m.offsetX-(n.x*S.width+n.offsetX)-c.left,m.y*h+m.offsetY-(n.y*S.height+n.offsetY)-c.top,x,P));F?r.assign(N):L?r.Gu(k.x,k.y,k.width,k.height):Ve(r,N.x,N.y,N.width,N.height),G.free(k)},Rf.prototype.arrange=function(t,e,n){var i=e.length,r=t.vb(),a=r.measuredBounds,h=a.width,g=a.height,f=t.padding;a=f.left,f=f.top;var c=a-n.x,m=f-n.y;for(r.arrange(c,m,h,g),h=G.allocAt(0,0,h,g),gy(r,h,!1),g=0;g<i;g++){var y=e[g];if(y!==r){c=y.measuredBounds;var S=c.width,x=c.height;m=y.alignment,m.Sb()&&(m=t.defaultAlignment),m.pb()||(m=Gt);var P=y.alignmentFocus;if(P.Sb()&&(P=Gt),c=null,y instanceof X&&y.Pe!==""&&(c=y.fb(y.Pe),c===y&&(c=null)),c!==null){var L=c.actualBounds;for(P=C.allocAt(L.x+(P.x*L.width-P.offsetX),L.y+(P.y*L.height-P.offsetY)),c=c.panel;c!==y;)c.transform.Fa(P),c=c.panel;c=m.x*h.width+m.offsetX-P.x,m=m.y*h.height+m.offsetY-P.y,C.free(P)}else c=m.x*h.width+m.offsetX-(P.x*S+P.offsetX),m=m.y*h.height+m.offsetY-(P.y*x+P.offsetY);c+=h.x-n.x,m+=h.y-n.y,y.visible&&y.arrange(a+c,f+m,S,x)}}G.free(h)};function gy(t,e,n){var i=null;if(t instanceof X&&t.Pe!==""&&(i=t.fb(t.Pe),i===t&&(i=null)),i!==null)for(n&&t.arrange(0,0,e.width,e.height),e.assign(i.actualBounds),i=i.panel;i!==t;)i.transform.So(e),i=i.panel}function Vf(){this.va="Base"}O(Vf,Se),Vf.prototype.measure=function(t,e,n,i,r,a,h){var g=i.length,f=t.vb(),c=f.margin,m=e,y=n,S=c.right+c.left,x=c.top+c.bottom;f.measure(e,n,a,h),c=f.measuredBounds;var P=0,L=null;f instanceof yt&&(L=f,P=L.strokeWidth*L.scale);var N=Math.max(c.width+S,0);c=Math.max(c.height+x,0);var k=cy(f),F=k.x*N+k.offsetX;k=k.y*c+k.offsetY;var D=py(f),j=D.x*N+D.offsetX;for(D=D.y*c+D.offsetY,isFinite(e)&&(m=Math.max(Math.abs(F-j)-P,0)),isFinite(n)&&(y=Math.max(Math.abs(k-D)-P,0)),P=dt.alloc(),P.h(0,0),t=Mr(t),D=0;D<g;D++)k=i[D],k===f||!k.visible&&k!==t||(c=k.margin,N=c.right+c.left,F=c.top+c.bottom,k.measure(m,y,0,0),c=k.measuredBounds,N=Math.max(c.width+N,0),c=Math.max(c.height+F,0),P.h(Math.max(N,P.width),Math.max(c,P.height)));if(g===1)r.width=N,r.height=c,dt.free(P);else{switch(k=cy(f),D=py(f),g=i=0,D.x!==k.x&&D.y!==k.y&&(i=P.width/Math.abs(D.x-k.x),g=P.height/Math.abs(D.y-k.y)),dt.free(P),P=0,L!==null&&(P=L.strokeWidth*L.scale,xy(L)===To&&(i=g=Math.max(i,g))),i+=Math.abs(k.offsetX)+Math.abs(D.offsetX)+P,g+=Math.abs(k.offsetY)+Math.abs(D.offsetY)+P,L=f.stretch,L===Ki&&(L=ho(f,!1)),L){case ae:h=a=0;break;case he:isFinite(e)&&(i=e),isFinite(n)&&(g=n);break;case _e:isFinite(e)&&(i=e),h=0;break;case Qe:a=0,isFinite(n)&&(g=n)}f.Mj(),f.measure(i,g,a,h),r.width=f.measuredBounds.width+S,r.height=f.measuredBounds.height+x}},Vf.prototype.arrange=function(t,e){var n=e.length,i=t.vb(),r=i.measuredBounds,a=G.alloc();a.h(0,0,1,1);var h=i.margin,g=h.left;h=h.top;var f=t.padding,c=f.left;f=f.top,i.arrange(c+g,f+h,r.width,r.height);var m=cy(i),y=py(i),S=m.y*r.height+m.offsetY,x=y.x*r.width+y.offsetX;for(y=y.y*r.height+y.offsetY,a.x=m.x*r.width+m.offsetX,a.y=S,Ve(a,x,y,0,0),a.x+=g+c,a.y+=h+f,r=0;r<n;r++)g=e[r],g!==i&&(c=g.measuredBounds,h=g.margin,f=Math.max(c.width+h.right+h.left,0),m=Math.max(c.height+h.top+h.bottom,0),S=g.alignment,S.Sb()&&(S=t.defaultAlignment),S.pb()||(S=Gt),f=a.width*S.x+S.offsetX-f*S.x+h.left+a.x,h=a.height*S.y+S.offsetY-m*S.y+h.top+a.y,g.visible&&(oo(a.x,a.y,a.width,a.height,f,h,c.width,c.height)?g.arrange(f,h,c.width,c.height):g.arrange(f,h,c.width,c.height,new G(a.x,a.y,a.width,a.height))));G.free(a)};function Yf(){this.va="Base",this.name="Table"}O(Yf,Se),Yf.prototype.measure=function(t,e,n,i,r){for(var a=i.length,h=Kt(),g=Kt(),f=0;f<a;f++){var c=i[f],m=c instanceof X?c:null;if(m===null||m.type!==X.TableRow&&m.type!==X.TableColumn||!c.visible)h.push(c);else{g.push(m);for(var y=m.R.s,S=y.length,x=0;x<S;x++){var P=y[x];m.type===X.TableRow?P.row=c.row:m.type===X.TableColumn&&(P.column=c.column),h.push(P)}}}a=h.length,a===0&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var L=[],N=0;N<a;N++){var k=h[N];k.visible&&(mi(k,!0),pa(k,!0),L[k.row]||(L[k.row]=[]),L[k.row][k.column]||(L[k.row][k.column]=[]),L[k.row][k.column].push(k))}Xt(h);var F=Kt(),D=Kt(),j=Kt(),E={count:0},R={count:0},J=e,it=n,nt=t.rowDefs,et=t.colDefs,Y=null;a=nt.length;for(var vt=0;vt<a;vt++)Y=nt[vt],Y!==void 0&&(Y.actual=0);a=et.length;for(var ut=0;ut<a;ut++)Y=et[ut],Y!==void 0&&(Y.actual=0);for(var jt=L.length,Ht=0,Me=0;Me<jt;Me++)L[Me]&&(Ht=Math.max(Ht,L[Me].length));var je=Math.min(t.topIndex,jt-1),sn=Math.min(t.leftIndex,Ht-1),ke=0;jt=L.length;for(var ls=Mr(t),ge=0;ge<jt;ge++)if(L[ge]){Ht=L[ge].length;var mo=t.getRowDefinition(ge);mo.actual=0;for(var an=mo.jc=0;an<Ht;an++)if(L[ge][an]){var hs=t.getColumnDefinition(an);F[an]===void 0&&(hs.actual=0,hs.jc=0,F[an]=!0);for(var li=L[ge][an],Ii=li.length,Jn=0;Jn<Ii;Jn++){var Yn=li[Jn];if(Yn.visible||Yn===ls){var Xs=1<Yn.rowSpan||1<Yn.columnSpan;Xs&&(ge<je||an<sn||D.push(Yn));var yo=Yn.margin,au=yo.right+yo.left,Zn=yo.top+yo.bottom,ln=pg(Yn,mo,hs,!1),id=Yn.desiredSize,El=!isNaN(id.height),jo=!isNaN(id.width)&&El;if(Xs||ln===ae||jo||ge<je||an<sn||(E[an]!==void 0||ln!==he&&ln!==_e||(E[an]=-1,E.count++),R[ge]!==void 0||ln!==he&&ln!==Qe||(R[ge]=-1,R.count++),j.push(Yn)),Yn.measure(1/0,1/0,0,0),!(ge<je||an<sn)){var Un=Yn.measuredBounds,ka=Math.max(Un.width+au,0),Qn=Math.max(Un.height+Zn,0);if(Yn.rowSpan===1&&(ln===ae||ln===_e)){Y=t.getRowDefinition(ge);var _s=Y.Qc();ke=Math.max(Qn-Y.actual,0),ke+_s>it&&(ke=Math.max(it-_s,0));var lp=Y.ma===0;Y.jc=Y.jc+ke,Y.actual=Y.ma+ke,it=Math.max(it-(ke+(lp?_s:0)),0)}if(Yn.columnSpan===1&&(ln===ae||ln===Qe)){Y=t.getColumnDefinition(an);var od=Y.Qc();ke=Math.max(ka-Y.actual,0),ke+od>J&&(ke=Math.max(J-od,0));var Bv=Y.ma===0;Y.jc=Y.jc+ke,Y.actual=Y.ma+ke,J=Math.max(J-(ke+(Bv?od:0)),0)}Xs&&Yn.Mj()}}}}}Xt(F);var nr=0,Cr=0;a=t.columnCount;for(var Il=0;Il<a;Il++){var Ks=et[Il];Ks!==void 0&&(nr+=isNaN(Ks.Ac)?Ks.jc:Ks.Ac,Ks.jc!==0&&(nr+=Ks.Qc()))}a=t.rowCount;for(var lu=0;lu<a;lu++){var Hs=nt[lu];Hs!==void 0&&(Cr+=isNaN(Hs.Ac)?Hs.jc:Hs.Ac,Hs.jc!==0&&(Cr+=Hs.Qc()))}J=Math.max(e-nr,0);var ir=it=Math.max(n-Cr,0),us=J;a=j.length;for(var Xn=0;Xn<a;Xn++){var Oo=j[Xn],hp=t.getRowDefinition(Oo.row),Tr=t.getColumnDefinition(Oo.column),hu=Oo.measuredBounds,vo=Oo.margin,Na=vo.right+vo.left,Eo=vo.top+vo.bottom;E[Oo.column]=Tr.jc===0&&E[Oo.column]!==void 0?Math.max(hu.width+Na,E[Oo.column]):null,R[Oo.row]=hp.jc===0&&R[Oo.row]!==void 0?Math.max(hu.height+Eo,R[Oo.row]):null}var Al=0,uu=0,qi;for(qi in R)qi!=="count"&&(Al+=R[qi]);for(qi in E)qi!=="count"&&(uu+=E[qi]);for(var Ge=dt.alloc(),rd=0;rd<a;rd++){var Tn=j[rd];if(Tn.visible||Tn===ls){var de=t.getRowDefinition(Tn.row),Fn=t.getColumnDefinition(Tn.column),Fr=0;isFinite(Fn.width)?Fr=Fn.width:(isFinite(J)&&E[Tn.column]!==null?uu===0?Fr=Fn.actual+J:Fr=E[Tn.column]/uu*us:E[Tn.column]!==null?Fr=J:Fr=Fn.actual||J,Fr=Math.max(0,Fr-Fn.Qc()));var gs=0;switch(isFinite(de.height)?gs=de.height:(isFinite(it)&&R[Tn.row]!==null?Al===0?gs=de.actual+it:gs=R[Tn.row]/Al*ir:R[Tn.row]!==null?gs=it:gs=de.actual||it,gs=Math.max(0,gs-de.Qc())),Ge.h(Math.max(Fn.minimum,Math.min(Fr,Fn.maximum)),Math.max(de.minimum,Math.min(gs,de.maximum))),ln=pg(Tn,de,Fn,!1),ln){case _e:Ge.height=Math.max(Ge.height,de.actual+it);break;case Qe:Ge.width=Math.max(Ge.width,Fn.actual+J)}var Ca=Tn.margin,Gv=Ca.right+Ca.left,up=Ca.top+Ca.bottom;Tn.Mj(),Tn.measure(Ge.width,Ge.height,Fn.minimum,de.minimum);var gu=Tn.measuredBounds,Ta=Math.max(gu.width+Gv,0),zl=Math.max(gu.height+up,0);isFinite(J)&&(Ta=Math.min(Ta,Ge.width)),isFinite(it)&&(zl=Math.min(zl,Ge.height));var _n=0;_n=de.actual,de.actual=Math.max(de.actual,zl),de.jc=Math.max(de.jc,zl),ke=de.actual-_n,it=Math.max(it-ke,0),R[Tn.row]===null&&(ir=Math.max(ir-ke,0)),_n=Fn.actual,Fn.actual=Math.max(Fn.actual,Ta),Fn.jc=Math.max(Fn.jc,Ta),ke=Fn.actual-_n,J=Math.max(J-ke,0),E[Tn.column]===null&&(us=Math.max(us-ke,0))}}Xt(j);var Dr=dt.alloc(),So=Kt(),xi=Kt();if(a=D.length,a!==0){for(var Ws=0;Ws<jt;Ws++)if(L[Ws]){Ht=L[Ws].length;var du=t.getRowDefinition(Ws);So[Ws]=du.actual;for(var $s=0;$s<Ht;$s++)if(L[Ws][$s]){var gp=t.getColumnDefinition($s);xi[$s]=gp.actual}}}for(var fu=0;fu<a;fu++){var oe=D[fu];if(oe.visible||oe===ls){var bi=t.getRowDefinition(oe.row),Ai=t.getColumnDefinition(oe.column);switch(Ge.h(Math.max(Ai.minimum,Math.min(e,Ai.maximum)),Math.max(bi.minimum,Math.min(n,bi.maximum))),ln=pg(oe,bi,Ai,!1),ln){case he:xi[Ai.index]!==0&&(Ge.width=Math.min(Ge.width,xi[Ai.index])),So[bi.index]!==0&&(Ge.height=Math.min(Ge.height,So[bi.index]));break;case _e:xi[Ai.index]!==0&&(Ge.width=Math.min(Ge.width,xi[Ai.index]));break;case Qe:So[bi.index]!==0&&(Ge.height=Math.min(Ge.height,So[bi.index]))}isFinite(Ai.width)&&(Ge.width=Ai.width),isFinite(bi.height)&&(Ge.height=bi.height),Dr.h(0,0);for(var dp=Ai.minimum,qn=bi.minimum,ds=1;ds<oe.rowSpan&&!(oe.row+ds>=t.rowCount);ds++)Y=t.getRowDefinition(oe.row+ds),ke=0,ke=ln===he||ln===Qe?Math.max(Y.minimum,So[oe.row+ds]===0?Y.maximum:Math.min(So[oe.row+ds],Y.maximum)):Math.max(Y.minimum,isNaN(Y.Ac)?Y.maximum:Math.min(Y.Ac,Y.maximum)),Dr.height+=ke,qn+=Y.minimum;for(var zi=1;zi<oe.columnSpan&&!(oe.column+zi>=t.columnCount);zi++)Y=t.getColumnDefinition(oe.column+zi),ke=0,ke=ln===he||ln===_e?Math.max(Y.minimum,xi[oe.column+zi]===0?Y.maximum:Math.min(xi[oe.column+zi],Y.maximum)):Math.max(Y.minimum,isNaN(Y.Ac)?Y.maximum:Math.min(Y.Ac,Y.maximum)),Dr.width+=ke,dp+=Y.minimum;Ge.width+=Dr.width,Ge.height+=Dr.height;var cu=oe.margin,Js=cu.right+cu.left,sd=cu.top+cu.bottom;oe.measure(Ge.width,Ge.height,dp,qn);for(var pu=oe.measuredBounds,Io=Math.max(pu.width+Js,0),Fa=Math.max(pu.height+sd,0),Zs=0,mu=0;mu<oe.rowSpan&&!(oe.row+mu>=t.rowCount);mu++)Y=t.getRowDefinition(oe.row+mu),Zs+=Y.total||0;if(Zs<Fa){var fs=Fa-Zs,or=Fa-Zs;if(oe.spanAllocation!==null)for(var cs=oe.spanAllocation,jr=0;jr<oe.rowSpan&&!(0>=fs)&&!(oe.row+jr>=t.rowCount);jr++){Y=t.getRowDefinition(oe.row+jr);var ps=Y.ma||0,Da=cs(oe,Y,or);Y.actual=Math.min(Y.maximum,ps+Da),Y.ma!==ps&&(fs-=Y.ma-ps)}for(;0<fs;){var Po=Y.ma||0;if(isNaN(Y.height)&&Y.maximum>Po&&(Y.actual=Math.min(Y.maximum,Po+fs),Y.ma!==Po&&(fs-=Y.ma-Po)),Y.index===0)break;Y=t.getRowDefinition(Y.index-1)}}for(var Bl=0,ms=0;ms<oe.columnSpan&&!(oe.column+ms>=t.columnCount);ms++)Y=t.getColumnDefinition(oe.column+ms),Bl+=Y.total||0;if(Bl<Io){var Gl=Io-Bl,Rv=Io-Bl;if(oe.spanAllocation!==null)for(var Or=oe.spanAllocation,ja=0;ja<oe.columnSpan&&!(0>=Gl)&&!(oe.column+ja>=t.columnCount);ja++){Y=t.getColumnDefinition(oe.column+ja);var ad=Y.ma||0,Vv=Or(oe,Y,Rv);Y.actual=Math.min(Y.maximum,ad+Vv),Y.ma!==ad&&(Gl-=Y.ma-ad)}for(;0<Gl;){var fp=Y.ma||0;if(isNaN(Y.width)&&Y.maximum>fp&&(Y.actual=Math.min(Y.maximum,fp+Gl),Y.ma!==fp&&(Gl-=Y.ma-fp)),Y.index===0)break;Y=t.getColumnDefinition(Y.index-1)}}}}Xt(D),dt.free(Dr),dt.free(Ge),So!==void 0&&Xt(So),xi!==void 0&&Xt(xi);var Rl=0,Vl=0,cp=t.desiredSize,yL=t.maxSize;ln=ho(t,!0);var ld=Cr=nr=0,hd=0;a=t.columnCount;for(var pp=0;pp<a;pp++)et[pp]!==void 0&&(Y=t.getColumnDefinition(pp),isFinite(Y.width)?(ld+=Y.width,ld+=Y.Qc()):Zf(Y)===wg?(ld+=Y.ma,ld+=Y.Qc()):Y.ma!==0&&(nr+=Y.ma,nr+=Y.Qc()));isFinite(cp.width)?Rl=Math.min(cp.width,yL.width):Rl=ln!==ae&&isFinite(e)?e:nr,Rl=Math.max(Rl,t.minSize.width),Rl=Math.max(Rl-ld,0);for(var _N=nr===0?1:Math.max(Rl/nr,1),mp=0;mp<a;mp++)et[mp]!==void 0&&(Y=t.getColumnDefinition(mp),isFinite(Y.width)||Zf(Y)===wg||(Y.actual=Y.ma*_N),Y.position=r.width,Y.ma!==0&&(r.width+=Y.ma,r.width+=Y.Qc()));a=t.rowCount;for(var yp=0;yp<a;yp++)nt[yp]!==void 0&&(Y=t.getRowDefinition(yp),isFinite(Y.height)?(hd+=Y.height,hd+=Y.Qc()):Zf(Y)===wg?(hd+=Y.ma,hd+=Y.Qc()):Y.ma!==0&&(Cr+=Y.ma,Cr+=Y.Qc()));isFinite(cp.height)?Vl=Math.min(cp.height,yL.height):Vl=ln!==ae&&isFinite(n)?n:Cr,Vl=Math.max(Vl,t.minSize.height),Vl=Math.max(Vl-hd,0);for(var KN=Cr===0?1:Math.max(Vl/Cr,1),vp=0;vp<a;vp++)nt[vp]!==void 0&&(Y=t.getRowDefinition(vp),isFinite(Y.height)||Zf(Y)===wg||(Y.actual=Y.ma*KN),Y.position=r.height,Y.ma!==0&&(r.height+=Y.ma,r.height+=Y.Qc()));a=g.length;for(var Yv=0;Yv<a;Yv++){var ud=g[Yv],Uv=0,Xv=0;ud.type===X.TableRow?(Uv=r.width,Y=t.getRowDefinition(ud.row),Xv=Y.actual):(Y=t.getColumnDefinition(ud.column),Uv=Y.actual,Xv=r.height),ud.measuredBounds.h(0,0,Uv,Xv),mi(ud,!1)}Xt(g),t.inRowsCols=L},Yf.prototype.arrange=function(t,e,n){var i=e.length,r=t.padding,a=r.left;r=r.top;var h=t.inRowsCols;if(h!==null){for(var g,f,c=h.length,m=0,y=0;y<c;y++)h[y]&&(m=Math.max(m,h[y].length));f=t.rowDefs,g=t.colDefs;var S=y=0,x=Math.min(t.topIndex,c-1);if(0<f.length){for(;x!==c&&(f[x]===void 0||f[x].ma===0);)x++;x=Math.max(Math.min(x,c-1),0),y=-f[x].position}var P=Math.min(t.leftIndex,m-1);if(0<g.length){for(;P!==m&&(g[P]===void 0||g[P].ma===0);)P++;P=Math.max(Math.min(P,m-1),0),S=-g[P].position}for(var L=0,N=0;L!==c&&f[L]===void 0;)L++;for(;N!==c&&g[N]===void 0;)N++;m=t.part,t.getRowDefinition(L),t.getColumnDefinition(N);for(var k=0;k<e.length;k++){var F=e[k];if(F instanceof X&&F.visible&&(F.type===X.TableRow||F.type===X.TableColumn)){if(F.type===X.TableRow){g=t.getRowDefinition(F.row);var D=t.getColumnDefinition(N)}else g=t.getRowDefinition(L),D=t.getColumnDefinition(F.column);f=g.position+y+r,g.ma!==0&&(f+=g.mo(Math.max(L,x))),g=D.position+S+a,D.ma!==0&&(g+=D.mo(Math.max(N,P))),D=F.measuredBounds,F.Jk(),F.actualBounds.ja();var j=F.actualBounds,E=G.allocAt(j.x,j.y,j.width,j.height);j.x=F.type===X.TableRow?a:g,j.y=F.type===X.TableColumn?r:f,j.width=D.width,j.height=D.height,F.actualBounds.freeze(),pa(F,!1),Xm(E,j)||m===null||(m.dh(),F.wn(m)),G.free(E)}}for(k=dt.alloc(),F=0;F<c;F++)if(h[F]){for(m=h[F].length,D=t.getRowDefinition(F),f=D.position+y+r,D.ma!==0&&(f+=D.mo(Math.max(L,x))),j=0;j<m;j++)if(h[F][j]){E=t.getColumnDefinition(j),g=E.position+S+a,E.ma!==0&&(g+=E.mo(Math.max(N,P)));for(var R=h[F][j],J=R.length,it=0;it<J;it++){var nt=R[it],et=nt.measuredBounds;k.h(0,0);for(var Y=1;Y<nt.rowSpan&&!(F+Y>=t.rowCount);Y++){var vt=t.getRowDefinition(F+Y);vt.ma!==0&&(k.height+=vt.total)}for(Y=1;Y<nt.columnSpan&&!(j+Y>=t.columnCount);Y++)vt=t.getColumnDefinition(j+Y),vt.ma!==0&&(k.width+=vt.total);var ut=E.ma+k.width,jt=D.ma+k.height;Y=g,vt=f;var Ht=ut,Me=jt,je=g,sn=f,ke=ut,ls=jt;g+ut>n.width&&(ke=Math.max(n.width-g,0)),f+jt>n.height&&(ls=Math.max(n.height-f,0));var ge=nt.alignment;if(ge.Sb()){ge=t.defaultAlignment,ge.pb()||(ge=Gt);var mo=ge.x,an=ge.y,hs=ge.offsetX;ge=ge.offsetY;var li=E.alignment,Ii=D.alignment;li.pb()&&(mo=li.x,hs=li.offsetX),Ii.pb()&&(an=Ii.y,ge=Ii.offsetY)}else mo=ge.x,an=ge.y,hs=ge.offsetX,ge=ge.offsetY;(isNaN(mo)||isNaN(an))&&(an=mo=.5,ge=hs=0),li=et.width,Ii=et.height;var Jn=nt.margin,Yn=Jn.left+Jn.right,Xs=Jn.top+Jn.bottom,yo=pg(nt,D,E,!1);!isNaN(nt.desiredSize.width)||yo!==he&&yo!==_e||(li=Math.max(ut-Yn,0)),!isNaN(nt.desiredSize.height)||yo!==he&&yo!==Qe||(Ii=Math.max(jt-Xs,0)),ut=nt.maxSize,jt=nt.minSize,li=Math.min(ut.width,li),Ii=Math.min(ut.height,Ii),li=Math.max(jt.width,li),Ii=Math.max(jt.height,Ii),ut=Ii+Xs,Y+=Ht*mo-(li+Yn)*mo+hs+Jn.left,vt+=Me*an-ut*an+ge+Jn.top,nt.visible&&(oo(je,sn,ke,ls,Y,vt,et.width,et.height)?nt.arrange(Y,vt,li,Ii):nt.arrange(Y,vt,li,Ii,new G(je,sn,ke,ls)))}}}for(dt.free(k),t=0;t<i;t++)n=e[t],a=n instanceof X?n:null,a===null||a.type!==X.TableRow&&a.type!==X.TableColumn||(a=n.actualBounds,n.naturalBounds.ja(),n.naturalBounds.h(0,0,a.width,a.height),n.naturalBounds.freeze())}};function Uf(){this.va="Base"}O(Uf,Se),Uf.prototype.measure=function(){},Uf.prototype.arrange=function(){};function Xf(){this.va="Base"}O(Xf,Se),Xf.prototype.measure=function(){},Xf.prototype.arrange=function(){};function _f(){this.va="Base"}O(_f,Se),_f.prototype.measure=function(t,e,n,i,r,a,h){1<i.length&&B("Viewbox Panel cannot contain more than one GraphObject."),i=i[0],i.xa=1,i.Mj(),i.measure(1/0,1/0,a,h);var g=i.measuredBounds,f=i.margin,c=f.right+f.left;if(f=f.top+f.bottom,isFinite(e)||isFinite(n)){var m=i.scale,y=g.width;g=g.height;var S=Math.max(e-c,0),x=Math.max(n-f,0),P=1;t.viewboxStretch===To?y!==0&&g!==0&&(P=Math.min(S/y,x/g)):y!==0&&g!==0&&(P=Math.max(S/y,x/g)),P===0&&(P=1e-4),i.xa*=P,m!==i.scale&&(mi(i,!0),i.measure(1/0,1/0,a,h))}g=i.measuredBounds,r.width=isFinite(e)?e:Math.max(g.width+c,0),r.height=isFinite(n)?n:Math.max(g.height+f,0)},_f.prototype.arrange=function(t,e,n){e=e[0];var i=e.measuredBounds,r=e.margin,a=Math.max(i.width+(r.right+r.left),0);r=Math.max(i.height+(r.top+r.bottom),0);var h=e.alignment;h.Sb()&&(h=t.defaultAlignment),h.pb()||(h=Gt),e.arrange(n.width*h.x-a*h.x+h.offsetX,n.height*h.y-r*h.y+h.offsetY,i.width,i.height)};function Sg(){this.va="Base"}O(Sg,Se),Sg.prototype.measure=function(){},Sg.prototype.arrange=function(){},Sg.prototype.tc=function(t,e,n){n=t.uf()*n.scale,0>=n&&(n=1);var i=t.gridCellSize,r=i.width;i=i.height;var a=t.naturalBounds,h=t.actualBounds,g=a.width,f=a.height,c=Math.ceil(g/r),m=Math.ceil(f/i),y=t.gridOrigin,S=y.x;y=y.y,e.save(),e.beginPath(),e.rect(0,0,g,f),e.clip();for(var x=[],P=t.R.s,L=P.length,N=0;N<L;N++){var k=P[N],F=[];if(x.push(F),k.visible){var D=k.interval;if(!(0>D)){k=dy(k.figure);for(var j=0;j<L;j++)if(j!==N){var E=P[j];E.visible&&dy(E.figure)===k&&(E=E.interval,E>D&&F.push(E))}}}}for(P=t.R.s,L=P.length,N=0;N<L;N++){var R=P[N];if(R.visible&&(F=R.interval||1,k=Math.abs(F),!(2>r*k*n))){if(D=R.segmentIndex,(!isFinite(D)||isNaN(D))&&(D=0),0>D&&(D=k-Math.min(-D,k)),D=Math.round(D%k),k=R.opacity,j=1,k!==1){if(k===0)continue;j=e.globalAlpha,e.globalAlpha=j*k}E=x[N];var J=!1,it=R.strokeDashArray;if(it!==null&&(J=!0,e.Gr(it,R.strokeDashOffset)),R.figure==="LineV"&&R.stroke!==null&&0<R.strokeWidth){for(e.lineWidth=R.strokeWidth,ii(t,e,R.stroke,!1,!1,a,h),e.beginPath(),it=R=Math.floor((S-r)/r);it<=R+c;it++){var nt=it*r+S;0<=nt&&nt<=g&&Kf(it,F,D,E)&&(e.moveTo(nt,0),e.lineTo(nt,f))}e.stroke()}else if(R.figure==="LineH"&&R.stroke!==null&&0<R.strokeWidth){for(e.lineWidth=R.strokeWidth,ii(t,e,R.stroke,!1,!1,a,h),e.beginPath(),it=R=Math.floor((y-i)/i);it<=R+m;it++)nt=it*i+y,0<=nt&&nt<=f&&Kf(it,F,D,E)&&(e.moveTo(0,nt),e.lineTo(g,nt));e.stroke()}else if(R.figure==="BarV"&&R.fill!==null)for(ii(t,e,R.fill,!0,!1,a,h),R=R.width,isNaN(R)&&(R=r),nt=it=Math.floor((S-r)/r);nt<=it+c;nt++){var et=nt*r+S;0<=et+R&&et<=g&&Kf(nt,F,D,E)&&e.fillRect(et,0,R,f)}else if(R.figure==="BarH"&&R.fill!==null)for(ii(t,e,R.fill,!0,!1,a,h),R=R.height,isNaN(R)&&(R=i),nt=it=Math.floor((y-i)/i);nt<=it+m;nt++)et=nt*i+y,0<=et+R&&et<=f&&Kf(nt,F,D,E)&&e.fillRect(0,et,g,R);J&&e.Er(),k!==1&&(e.globalAlpha=j)}}e.restore(),e.Oc(!1)};function Kf(t,e,n,i){if(0>e)return t%e===n;if(t%e!==n)return!1;e=i.length;for(var r=0;r<e;r++)if(t%i[r]===n)return!1;return!0}function Hf(){this.va="Base"}O(Hf,Se),Hf.prototype.measure=function(t,e,n,i,r){var a=i.length;if(t instanceof Ct||t instanceof H){var h=null,g=null;if(t instanceof H&&(h=t),t instanceof Ct&&(g=t,h=g.adornedPart,t.j===null&&(t.j=[])),h instanceof H){var f=h;if(a===0)cr(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var c=t instanceof Ct?null:h.path;e=h.routeBounds,n=t.bg,n.h(0,0,e.width,e.height);var m=f.points,y=h.pointsCount;g!==null?g.Rj(!1):h!==null&&h.Rj(!1),g=e.width;var S=e.height,x=t.j;if(x.length=0,c!==null){ow(t,g,S,c);var P=c.measuredBounds;n.Xc(P),x.push(P)}P=xt.alloc();for(var L=C.alloc(),N=C.alloc(),k=0;k<a;k++){var F=i[k];if(F!==c)if(F.isPanelMain&&F instanceof yt){ow(t,g,S,F);var D=F.measuredBounds;n.Xc(D),x.push(D)}else if(2>y)F.measure(1/0,1/0,0,0),D=F.measuredBounds,n.Xc(D),x.push(D);else{var j=F.segmentIndex,E=F.segmentFraction,R=F.alignmentFocus;R.Fc()&&(R=Gt);var J=F.segmentOrientation,it=F.segmentOffset;if(isNaN(j)){var nt=f.sa;D=Kt(),nt.Cu(E,D);var et=C.allocAt(D[0],D[1]);if(et.add(f.i(0)),nt.type===W.j?et.offset(-nt.startX,-nt.startY):(nt=nt.figures.first(),nt!==null&&et.offset(-nt.startX,-nt.startY)),nt=D[2],J!==Ln){var Y=f.computeAngle(F,J,nt);F.Gb=Y}Y=et.x-e.x;var vt=et.y-e.y;C.free(et),Xt(D)}else if(j<-y||j>=y)D=C.alloc(),f.mg(),f.computeMidPoint(D),nt=f.midAngle,J!==Ln&&(Y=f.computeAngle(F,J,nt),F.Gb=Y),Y=D.x-e.x,vt=D.y-e.y,C.free(D);else{if(Y=0,0<=j?(vt=m.K(j),D=j<y-1?m.K(j+1):vt):(Y=y+j,vt=m.K(Y),D=0<Y?m.K(Y-1):vt),vt.$a(D)){0<=j?(nt=0<j?m.K(j-1):vt,Y=j<y-2?m.K(j+2):D):(nt=Y<y-1?m.K(Y+1):vt,Y=1<Y?m.K(Y-2):D),et=nt.rf(vt);var ut=D.rf(Y);nt=et>ut+10?0<=j?nt.Ya(vt):vt.Ya(nt):ut>et+10?0<=j?D.Ya(Y):Y.Ya(D):0<=j?nt.Ya(Y):Y.Ya(nt)}else nt=0<=j?vt.Ya(D):D.Ya(vt);J!==Ln&&(Y=f.computeAngle(F,J,nt),F.Gb=Y),Y=vt.x+(D.x-vt.x)*E-e.x,vt=vt.y+(D.y-vt.y)*E-e.y}F.measure(1/0,1/0,0,0),D=F.measuredBounds,et=F.naturalBounds;var jt=0;F instanceof yt&&(jt=F.strokeWidth),ut=et.width+jt;var Ht=et.height+jt;P.reset(),P.translate(-D.x,-D.y),P.scale(F.scale,F.scale),P.rotate(J===Ln?F.angle:nt,ut/2,Ht/2),J!==Og&&J!==Ig||P.rotate(90,ut/2,Ht/2),J!==Eg&&J!==Ag||P.rotate(-90,ut/2,Ht/2),J===Pc&&(45<nt&&135>nt||225<nt&&315>nt)&&P.rotate(-nt,ut/2,Ht/2),et=new G(0,0,ut,Ht),L.oi(et,R),P.Fa(L),R=-L.x+jt/2*F.scale,F=-L.y+jt/2*F.scale,N.assign(it),jt=isNaN(it.x);var Me=isNaN(it.y);if(jt||Me){ut=ut/2+3,Ht=Ht/2+3;var je=45<=nt&&135>=nt,sn=225<=nt&&315>=nt;J===Ln&&(je||sn)?(N.x=Me?ut:it.y,N.y=jt?Ht:it.x,je?0<=j||isNaN(j)&&.5>E||!jt||(N.y=-Ht):sn&&((0<=j||isNaN(j)&&.5>E)&&jt&&(N.y=-Ht),Me&&(N.x=-ut))):(jt&&(N.x=0<=j||isNaN(j)&&.5>E?ut:-ut),Me&&(N.y=-Ht),N.rotate(nt))}else N.rotate(nt);Y+=N.x,vt+=N.y,et.set(D),et.h(Y+R,vt+F,D.width,D.height),x.push(et),n.Xc(et)}}if(h!==null)for(i=h.labelNodes;i.next();)i.value.measure(1/0,1/0);t.bg=n,t.position.h(e.x+n.x,e.y+n.y),t.location.h(NaN,NaN),cr(r,n.width||0,n.height||0),xt.free(P),C.free(L),C.free(N)}}}},Hf.prototype.arrange=function(t,e){var n=e.length;if(t instanceof Ct||t instanceof H){var i=t,r=null;t instanceof Ct&&(r=t,i=r.adornedPart);var a=t instanceof Ct?null:i.path,h=t.j;if(h.length!==0){var g=0;if(a!==null&&g<h.length){var f=h[g];g++,a.arrange(f.x-t.bg.x,f.y-t.bg.y,f.width,f.height)}for(f=0;f<n;f++){var c=e[f];if(c!==a&&g<h.length){var m=h[g];g++,c.arrange(m.x-t.bg.x,m.y-t.bg.y,m.width,m.height)}}}if(e=i.points,n=e.count,2<=n&&t instanceof H)for(a=t.labelNodes;a.next();){var y=t;h=a.value,g=h.segmentIndex,f=h.segmentFraction;var S=h.alignmentFocus;if(c=h.segmentOrientation,m=h.segmentOffset,isNaN(g)){var x=y.sa,P=Kt();x.Cu(f,P);var L=C.allocAt(P[0],P[1]);L.add(y.i(0)),x.type===W.j||(x=x.figures.first()),L.offset(-x.startX,-x.startY),x=P[2],c!==Ln&&(y=y.computeAngle(h,c,x),h.angle=y),y=L.x;var N=L.y;C.free(L),Xt(P)}else if(g<-n||g>=n)P=C.alloc(),x=y,N=P,x.mg(),x.computeMidPoint(N),x=y.midAngle,c!==Ln&&(y=y.computeAngle(h,c,x),h.angle=y),y=P.x,N=P.y,C.free(P);else{if(L=0,0<=g?(P=e.s[g],N=g<n-1?e.s[g+1]:P):(L=n+g,P=e.s[L],N=0<L?e.s[L-1]:P),P.$a(N)){0<=g?(x=0<g?e.s[g-1]:P,L=g<n-2?e.s[g+2]:N):(x=L<n-1?e.s[L+1]:P,L=1<L?e.s[L-2]:N);var k=x.rf(P),F=N.rf(L);x=k>F+10?0<=g?x.Ya(P):P.Ya(x):F>k+10?0<=g?N.Ya(L):L.Ya(N):0<=g?x.Ya(L):L.Ya(x)}else x=0<=g?P.Ya(N):N.Ya(P);c!==Ln&&(y=y.computeAngle(h,c,x),h.angle=y),y=P.x+(N.x-P.x)*f,N=P.y+(N.y-P.y)*f}if(S.Wr())h.location=new C(y,N);else{S.Fc()&&(S=Gt),P=xt.alloc(),P.reset(),P.scale(h.scale,h.scale),P.rotate(h.angle,0,0);var D=h.naturalBounds;L=G.allocAt(0,0,D.width,D.height),k=C.alloc(),k.oi(L,S),P.Fa(k),S=-k.x,F=-k.y;var j=D.width,E=D.height;D=C.alloc(),D.assign(m);var R=isNaN(m.x),J=isNaN(m.y);if(R||J){j=j/2+3,E=E/2+3;var it=45<=x&&135>=x,nt=225<=x&&315>=x;c===Ln&&(it||nt)?(D.x=J?j:m.y,D.y=R?E:m.x,it?0<=g||isNaN(g)&&.5>f||!R||(D.y=-E):nt&&((0<=g||isNaN(g)&&.5>f)&&R&&(D.y=-E),J&&(D.x=-j))):(R&&(D.x=0<=g||isNaN(g)&&.5>f?j:-j),J&&(D.y=-E),D.rotate(x))}else D.rotate(x);y+=D.x,N+=D.y,P.So(L),S+=L.x,F+=L.y,g=C.allocAt(y+S,N+F),h.move(g),C.free(g),C.free(D),C.free(k),G.free(L),xt.free(P)}}r!==null?r.Rj(!1):i.Rj(!1)}};function ow(t,e,n,i){if(Sr(i)!==!1){var r=i.strokeWidth;r===0&&t instanceof Ct&&t.type===X.Link&&t.adornedObject instanceof yt&&(r=t.adornedObject.strokeWidth),r*=i.xa,t instanceof H&&t.sa!==null?(t=t.sa.bounds,i.ve(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof Ct&&t.adornedPart.sa!==null?(t=t.adornedPart.sa.bounds,i.ve(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):i.ve(-(r/2),-(r/2),e+r,n+r),r=i.desiredSize,r.v()||i.sa===null?i.bc.h(0,0,r.width,r.height):i.bc.assign(i.sa.bounds),mi(i,!1)}}function Pg(){this.va="Base"}O(Pg,Se),Pg.prototype.measure=function(t,e,n,i,r,a,h){var g=t.vb();t.graduatedBounds=[];var f=g.margin,c=f.right+f.left,m=f.top+f.bottom;g.measure(e,n,a,h);var y=g.measuredBounds,S=new G(-f.left,-f.top,Math.max(y.width+c,0),Math.max(y.height+m,0));t.graduatedBounds.push(S),r.assign(S);for(var x=g.geometry,P=g.strokeWidth,L=x.flattenedSegments,N=x.flattenedLengths,k=x.flattenedTotalLength,F=L.length,D=0,j=0,E=Kt(),R=0;R<F;R++){var J=L[R],it=[];j=D=0;for(var nt=J.length,et=0;et<nt;et+=2){var Y=J[et],vt=J[et+1];if(et!==0){var ut=180*Math.atan2(vt-j,Y-D)/Math.PI;0>ut&&(ut+=360),it.push(ut)}D=Y,j=vt}E.push(it)}if(t.graduatedIntervals===null){for(var jt=[],Ht=t.R.s,Me=Ht.length,je=0;je<Me;je++){var sn=Ht[je],ke=[];if(jt.push(ke),sn.visible){var ls=sn.interval;if(!(0>ls)){for(var ge=0;ge<Me;ge++)if(ge!==je){var mo=Ht[ge];if(mo.visible&&sn.constructor===mo.constructor){var an=mo.interval;an>ls&&ke.push(an)}}}}}t.graduatedIntervals=jt}var hs=t.graduatedIntervals,li=t.R.s,Ii=li.length,Jn=0,Yn=0,Xs=k;t.graduatedMarks=[];for(var yo,au=0;au<Ii;au++){var Zn=li[au];if(yo=[],Zn.visible&&Zn!==g){var ln=Math.abs(Zn.interval),id=t.graduatedTickUnit;if(!(2>id*ln*k/t.graduatedRange&&Zn.graduatedSkip===null)){var El=N[0][0],jo=0,Un=0;Yn=k*Zn.graduatedStart-1e-4,Xs=k*Zn.graduatedEnd+1e-4;var ka=id*ln,Qn=t.graduatedTickBase;if(Qn<t.graduatedMin){var _s=(t.graduatedMin-Qn)/ka;_s=_s%1===0?_s:Math.floor(_s+1),Qn+=_s*ka}else Qn>t.graduatedMin+ka&&(Qn-=Math.floor((Qn-t.graduatedMin)/ka)*ka);for(var lp=hs[au],od=Qn,Bv=1e-6*t.graduatedMax,nr=1;Qn<=t.graduatedMax+Bv;nr++){t:{for(var Cr=lp.length,Il=0;Il<Cr;Il++){var Ks=(Qn-t.graduatedTickBase)%(lp[Il]*t.graduatedTickUnit),lu=1e-6*t.graduatedTickUnit;if(Ks<lu&&Ks>-lu){var Hs=!1;break t}}Hs=!0}if(Hs&&(Qn>t.graduatedMax&&(Qn=t.graduatedMax),Zn.graduatedSkip===null||Zn instanceof Rt&&!Zn.graduatedSkip(Qn,Zn)||Zn instanceof yt&&!Zn.graduatedSkip(Qn,Zn))&&(Jn=(Qn-t.graduatedMin)*k/t.graduatedRange,Jn>k&&(Jn=k),Yn<=Jn&&Jn<=Xs)){for(var ir=E[jo][Un],us=N[jo][Un];jo<N.length;){for(;Jn>El&&Un<N[jo].length-1;)Un++,ir=E[jo][Un],us=N[jo][Un],El+=us;if(Jn<=El)break;jo++,Un=0,ir=E[jo][Un],us=N[jo][Un],El+=us}var Xn=L[jo],Oo=Xn[2*Un],hp=Xn[2*Un+1],Tr=(Jn-(El-us))/us,hu=new C(Oo+(Xn[2*Un+2]-Oo)*Tr+P/2-x.bounds.x,hp+(Xn[2*Un+3]-hp)*Tr+P/2-x.bounds.y);hu.scale(g.scale,g.scale);t:{var vo=ir,Na=E[jo];if(!(.5005>Tr&&.4995<Tr)){var Eo=vo;if(.5>Tr?0<Un?Eo=Na[Un-1]:A.ca(Xn[0],Xn[Xn.length-2])&&A.ca(Xn[1],Xn[Xn.length-1])&&(Eo=Na[Na.length-1]):.5<Tr&&(Un+1<Na.length?Eo=Na[Un+1]:A.ca(Xn[0],Xn[Xn.length-2])&&A.ca(Xn[1],Xn[Xn.length-1])&&(Eo=Na[0])),vo!==Eo){var Al=Math.abs(vo-Eo);if(180<Al&&(vo<Eo?vo+=360:Eo+=360,Al=Math.abs(vo-Eo)),5e-4>Tr||.9995<Tr){ir=(vo+Eo)/2%360;break t}if(10>Al){var uu=1-Math.abs(.5-Tr);ir=(vo*uu+Eo*(1-uu))%360;break t}}}ir=vo}if(Zn instanceof Rt){var qi="";Zn.graduatedFunction!==null?(qi=Zn.graduatedFunction(Qn,Zn),qi=qi!=null?qi.toString():""):qi=(+Qn.toFixed(2)).toString(),qi!==""&&yo.push({Hl:hu,angle:ir,text:qi})}else yo.push({Hl:hu,angle:ir})}Qn=od+nr*ka}}}t.graduatedMarks.push(yo)}Xt(E);var Ge=t.graduatedMarks;if(Ge!==null)for(var rd=i.length,Tn=0;Tn<rd;Tn++){var de=i[Tn],Fn=Ge[Tn];if(de.visible&&de!==g&&Fn.length!==0){if(de instanceof yt){var Fr=t,gs=r,Ca=de.alignmentFocus;Ca.Fc()&&(Ca=pr);var Gv=de.angle;de.Gb=0,de.measure(1/0,1/0,0,0),de.Gb=Gv;var up=de.measuredBounds,gu=up.width,Ta=up.height,zl=G.allocAt(0,0,gu,Ta),_n=C.alloc();_n.oi(zl,Ca),G.free(zl);for(var Dr=-_n.x,So=-_n.y,xi=new G,Ws=Fn.length,du=0;du<Ws;du++)for(var $s=Fn[du],gp=$s.Hl.x,fu=$s.Hl.y,oe=$s.angle,bi=0;4>bi;bi++){switch(bi){case 0:_n.h(Dr,So);break;case 1:_n.h(Dr+gu,So);break;case 2:_n.h(Dr,So+Ta);break;case 3:_n.h(Dr+gu,So+Ta)}_n.rotate(oe+de.angle),_n.offset(gp,fu),du===0&&bi===0?xi.h(_n.x,_n.y,0,0):xi.Me(_n),_n.offset(-gp,-fu),_n.rotate(-oe-de.angle)}C.free(_n),Fr.graduatedBounds!==null&&Fr.graduatedBounds.push(xi),Ve(gs,xi.x,xi.y,xi.width,xi.height)}else if(de instanceof Rt){var Ai=t,dp=r;Ai.temporaryTextBlock===null&&(Ai.temporaryTextBlock=new Rt);var qn=Ai.temporaryTextBlock;Sw(qn,de);var ds=de.alignmentFocus;ds.Fc()&&(ds=pr);for(var zi=de.segmentOrientation,cu=de.segmentOffset,Js=new G,sd=0,pu=0,Io=0,Fa=0,Zs=0,mu=Fn.length,fs=0;fs<mu;fs++){var or=Fn[fs];sd=or.Hl.x,pu=or.Hl.y,Io=or.angle,Zs=Fa=de.angle,zi!==Ln&&(Zs=zi===jg||zi===Sc?Io+de.angle:Io,Fa=H.computeAngle(zi,Zs)),qn.Gb=Fa,qn.text=or.text||"",qn.measure(1/0,1/0,0,0);var cs=qn.measuredBounds,jr=qn.naturalBounds,ps=jr.width,Da=jr.height,Po=xt.alloc();Po.reset(),Po.translate(-cs.x,-cs.y),Po.scale(qn.scale,qn.scale),Po.rotate(Zs,ps/2,Da/2),zi!==Og&&zi!==Ig||Po.rotate(90,ps/2,Da/2),zi!==Eg&&zi!==Ag||Po.rotate(-90,ps/2,Da/2),zi===Pc&&(45<Io&&135>Io||225<Io&&315>Io)&&Po.rotate(-Io,ps/2,Da/2);var Bl=G.allocAt(0,0,ps,Da),ms=C.alloc();ms.oi(Bl,ds),Po.Fa(ms);var Gl=-ms.x,Rv=-ms.y,Or=C.alloc();Or.assign(cu),isNaN(Or.x)&&(Or.x=ps/2+3),isNaN(Or.y)&&(Or.y=-(Da/2+3)),Or.rotate(Io),sd+=Or.x+Gl,pu+=Or.y+Rv;var ja=new G(sd,pu,cs.width,cs.height),ad=new G(cs.x,cs.y,cs.width,cs.height),Vv=new G(jr.x,jr.y,jr.width,jr.height);or.Az=Fa,or.lineCount=qn.lineCount,or.lines=[qn.yb,qn.zh,qn.Te,qn.Ae,qn.Jc,qn.Wb,qn.qe],or.actualBounds=ja,or.measuredBounds=ad,or.naturalBounds=Vv,fs===0?Js.assign(ja):Js.Xc(ja),C.free(Or),C.free(ms),G.free(Bl),xt.free(Po)}Ai.graduatedBounds!==null&&Ai.graduatedBounds.push(Js),Ve(dp,Js.x,Js.y,Js.width,Js.height)}mi(de,!1)}}},Pg.prototype.arrange=function(t,e,n){if(t.graduatedBounds!==null){var i=t.vb(),r=t.graduatedMarks;if(r!==null){var a=t.graduatedBounds,h=0,g=a[h];h++,i!==null&&i.arrange(g.x-n.x,g.y-n.y,g.width,g.height);for(var f=e.length,c=0;c<f;c++){var m=e[c];g=r[c],m.visible&&m!==i&&g.length!==0&&(g=a[h],h++,m.arrange(g.x-n.x,g.y-n.y,g.width,g.height))}t.graduatedBounds=null}}},Pg.prototype.tc=function(t,e,n){var i=n.Vi;n.Vi=!0;var r=t.naturalBounds,a=r.width;r=r.height,e.save(),e.beginPath(),e.rect(-1,-1,a+1,r+1),e.clip(),a=t.vb(),a.tc(e,n),r=t.uf()*n.scale,0>=r&&(r=1);for(var h=a.actualBounds,g=t.R.s,f=t.graduatedMarks,c=g.length,m=0;m<c;m++){var y=g[m],S=f[m],x=S.length;if(y.visible&&y!==a&&S.length!==0){if(y instanceof yt){if(!(2>t.graduatedTickUnit*y.interval*a.geometry.flattenedTotalLength/t.graduatedRange*r&&y.graduatedSkip===null)){var P=y.measuredBounds,L=y.strokeWidth*y.scale,N=y.alignmentFocus;N.Fc()&&(N=pr);for(var k=0;k<x;k++){var F=S[k].Hl,D=S[k].angle,j=N,E=y.Bb;E.reset(),E.translate(F.x+h.x,F.y+h.y),E.rotate(D+y.angle,0,0),E.translate(-P.width*j.x+j.offsetX+L/2,-P.height*j.y+j.offsetY+L/2),E.scale(y.scale,y.scale),Fh(y,!1),y.lh.set(y.Bb),y.yk=y.scale,Ts(y,!1),y.tc(e,n),y.Bb.reset()}}}else if(y instanceof Rt)for(t.temporaryTextBlock===null&&(t.temporaryTextBlock=new Rt),P=t.temporaryTextBlock,Sw(P,y),y=0;y<x;y++)L=S[y],L.actualBounds&&L.measuredBounds&&L.naturalBounds&&(P.cc=L.text||"",P.Gb=L.Az||0,P.dd=L.lineCount||0,N=L.lines,N!==void 0&&(P.yb=N[0],P.zh=N[1],P.Te=N[2],P.Ae=N[3],P.Jc=N[4],P.Wb=N[5],P.qe=N[6]),L.naturalBounds&&(P.bc=L.naturalBounds),L.actualBounds&&(N=L.actualBounds,P.arrange(N.x,N.y,N.width,N.height)),N=L.actualBounds,P.arrange(N.x,N.y,N.width,N.height),k=L.measuredBounds,L=L.naturalBounds,F=P.Bb,F.reset(),F.translate(N.x+h.x,N.y+h.y),F.translate(-k.x,-k.y),P.Qn(F,L.x,L.y,L.width,L.height),Fh(P,!1),P.lh.set(P.Bb),P.yk=P.scale,Ts(P,!1),P.tc(e,n))}}n.Vi=i,e.restore(),e.Oc(!0)};function X(t,e){if(st.call(this),this.qa=null,t===void 0)this.qa=X.Position;else if(typeof t=="string"){var n=Hi.I(t);n!==null&&(this.qa=n)}else t instanceof Se?this.qa=t:t&&(this.qa=X.Position,e=t);this.qa===null&&B("Panel type not specified or PanelLayout not loaded: "+t),this.o=this.o|4194304|(this.qa===X.Grid?1048576:0),this.R=new tt,this.ub=oh,this.Bm=Je,this.Kf=Ki,this.Qg=null,this.Pe="",this.bg=new G(NaN,NaN,NaN,NaN),this.T=this.F=null,this.$n=To,this.Qm=fP,this.Rm=dr,this.qb=this.oa=null,this.fn=NaN,this.$d=this.xh=null,e&&Object.assign(this,e)}O(X,st),X.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.qa=this.qa,t.ub=this.ub.J(),t.Bm=this.Bm.J(),t.Kf=this.Kf,t.Pe=this.Pe,t.bg.assign(this.bg),this.T!==null&&(t.T=this.T.copy(t)),t.$n=this.$n,t.Qm=this.Qm.J(),t.Rm=this.Rm.J(),this.oa!==null&&(t.oa=this.oa.copy()),t.qb=this.qb,t.fn=this.fn,t.xh=this.xh},X.prototype.qf=function(t){st.prototype.qf.call(this,t),t.R=this.R;for(var e=t.R.s,n=e.length,i=0;i<n;i++)e[i].Uf=t;t.Qg=null},X.prototype.copy=function(){var t=st.prototype.copy.call(this);if(t!==null){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i].copy();r.ni(t),r.jj=null;var a=t.R,h=a.count;if(a.Cb(h,r),a=t.part,a!==null){a.Kh=null,r.portId!==null&&a instanceof q&&(a.He=!0);var g=t.diagram;g!==null&&g.undoManager.isUndoingRedoing||a.bb(xe,"elements",t,null,r,null,h)}}return t}return null},l=X.prototype,l.toString=function(){return"Panel("+this.type.name+")#"+Te(this)},l.wn=function(t){st.prototype.wn.call(this,t);for(var e=this.R.s,n=e.length,i=0;i<n;i++)e[i].wn(t)},l.ai=function(t,e){if(this.qa===X.Grid)t.Pc(),this.qa.tc(this,t,e);else if(this.qa===X.Graduated)t.Pc(),this.qa.tc(this,t,e);else{if(this.qa===X.Table){t.Pc(),t.lineCap="butt";var n=0<this.rowCount?this.rowDefs:null,i=0<this.columnCount?this.colDefs:null;n!==null&&Wf(this,t,!0,n,!0),i!==null&&Wf(this,t,!1,i,!0),n!==null&&rw(this,t,!0,n),i!==null&&rw(this,t,!1,i),n!==null&&Wf(this,t,!0,n,!1),i!==null&&Wf(this,t,!1,i,!1)}(n=this.isClipping&&this.qa===X.Spot)&&t.save(),i=this.vb();for(var r=this.R.s,a=r.length,h=0;h<a;h++){var g=r[h];n&&g===i&&(t.clipInsteadOfFill=!0),g.tc(t,e),n&&g===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Oc(!0))}};function rw(t,e,n,i){for(var r=i.length,a=t.actualBounds,h=t.naturalBounds,g=!0,f=0;f<r;f++){var c=i[f];if(c!==void 0&&c.actual!==0)if(g)g=!1;else{if(n){if(c.position>a.height)continue}else if(c.position>a.width)continue;var m=c.separatorStrokeWidth;isNaN(m)&&(m=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var y=c.separatorStroke;if(y===null&&(y=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),m!==0&&y!==null){ii(t,e,y,!1,!1,h,a),y=!1;var S=c.separatorDashArray;S===null&&(S=n?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),S!==null&&(y=!0,e.Gr(S,0)),e.beginPath(),S=c.position+m,n?S>a.height&&(m-=S-a.height):S>a.width&&(m-=S-a.width),c=c.position+m/2,e.lineWidth=m,m=t.ub,n?(c+=m.top,S=a.width-m.right,e.moveTo(m.left,c),e.lineTo(S,c)):(c+=m.left,S=a.height-m.bottom,e.moveTo(c,m.top),e.lineTo(c,S)),e.stroke(),y&&e.Er()}}}}function Wf(t,e,n,i,r){for(var a=i.length,h=t.actualBounds,g=t.naturalBounds,f=sw(t,!0),c=sw(t,!1),m=0;m<a;m++){var y=i[m];if(y!==void 0&&y.background!==null&&y.coversSeparators!==r&&y.actual!==0){var S=n?h.height:h.width;if(!(y.position>S)){var x=y.Qc(),P=y.separatorStrokeWidth;isNaN(P)&&(P=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var L=y.separatorStroke;L===null&&(L=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(L===null||y.index===(n?f:c))&&(P=0),x-=P,P=y.position+P,x+=y.actual,P+x>S&&(x=S-P),0>=x||(S=t.ub,ii(t,e,y.background,!0,!1,g,h),n?e.fillRect(S.left,P+S.top,h.width-(S.left+S.right),x):e.fillRect(P+S.left,S.top,x,h.height-(S.top+S.bottom)))}}}}function sw(t,e){for(var n=e?t.rowCount:t.columnCount,i=0;i<n;i++){var r=e?t.rowDefs[i]:t.colDefs[i];if(r!==void 0)return r.index}return 0}function dy(t){return t==="LineV"||t==="BarV"}l.Kj=function(t,e,n,i,r){var a=this.ke(),h=this.transform,g=1/(h.m11*h.m22-h.m12*h.m21),f=h.m22*g,c=-h.m12*g,m=-h.m21*g,y=h.m11*g,S=g*(h.m21*h.dy-h.m22*h.dx),x=g*(h.m12*h.dx-h.m11*h.dy);if(this.areaBackground!==null)return h=this.actualBounds,A.wf(h.left,h.top,h.right,h.bottom,t,e,n,i,r);if(this.background!==null)return a=t*f+e*m+S,g=t*c+e*y+x,t=n*f+i*m+S,f=n*c+i*y+x,r.h(0,0),n=this.naturalBounds,a=A.wf(0,0,n.width,n.height,a,g,t,f,r),r.transform(h),a;a||(f=1,m=c=0,y=1,x=S=0),g=t*f+e*m+S,t=t*c+e*y+x,f=n*f+i*m+S,n=n*c+i*y+x,r.h(f,n),i=(f-g)*(f-g)+(n-t)*(n-t),c=!1,y=this.R.s,x=y.length,m=C.alloc(),S=null,e=1/0;var P=null,L=this.isClipping&&this.qa===X.Spot;L&&(P=C.alloc(),S=this.vb(),(c=S.Kj(g,t,f,n,P))&&(e=(g-P.x)*(g-P.x)+(t-P.y)*(t-P.y)));for(var N=0;N<x;N++){var k=y[N];k.visible&&k!==S&&k.Kj(g,t,f,n,m)&&(c=!0,k=(g-m.x)*(g-m.x)+(t-m.y)*(t-m.y),k<i&&(i=k,r.set(m)))}return L&&(e>i&&r.set(P),C.free(P)),C.free(m),a&&r.transform(h),c},l.w=function(t){if(!Sr(this)){st.prototype.w.call(this,t),t=null,(this.qa===X.Auto||this.qa===X.Link)&&(t=this.vb());for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];if((r===t||r.isPanelMain)&&r.w(!0),!r.desiredSize.v()){var a=ho(r,!1);(r instanceof wn||r instanceof X||r instanceof Rt||a!==ae)&&r.w(!0)}}}},l.Mj=function(){if(!Sr(this)){mi(this,!0),pa(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Mj()}},l.Jk=function(){if((this.o&2048)===0){Fh(this,!0),Ts(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()}},l.Iu=function(){Ts(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()},l.El=function(t,e,n,i){var r=this.bg;r.h(0,0,0,0);var a=this.desiredSize,h=this.minSize;n===void 0&&(n=h.width,i=h.height),n=Math.max(n,h.width),i=Math.max(i,h.height);var g=this.maxSize;isNaN(a.width)||(t=Math.min(a.width,g.width)),isNaN(a.height)||(e=Math.min(a.height,g.height)),t=Math.max(n,t),e=Math.max(i,e);var f=this.ub;t=Math.max(t-f.left-f.right,0),e=Math.max(e-f.top-f.bottom,0);var c=this.R.s;c.length!==0&&this.qa.measure(this,t,e,c,r,n,i),t=r.width+f.left+f.right,f=r.height+f.top+f.bottom,isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(f=a.height),t=Math.min(g.width,t),f=Math.min(g.height,f),t=Math.max(h.width,t),f=Math.max(h.height,f),t=Math.max(n,t),f=Math.max(i,f),cr(r,t,f),cr(this.naturalBounds,t,f),this.ve(0,0,t,f)},l.vb=function(){if(this.Qg===null){var t=this.R.s,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var i=t[n];if(i.isPanelMain===!0)return this.Qg=i}this.Qg=t[0]}return this.Qg};function Mr(t){return t.part!==null?t.part.locationObject:null}l.Vg=function(t,e,n,i){var r=this.R.s;if(this.actualBounds.h(t,e,n,i),r.length!==0){if(!this.desiredSize.v()){t=ho(this,!0);var a=this.measuredBounds;e=a.width,a=a.height;var h=this.Ag,g=h.left+h.right;switch(h=h.top+h.bottom,e===n&&a===i&&(t=ae),t){case ae:(e>n||a>i)&&(this.w(),this.measure(e>n?n:e,a>i?i:a,0,0));break;case he:this.w(!0),this.measure(n+g,i+h,0,0);break;case _e:this.w(!0),this.measure(n+g,a+h,0,0);break;case Qe:this.w(!0),this.measure(e+g,i+h,0,0)}}this.qa.arrange(this,r,this.bg)}},l.Xg=function(t){var e=this.naturalBounds,n=Mr(this);if(oo(0,0,e.width,e.height,t.x,t.y)){e=this.R.s;for(var i=e.length,r=C.allocAt(0,0);i--;){var a=e[i];if((a.visible||a===n)&&(yn(r.set(t),a.transform),a.ba(r)))return C.free(r),!0}return C.free(r),!(this.Yb===null&&this.areaBackground===null)}return!1},l.Hr=function(t){if(this.bindingId===t)return this;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i].Hr(t);if(r!==null)return r}return null},l.$l=function(t,e){if(e(this,t),t instanceof X){t=t.R.s;for(var n=t.length,i=0;i<n;i++)this.$l(t[i],e)}};function va(t,e){aw(t,t,e)}function aw(t,e,n){n(e),e=e.R.s;for(var i=e.length,r=0;r<i;r++){var a=e[r];a instanceof X&&aw(t,a,n)}}function cN(t,e){lw(t,t,e)}function lw(t,e,n){if(n(e),e instanceof X){e=e.R.s;for(var i=e.length,r=0;r<i;r++)lw(t,e[r],n)}}l.vl=function(t){return hw(this,this,t)};function hw(t,e,n){if(n(e))return e;if(e instanceof X){e=e.R.s;for(var i=e.length,r=0;r<i;r++){var a=hw(t,e[r],n);if(a!==null)return a}}return null}l.fb=function(t){if(this.name===t)return this;var e=this.R.s,n=e.length;this.xh===null&&this.itemTemplateMap===null||(n=xg(this));for(var i=0;i<n;i++){var r=e[i];if(r instanceof X){var a=r.fb(t);if(a!==null)return a}if(r.name===t)return r}return null};function uw(t){t=t.R.s;for(var e=t.length,n=0,i=0;i<e;i++){var r=t[i];r instanceof X?n=Math.max(n,uw(r)):r instanceof yt&&(n=Math.max(n,r.ag/2*r.strokeMiterLimit*r.uf()))}return n}l.ke=function(){return!(this.type===X.TableRow||this.type===X.TableColumn)},l.ec=function(t,e,n){if(this.pickable===!1||(e===void 0&&(e=null),n===void 0&&(n=null),Fi(this)))return null;var i=this.naturalBounds,r=1/this.uf(),a=this.ke(),h=a?t:yn(C.allocAt(t.x,t.y),this.transform),g=this.diagram,f=10,c=5;if(g!==null&&(f=g.yl("extraTouchArea"),c=f/2),oo(-(c*r),-(c*r),i.width+f*r,i.height+f*r,h.x,h.y)){if(!this.isAtomic){r=this.R.s;var m=r.length;if(g=C.alloc(),c=(f=this.isClipping&&this.qa===X.Spot)?this.vb():null,f&&(c.ke()?yn(g.set(t),c.transform):g.set(t),!c.ba(g)))return C.free(g),a||C.free(h),null;for(var y=Mr(this);m--;){var S=r[m];if((S.visible||S===y)&&(S.ke()?yn(g.set(t),S.transform):g.set(t),!f||S!==c)){var x=null;if(S instanceof X?x=S.ec(g,e,n):S.pickable===!0&&S.ba(g)&&(x=S),x!==null&&(e!==null&&(x=e(x)),x!==null&&(n===null||n(x))))return C.free(g),a||C.free(h),x}}C.free(g)}return this.background===null&&this.areaBackground===null?(a||C.free(h),null):(t=oo(0,0,i.width,i.height,h.x,h.y)?this:null,a||C.free(h),t)}return a||C.free(h),null},l.di=function(t,e,n,i){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var r=this.naturalBounds,a=this.ke(),h=a?t:yn(C.allocAt(t.x,t.y),this.transform);if(r=oo(0,0,r.width,r.height,h.x,h.y),this.type===X.TableRow||this.type===X.TableColumn||r){if(!this.isAtomic){for(var g=this.R.s,f=g.length,c=C.alloc(),m=Mr(this);f--;){var y=g[f];if(y.visible||y===m){y.ke()?yn(c.set(t),y.transform):c.set(t);var S=y;y=y instanceof X?y:null,(y!==null?y.di(c,e,n,i):S.ba(c))&&S.pickable!==!1&&(e!==null&&(S=e(S)),S===null||n!==null&&!n(S)||i.add(S))}}C.free(c)}return a||C.free(h),r&&(this.background!==null||this.areaBackground!==null)}return a||C.free(h),!1},l.tf=function(t,e,n,i,r,a){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var h=a;if(a===void 0&&(h=xt.alloc(),h.reset()),h.multiply(this.transform),this.Wg(t,h))return fy(this,e,n,r),a===void 0&&xt.free(h),!0;if(this.Sc(t,h)){if(!this.isAtomic)for(var g=Mr(this),f=this.R.s,c=f.length;c--;){var m=f[c];if(m.visible||m===g){var y=m.actualBounds,S=this.naturalBounds;y.x>S.width||y.y>S.height||0>y.x+y.width||0>y.y+y.height||(y=m,m=m instanceof X?m:null,S=xt.alloc(),S.set(h),(m!==null?m.tf(t,e,n,i,r,S):Zx(y,t,i,S))&&(e!==null&&(y=e(y)),y===null||n!==null&&!n(y)||r.add(y)),xt.free(S))}}return a===void 0&&xt.free(h),i}return a===void 0&&xt.free(h),!1};function fy(t,e,n,i){for(var r=t.R.s,a=r.length;a--;){var h=r[a];if(h.visible){var g=h.actualBounds,f=t.naturalBounds;g.x>f.width||g.y>f.height||0>g.x+g.width||0>g.y+g.height||(h instanceof X&&fy(h,e,n,i),e!==null&&(h=e(h)),h===null||n!==null&&!n(h)||i.add(h))}}}l.hg=function(t,e,n,i,r,a){if(this.pickable===!1)return!1;n===void 0&&(n=null),i===void 0&&(i=null);var h=this.naturalBounds,g=this.ke(),f=g?t:yn(C.allocAt(t.x,t.y),this.transform),c=g?e:yn(C.allocAt(e.x,e.y),this.transform),m=f.rf(c),y=0<f.x&&f.x<h.width&&0<f.y&&f.y<h.height||vn(f.x,f.y,0,0,0,h.height)<=m||vn(f.x,f.y,0,h.height,h.width,h.height)<=m||vn(f.x,f.y,h.width,h.height,h.width,0)<=m||vn(f.x,f.y,h.width,0,0,0)<=m;if(h=f.td(0,0)<=m&&f.td(0,h.height)<=m&&f.td(h.width,0)<=m&&f.td(h.width,h.height)<=m,g||(C.free(f),C.free(c)),y){if(!this.isAtomic){f=C.alloc(),c=C.alloc(),m=Mr(this);for(var S=this.R.s,x=S.length;x--;){var P=S[x];if(P.visible||P===m){var L=P.actualBounds,N=this.naturalBounds;(!g||!(L.x>N.width||L.y>N.height||0>L.x+L.width||0>L.y+L.height))&&(P.ke()?(L=P.transform,yn(f.set(t),L),yn(c.set(e),L)):(f.set(t),c.set(e)),L=P,P=P instanceof X?P:null,(P!==null?P.hg(f,c,n,i,r,a):L.Vw(f,c,r))&&(n!==null&&(L=n(L)),L===null||i!==null&&!i(L)||a.add(L)))}}C.free(f),C.free(c)}return r?y:h}return!1};function cy(t){var e=null;return t instanceof yt&&(e=t.spot1,e===Je&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=nn),e}function py(t){var e=null;return t instanceof yt&&(e=t.spot2,e===Je&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Xo),e}l.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.Cb(this.R.count,e[n]);return this},l.K=function(t){return this.R.K(t)},l.Cb=function(t,e){e instanceof lt&&B("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.jg(e))&&(this===e&&B("Cannot make a Panel contain itself: "+this.toString()),B("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(n!==null&&n!==this&&B("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.qa!==X.Grid||e instanceof yt||B("Can only add Shapes to a Grid Panel, not: "+e),this.qa!==X.Graduated||e instanceof yt||e instanceof Rt||B("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.ni(this),e.jj=null,this.itemArray!==null){var i=e.data;i!==null&&typeof i=="object"&&(this.$d===null&&(this.$d=new ct),this.$d.add(i,e))}var r=this.R;if(i=-1,n===this){for(var a=-1,h=this.R.s,g=h.length,f=0;f<g;f++)if(h[f]===e){a=f;break}if(a!==-1){if(a===t||a+1>=r.count&&t>=r.count)return;r.mb(a),i=a}else B("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.Cb(t,e),(t===0||e.isPanelMain)&&(this.Qg=null),Sr(this)||this.w(),e.w(!1),e.portId!==null?this.He=!0:e instanceof X&&e.He===!0&&(this.He=!0),this.graduatedIntervals=null,this.yf()||Jf(this,e,!1),n=this.part,n!==null&&(n.Kh=null,n.Sf=NaN,this.He&&n instanceof q&&(n.He=!0),n.He&&n instanceof q&&(n.sc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(i!==-1&&n.bb(Fe,"elements",this,e,null,i,null),n.bb(xe,"elements",this,null,e,null,t)))};function my(t,e){t.o=e?t.o|16777216:t.o&-16777217}l.remove=function(t){for(var e=this.R.s,n=e.length,i=-1,r=0;r<n;r++)if(e[r]===t){i=r;break}i!==-1&&this.lc(i,!0)},l.mb=function(t){0<=t&&this.lc(t,!0)},l.lc=function(t,e){var n=this.R,i=n.K(t);if(i.jj=null,i.ni(null),this.$d!==null){var r=i.data;typeof r=="object"&&this.$d.remove(r)}n.mb(t),mi(this,!1),this.w(),this.Qg===i&&(this.Qg=null),this.graduatedIntervals=null;var a=this.part;a!==null&&(a.Kh=null,a.Sf=NaN,a.Rb(),a instanceof q&&(i instanceof X?i.$l(i,function(h,g){Ry(a,g,e)}):Ry(a,i,e)),n=this.diagram,n!==null&&n.undoManager.isUndoingRedoing||a.bb(Fe,"elements",this,i,null,t,null))},X.prototype.getRowDefinition=function(t){0>t&&gt(t,">= 0",X,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(e[t]===void 0){var n=new Le;n.ni(this),n.isRow=!0,n.index=t,e[t]=n,this.bb(xe,"rowdefs",this,null,n,null,t)}return e[t]},X.prototype.Vz=function(t){if(0>t&&gt(t,">= 0",X,"removeRowDefinition:idx"),this.rowCount!==0){t=Math.round(t);var e=this.rowDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&e[i--]===void 0;)e.length--;this.bb(Fe,"rowdefs",this,n,null,t,null),this.w()}}};function gw(t,e,n){var i=t.rowDefs;if(!(0>e)){if(i[e]=n instanceof Le?n:void 0,!n)for(e=i.length-1;0<=e&&i[e--]===void 0;)i.length--;t.w()}}X.prototype.getColumnDefinition=function(t){0>t&&gt(t,">= 0",X,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(e[t]===void 0){var n=new Le;n.ni(this),n.isRow=!1,n.index=t,e[t]=n,this.bb(xe,"coldefs",this,null,n,null,t)}return e[t]},l=X.prototype,l.Qz=function(t){if(0>t&&gt(t,">= 0",X,"removeColumnDefinition:idx"),this.columnCount!==0){t=Math.round(t);var e=this.colDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&e[i--]===void 0;)e.length--;this.bb(Fe,"coldefs",this,n,null,t,null),this.w()}}};function dw(t,e,n){var i=t.colDefs;if(!(0>e)){if(i[e]=n instanceof Le?n:void 0,!n)for(e=i.length-1;0<=e&&i[e--]===void 0;)i.length--;t.w()}}l.Wy=function(t){if(0>t||this.type!==X.Table||this.rowCount===0)return-1;for(var e=0,n=this.rowDefs,i=n.length,r=this.topIndex;r<i;r++){var a=n[r];if(a!==void 0&&(e+=a.total,t<e))break}return r},l.Oy=function(t){if(0>t||this.type!==X.Table||this.columnCount===0)return-1;for(var e=0,n=this.colDefs,i=n.length,r=this.leftIndex;r<i;r++){var a=n[r];if(a!==void 0&&(e+=a.total,t<e))break}return r},l.mz=function(t,e){if(e===void 0&&(e=new C(NaN,NaN)),this.type!==X.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.vb();return n.geometry.Bu((t-this.graduatedMin)/this.graduatedRange,e),n.transform.Fa(e)},l.nz=function(t){if(this.type!==X.Graduated)return NaN;var e=this.vb();return e.transform.Ld(t),e.geometry.Zw(t)*this.graduatedRange+this.graduatedMin};function fw(t){return t=t.allBindings,t!==null&&t._isFrozen}function ji(t){var e=t.allBindings;if(e===null)t.data!==null&&B("Template cannot have .data be non-null: "+t),t.allBindings=e=new tt;else if(e._isFrozen)return;var n=new tt;my(t,!1),t.$l(t,function(c,m){m.ih();var y=m.localBindings;if(y!==null)for(ey(m,!1),y=y.iterator;y.next();){var S=y.value;S.mode===_g&&ey(m,!0);var x=S.sourceName;x!==null&&(x==="/"&&my(c,!0),x=O2(S,c,m),x!==null&&(n.add(x),x.srcBindings===null&&(x.srcBindings=new tt),x.srcBindings.add(S))),e.add(S)}if(m instanceof X&&m.type===X.Table){if(0<m.rowCount){for(c=m.rowDefs,y=c.length,S=0;S<y;S++)if(x=c[S],x!==void 0&&x.Vd!==null)for(var P=x.Vd.iterator;P.next();){var L=P.value;L.sd=x,L.Wn=2,L.ll=x.index,e.add(L)}}if(0<m.columnCount){for(m=m.colDefs,c=m.length,y=0;y<c;y++)if(S=m[y],S!==void 0&&S.Vd!==null)for(x=S.Vd.iterator;x.next();)P=x.value,P.sd=S,P.Wn=1,P.ll=S.index,e.add(P)}}});for(var i=n.iterator;i.next();){var r=i.value;if(r.srcBindings!==null){ey(r,!0);for(var a=r.srcBindings.iterator;a.next();){var h=a.value;r.localBindings===null&&(r.localBindings=new tt),r.localBindings.add(h)}}r.srcBindings=null}for(i=e.iterator;i.next();)if(r=i.value,a=r.sd,a!==null){r.sd=null;var g=r.targetProperty,f=g.indexOf(".");0<f&&a instanceof X&&(h=g.substring(0,f),g=g.substr(f+1),f=a.fb(h),f!==null?(a=f,r.targetProperty=g):Lt('Warning: unable to find GraphObject named "'+h+'" for Binding: '+r.toString())),a instanceof Le?(h=Te(a.panel),r.ti=h===void 0?-1:h,a.panel.bindingId=r.ti):a instanceof st?(h=Te(a),r.ti=h===void 0?-1:h,a.bindingId=r.ti):B("Unknown type of binding target: "+a)}e.freeze(),t instanceof lt&&t.Tc()&&t.Za()}l.By=function(t){t===void 0&&(t=!1);var e=this.copy();return cN(e,function(n){n instanceof X&&(n.allBindings=null,n.qb=null);var i=n.localBindings;i!==null&&(n.localBindings=null,i.each(function(r){n.bind(r.copy())})),i=n.animationTriggers,i!==null&&(n.animationTriggers=null,i.each(function(r){n.mv(r.value.copy())}))}),t&&ji(e),e},l.Ka=function(t){var e=this.allBindings;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((t===""||i===""||i===t)&&(i=n.targetProperty,n.converter!==null||i!=="")){i=this.data;var r=n.sourceName;if(r!==null){if(r==="")i=this;else if(r==="/")i=this;else if(r===".")i=this;else if(r==="..")i=this;else if(i=this.fb(r),i===null)continue}else if(n.isToModel)if(i=this.diagram,i!==null)i=i.model.modelData;else continue;var a=this,h=n.ti;if(h!==-1){if(a=this.Hr(h),a===null)continue}else n.sd!==null&&(a=n.sd);if(r==="/"?i=a.part:r==="."?i=a:r===".."&&(i=a.panel),r=n.Wn,r!==0){if(!(a instanceof X))continue;r===1?a=a.getColumnDefinition(n.ll):r===2&&(a=a.getRowDefinition(n.ll))}a!==void 0&&n.pv(a,i)}}},l.Uw=function(t){return t==null||this.$d===null?null:this.$d.I(t)};function pN(t,e){t=t.R.s;for(var n=t.length,i=e.length,r=0,a=null;r<n&&(a=t[r],!(a instanceof X&&a.data!==null));)r++,a=t[r];if(n-r!==i)return!0;if(a===null)return 0<i;for(var h=0;r<n&&h<i;){if(a=t[r],!(a instanceof X)||a.data!==e[h])return!0;r++,h++}return!1}function xg(t){if(t.type===X.Spot||t.type===X.Auto)return Math.min(t.R.length,1);if(t.type===X.Link){t=t.R;for(var e=t.length,n=0;n<e;n++){var i=t.K(n);if(!(i instanceof yt&&i.isPanelMain))break}return n}return t.type===X.Table&&0<t.R.length&&(t=t.R.K(0),t.isPanelMain&&t instanceof X&&(t.type===X.TableRow||t.type===X.TableColumn))?1:0}l.Vu=function(){for(var t=xg(this);this.R.length>t;)this.lc(this.R.length-1,!1);cw(this,this.itemArray)};function cw(t,e){var n=xg(t);if(e===null||e.length===0)for(;t.R.length>n;)t.lc(t.R.length-1,!1);else if(t.R.length<=n){n=e.length;for(var i=0;i<n;i++)$f(t,e[i],i,!0)}else{i=n;for(var r=0;r<e.length;r++,i++){var a=e[r],h=i<t.R.length?t.R.K(i):null;if(h instanceof X){if(h.data!==a){var g=vy(t,h.data),f=vy(t,a),c=f!==g;c||(g=Sy(t,g),c=Sy(t,f)!==g),c?(t.lc(i,!1),$f(t,a,r,!1)):h.data=a}}else $f(t,a,r,!1)}for(;i<t.R.length;)t.lc(i,!1);t.Qg=null,yy(t,n,0),Sr(t)||t.w(),t.graduatedIntervals=null,t.yf()||Jf(t,t,!1),e=t.part,e!==null&&(e.Kh=null,e.Sf=NaN,t.He&&e instanceof q&&(e.He=!0),e.He&&e instanceof q&&(e.sc=null))}}function $f(t,e,n,i){if(!(e==null||0>n)){var r=vy(t,e);if(r=Sy(t,r),r!==null){if(ji(r),r=r.copy(),(r.o&16777216)!==0){var a=t.Yg();a!==null&&my(a,!0)}typeof e=="object"&&(t.$d===null&&(t.$d=new ct),t.$d.add(e,r)),a=n+xg(t),t.Cb(a,r),i&&(r.qb=e,yy(t,a,n),r.qb=null),r.data=e}}}function yy(t,e,n){for(t=t.R;e<t.length;){var i=t.K(e);if(i instanceof X){var r=e,a=n;i.type===X.TableRow?i.row=r:i.type===X.TableColumn&&(i.column=r),i.itemIndex=a}e++,n++}}function vy(t,e){if(e===null)return"";if(t=t.itemCategoryProperty,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=le(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;B("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function Sy(t,e){var n=t.itemTemplateMap,i=null;return n!==null&&(i=n.I(e)),i===null&&(n!==null&&(i=n.I("")),i===null&&(pw||(pw=!0,Lt('No item template Panel found for category "'+e+'" on '+t),Lt("  Using default item template."),t=new X,e=new Rt,e.bind(new ue("text","",Hn)),t.add(e),mw=t),i=mw)),i}function Jf(t,e,n){var i=e.enabledChanged;if(i!==null&&i(e,n),e instanceof X){e=e.R.s,i=e.length;for(var r=0;r<i;r++){var a=e[r];n&&a instanceof X&&!a.isEnabled||Jf(t,a,n)}}}function Fo(t,e){e.name=t,Hi.add(t,e)}I.Object.defineProperties(X.prototype,{type:{get:function(){return this.qa},set:function(t){var e=this.qa;e!==t&&(this.qa=t,this.isAtomic=this.qa===X.Grid,this.w(),this.g("type",e,t))}},elements:{get:function(){return this.R.iterator}},naturalBounds:{get:function(){return this.bc}},padding:{get:function(){return this.ub},set:function(t){typeof t=="number"?(0>t&&gt(t,">= 0",X,"padding"),t=new At(t)):(0>t.left&&gt(t.left,">= 0",X,"padding:value.left"),0>t.right&&gt(t.right,">= 0",X,"padding:value.right"),0>t.top&&gt(t.top,">= 0",X,"padding:value.top"),0>t.bottom&&gt(t.bottom,">= 0",X,"padding:value.bottom"));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.w(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Bm},set:function(t){var e=this.Bm;e.C(t)||(this.Bm=t=t.J(),this.w(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Kf},set:function(t){var e=this.Kf;e!==t&&(this.Kf=t,this.w(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.T!==null?this.T.tp:oh},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.defaultSeparatorPadding;e.C(t)||(t=t.J(),this.T===null&&(this.T=new vi),this.T.tp=t,this.w(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return this.T!==null?this.T.ga:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof Et)&&(t instanceof Et&&t.freeze(),this.T===null&&(this.T=new vi),this.T.ga=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.Ga:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new vi),this.T.Ga=t,this.w(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return this.T!==null?this.T.W:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var a=t[r];typeof a=="number"&&0<=a&&isFinite(a)||B("defaultRowSeparatorDashArray value "+a+" at index "+r+" must be a positive number or zero."),i+=a}if(i===0){if(e===null)return;t=null}}this.T===null&&(this.T=new vi),this.T.W=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return this.T!==null?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof Et)&&(t instanceof Et&&t.freeze(),this.T===null&&(this.T=new vi),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new vi),this.T.F=t,this.w(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return this.T!==null?this.T.m:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var a=t[r];typeof a=="number"&&0<=a&&isFinite(a)||B("defaultColumnSeparatorDashArray value "+a+" at index "+r+" must be a positive number or zero."),i+=a}if(i===0){if(e===null)return;t=null}}this.T===null&&(this.T=new vi),this.T.m=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return this.T!==null?this.T.hb:null},set:function(t){this.T===null&&(this.T=new vi),this.T.hb=t}},viewboxStretch:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.w(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Qm},set:function(t){var e=this.Qm;if(!e.C(t)){t.v()&&t.width!==0&&t.height!==0||B("Invalid Panel.gridCellSize: "+t),this.Qm=t.J();var n=this.diagram;n!==null&&this===n.grid&&Kr(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Rm},set:function(t){var e=this.Rm;if(!e.C(t)){t.v()||B("Invalid Panel.gridOrigin: "+t),this.Rm=t.J();var n=this.diagram;n!==null&&this===n.grid&&Kr(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.oa!==null?this.oa.Np:0},set:function(t){var e=this.graduatedMin;e!==t&&(this.oa===null&&(this.oa=new kr),this.oa.Np=t,this.w(),this.g("graduatedMin",e,t),gl(this)&&(t=this.part,t!==null&&ca(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.oa!==null?this.oa.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(this.oa===null&&(this.oa=new kr),this.oa.F=t,this.w(),this.g("graduatedMax",e,t),gl(this)&&(t=this.part,t!==null&&ca(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.oa!==null?this.oa.ga:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(this.oa===null&&(this.oa=new kr),this.oa.ga=t,this.w(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.oa!==null?this.oa.W:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(this.oa===null&&(this.oa=new kr),this.oa.W=t,this.w(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return this.oa!==null?this.oa.u:null},set:function(t){this.oa!==null?this.oa.u=t:t!==null&&(this.oa=new kr,this.oa.u=t)}},graduatedBounds:{get:function(){return this.oa!==null?this.oa.j:null},set:function(t){this.oa!==null?this.oa.j=t:t!==null&&(this.oa=new kr,this.oa.j=t)}},graduatedIntervals:{get:function(){return this.oa!==null?this.oa.m:null},set:function(t){this.oa!==null?this.oa.m=t:t!==null&&(this.oa=new kr,this.oa.m=t)}},temporaryTextBlock:{get:function(){return this.oa!==null?this.oa.Sh:null},set:function(t){this.oa!==null?this.oa.Sh=t:t!==null&&(this.oa=new kr,this.oa.Sh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},He:{get:function(){return(this.o&8388608)!==0},set:function(t){(this.o&8388608)!==0!==t&&(this.o^=8388608)}},rowDefs:{get:function(){return this.T===null&&(this.T=new vi),this.T.Ic}},rowCount:{get:function(){return this.T===null?0:this.rowDefs.length}},colDefs:{get:function(){return this.T===null&&(this.T=new vi),this.T.Hc}},columnCount:{get:function(){return this.T===null?0:this.colDefs.length}},rowSizing:{get:function(){return this.T!==null?this.T.nb:Qf},set:function(t){var e=this.rowSizing;e!==t&&(this.T===null&&(this.T=new vi),this.T.nb=t,this.w(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return this.T!==null?this.T.j:Qf},set:function(t){var e=this.columnSizing;e!==t&&(this.T===null&&(this.T=new vi),this.T.j=t,this.w(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return this.T!==null?this.T.Db:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&B("Panel.topIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new vi),this.T.Db=t,this.w(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return this.T!==null?this.T.cb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&B("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new vi),this.T.cb=t,this.w(),this.g("leftIndex",e,t))}},data:{get:function(){return this.qb},set:function(t){var e=this.qb;if(e!==t){var n=this instanceof lt&&!(this instanceof Ct);ji(this),this.qb=t;var i=this.diagram;i!==null&&(n?(n=i.partManager,this instanceof H?(e!==null&&n.Re.remove(e),t!==null&&n.Re.add(t,this)):this instanceof lt&&(e!==null&&n.Se.remove(e),t!==null&&n.Se.add(t,this))):(n=this.panel,n!==null&&n.$d!==null&&(e!==null&&n.$d.remove(e),t!==null&&n.$d.add(t,this)))),this.g("data",e,t),i!==null&&i.undoManager.isUndoingRedoing||t!==null&&this.Ka()}}},itemIndex:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return this.A!==null?this.A.hb:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new dl),this.A.hb=t)}},itemArray:{get:function(){return this.xh},set:function(t){var e=this.xh;if(e!==t||t!==null&&pN(this,t)){var n=this.diagram;e!==t&&(n!==null&&e!==null&&sv(n.partManager,this,n),this.xh=t,n!==null&&t!==null&&rv(n.partManager,this)),this.g("itemArray",e,t),n!==null&&n.undoManager.isUndoingRedoing||cw(this,t)}}},itemTemplate:{get:function(){return this.itemTemplateMap===null?null:this.itemTemplateMap.I("")},set:function(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new ct}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof lt||t.isPanelMain)&&B("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Vu())}},itemTemplateMap:{get:function(){return this.A!==null?this.A.le:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var n=t.iterator;n.next(););we(this),this.A.le=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Vu()}}},itemCategoryProperty:{get:function(){return this.A!==null?this.A.Ic:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(we(this),this.A.Ic=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this instanceof pt&&(this.ib=null),this.w(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.o&33554432)!==0},set:function(t){var e=(this.o&33554432)!==0;e!==t&&(this.o^=33554432,this.w(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;if(e!==t){var n=this.panel===null||this.panel.yf();this.o^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||n&&Jf(this,this,t)}}},alignmentFocusName:{get:function(){return this.Pe},set:function(t){var e=this.Pe;e!==t&&(this.Pe=t,this.w(),this.g("alignmentFocusName",e,t))}}}),I.Object.defineProperties(X,{Position:{get:function(){return Hi.I("Position")}},Horizontal:{get:function(){return Hi.I("Horizontal")}},Vertical:{get:function(){return Hi.I("Vertical")}},Spot:{get:function(){return Hi.I("Spot")}},Auto:{get:function(){return Hi.I("Auto")}},Table:{get:function(){return Hi.I("Table")}},Viewbox:{get:function(){return Hi.I("Viewbox")}},TableRow:{get:function(){return Hi.I("TableRow")}},TableColumn:{get:function(){return Hi.I("TableColumn")}},Link:{get:function(){return Hi.I("Link")}},Grid:{get:function(){return Hi.I("Grid")}},Graduated:{get:function(){return Hi.I("Graduated")}}}),X.prototype.rebuildItemElements=X.prototype.Vu,X.prototype.findItemPanelForData=X.prototype.Uw,X.prototype.updateTargetBindings=X.prototype.Ka,X.prototype.copyTemplate=X.prototype.By,X.prototype.graduatedValueForPoint=X.prototype.nz,X.prototype.graduatedPointForValue=X.prototype.mz,X.prototype.findColumnForLocalX=X.prototype.Oy,X.prototype.findRowForLocalY=X.prototype.Wy,X.prototype.removeColumnDefinition=X.prototype.Qz,X.prototype.removeRowDefinition=X.prototype.Vz,X.prototype.removeAt=X.prototype.mb,X.prototype.remove=X.prototype.remove,X.prototype.insertAt=X.prototype.Cb,X.prototype.elt=X.prototype.K,X.prototype.add=X.prototype.add,X.prototype.findObject=X.prototype.fb,X.prototype.findInVisualTree=X.prototype.vl,X.prototype.walkVisualTreeFrom=X.prototype.$l,X.prototype.findMainElement=X.prototype.vb;var pw=!1,mw=null,Hi=new ct;X.className="Panel",X.definePanelLayout=Fo,Fo("Position",new zf),Fo("Vertical",new Gf),Fo("Auto",new Vf),Fo("Link",new Hf);function kr(){this.Np=0,this.F=100,this.ga=10,this.W=0,this.Sh=this.m=this.j=this.u=null}kr.prototype.copy=function(){var t=new kr;return t.Np=this.Np,t.F=this.F,t.ga=this.ga,t.W=this.W,t.u=this.u,t.j=this.j,t.m=this.m,t.Sh=this.Sh,t},kr.className="GradPanelSettings";function vi(){this.Ic=[],this.Hc=[],this.j=this.nb=Qf,this.cb=this.Db=0,this.tp=oh,this.Ga=1,this.W=this.ga=null,this.F=1,this.hb=this.m=this.u=null}vi.prototype.copy=function(t){for(var e=new vi,n=this.Ic,i=n.length,r=e.Ic,a=0;a<i;a++)if(n[a]!==void 0){var h=n[a].copy();h.ni(t),r[a]=h}for(n=this.Hc,i=n.length,r=e.Hc,a=0;a<i;a++)n[a]!==void 0&&(h=n[a].copy(),h.ni(t),r[a]=h);return e.nb=this.nb,e.j=this.j,e.Db=this.Db,e.cb=this.cb,e.tp=this.tp.J(),e.Ga=this.Ga,e.ga=this.ga,e.W=this.W,e.F=this.F,e.u=this.u,e.m=this.m,e.hb=this.hb,e},vi.className="TablePanelSettings";function Le(){Oe(this),this.Uf=null,this.Wp=!0,this.Wa=0,this.Ac=NaN,this.ej=0,this.cj=1/0,this.Fb=Je,this.pa=this.jc=this.ma=0,this.Vd=null,this.Rn=Py,this.$f=Ki,this.On=this.Wf=null,this.Pn=NaN,this.Yb=this.oj=null,this.xm=!1}Le.prototype.copy=function(){var t=new Le;return t.Wp=this.Wp,t.Wa=this.Wa,t.Ac=this.Ac,t.ej=this.ej,t.cj=this.cj,t.Fb=this.Fb,t.ma=this.ma,t.jc=this.jc,t.pa=this.pa,t.$f=this.$f,t.Rn=this.Rn,this.Wf===null?t.Wf=null:t.Wf=this.Wf.J(),t.On=this.On,t.Pn=this.Pn,t.oj=null,this.oj!==null&&(t.separatorDashArray=Jt(this.separatorDashArray)),t.Yb=this.Yb,t.xm=this.xm,t.Vd=this.Vd,t},l=Le.prototype,l.ob=function(t){t.classType===Le&&(this.sizing=t)},l.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Te(this)},l.ni=function(t){this.Uf=t},l.mo=function(t){var e=0,n=this.Uf;if(this.index!==t&&(t=this.separatorStroke,t===null&&n!==null&&(t=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),t!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(n!==null?e=this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:e=0))),t=this.Wf,t===null)if(n!==null)t=n.defaultSeparatorPadding;else return e;return e+(this.isRow?t.top:t.left)},l.Qc=function(){var t=0,e=this.Uf,n=0,i=this.isRow;if(e!==null&&e.type===X.Table)for(var r=i?e.rowDefs.length:e.colDefs.length,a=0;a<r;a++){var h=i?e.rowDefs[a]:e.colDefs[a];if(h!==void 0&&h.ma!==0){n=h.index;break}}if(this.index!==n&&(n=this.separatorStroke,n===null&&e!==null&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),n!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),i=this.Wf,i===null)if(e!==null)i=e.defaultSeparatorPadding;else return t;return t+(this.isRow?i.top+i.bottom:i.left+i.right)},l.Kb=function(t,e,n){var i=this.Uf;if(i!==null&&(i.bb(Zt,t,this,e,n,void 0,void 0),this.Vd!==null&&(e=i.diagram,e!==null&&!e.skipsModelSourceBindings&&(i=i.Yg(),i!==null&&(e=i.data,e!==null)))))for(n=this.Vd.iterator;n.next();)n.value.Vo(this,e,t,i)};function Zf(t){if(t.sizing===Py){var e=t.Uf;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}l.bind=function(t,e,n,i){var r=null;return typeof t=="string"?r=new ue(t,e,n,i):r=t,r.sd=this,t=this.panel,t!==null&&(e=t.Yg(),e!==null&&fw(e)&&B("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+r+" on "+t)),this.Vd===null&&(this.Vd=new tt),this.Vd.add(r),this},I.Object.defineProperties(Le.prototype,{panel:{get:function(){return this.Uf}},isRow:{get:function(){return this.Wp},set:function(t){this.Wp=t}},index:{get:function(){return this.Wa},set:function(t){this.Wa=t}},height:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(0>t&&gt(t,">= 0",Le,"height"),this.Ac=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("height",e,t))}},width:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(0>t&&gt(t,">= 0",Le,"width"),this.Ac=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("width",e,t))}},minimum:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&((0>t||!isFinite(t))&&gt(t,">= 0",Le,"minimum"),this.ej=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("minimum",e,t))}},maximum:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(0>t&&gt(t,">= 0",Le,"maximum"),this.cj=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("maximum",e,t))}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(this.Fb=t.J(),this.panel!==null&&this.panel.w(),this.Kb("alignment",e,t))}},stretch:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.panel!==null&&this.panel.w(),this.Kb("stretch",e,t))}},separatorPadding:{get:function(){return this.Wf},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.Wf;t!==null&&e!==null&&e.C(t)||(t!==null&&(t=t.J()),this.Wf=t,this.panel!==null&&this.panel.w(),this.Kb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(t!==null&&pl(t,"RowColumnDefinition.separatorStroke"),t instanceof Et&&t.freeze(),this.On=t,this.panel!==null&&this.panel.w(),this.Kb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,this.panel!==null&&this.panel.w(),this.Kb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.oj},set:function(t){var e=this.oj;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var a=t[r];typeof a=="number"&&0<=a&&isFinite(a)||B("separatorDashArray value "+a+" at index "+r+" must be a positive number or zero."),i+=a}if(i===0){if(e===null)return;t=null}}this.oj=t,this.panel!==null&&this.panel.N(),this.Kb("separatorDashArray",e,t)}}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(t!==null&&pl(t,"RowColumnDefinition.background"),t instanceof Et&&t.freeze(),this.Yb=t,this.panel!==null&&this.panel.N(),this.Kb("background",e,t))}},coversSeparators:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,this.panel!==null&&this.panel.N(),this.Kb("coversSeparators",e,t))}},sizing:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.panel!==null&&this.panel.w(),this.Kb("sizing",e,t))}},actual:{get:function(){return this.ma},set:function(t){this.ma=isNaN(this.Ac)?Math.max(Math.min(this.cj,t),this.ej):Math.max(Math.min(this.cj,this.Ac),this.ej)}},measured:{get:function(){return this.jc},set:function(t){this.jc=t}},total:{get:function(){return this.ma+this.Qc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),Le.prototype.computeEffectiveSpacing=Le.prototype.Qc,Le.prototype.computeEffectiveSpacingTop=Le.prototype.mo;var Py=new $(Le,"Default",0),wg=new $(Le,"None",1),Qf=new $(Le,"ProportionalExtra",2);Le.className="RowColumnDefinition",Le.Default=Py,Le.None=wg,Le.ProportionalExtra=Qf;function yt(t,e){st.call(this),this.Hd=this.sa=null,this.Jm="None",this.Nc=this.Ak="black",this.ag=1,this.Na=this.Og=null,this.Dn=this.Cn=NaN,this.fa=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}O(yt,st),yt.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.sa=this.sa,t.Hd=this.Hd,t.Jm=this.Jm,t.Ak=this.Ak,t.Nc=this.Nc,t.ag=this.ag,this.Og!==null&&(t.Og=Jt(this.Og)),this.Na!==null&&(t.Na=this.Na.ic?this.Na:this.Na.copy()),t.Cn=this.Cn,t.Dn=this.Dn,this.fa!==null&&(t.fa=this.fa.copy())};function Sa(t){t.Na===null?t.Na=new Ly:t.Na.ic&&(t.Na=t.Na.copy())}l=yt.prototype,l.ih=function(){st.prototype.ih.call(this),this.Na!==null&&(this.Na.ic=!0)},l.ob=function(t){t===ae||t===To||t===gg||t===Ki?this.geometryStretch=t:st.prototype.ob.call(this,t)},l.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+Te(this)};function Gh(t,e,n,i){var r=n.length;if(!(4>r)){var a=i.measuredBounds,h=Math.max(1,a.width);a=a.height;for(var g=n[0],f=n[1],c,m,y,S,x,P,L=0,N=Kt(),k=2;k<r;k+=2)c=n[k],m=n[k+1],y=c-g,g=m-f,y===0&&(y=.001),S=g/y,x=Math.atan2(g,y),P=Math.sqrt(y*y+g*g),N.push([y,x,S,P]),L+=P,g=c,f=m;g=n[0],f=n[1],y=i.measuredBounds.width,i instanceof yt&&(y-=i.strokeWidth),1>y&&(y=1),r=n=y,c=h/2,m=c!==0,k=0,P=N[k],y=P[0],x=P[1],S=P[2],P=P[3];for(var F=0;.1<=L;){if(F===0&&(m?(r=n,r-=c,L-=c,m=!1):r=n,r===0&&(r=1)),r>L){Xt(N);return}r>P?(F=r-P,r=P):F=0;var D=Math.sqrt(r*r/(1+S*S));if(0>y&&(D=-D),g+=D,f+=S*D,t.translate(g,f),t.rotate(x),t.translate(-(h/2),-(a/2)),F===0&&i.ai(t,e),t.translate(h/2,a/2),t.rotate(-x),t.translate(-g,-f),L-=r,P-=r,F!==0){if(k++,k===N.length){Xt(N);return}P=N[k],y=P[0],x=P[1],S=P[2],P=P[3],r=F}}Xt(N)}}l.ai=function(t,e){var n=this.Nc,i=this.Ak;if(n!==null||i!==null){var r=this.sa;if(r!==null){t.Pc();var a=this.actualBounds,h=this.naturalBounds;i!==null&&ii(this,t,i,!0,!1,h,a);var g=this.part,f=this.ag;if(n===null||f!==0||g===null||!this.isPanelMain&&g.vb()!==this||(f=g.type===X.Link&&g instanceof Ct&&g.category==="Selection"&&g.adornedObject instanceof yt&&g.adornedPart.vb()===g.adornedObject?g.adornedObject.strokeWidth:0),f===0&&(n=null),n!==null&&f!==0&&(ii(this,t,n,!1,!1,h,a),t.lineWidth=f,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),a=!1,g&&e.Ge("drawShadows")&&(a=g.isShadowed),g=!0,n===null||i!==null&&i!=="transparent"||(g=!1),h=!1,f=this.strokeDashArray,f!==null&&(h=!0,t.Gr(f,this.strokeDashOffset)),r.type===W.j)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),n!==null&&t.si();else if(r.type===W.u){var c=r.startX;f=r.startY;var m=r.endX,y=r.endY;r=Math.min(c,m);var S=Math.min(f,y);c=Math.abs(m-c),f=Math.abs(y-f),t.beginPath(),t.rect(r,S,c,f),i!==null&&t.sf(i),n!==null&&(g&&a&&xr(t),(c===0||f===0)&&(t.beginPath(),t.rect(r,S,Math.max(c,.1),Math.max(f,.1))),t.si(),g&&a&&Jr(t))}else if(r.type===W.F)c=r.startX,f=r.startY,m=r.endX,y=r.endY,r=Math.abs(m-c)/2,S=Math.abs(y-f)/2,c=Math.min(c,m)+r,f=Math.min(f,y)+S,t.beginPath(),t.moveTo(c,f-S),t.bezierCurveTo(c+A.ng*r,f-S,c+r,f-A.ng*S,c+r,f),t.bezierCurveTo(c+r,f+A.ng*S,c+A.ng*r,f+S,c,f+S),t.bezierCurveTo(c-A.ng*r,f+S,c-r,f+A.ng*S,c-r,f),t.bezierCurveTo(c-r,f-A.ng*S,c-A.ng*r,f-S,c,f-S),t.closePath(),i!==null&&t.sf(i),n!==null&&(g&&a?(xr(t),t.si(),Jr(t)):t.si());else if(r.type===W.m)for(r=r.figures,f=r.length,S=0;S<f;S++){c=r.s[S],t.beginPath(),t.moveTo(c.startX,c.startY),m=c.segments.s,y=m.length;for(var x=null,P=0;P<y;P++){var L=m[P];switch(L.type){case Xi:t.moveTo(L.endX,L.endY);break;case qt:t.lineTo(L.endX,L.endY);break;case di:t.bezierCurveTo(L.point1X,L.point1Y,L.point2X,L.point2Y,L.endX,L.endY);break;case Co:t.quadraticCurveTo(L.point1X,L.point1Y,L.endX,L.endY);break;case ye:if(L.radiusX===L.radiusY){var N=Math.PI/180;t.arc(L.point1X,L.point1Y,L.radiusX,L.startAngle*N,(L.startAngle+L.sweepAngle)*N,0>L.sweepAngle,x!==null?x.endX:c.startX,x!==null?x.endY:c.startY)}else if(x=mr(L,c),N=x.length,N===0)t.lineTo(L.centerX,L.centerY);else for(var k=0;k<N;k++){var F=x[k];k===0&&t.lineTo(F[0],F[1]),t.bezierCurveTo(F[2],F[3],F[4],F[5],F[6],F[7])}break;case ro:if(k=N=0,x!==null&&x.type===ye){if(x=mr(x,c),F=x.length,F===0){t.lineTo(L.endX,L.endY);break}x=x[F-1]||null,x!==null&&(N=x[6],k=x[7])}else N=x!==null?x.endX:c.startX,k=x!==null?x.endY:c.startY;if(x=la(L,c,N,k),N=x.length,N===0){t.lineTo(L.endX,L.endY);break}for(k=0;k<N;k++)F=x[k],t.bezierCurveTo(F[2],F[3],F[4],F[5],F[6],F[7]);break;default:B("Segment not of valid type: "+L.type)}L.isClosed&&t.closePath(),x=L}m=c.isFilled,a?c.isShadowed?(m===!0&&i!=="transparent"&&i!==null&&t.sf(i),n!==null&&(m&&g&&xr(t),t.si(),m&&g&&Jr(t))):(xr(t),m&&i!=="transparent"&&i!==null&&t.sf(i),n!==null&&t.si(),Jr(t)):(m&&i!==null&&t.sf(i),n!==null&&t.si())}if(h&&t.Er(),this.pathPattern!==null){if(n=this.pathPattern,n.measure(1/0,1/0),i=n.measuredBounds,n.arrange(0,0,i.width,i.height),a=this.geometry,t.save(),t.beginPath(),i=Kt(),a.type===W.j)i.push(a.startX),i.push(a.startY),i.push(a.endX),i.push(a.endY),Gh(t,e,i,n);else if(a.type===W.m)for(a=a.figures.iterator;a.next();){for(g=a.value,i.length=0,i.push(g.startX),i.push(g.startY),h=g.startX,r=g.startY,f=h,S=r,c=g.segments.s,m=c.length,y=0;y<m;y++){switch(P=c[y],P.type){case Xi:Gh(t,e,i,n),i.length=0,i.push(P.endX),i.push(P.endY),h=P.endX,r=P.endY,f=h,S=r;break;case qt:i.push(P.endX),i.push(P.endY),h=P.endX,r=P.endY;break;case di:A.De(h,r,P.point1X,P.point1Y,P.point2X,P.point2Y,P.endX,P.endY,.5,i),h=P.endX,r=P.endY;break;case Co:A.Go(h,r,P.point1X,P.point1Y,P.endX,P.endY,.5,i),h=P.endX,r=P.endY;break;case ye:if(L=mr(P,g),x=L.length,x===0){i.push(P.centerX),i.push(P.centerY),h=P.centerX,r=P.centerY;break}for(N=0;N<x;N++)k=L[N],A.De(h,r,k[2],k[3],k[4],k[5],k[6],k[7],.5,i),h=k[6],r=k[7];break;case ro:if(L=la(P,g,h,r),x=L.length,x===0){i.push(P.endX),i.push(P.endY),h=P.endX,r=P.endY;break}for(N=0;N<x;N++)k=L[N],A.De(h,r,k[2],k[3],k[4],k[5],k[6],k[7],.5,i),h=k[6],r=k[7];break;default:B("Segment not of valid type: "+P.type)}P.isClosed&&(i.push(f),i.push(S),Gh(t,e,i,n))}Gh(t,e,i,n)}else if(a.type===W.u)i.push(a.startX),i.push(a.startY),i.push(a.endX),i.push(a.startY),i.push(a.endX),i.push(a.endY),i.push(a.startX),i.push(a.endY),i.push(a.startX),i.push(a.startY),Gh(t,e,i,n);else if(a.type===W.F){if(r=new ze,r.startX=a.endX,r.startY=(a.startY+a.endY)/2,h=new Tt(ye),h.startAngle=0,h.sweepAngle=360,h.centerX=(a.startX+a.endX)/2,h.centerY=(a.startY+a.endY)/2,h.radiusX=Math.abs(a.startX-a.endX)/2,h.radiusY=Math.abs(a.startY-a.endY)/2,r.add(h),a=mr(h,r),g=a.length,g===0)i.push(h.centerX),i.push(h.centerY);else for(h=r.startX,r=r.startY,f=0;f<g;f++)S=a[f],A.De(h,r,S[2],S[3],S[4],S[5],S[6],S[7],.5,i),h=S[6],r=S[7];Gh(t,e,i,n)}Xt(i),t.restore(),t.Oc(!1)}}}},l.ia=function(t,e){if(e===void 0&&(e=new C),t instanceof ht){t.Fc()&&B("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.ge.Fa(e),e},l.gi=function(t){t===void 0&&(t=new G);var e=this.naturalBounds,n=this.ge;e=G.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.vc(i/2,i/2),i=C.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),Ve(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),Ve(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),Ve(t,i.x,i.y,0,0),G.free(e),C.free(i),t},l.Xg=function(t,e){var n=this.geometry;if(n===null||this.fill===null&&this.stroke===null)return!1;var i=n.bounds,r=this.strokeWidth/2;n.type!==W.j||e||(r+=2);var a=G.alloc();if(a.assign(i),a.vc(r+2,r+2),!a.ba(t))return G.free(a),!1;if(i=r+1e-4,n.type===W.j)return this.stroke===null||(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i)?!1:(G.free(a),A.Tb(n.startX,n.startY,n.endX,n.endY,r,t.x,t.y));if(n.type===W.u){e=n.startX;var h=n.startY,g=n.endX;if(n=n.endY,a.x=Math.min(e,g),a.y=Math.min(h,n),a.width=Math.abs(g-e),a.height=Math.abs(n-h),this.fill===null){if(a.vc(-i,-i),a.ba(t))return G.free(a),!1;a.vc(i,i)}return this.stroke!==null&&a.vc(r,r),t=a.ba(t),G.free(a),t}if(n.type===W.F){h=n.startX,r=n.startY,g=n.endX;var f=n.endY;if(n=Math.min(h,g),e=Math.min(r,f),h=Math.abs(g-h)/2,r=Math.abs(f-r)/2,n=t.x-(n+h),e=t.y-(e+r),this.fill===null){if(h-=i,r-=i,0>=h||0>=r||1>=n*n/(h*h)+e*e/(r*r))return G.free(a),!1;h+=i,r+=i}return this.stroke!==null&&(h+=i,r+=i),G.free(a),0>=h||0>=r?!1:1>=n*n/(h*h)+e*e/(r*r)}if(n.type===W.m)return G.free(a),this.fill===null?IP(n,t.x,t.y,r):s0(n,t,r,1<this.strokeWidth,e);B("Unknown Geometry type: "+n.type)},l.El=function(t,e,n,i){var r=this.desiredSize,a=this.ag;if(t=Math.max(t,0),e=Math.max(e,0),this.Hd!==null)var h=this.geometry.bounds;else{var g=this.figure,f=wy[g];if(f===void 0){var c=A.Oe[g];typeof c=="string"&&(c=A.Oe[c]),typeof c=="function"?(f=c(null,100,100),wy[g]=f):B("Unsupported Figure: "+g)}h=f.bounds}g=h.width,f=h.height,c=h.width;var m=h.height;switch(ho(this,!0)){case ae:i=n=0;break;case he:c=Math.max(t-a,0),m=Math.max(e-a,0);break;case _e:c=Math.max(t-a,0),i=0;break;case Qe:n=0,m=Math.max(e-a,0)}isFinite(r.width)&&(c=r.width),isFinite(r.height)&&(m=r.height),h=this.maxSize;var y=this.minSize;switch(n=Math.max(n-a,y.width),i=Math.max(i-a,y.height),c=Math.min(h.width,c),m=Math.min(h.height,m),c=isFinite(c)?Math.max(n,c):Math.max(g,n),m=isFinite(m)?Math.max(i,m):Math.max(f,i),n=xy(this),n){case ae:break;case he:g=c,f=m;break;case To:n=Math.min(c/g,m/f),isFinite(n)||(n=1),g*=n,f*=n;break;default:B(n+" is not a valid geometryStretch.")}this.Hd!==null?(g===0&&(g=.001),f===0&&(f=.001),n=this.Hd!==null?this.Hd:this.sa,h=n.bounds,i=g/h.width,h=f/h.height,isFinite(i)||(i=1),isFinite(h)||(h=1),this.sa=i===1&&h===1?n:n.copy().scale(i,h)):this.sa!==null&&A.ca(this.sa.Hk,t-a)&&A.ca(this.sa.Gk,e-a)||(this.sa=yt.makeGeometry(this,g,f)),h=this.sa.bounds,t===1/0||e===1/0?this.ve(h.x-a/2,h.y-a/2,t===0&&g===0?0:h.width+a,e===0&&f===0?0:h.height+a):this.ve(-(a/2),-(a/2),c+a,m+a),r.v()?this.bc.h(0,0,r.width,r.height):this.bc.assign(h)};function xy(t){var e=t.geometryStretch;return t.Hd!==null?e===Ki?he:e:e===Ki?wy[t.figure].defaultStretch:e}l.Vg=function(t,e,n,i){ty(this,t,e,n,i)},l.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},l.Kj=function(t,e,n,i,r){var a=this.transform,h=1/(a.m11*a.m22-a.m12*a.m21),g=a.m22*h,f=-a.m12*h,c=-a.m21*h,m=a.m11*h,y=h*(a.m21*a.dy-a.m22*a.dx),S=h*(a.m12*a.dx-a.m11*a.dy);a=t*g+e*c+y,h=t*f+e*m+S,g=n*g+i*c+y,f=n*f+i*m+S,y=this.ag/2,c=this.sa,c===null&&(this.measure(1/0,1/0),c=this.sa);var x=c.bounds;if(m=!1,c.type===W.j)if(1.5>=this.strokeWidth)m=A.Je(c.startX,c.startY,c.endX,c.endY,a,h,g,f,r);else{if(c.startX===c.endX?(i=y,m=0):(e=(c.endY-c.startY)/(c.endX-c.startX),m=y/Math.sqrt(1+e*e),i=m*e),e=Kt(),t=new C,A.Je(c.startX+i,c.startY+m,c.endX+i,c.endY+m,a,h,g,f,t)&&e.push(t),t=new C,A.Je(c.startX-i,c.startY-m,c.endX-i,c.endY-m,a,h,g,f,t)&&e.push(t),t=new C,A.Je(c.startX+i,c.startY+m,c.startX-i,c.startY-m,a,h,g,f,t)&&e.push(t),t=new C,A.Je(c.endX+i,c.endY+m,c.endX-i,c.endY-m,a,h,g,f,t)&&e.push(t),g=e.length,g===0)return Xt(e),!1;for(m=!0,f=1/0,i=0;i<g;i++)t=e[i],n=(t.x-a)*(t.x-a)+(t.y-h)*(t.y-h),n<f&&(f=n,r.x=t.x,r.y=t.y);Xt(e)}else if(c.type===W.u)m=A.wf(x.x-y,x.y-y,x.x+x.width+y,x.y+x.height+y,a,h,g,f,r);else if(c.type===W.F){e=G.allocAt(x.x,x.y,x.width,x.height).vc(y,y);t:if(e.width===0)m=A.Je(e.x,e.y,e.x,e.y+e.height,a,h,g,f,r);else if(e.height===0)m=A.Je(e.x,e.y,e.x+e.width,e.y,a,h,g,f,r);else{if(t=e.width/2,c=e.height/2,i=e.x+t,m=e.y+c,n=9999,a!==g&&(n=(h-f)/(a-g)),9999>Math.abs(n)){if(f=h-m-n*(a-i),0>t*t*n*n+c*c-f*f){r.x=NaN,r.y=NaN,m=!1;break t}y=Math.sqrt(t*t*n*n+c*c-f*f),g=(-(t*t*n*f)+t*c*y)/(c*c+t*t*n*n)+i,t=(-(t*t*n*f)-t*c*y)/(c*c+t*t*n*n)+i,c=n*(g-i)+f+m,f=n*(t-i)+f+m,Math.abs((a-g)*(a-g))+Math.abs((h-c)*(h-c))<Math.abs((a-t)*(a-t))+Math.abs((h-f)*(h-f))?(r.x=g,r.y=c):(r.x=t,r.y=f)}else{if(g=c*c,f=a-i,g-=g/(t*t)*f*f,0>g){r.x=NaN,r.y=NaN,m=!1;break t}f=Math.sqrt(g),g=m+f,f=m-f,Math.abs(g-h)<Math.abs(f-h)?(r.x=a,r.y=g):(r.x=a,r.y=f)}m=!0}G.free(e)}else if(c.type===W.m){S=C.alloc();var P=g-a,L=f-h,N=P*P+L*L,k=a,F=h;if(0<N&&x.contains(k,F)&&(S.x=k,S.y=F,this.ba(S)))for(P!==0&&.5>Math.abs(P)?(L*=.5/P,P=.5):L!==0&&.5>Math.abs(L)&&(P*=.5/L,L=.5),k-=P,F-=L;x.contains(k,F);)k-=P,F-=L;for(r.x=g,r.y=f,L=0;L<c.figures.count;L++){var D=c.figures.s[L],j=D.isFilled?k:a,E=D.isFilled?F:h,R=D.segments;x=D.startX,P=D.startY;for(var J=x,it=P,nt=0;nt<R.count;nt++){var et=R.s[nt],Y=et.type,vt=et.endX,ut=et.endY,jt=!1;switch(Y){case Xi:J=vt,it=ut;break;case qt:jt=bf(x,P,vt,ut,j,E,g,f,S);break;case di:jt=A.io(x,P,et.point1X,et.point1Y,et.point2X,et.point2Y,vt,ut,j,E,g,f,.6,S);break;case Co:jt=A.io(x,P,x+2/3*(et.point1X-x),P+2/3*(et.point1Y-P),vt+2/3*(et.point1X-vt),ut+2/3*(et.point1Y-ut),vt,ut,j,E,g,f,.6,S);break;case ye:case ro:Y=et.type===ye?mr(et,D):la(et,D,x,P);var Ht=Y.length;if(Ht===0){jt=bf(x,P,et.type===ye?et.centerX:et.endX,et.type===ye?et.centerY:et.endY,j,E,g,f,S);break}for(ut=null,vt=0;vt<Ht;vt++){if(ut=Y[vt],vt===0&&bf(x,P,ut[0],ut[1],j,E,g,f,S)){var Me=qf(j,E,S,N,r);Me<N&&(N=Me,m=!0)}A.io(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5],ut[6],ut[7],j,E,g,f,.6,S)&&(Me=qf(j,E,S,N,r),Me<N&&(N=Me,m=!0))}vt=ut[6],ut=ut[7];break;default:B("Unknown Segment type: "+Y)}x=vt,P=ut,jt&&(jt=qf(j,E,S,N,r),jt<N&&(N=jt,m=!0)),et.isClosed&&(vt=J,ut=it,bf(x,P,vt,ut,j,E,g,f,S)&&(et=qf(j,E,S,N,r),et<N&&(N=et,m=!0)))}}a=n-t,h=i-e,g=Math.sqrt(a*a+h*h),g!==0&&(a/=g,h/=g),r.x-=a*y,r.y-=h*y,C.free(S)}else B("Unknown Geometry type: "+c.type);return m?(this.transform.Fa(r),!0):!1};function qf(t,e,n,i,r){return t=n.x-t,e=n.y-e,e=t*t+e*e,e<i?(r.x=n.x,r.y=n.y,e):i}function bf(t,e,n,i,r,a,h,g,f){var c=!1,m=(r-h)*(e-i)-(a-g)*(t-n);return m===0?!1:(f.x=((r*g-a*h)*(t-n)-(r-h)*(t*i-e*n))/m,f.y=((r*g-a*h)*(e-i)-(a-g)*(t*i-e*n))/m,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(f.y>t||A.ca(f.y,t))&&(f.y<e||A.ca(f.y,e))&&(c=!0)):(e=t<n?t:n,t=t<n?n:t,(f.x>e||A.ca(f.x,e))&&(f.x<t||A.ca(f.x,t))&&(c=!0)),c)}l.Wg=function(t,e){if(e===void 0)return t.Ee(this.actualBounds);var n=this.sa;n===null&&(this.measure(1/0,1/0),n=this.sa),n=n.bounds;var i=this.strokeWidth/2,r=!1,a=C.alloc();return a.h(n.x-i,n.y-i),t.ba(e.Fa(a))&&(a.h(n.x-i,n.bottom+i),t.ba(e.Fa(a))&&(a.h(n.right+i,n.bottom+i),t.ba(e.Fa(a))&&(a.h(n.right+i,n.y-i),t.ba(e.Fa(a))&&(r=!0)))),C.free(a),r},l.Sc=function(t,e){if(this.Wg(t,e)||e===void 0&&(e=this.transform,t.Ee(this.actualBounds)))return!0;var n=xt.alloc();n.set(e),n.Tr();var i=t.left,r=t.right,a=t.top;t=t.bottom;var h=C.alloc();if(h.h(i,a),n.Fa(h),this.Xg(h,!0)||(h.h(r,a),n.Fa(h),this.Xg(h,!0))||(h.h(i,t),n.Fa(h),this.Xg(h,!0))||(h.h(r,t),n.Fa(h),this.Xg(h,!0)))return C.free(h),!0;var g=C.alloc(),f=C.alloc();return n.set(e),n.Ou(this.transform),n.Tr(),g.x=r,g.y=a,g.transform(n),h.x=i,h.y=a,h.transform(n),e=!1,Pa(this,h,g,f)?e=!0:(h.x=r,h.y=t,h.transform(n),Pa(this,h,g,f)?e=!0:(g.x=i,g.y=t,g.transform(n),Pa(this,h,g,f)?e=!0:(h.x=i,h.y=a,h.transform(n),Pa(this,h,g,f)&&(e=!0)))),C.free(h),xt.free(n),C.free(g),C.free(f),e};function Pa(t,e,n,i){if(!t.Or(e,n,i))return!1;t=e.x,e=e.y;var r=n.x,a=n.y;return n=i.x,i=i.y,t===r?(e<a?(t=e,e=a):t=a,i>=t&&i<=e):(t<r?(i=t,t=r):i=r,n>=i&&n<=t)}l.Vw=function(t,e,n){function i(N,k){for(var F=N.length,D=0;D<F;D+=2)if(k.td(N[D],N[D+1])>r)return!0;return!1}if(n&&this.fill!==null&&this.Xg(t,!0))return!0;var r=t.rf(e),a=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.sa,e===null&&(this.measure(1/0,1/0),e=this.sa,e===null))return!1;if(!n){var h=e.bounds,g=h.x,f=h.y,c=h.x+h.width;if(h=h.y+h.height,fr(t.x,t.y,g,f)<=r&&fr(t.x,t.y,c,f)<=r&&fr(t.x,t.y,g,h)<=r&&fr(t.x,t.y,c,h)<=r)return!0}if(g=e.startX,f=e.startY,c=e.endX,h=e.endY,e.type===W.j){if(n=(g-c)*(t.x-c)+(f-h)*(t.y-h),vn(t.x,t.y,g,f,c,h)<=(0<=(c-g)*(t.x-g)+(h-f)*(t.y-f)&&0<=n?r:a))return!0}else{if(e.type===W.u)return e=!1,n&&(e=vn(t.x,t.y,g,f,g,h)<=r||vn(t.x,t.y,g,f,c,f)<=r||vn(t.x,t.y,c,f,c,h)<=r||vn(t.x,t.y,g,h,c,h)<=r),e;if(e.type===W.F){e=t.x-(g+c)/2,a=t.y-(f+h)/2;var m=Math.abs(c-g)/2,y=Math.abs(h-f)/2;if(m===0||y===0)return vn(t.x,t.y,g,f,c,h)<=r;if(n){if(t=A.Hy(m,y,e,a),t*t<=r)return!0}else return!(fr(e,a,-m,0)>=r||fr(e,a,0,-y)>=r||fr(e,a,0,y)>=r||fr(e,a,m,0)>=r)}else if(e.type===W.m){if(c=e.bounds,a=c.x,g=c.y,f=c.x+c.width,c=c.y+c.height,t.x>f&&t.x<a&&t.y>c&&t.y<g&&vn(t.x,t.y,a,g,a,c)>r&&vn(t.x,t.y,a,g,f,g)>r&&vn(t.x,t.y,f,c,a,c)>r&&vn(t.x,t.y,f,c,f,g)>r)return!1;if(a=Math.sqrt(r),n){if(this.fill===null?IP(e,t.x,t.y,a):s0(e,t,a,!0,!1))return!0}else{for(n=e.figures,e=0;e<n.count;e++){if(a=n.s[e],h=a.startX,m=a.startY,t.td(h,m)>r)return!1;for(g=a.segments.s,f=g.length,c=0;c<f;c++)switch(y=g[c],y.type){case Xi:case qt:if(h=y.endX,m=y.endY,t.td(h,m)>r)return!1;break;case di:var S=Kt();if(A.De(h,m,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.8,S),h=i(S,t),Xt(S),h||(h=y.endX,m=y.endY,t.td(h,m)>r))return!1;break;case Co:if(S=Kt(),A.Go(h,m,y.point1X,y.point1Y,y.endX,y.endY,.8,S),h=i(S,t),Xt(S),h||(h=y.endX,m=y.endY,t.td(h,m)>r))return!1;break;case ye:case ro:S=y.type===ye?mr(y,a):la(y,a,h,m);var x=S.length;if(x===0){if(h=y.type===ye?y.centerX:y.endX,m=y.type===ye?y.centerY:y.endY,t.td(h,m)>r)return!1;break}y=null;for(var P=Kt(),L=0;L<x;L++)if(y=S[L],P.length=0,A.De(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],.8,P),i(P,t))return Xt(P),!1;Xt(P),y!==null&&(h=y[6],m=y[7]);break;default:B("Unknown Segment type: "+y.type)}}return!0}}}return!1},l.mc=function(){this.sa=null},l.Sv=function(){return this.ag};function yw(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=jg,t.toArrow!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Wn):t.fromArrow!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new ht(1-Wn.x,Wn.y)))}yt.makeGeometry=function(t,e,n){if(t.toArrow!=="None")var i=$o[t.toArrow];else t.fromArrow!=="None"?i=$o[t.fromArrow]:(i=A.Oe[t.figure],typeof i=="string"&&(i=A.Oe[i]),i===void 0&&B("Unknown Shape.figure: "+t.figure),i=i(t,e,n),i.Hk=e,i.Gk=n);if(i===null){var r=A.Oe.Rectangle;typeof r=="function"&&(i=r(t,e,n))}return i};function vw(t){var e=$o[t];if(e===void 0){var n=t.toLowerCase();if(n==="none")return"None";if(e=$o[n],e===void 0){var i=null,r;for(r in A.dm)if(r.toLowerCase()===n){i=r;break}if(i!==null)return t=W.parse(A.dm[i],!1),$o[i]=t,n!==i&&($o[n]=i),i}}return typeof e=="string"?e:e instanceof W?t:null}I.Object.defineProperties(yt.prototype,{geometry:{get:function(){return this.sa!==null?this.sa:this.Hd},set:function(t){var e=this.sa,n=this.Hd;if(e!==t){t!==null?this.Hd=this.sa=t.freeze():this.Hd=this.sa=null;var i=this.part;i!==null&&(i.Sf=NaN),this.w(),this.g("geometry",e||n,t),gl(this)&&(t=this.part,t!==null&&ca(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=W.parse(t);var e=t.normalize();this.geometry=t,this.position=t=C.allocAt(-e.x,-e.y),C.free(t)}},isGeometryPositioned:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.w(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(t!==null&&pl(t,"Shape.fill"),t instanceof Et&&t.freeze(),this.Ak=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Nc},set:function(t){var e=this.Nc;e!==t&&(t!==null&&pl(t,"Shape.stroke"),t instanceof Et&&t.freeze(),this.Nc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ag},set:function(t){var e=this.ag;if(e!==t)if(0<=t){this.ag=t,this.w();var n=this.part;n!==null&&(n.Sf=NaN),this.g("strokeWidth",e,t)}else gt(t,"value >= 0",yt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Na!==null?this.Na.dr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?gt(t,'"butt", "round", or "square"',yt,"strokeCap"):(Sa(this),this.Na.dr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Na!==null?this.Na.er:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?gt(t,'"miter", "bevel", or "round"',yt,"strokeJoin"):(Sa(this),this.Na.er=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Na!==null?this.Na.fr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){Sa(this),this.Na.fr=t,this.N();var n=this.part;n!==null&&(n.Sf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Og},set:function(t){var e=this.Og;if(e!==t){if(t!==null){for(var n=t.length,i=0,r=0;r<n;r++){var a=t[r];0<=a&&isFinite(a)||B("strokeDashArray:value "+a+" at index "+r+" must be a positive number or zero."),i+=a}if(i===0){if(e===null)return;t=null}}this.Og=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.Na!==null?this.Na.pj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(Sa(this),this.Na.pj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Jm},set:function(t){var e=this.Jm;if(e!==t){var n=A.Oe[t];typeof n=="function"?n=t:(n=A.Oe[t.toLowerCase()])||B("Unknown Shape.figure: "+t),e!==n&&(t=this.part,t!==null&&(t.Sf=NaN),this.Jm=n,this.Hd=null,this.mc(),this.w(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.Ra!==null?this.Ra.W:"None"},set:function(t){var e=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var n=vw(t);n===null?B("Unknown Shape.toArrow: "+t):e!==n&&(this.Ra===null&&(this.Ra=new Fs),this.Ra.W=n,this.Hd=null,this.mc(),this.w(),yw(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.Ra!==null?this.Ra.j:"None"},set:function(t){var e=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var n=vw(t);n===null?B("Unknown Shape.fromArrow: "+t):e!==n&&(this.Ra===null&&(this.Ra=new Fs),this.Ra.j=n,this.Hd=null,this.mc(),this.w(),yw(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.Na!==null?this.Na.Yf:Je},set:function(t){var e=this.spot1;e.C(t)||(t=t.J(),Sa(this),this.Na.Yf=t,this.w(),this.g("spot1",e,t))}},spot2:{get:function(){return this.Na!==null?this.Na.Zf:Je},set:function(t){var e=this.spot2;e.C(t)||(t=t.J(),Sa(this),this.Na.Zf=t,this.w(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.mc(),this.w(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.mc(),this.w(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.bc}},pathPattern:{get:function(){return this.Na!==null?this.Na.Aq:null},set:function(t){var e=this.pathPattern;e!==t&&(Sa(this),this.Na.Aq=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Na!==null?this.Na.Mp:Ki},set:function(t){var e=this.geometryStretch;e!==t&&(Sa(this),this.Na.Mp=t,this.w(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Ik:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new Jo),this.fa.Ik=t;var n=this.diagram;n!==null&&this.panel===n.grid&&Kr(n),this.w(),n=this.panel,n!==null&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Jo),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Jo),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new Jo),this.fa.m=t,this.w(),this.g("graduatedSkip",e,t))}}}),yt.prototype.intersectsRect=yt.prototype.Sc,yt.prototype.containedInRect=yt.prototype.Wg,yt.prototype.getNearestIntersectionPoint=yt.prototype.Or,yt.prototype.getDocumentBounds=yt.prototype.gi,yt.prototype.getDocumentPoint=yt.prototype.ia;var $o=new jn,wy=new jn;yt.className="Shape",yt.getFigureGenerators=function(){var t=new ct,e;for(e in A.Oe)e!==e.toLowerCase()&&t.add(e,A.Oe[e]);return t.freeze(),t},yt.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=A.Oe;i[t]=e,i[n]=t},yt.getArrowheadGeometries=function(){var t=new ct;for(i in A.dm)if($o[i]===void 0){var e=W.parse(A.dm[i],!1);$o[i]=e,e=i.toLowerCase(),e!==i&&($o[e]=i)}for(var n in $o)if(n!==n.toLowerCase()){var i=$o[n];i instanceof W&&t.add(n,i)}return t.freeze(),t},yt.defineArrowheadGeometry=function(t,e){var n=null;typeof e=="string"?n=W.parse(e,!1):n=e,e=t.toLowerCase(),e!=="none"&&t!==e||B("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=$o;i[t]=n,i[e]=t};function Ly(){this.ic=!1,this.dr="butt",this.er="miter",this.fr=10,this.pj=0,this.Aq=null,this.Mp=Ki,this.Zf=this.Yf=Je}Ly.prototype.copy=function(){var t=new Ly;return t.dr=this.dr,t.er=this.er,t.fr=this.fr,t.pj=this.pj,t.Aq=this.Aq,t.Mp=this.Mp,t.Yf=this.Yf.J(),t.Zf=this.Zf.J(),t};function Rt(t,e){return st.call(this),oc||(On=_i?new Di(null).context:null,oc=!0),this.o|=2097152,this.cc="",this.Nc="black",this.re="13px sans-serif",this.kq=this.yb=this.dd=0,this.da=this.fa=this.om=this.rt=this.st=null,this.zh=0,this.Te=null,this.Ae=0,this.qe=this.Wb=this.Jc=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}O(Rt,st),Rt.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.cc=this.cc,t.Nc=this.Nc,t.re=this.re,t.dd=this.dd,t.yb=this.yb,t.kq=this.kq,t.st=this.st,t.rt=this.rt,t.om=this.om,this.fa!==null&&(t.fa=this.fa.copy()),this.da!==null&&(t.da=this.da.ic?this.da:this.da.copy()),t.zh=this.zh,t.Te=this.Te,t.Ae=this.Ae,t.Jc=this.Jc,t.Wb=this.Wb,t.qe=this.qe};function Do(t){t.da===null?t.da=new Dy:t.da.ic&&(t.da=t.da.copy())}l=Rt.prototype,l.ih=function(){st.prototype.ih.call(this),this.da!==null&&(this.da.ic=!0)};function Sw(t,e){t.o=e.o|6144,t.tb=e.opacity,t.Yb=e.background,t.areaBackground=e.areaBackground,t.$c=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),e.Ib!==null?t.Ib=e.Ib.copy():t.Ib=null,t.xa=e.scale,t.Gb=e.angle,t.stretch=e.stretch,t.Ag=e.margin.J(),t.Fb=e.alignment.J(),t.fk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,e.ib!==null&&(t.ib=e.ib.copy()),t.shadowVisible=e.shadowVisible,t.cc=e.cc,t.Nc=e.Nc,t.re=e.re,t.fa!==null&&(t.fa=e.fa.copy()),e.da!==null&&(t.da=e.da.ic?e.da:e.da.copy()),t.zh=e.zh}l.ob=function(t){t.classType===Rt?this.wrap=t:st.prototype.ob.call(this,t)},l.toString=function(){return 22<this.cc.length?'TextBlock("'+this.cc.substring(0,20)+'"...)':'TextBlock("'+this.cc+'")'},l.w=function(){st.prototype.w.call(this),this.rt=this.st=null},l.ai=function(t,e){if(this.Nc!==null&&this.cc.length!==0&&this.re!==null){var n=this.naturalBounds,i=this.actualBounds,r=n.width,a=n.height,h=Mg(this),g=t.textAlign=this.textAlign,f=e.$m;g==="start"?g=f?"right":"left":g==="end"&&(g=f?"left":"right"),f=this.isUnderline;var c=this.isStrikethrough;ii(this,t,this.Nc,!0,!1,n,i),(f||c)&&ii(this,t,this.Nc,!1,!1,n,i),i=0,n=!1;var m=this.ge,y=m.dx-(h*m.m21+m.dx);m=m.dy-(h*m.m22+m.dy);var S=e.scale;switch(8>(y*y+m*m)*S*S&&(n=!0),e.Zb!==t&&(n=!1),e.Ge("textGreeking")===!1&&(n=!1),e=this.spacingAbove,y=this.spacingBelow,this.flip){case fg:t.translate(r,0),t.scale(-1,1);break;case dg:t.translate(0,a),t.scale(1,-1);break;case cg:t.translate(r,a),t.scale(-1,-1)}if(t.Pc(),m=this.dd,S=(e+h+y)*m,a>S&&(i=this.verticalAlignment,i=i.y*a-i.y*S+i.offsetY),m===1&&this.qe!==null)y=this.yb,y>r&&(y=r),this.$h(this.qe,t,0,i+e,r,h,y,n,g,f,c);else if(this.Jc!==null&&this.Wb!==null)for(S=0;S<m;S++){var x=this.Jc[S];x>r&&(x=r),i+=e,this.$h(this.Wb[S],t,0,i,r,h,x,n,g,f,c),i+=h+y}switch(this.flip){case fg:t.scale(-1,1),t.translate(-r,0);break;case dg:t.scale(1,-1),t.translate(0,-a);break;case cg:t.scale(-1,-1),t.translate(-r,-a)}}},l.$h=function(t,e,n,i,r,a,h,g,f,c,m){var y=0;g?(f==="left"?y=0:f==="right"?y=r-h:f==="center"&&(y=(r-h)/2),e.fillRect(n+y,i+.25*a,h,1)):(f==="left"?y=0:f==="right"?y=r:f==="center"&&(y=r/2),r=tc!==null?tc(this,a):.75*a,e.fillText(t,n+y,i+r),t=a/20|0,t===0&&(t=1),f==="right"?y-=h:f==="center"&&(y-=h/2),c&&(f=ec!==null?ec(this,a):.8*a,e.beginPath(),e.lineWidth=t,e.moveTo(n+y,i+f),e.lineTo(n+y+h,i+f),e.stroke()),m&&(e.beginPath(),e.lineWidth=t,i=i+a-a/2.2|0,t%2!==0&&(i+=.5),e.moveTo(n+y,i),e.lineTo(n+y+h,i),e.stroke()))},l.El=function(t,e,n,i){this.zh=t;var r=this.re;On!==null&&Nw!==r&&(Nw=On.font=r),this.yb=this.Ae=0,this.qe=this.Wb=this.Jc=this.Te=null;var a;if(isNaN(this.desiredSize.width)){if(r=this.cc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.length===0)r=0;else if(this.isMultiline){for(var h=a=0,g=!1;!g;){var f=r.indexOf(`
`,h);f===-1&&(f=r.length,g=!0),h=r.substr(h,f-h),this.formatting===kg&&(h=h.trim()),a=Math.max(a,Wi(h)),h=f+1}r=a}else a=r.indexOf(`
`,0),0<=a&&(r=r.substr(0,a)),r=Wi(r);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.desiredSize.width;if(this.panel!==null&&(r=Math.min(r,this.panel.maxSize.width)),a=xw(this,r),isNaN(this.desiredSize.height)?a=Math.min(a,e/this.scale):a=this.desiredSize.height,g=a,this.yb!==0&&this.Jc!==null&&this.Wb!==null&&this.overflow===nc&&(e=this.re,e=this.overflow===nc?Pw(e):0,f=this.spacingAbove+this.spacingBelow,f=Math.max(0,Mg(this)+f),g=Math.min(this.maxLines-1,Math.max(Math.floor(g/f+.01)-1,0)),!(g+1>=this.Wb.length))){for(f=this.Wb[g],e=Math.max(1,t-e);Wi(f)>e&&1<f.length;)f=f.substr(0,f.length-1);f+=Ng,e=Wi(f),this.Wb[g]=f,this.Wb=this.Wb.slice(0,g+1),this.Jc[g]=e,this.Jc=this.Jc.slice(0,g+1),this.Ae=this.Wb.length,this.yb=Math.max(this.yb,e),this.dd=this.Ae,this.dd===1&&(this.qe=this.Wb[0])}(this.wrap===ww||isNaN(this.desiredSize.width))&&(r=isNaN(t)?this.yb:Math.min(t,this.yb),isNaN(this.desiredSize.width)&&(r=Math.max(8,r))),r=Math.max(n,r),a=Math.max(i,a),cr(this.bc,r,a),this.ve(0,0,r,a)},l.Vg=function(t,e,n,i){ty(this,t,e,n,i)};function Lg(t,e,n){t.qe===null?(t.qe=e,t.yb=n):((t.Wb===null||t.Jc===null)&&(t.Wb=[],t.Jc=[],t.Wb.push(t.qe),t.Jc.push(t.yb)),t.Wb.push(e),t.Jc.push(n))}function My(t,e,n,i){var r=t.formatting===kg;r&&(e=e.trim());var a=0,h=t.re,g=t.spacingAbove+t.spacingBelow;g=Math.max(0,Mg(t)+g);var f=t.overflow===nc?Pw(h):0;if(t.dd>=t.maxLines)i!==null&&i.h(0,g);else if(h=e,t.wrap===ky){t.Ae=1;var c=Wi(e);if(f===0||c<=n)t.yb=Math.max(t.yb,c),Lg(t,e,t.yb),i!==null&&i.h(c,g);else{for(a=Rh(t,h),h=h.substr(a.length),e=Rh(t,h),c=Wi(a+e);0<e.length&&c<=n;)a+=e,h=h.substr(e.length),e=Rh(t,h),c=a+e,r&&(c=c.trim()),c=Wi(c);for(r&&(e=e.trim()),a+=e,n=Math.max(1,n-f);Wi(a)>n&&1<a.length;)a=a.substr(0,a.length-1);a+=Ng;var m=Wi(a);t.yb=m,Lg(t,a,m),i!==null&&i.h(m,g)}}else{for(f=0,h.length===0&&(f=1,Lg(t,h,0));0<h.length;){for(e=Rh(t,h),h=h.substr(e.length);Wi(e)>n;){var y=1;for(c=Wi(e.substr(0,y)),m=0;c<=n;)y++,m=c,c=Wi(e.substr(0,y));if(y===1){var S=c;a=Math.max(a,c)}else S=m,a=Math.max(a,m);if(y--,1>y&&(y=1),Lg(t,e.substr(0,y),S),f++,e=e.substr(y),t.dd+f>t.maxLines)break}for(m=Rh(t,h),c=Wi(e+m);0<m.length&&c<=n;)e+=m,h=h.substr(m.length),m=Rh(t,h),c=e+m,r&&(c=c.trim()),c=Wi(c);if(r&&(e=e.trim()),e!==""&&(e[e.length-1]==="\xAD"&&(e=e.substring(0,e.length-1)+"\u2010"),m.length===0?(y=c,a=Math.max(a,c)):(y=m=Wi(e),a=Math.max(a,m)),Lg(t,e,y),f++,t.dd+f>t.maxLines))break}t.Ae=Math.min(t.maxLines,f),t.yb=Math.max(t.yb,a),i!==null&&i.h(t.yb,g*t.Ae)}}function Rh(t,e){if(t.wrap===Lw)return e.substr(0,1);for(var n=e.length,i=0,r=mN;i<n&&!r.test(e.charAt(i));)i++;for(t.formatting===Mw&&(n=Math.min(n,i+1));i<n&&r.test(e.charAt(i));)i++;return i>=e.length?e:e.substr(0,i)}function Wi(t){return On===null?8*t.length:On.measureText(t).width}function Mg(t){if(t.Te!==null)return t.Te;var e=t.re;if(On===null){var n=16;return t.Te=n}return Ty[e]!==void 0&&5e3>kw?n=Ty[e]:(n=1.3*On.measureText("M").width,Ty[e]=n,kw++),t.Te=n}function Pw(t){if(On===null)return 6;if(ic[t]!==void 0&&5e3>Fy)var e=ic[t];else e=On.measureText(Ng).width,ic[t]=e,Fy++;return e}function xw(t,e){var n=t.cc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),i=t.spacingAbove+t.spacingBelow;if(i=Math.max(0,Mg(t)+i),n.length===0)return t.yb=0,t.dd=1,i;if(!t.isMultiline){var r=n.indexOf(`
`,0);0<=r&&(n=n.substr(0,r))}r=0;for(var a=t.dd=0,h,g=!1;!g;){if(h=n.indexOf(`
`,a),h===-1&&(h=n.length,g=!0),a<=h){if(a=n.substr(a,h-a),t.wrap!==ky){t.Ae=0;var f=dt.alloc();My(t,a,e,f),r+=f.height,dt.free(f),t.dd+=t.Ae}else My(t,a,e,null),r+=i,t.dd++;t.dd===t.maxLines&&(g=!0)}a=h+1}return t.kq=r}I.Object.defineProperties(Rt.prototype,{font:{get:function(){return this.re},set:function(t){var e=this.re;e!==t&&(this.re=t,this.Te=null,this.w(),this.g("font",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;t!=null?t=t.toString():t="",e!==t&&(this.cc=t,this.w(),this.g("text",e,t))}},textAlign:{get:function(){return this.da!==null?this.da.mr:"start"},set:function(t){var e=this.textAlign;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(Do(this),this.da.mr=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.da!==null?this.da.Nf:ae},set:function(t){var e=this.flip;e!==t&&(Do(this),this.da.Nf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.da!==null?this.da.xr:gf},set:function(t){var e=this.verticalAlignment;e.C(t)||(t=t.J(),Do(this),this.da.xr=t,Th(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.bc.v()){var t=dt.alloc();My(this,this.cc,999999,t);var e=t.width;dt.free(t),t=xw(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),cr(this.bc,e,t)}return this.bc}},isMultiline:{get:function(){return(this.o&2097152)!==0},set:function(t){var e=(this.o&2097152)!==0;e!==t&&(this.o^=2097152,this.w(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return(this.o&4194304)!==0},set:function(t){var e=(this.o&4194304)!==0;e!==t&&(this.o^=4194304,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return(this.o&8388608)!==0},set:function(t){var e=(this.o&8388608)!==0;e!==t&&(this.o^=8388608,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.da!==null?this.da.Ar:Ny},set:function(t){var e=this.wrap;e!==t&&(Do(this),this.da.Ar=t,this.w(),this.g("wrap",e,t))}},overflow:{get:function(){return this.da!==null?this.da.yq:Cy},set:function(t){var e=this.overflow;e!==t&&(Do(this),this.da.yq=t,this.w(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Nc},set:function(t){var e=this.Nc;e!==t&&(t!==null&&pl(t,"TextBlock.stroke"),t instanceof Et&&t.freeze(),this.Nc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.dd}},lineHeight:{get:function(){return Mg(this)}},editable:{get:function(){return(this.o&1048576)!==0},set:function(t){var e=(this.o&1048576)!==0;e!==t&&(this.o^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return this.da!==null?this.da.pr:null},set:function(t){var e=this.textEditor;e!==t&&(Do(this),this.da.pr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.da!==null?this.da.zd:null},set:function(t){var e=this.errorFunction;e!==t&&(Do(this),this.da.zd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Ik:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new Jo),this.fa.Ik=t,this.w();var n=this.panel;n!==null&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Jo),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Jo),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.fa!==null?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(this.fa===null&&(this.fa=new Jo),this.fa.F=t,this.w(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new Jo),this.fa.m=t,this.w(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.da!==null?this.da.qj:null},set:function(t){var e=this.textValidation;e!==t&&(Do(this),this.da.qj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.da!==null?this.da.nr:null},set:function(t){var e=this.textEdited;e!==t&&(Do(this),this.da.nr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.da!==null?this.da.$q:0},set:function(t){var e=this.spacingAbove;e!==t&&(Do(this),this.da.$q=t,this.w(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.da!==null?this.da.ar:0},set:function(t){var e=this.spacingBelow;e!==t&&(Do(this),this.da.ar=t,this.w(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.da!==null?this.da.Jp:kg},set:function(t){var e=this.formatting;e!==t&&(Do(this),this.da.Jp=t,this.w(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.da!==null?this.da.iq:1/0},set:function(t){var e=this.maxLines;e!==t&&(t=Math.floor(t),0>=t&&gt(t,"> 0",Rt,"maxLines"),Do(this),this.da.iq=t,this.w(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Jc!==null?this.Jc:[this.yb],arrText:this.Wb!==null?this.Wb:[this.qe],maxLineWidth:this.yb,fontHeight:this.Te}}},choices:{get:function(){return this.om},set:function(t){var e=this.om;e!==t&&(this.om=t,this.g("choices",e,t))}}});var tc=null,ec=null,ky=new $(Rt,"None",0),ww=new $(Rt,"WrapFit",1),Ny=new $(Rt,"WrapDesiredSize",2),Lw=new $(Rt,"WrapBreakAll",3),Cy=new $(Rt,"OverflowClip",0),nc=new $(Rt,"OverflowEllipsis",1),kg=new $(Rt,"FormatTrim",0),Mw=new $(Rt,"FormatNone",0),mN=/[ \u200b\u00ad]/,Ty=new jn,kw=0,ic=new jn,Fy=0,Ng="...",Nw="",On=null,oc=!1;Rt.className="TextBlock";function Dy(){this.ic=!1,this.zd=null,this.Nf=ae,this.Jp=kg,this.iq=1/0,this.yq=Cy,this.ar=this.$q=0,this.mr="start",this.qj=this.pr=this.nr=null,this.xr=gf,this.Ar=Ny}Dy.prototype.copy=function(){var t=new Dy;return t.zd=this.zd,t.Nf=this.Nf,t.Jp=this.Jp,t.iq=this.iq,t.yq=this.yq,t.$q=this.$q,t.ar=this.ar,t.mr=this.mr,t.nr=this.nr,t.pr=this.pr,t.qj=this.qj,t.xr=this.xr,t.Ar=this.Ar,t},Rt.getEllipsis=function(){return Ng},Rt.setEllipsis=function(t){Ng=t,ic=new jn,Fy=0},Rt.getBaseline=function(){return tc},Rt.setBaseline=function(t){tc=t},Rt.getUnderline=function(){return ec},Rt.setUnderline=function(t){ec=t},Rt.isValidFont=function(t){if(oc||(On=_i?new Di(null).context:null,oc=!0),On===null)return!0;var e=On.font;if(t===e||t==="10px sans-serif")return!0;On.font="10px sans-serif",On.font=t;var n=On.font;if(n!=="10px sans-serif")return On.font=e,!0;On.font="19px serif";var i=On.font;return On.font=t,n=On.font,On.font=e,n!==i},Rt.FormatNone=Mw,Rt.FormatTrim=kg,Rt.None=ky,Rt.OverflowClip=Cy,Rt.OverflowEllipsis=nc,Rt.WrapBreakAll=Lw,Rt.WrapDesiredSize=Ny,Rt.WrapFit=ww;function Jo(){this.Ik=1,this.u=0,this.j=1,this.m=this.F=null}Jo.prototype.copy=function(){var t=new Jo;return t.Ik=this.Ik,t.u=this.u,t.j=this.j,t.F=this.F,t.m=this.m,t},Jo.className="GradElementSettings";function Rn(t,e){st.call(this),this.vg=null,this.Tn="",this.Ng=wP,this.Ck=he,this.Pg=this.zd=null,this.Bk=Gt,this.Nf=ae,this.kl=null,this.Xm=!1,this.Mm=!0,this.Qk=!1,this.gl=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var Vh;O(Rn,st),Rn.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.Tn=this.Tn,t.element=this.vg,t.Ng=this.Ng.J(),t.Ck=this.Ck,t.Nf=this.Nf,t.zd=this.zd,t.Pg=this.Pg,t.Bk=this.Bk.J(),t.Mm=this.Mm,t.gl=this.gl},Rn.prototype.ob=function(t){t===ae||t===To||t===gg?this.imageStretch=t:st.prototype.ob.call(this,t)},Rn.prototype.toString=function(){return"Picture("+this.source+")#"+Te(this)};function Yh(t){t===void 0&&(t=""),t!==""?Vh[t]&&(delete Vh[t],rc--):(Vh=new jn,rc=0)}function Cw(t,e){e.Wx||(e.fq=function(n){e.Up=!0,e.Sm=!1;var i=e.sg.copy();if(i!=null){for(i=i.iterator;i.next();){var r=i.value,a=e.getAttribute("src")||"",h=r.Fg.I(a);if(h!==null)for(var g=h.length,f=0;f<g;f++)a=h[f],r.Fn.add(a),r.Mb(),e.Pm&&(e.Kt===void 0&&(e.Kt=n),a.Pg!==null&&a.Pg(a,n))}e.sg.clear()}t.desiredSize.v()||(mi(t,!1),t.w())},e.Bp=function(n){e.Sm=n;var i=e.sg.copy();if(i!=null){for(i=i.iterator;i.next();){var r=i.value,a=e.getAttribute("src")||"",h=r.Fg.I(a);if(h!==null){r=h.length,a=Kt();for(var g=0;g<r;g++)a.push(h[g]);if(e.Pm)for(g=0;g<r;g++)h=a[g],h.zd!==null&&h.zd(h,n);Xt(a)}}e.sg.clear()}},e.addEventListener("load",e.fq),e.addEventListener("error",e.Bp),e.Wx=!0)}Rn.prototype.Oz=function(){if(this.source!==""){Yh(this.source);var t=this.source;this.source="",this.source=t}},Rn.prototype.redraw=function(){this.N()},Rn.prototype.ai=function(t,e){var n=this.vg;if(n!==null){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(i===null||i==="")||n.Sm instanceof Event&&t instanceof ya)){i=this.naturalBounds;var r=0,a=0,h=this.Xm,g=h?+n.width:n.naturalWidth;if(h=h?+n.height:n.naturalHeight,g===void 0&&n.videoWidth&&(g=n.videoWidth),h===void 0&&n.videoHeight&&(h=n.videoHeight),g=g||i.width,h=h||i.height,g!==0&&h!==0){var f=g,c=h;this.sourceRect.v()&&(r=this.Ng.x,a=this.Ng.y,g=this.Ng.width,h=this.Ng.height);var m=g,y=h,S=this.Ck,x=this.Bk;switch(S){case ae:if(this.sourceRect.v())break;m>=i.width&&(r=r+x.offsetX+(m*x.x-i.width*x.x)),y>=i.height&&(a=a+x.offsetY+(y*x.y-i.height*x.y)),g=Math.min(i.width,m),h=Math.min(i.height,y);break;case he:m=i.width,y=i.height;break;case To:case gg:S===To?(S=Math.min(i.height/y,i.width/m),m*=S,y*=S):S===gg&&(S=Math.max(i.height/y,i.width/m),m*=S,y*=S,m>=i.width&&(r=(r+x.offsetX+(m*x.x-i.width*x.x)/m)*g),y>=i.height&&(a=(a+x.offsetY+(y*x.y-i.height*x.y)/y)*h),g*=1/(m/i.width),h*=1/(y/i.height),m=i.width,y=i.height)}S=this.uf()*e.scale;var P=m*S*y*S,L=g*h/P,N=n.__goCache;S=null;var k=yN;if(n.Up&&N!==void 0&&4<P&&L>k*k)for(N.Zh===null&&(Fw(N,4,f,c,n),Fw(N,16,f,c,n)),f=N.Zh,c=f.length,P=0;P<c&&f[P].ratio*f[P].ratio<L;P++)S=f[P];if(!e.Fm){if(this.kl===null)if(this.vg===null)this.kl=!1;else{f=new Di(null).context;try{f.drawImage(this.vg,0,0)}catch{this.Mm=!1}try{f.getImageData(0,0,1,1).data[3]&&(this.kl=!1),this.kl=!1}catch{this.kl=!0}}if(this.kl)return}switch(f=0,m<i.width&&(f=x.offsetX+(i.width*x.x-m*x.x)),c=0,y<i.height&&(c=x.offsetY+(i.height*x.y-y*x.y)),this.flip){case fg:t.translate(Math.min(i.width,m),0),t.scale(-1,1);break;case dg:t.translate(0,Math.min(i.height,y)),t.scale(1,-1);break;case cg:t.translate(Math.min(i.width,m),Math.min(i.height,y)),t.scale(-1,-1)}if(t.Pc(),e.Ge("pictureRatioOptimization")&&!e.Vi&&N!==void 0&&S!==null&&S.ratio!==1){t.save(),e=S.ratio;try{t.drawImage(S.source,r/e,a/e,Math.min(S.source.width,g/e),Math.min(S.source.height,h/e),f,c,Math.min(i.width,m),Math.min(i.height,y))}catch{this.Mm=!1}t.restore()}else try{t.drawImage(n,r,a,g,h,f,c,Math.min(i.width,m),Math.min(i.height,y))}catch{this.Mm=!1}switch(this.flip){case fg:t.scale(-1,1),t.translate(-Math.min(i.width,m),0);break;case dg:t.scale(1,-1),t.translate(0,-Math.min(i.height,y));break;case cg:t.scale(-1,-1),t.translate(-Math.min(i.width,m),-Math.min(i.height,y))}}}}},Rn.prototype.El=function(t,e,n,i){var r=this.desiredSize,a=ho(this,!0),h=this.vg,g=this.Xm;(g||!this.Qk&&h&&h.complete)&&(this.Qk=!0),h===null&&(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)),isFinite(r.width)||a===he||a===_e?(isFinite(t)||(this.sourceRect.v()?t=this.sourceRect.width:h!==null&&(t=g?+h.width:h.naturalWidth)),n=0):h!==null&&this.Qk!==!1&&(t=this.sourceRect.v()?this.sourceRect.width:g?+h.width:h.naturalWidth),isFinite(r.height)||a===he||a===Qe?(isFinite(e)||(this.sourceRect.v()?e=this.sourceRect.height:h!==null&&(e=g?+h.height:h.naturalHeight)),i=0):h!==null&&this.Qk!==!1&&(e=this.sourceRect.v()?this.sourceRect.height:g?+h.height:h.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,a=this.minSize,n=Math.max(n||0,a.width),i=Math.max(i||0,a.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(n,t),e=Math.max(i,e),h===null||h.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),cr(this.bc,t,e),this.ve(0,0,t,e)},Rn.prototype.Vg=function(t,e,n,i){ty(this,t,e,n,i)},I.Object.defineProperties(Rn.prototype,{element:{get:function(){return this.vg},set:function(t){var e=this.vg;if(e!==t){this.Xm=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;t===null||n||t instanceof HTMLVideoElement||this.Xm||B("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var i=this.diagram;i!==null&&V0(i,this),this.vg=t,t!==null&&n&&t.sg===void 0&&(t.sg=new Z),i!==null&&n&&R0(i,this),t!==null&&(this.Xm||t.complete===!0?(t.Pm&&(t.Sm instanceof Event&&this.zd!==null?this.zd(this,t.Sm):t.Up===!0&&!t.Sm&&this.Pg!==null&&t.Kt&&this.Pg(this,t.Kt)),t.Up=!0,this.desiredSize.v()||(mi(this,!1),this.w())):n&&Cw(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.Tn},set:function(t){var e=this.Tn;if(e!==t){this.Tn=t;var n=Vh;if(_i){if(n[t]!==void 0)var i=n[t];else if(t!==""){30<rc&&(Yh(),n=Vh),i=Q("img"),i.Pm=!0,Cw(this,i);var r=this.gl;r!==null&&(i.crossOrigin=r(this)),i.src=t,n[t]=i,rc++}this.element=i,i!==null&&i.__goCache===void 0&&(i.__goCache=new Tw),this.w(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.gl},set:function(t){if(this.gl!==t&&(this.gl=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Ng},set:function(t){var e=this.Ng;e.C(t)||(this.Ng=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Ck},set:function(t){var e=this.Ck;e!==t&&(this.Ck=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Nf},set:function(t){var e=this.Nf;e!==t&&(this.Nf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Bk},set:function(t){var e=this.Bk;e.C(t)||(this.Bk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.zd},set:function(t){var e=this.zd;e!==t&&(this.zd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Pg},set:function(t){var e=this.Pg;e!==t&&(this.Pg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.bc}}}),Rn.prototype.redraw=Rn.prototype.redraw,Rn.prototype.reloadSource=Rn.prototype.Oz;var rc=0,yN=4;Rn.className="Picture",Vh=new jn,Rn.clearCache=Yh;function Tw(){this.Zh=null}function Fw(t,e,n,i,r){t.Zh===null&&(t.Zh=[]);var a=new Di(null),h=a.context,g=1/e;a.width=n/e,a.height=i/e,a.width!==0&&a.height!==0&&(e=new Dw(a.Sa,e),n=1,0<t.Zh.length&&(n=t.Zh[t.Zh.length-1],r=n.source,n=n.ratio),h.setTransform(g*n,0,0,g*n,0,0),h.Pc(),h.drawImage(r,0,0),t.Zh.push(e))}Tw.className="PictureCacheArray";function Dw(t,e){this.source=t,this.ratio=e}Dw.className="PictureCacheInstance";function ml(){this.Lr=new W,this.pc=null}ml.prototype.reset=function(t){t!==null?(t.ja(),this.Lr=t,t.figures.clear()):this.Lr=new W,this.pc=null};function Uh(t,e,n,i,r){t.pc=new ze,t.pc.startX=e,t.pc.startY=n,t.pc.isFilled=i,t.Lr.figures.add(t.pc),r!==void 0&&(t.pc.isShadowed=r)}function vN(t){var e=t.pc.segments.length;0<e&&t.pc.segments.K(e-1).close()}ml.prototype.Xl=function(t){this.pc.isShadowed=t},ml.prototype.moveTo=function(t,e,n){n===void 0&&(n=!1);var i=new Tt(Xi);i.endX=t,i.endY=e,n&&i.close(),this.pc.segments.add(i)},ml.prototype.lineTo=function(t,e,n){n===void 0&&(n=!1);var i=new Tt(qt);i.endX=t,i.endY=e,n&&i.close(),this.pc.segments.add(i)};function Qr(t,e,n,i,r,a,h){var g;g===void 0&&(g=!1);var f=new Tt(di);f.point1X=e,f.point1Y=n,f.point2X=i,f.point2Y=r,f.endX=a,f.endY=h,g&&f.close(),t.pc.segments.add(f)}function sc(t,e,n,i,r){var a;a===void 0&&(a=!1);var h=new Tt(Co);h.point1X=e,h.point1Y=n,h.endX=i,h.endY=r,a&&h.close(),t.pc.segments.add(h)}ml.prototype.arcTo=function(t,e,n,i,r,a,h){a===void 0&&(a=0),h===void 0&&(h=!1);var g=new Tt(ye);g.startAngle=t,g.sweepAngle=e,g.centerX=n,g.centerY=i,g.radiusX=r,g.radiusY=a!==0?a:r,h&&g.close(),this.pc.segments.add(g)};function SN(t,e,n,i,r,a,h,g){var f;f===void 0&&(f=!1),e=new Tt(ro,h,g,e,n,i,r,a),f&&e.close(),t.pc.segments.add(e)}function jw(t){var e=ac;return e!==null?(ac=null,e.reset(t),e):(e=new ml,e.reset(t),e)}var ac=null;ml.className="StreamGeometryContext";function qe(t,e){var n=t.toLowerCase(),i=A.Oe;i[t]=e,i[n]=t}qe("Rectangle",function(t,e,n){t="r"+e+","+n;var i=A.Df[t];return i!==void 0||(i=new W(W.u),i.endX=e,i.endY=n,A.Ef<A.em&&(A.Df[t]=i,A.Ef++)),i}),qe("Square",function(t,e,n){t="s"+e+","+n;var i=A.Df[t];return i!==void 0||(i=new W(W.u),i.endX=e,i.endY=n,i.defaultStretch=To,A.Ef<A.em&&(A.Df[t]=i,A.Ef++)),i}),qe("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,n/3);var i="rr"+e+","+n+","+t,r=A.Df[i];if(r!==void 0)return r;var a=t*A.ng;return r=new W().add(new ze(t,0,!0).add(new Tt(qt,e-t,0)).add(new Tt(di,e,t,e-a,0,e,a)).add(new Tt(qt,e,n-t)).add(new Tt(di,e-t,n,e,n-a,e-a,n)).add(new Tt(qt,t,n)).add(new Tt(di,0,n-t,a,n,0,n-a)).add(new Tt(qt,0,t)).add(new Tt(di,t,0,0,a,a,0).close())),1<a&&(r.spot1=new ht(0,0,a,a),r.spot2=new ht(1,1,-a,-a)),A.Ef<A.em&&(A.Df[i]=r,A.Ef++),r}),qe("Border","RoundedRectangle"),qe("Ellipse",function(t,e,n){t="e"+e+","+n;var i=A.Df[t];return i!==void 0||(i=new W(W.F),i.endX=e,i.endY=n,i.spot1=i0,i.spot2=o0,A.Ef<A.em&&(A.Df[t]=i,A.Ef++)),i}),qe("Circle",function(t,e,n){t="c"+e+","+n;var i=A.Df[t];return i!==void 0||(i=new W(W.F),i.endX=e,i.endY=n,i.spot1=i0,i.spot2=o0,i.defaultStretch=To,A.Ef<A.em&&(A.Df[t]=i,A.Ef++)),i}),qe("TriangleRight",function(t,e,n){return new W().add(new ze(0,0).add(new Tt(qt,e,.5*n)).add(new Tt(qt,0,n).close())).Yl(0,.25,.5,.75)}),qe("TriangleDown",function(t,e,n){return new W().add(new ze(0,0).add(new Tt(qt,e,0)).add(new Tt(qt,.5*e,n).close())).Yl(.25,0,.75,.5)}),qe("TriangleLeft",function(t,e,n){return new W().add(new ze(e,n).add(new Tt(qt,0,.5*n)).add(new Tt(qt,e,0).close())).Yl(.5,.25,1,.75)}),qe("TriangleUp",function(t,e,n){return new W().add(new ze(e,n).add(new Tt(qt,0,n)).add(new Tt(qt,.5*e,0).close())).Yl(.25,.5,.75,1)}),qe("Triangle","TriangleUp"),qe("Diamond",function(t,e,n){return new W().add(new ze(.5*e,0).add(new Tt(qt,0,.5*n)).add(new Tt(qt,.5*e,n)).add(new Tt(qt,e,.5*n).close())).Yl(.25,.25,.75,.75)}),qe("LineH",function(t,e,n){return t=new W(W.j),t.startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),qe("LineV",function(t,e,n){return t=new W(W.j),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),qe("None","Rectangle"),qe("BarH","Rectangle"),qe("BarV","Rectangle"),qe("MinusLine","LineH"),qe("PlusLine",function(t,e,n){return new W().add(new ze(0,n/2,!1).add(new Tt(qt,e,n/2)).add(new Tt(Xi,e/2,0)).add(new Tt(qt,e/2,n)))}),qe("XLine",function(t,e,n){return new W().add(new ze(0,n,!1).add(new Tt(qt,e,0)).add(new Tt(Xi,0,0)).add(new Tt(qt,e,n)))}),qe("LineRight",function(t,e,n){return new W().add(new ze(.25*e,0,!1).add(new Tt(qt,.75*e,.5*n)).add(new Tt(qt,.25*e,n)))}),qe("LineDown",function(t,e,n){return new W().add(new ze(0,.25*n,!1).add(new Tt(qt,.5*e,.75*n)).add(new Tt(qt,e,.25*n)))}),qe("LineLeft",function(t,e,n){return new W().add(new ze(.75*e,0,!1).add(new Tt(qt,.25*e,.5*n)).add(new Tt(qt,.75*e,n)))}),qe("LineUp",function(t,e,n){return new W().add(new ze(0,.75*n,!1).add(new Tt(qt,.5*e,.25*n)).add(new Tt(qt,e,.75*n)))}),A.dm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function jy(){this.ic=!1,this.Qq=this.np=this.Zp=null,this.Sq="",this.Eq=this.Qp=this.Rq=null,this.Gq="",this.Fq=lf,this.Hq=null,this.Iq="",this.Kq=Je,this.gq="",this.hq=nn,this.oq=zm,this.jq=Bm,this.yp=null,this.bq=127,this.Wq=Gm,this.Vq="gray",this.Lg=4}jy.prototype.copy=function(){var t=new jy;return t.Zp=this.Zp,t.np=this.np,t.Qq=this.Qq,t.Sq=this.Sq,t.Rq=this.Rq,t.Qp=this.Qp,t.Eq=this.Eq,t.Gq=this.Gq,t.Fq=this.Fq.J(),t.Hq=this.Hq,t.Iq=this.Iq,t.Kq=this.Kq.J(),t.gq=this.gq,t.hq=this.hq.J(),t.oq=this.oq.J(),t.jq=this.jq.J(),t.yp=this.yp,t.bq=this.bq,t.Wq=this.Wq.J(),t.Vq=this.Vq,t.Lg=this.Lg,t};function lt(t,e){t===void 0||t instanceof Se||typeof t=="string"?X.call(this,t):(X.call(this),t&&(e=t)),this.G=2408959,this.Jf="",this.O=null,this.zg="",this.Hf=this.Kg=null,this.cc="",this.ph=this.Ah=null,this.de=new C(NaN,NaN).freeze(),this.af=null,this.eo=NaN,this.aw=-1,this.Vx=new G,this.Kh=null,this.Sf=NaN,e&&Object.assign(this,e)}O(lt,X),lt.prototype.cloneProtected=function(t){X.prototype.cloneProtected.call(this,t),t.G=this.G&-4097|49152,t.Jf=this.Jf,this.O!==null&&(t.O=this.O.ic?this.O:this.O.copy()),t.zg=this.zg,t.Hf=null,t.cc=this.cc,t.de.assign(this.de),t.eo=this.eo},l=lt.prototype,l.qf=function(t){X.prototype.qf.call(this,t),t.dh(),t.Kg=null,t.af=null,t.Kh=null},l.toString=function(){var t=gr(this.constructor)+"#"+Te(this);return this.data!==null&&(t+="("+Hn(this.data)+")"),t};function En(t){t.O===null?t.O=new jy:t.O.ic&&(t.O=t.O.copy())}l.ih=function(){X.prototype.ih.call(this),this.O!==null&&(this.O.ic=!0)},l.$j=function(t,e,n,i,r,a,h){var g=this.diagram;g!==null&&(t===xe&&e==="elements"?r instanceof X?va(r,function(f){rv(g.partManager,f),Tx(g,f)}):R0(g,r):t===Fe&&e==="elements"&&(r instanceof X?va(r,function(f){sv(g.partManager,f,g)}):V0(g,r)),g.bb(t,e,n,i,r,a,h))},l.Ka=function(t){if(X.prototype.Ka.call(this,t),this.data!==null){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];r instanceof X&&va(r,function(a){a.data!==null&&a.Ka()})}for(e=this.adornments;e.next();)e.value.Ka(t)}},lt.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},lt.prototype.Hj=function(t){var e=this.Hf;return e===null?null:e.I(t)},lt.prototype.Tg=function(t,e){if(e!==null){var n=null,i=this.Hf;if(i!==null&&(n=i.I(t)),n!==e){if(n!==null){var r=n.diagram;r!==null&&r.remove(n)}i===null&&(this.Hf=i=new ct),e.Jf!==t&&(e.category=t),i.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.Yg(),t!==null&&(e.data=t.data)))}}},lt.prototype.Af=function(t){var e=this.Hf;if(e!==null){var n=e.I(t);if(n!==null){var i=n.diagram;i!==null&&i.remove(n)}e.remove(t),e.count===0&&(this.Hf=null)}},lt.prototype.zj=function(){var t=this.Hf;if(t!==null){var e=Kt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Af(e[n]);Xt(e)}},lt.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var n=e.value;n.w(),n.placeholder&&n.placeholder.w()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.v()&&this.isVisible()&&e.zf()&&e.actualBounds.v())){if(n=this.Hj("Selection"),n===null){if(n=this.selectionAdornmentTemplate,n===null&&(n=this.eh()?t.linkSelectionAdornmentTemplate:this instanceof pt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof Ct))break t;ji(n),n=n.copy(),n!==null&&(this.eh()&&this.selectionObject===this.path&&(n.type=X.Link),n.adornedObject=e)}if(n!==null){n.type===X.Link&&n.w(),this.Tg("Selection",n);break t}}this.Af("Selection")}for(PN(this,t),e=this.adornments;e.next();)e.value.Ka()}},lt.prototype.Rb=function(){var t=this.diagram;t!==null&&(da(t),(this.G&16384)===0&&(this.G|=16384,t.Mb()))};function Oy(t){(t.G&16384)!==0&&(t.updateAdornments(),t.G&=-16385)}function PN(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function lc(t){if(br(t)===!1){Iy(t,!0),t.Jk();var e=t.diagram;e!==null&&(e.te.add(t),e.Mb())}}function Ow(t){if(t.G|=2097152,br(t)!==!1){var e=t.position,n=t.location;n.v()&&e.v()||Iw(t,e,n),n=t.Eb;var i=G.alloc().assign(n);n.ja(),n.x=e.x,n.y=e.y,n.freeze(),t.Fl(i,n),G.free(i),Iy(t,!1)}}lt.prototype.ve=function(t,e,n,i){var r=this.qc;r.h(t,e,n,i),this.Ib===null&&(this.Ib=new xt);var a=this.Ib;a.reset(),this.Qn(a,t,e,n,i),this.Ib=a,a.Ur()||a.So(r)},lt.prototype.Qn=function(t,e,n,i,r){if(this.xa!==1&&t.scale(this.xa),this.Gb!==0){var a=Gt;this.locationSpot.pb()&&(a=this.locationSpot);var h=C.alloc();if(this.locationObject!==this)for(e=this.locationObject,n=e.naturalBounds,h.pi(n.x,n.y,n.width,n.height,a),e.Ib!==null&&e.Ib.Fa(h),h.offset(-e.measuredBounds.x,-e.measuredBounds.y),a=e.panel;a!==null&&a!==this;)a.Ib!==null&&a.Ib.Fa(h),h.offset(-a.measuredBounds.x,-a.measuredBounds.y),a=a.panel;else h.pi(e,n,i,r,a);t.rotate(this.Gb,h.x,h.y),C.free(h)}},lt.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},lt.prototype.moveTo=function(t,e,n){t=C.allocAt(t,e),this.move(t,n),C.free(t)},lt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.es(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},lt.prototype.Ub=function(t){var e=this.diagram;t?(this.D(4),this.Rb(),e!==null&&e.te.add(this)):(this.D(8),this.zj()),this.dh(),e!==null&&(e.Va(),e.N())},lt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Kh;if(e===null&&(this.Kh=e=new ct),e.I(t)!==null)return e.I(t);var n=X.prototype.fb.call(this,t);return n!==null?(e.set(t,n),n):(e.set(t,null),null)};function qr(t,e,n,i){i===void 0&&(i=new C),n=n.Fc()?Gt:n;var r=e.naturalBounds;if(i.h(r.width*n.x+n.offsetX,r.height*n.y+n.offsetY),e===null||e===t)return i;for(e.transform.Fa(i),e=e.panel;e!==null&&e!==t;)e.transform.Fa(i),e=e.panel;return t.Ib!==null&&t.Ib.Fa(i),i.offset(-t.qc.x,-t.qc.y),i}lt.prototype.gi=function(t){return t===void 0&&(t=new G),t.assign(this.actualBounds)},lt.prototype.Za=function(){Sr(this)===!0&&this.measure(1/0,1/0),this.arrange()};function yl(t,e){var n=t.Vx;isNaN(t.Sf)&&(t.Sf=uw(t));var i=t.Sf,r=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+r,e.height+2+r),n;i=e.x,r=e.y;var a=e.width;e=e.height;var h=t.shadowBlur;return t=t.shadowOffset,a+=h,e+=h,i-=h/2,r-=h/2,0<t.x?a+=t.x:(i+=t.x,a-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),n.h(i-1,r-1,a+2,e+2),n}lt.prototype.arrange=function(){if(Fi(this)===!1)Ow(this);else{pa(this,!1);var t=this.Eb,e=G.alloc();e.assign(t);var n=Ds(this);this.Vg(0,0,this.qc.width,this.qc.height);var i=this.position;Iw(this,i,this.location),t.ja(),t.x=i.x,t.y=i.y,t.freeze(),this.Fl(e,t),e.C(t)?this.Pd(n):!this.Tc()||A.B(e.width,t.width)&&A.B(e.height,t.height)||0<=this.aw&&this.D(16),G.free(e),Iy(this,!1)}},l=lt.prototype,l.Fl=function(t,e){var n=this.diagram;if(n!==null){var i=!1;if(n.Si===!1&&t.v()){var r=G.alloc();r.assign(n.documentBounds),r.jv(n.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(i=!0),G.free(r)}(this.G&65536)===0&&t.C(e)||Bw(this,i,n),n.N(),!t.v()&&!e.v()||Xm(t,e)||(this instanceof q&&!n.undoManager.isUndoingRedoing&&this.vd(),this.dh())}},l.fv=function(t,e,n){if(this.eh()||!t.v())return!1;var i=this.diagram;return i!==null&&Ew(this,i,t,e,n),this.pa=t,this.G&=-2097153,!this.de.v()||i!==null&&!i.animationManager.isTicking&&i.undoManager.isUndoingRedoing||(i=this.de,this.de=new C(i.x+(t.x-e),i.y+(t.y-n)),this.g("location",i,this.de.copy())),br(this)===!1&&Fi(this)===!1&&(lc(this),Ow(this)),!0};function Ew(t,e,n,i,r){e===null||t instanceof Ct||(e=e.animationManager,e.zb&&ix(e,t,new C(i,r),n))}l.Ul=function(t,e,n){var i=this.de,r=this.pa;if(n){if(i.x===t&&i.y===e)return;br(this)||Fi(this)?r.h(NaN,NaN):r.h(r.x+t-i.x,r.y+e-i.y),i.h(t,e)}else{if(r.x===t&&r.y===e)return;br(this)||Fi(this)?this.ns():i.h(i.x+t-r.x,i.y+e-r.y),r.h(t,e)}lc(this)},l.ns=function(){this.G&=-2097153,lc(this)};function Iw(t,e,n){var i=C.alloc(),r=t.locationObject,a=r.naturalBounds,h=r instanceof yt?r.strokeWidth:0;if(i.pi(0,0,a.width+h,a.height+h,t.locationSpot),r!==t)for(i.offset(-h/2,-h/2),r.transform.Fa(i),r=r.panel;r!==null&&r!==t;)r.transform.Fa(i),r=r.panel;t.Ib!==null&&t.Ib.Fa(i),i.offset(-t.qc.x,-t.qc.y),r=t.diagram,a=n.v(),h=e.v(),a&&h?(t.G&2097152)!==0?Aw(t,e,n,r,i):zw(t,e,n,r,i):a?Aw(t,e,n,r,i):h&&zw(t,e,n,r,i),t.G|=2097152,C.free(i),t.Jk()}function Aw(t,e,n,i,r){var a=e.x,h=e.y;e.h(n.x-r.x,n.y-r.y),i!==null&&(n=i.animationManager,(i=n.defaultAnimation.isAnimating)||!n.zb||t instanceof Ct||ix(n,t,new C(a,h),e),i||e.x===a&&e.y===h||t.g("position",new C(a,h),e.copy()))}function zw(t,e,n,i,r){var a=n.copy();n.h(e.x+r.x,e.y+r.y),n.C(a)||i===null||t.g("location",a,n.copy())}function Bw(t,e,n){Ay(t,!1),t instanceof q&&H0(n,t),t.layer.isTemporary||e||n.Va(),e=t.Eb;var i=n.viewportBounds;i.v()?Ds(t)?(PP(e,i)||t.Pd(!1),t.updateAdornments()):e.Sc(i)?(t.Pd(!0),t.updateAdornments()):t.Rb():n.Ui=!0}l.mi=function(){return!0},l.Tc=function(){return!0},l.eh=function(){return!1},l.li=function(){return!0};function Ey(t,e,n,i){e.constructor===t.constructor||Vw||(Vw=!0,Lt('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),Lt("  Old class: "+gr(t.constructor)+", new class: "+gr(e.constructor)+", part: "+t.toString())),t.zj();var r=t.data;n=t.layerName;var a=t.isSelected,h=t.isHighlighted,g=!0,f=!0,c=!1;t instanceof q&&(g=t.isTreeLeaf,f=t.isTreeExpanded,c=t.wasTreeExpanded),e.qf(t),e.cloneProtected(t),t.Jf=i,t.w(),t.N(),e=t.diagram,i=!0,e!==null&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.qb=r,t.G=a?t.G|4096:t.G&-4097,t.G=h?t.G|524288:t.G&-524289,t instanceof q&&(t.U=g?t.U|4:t.U&-5,t.U=f?t.U|1:t.U&-2,t.U=c?t.U|2:t.U&-3),r!==null&&t.Ka(),r=t.layerName,r!==n&&(t.zg=n,t.layerName=r),e!==null&&(e.skipsUndoManager=i),t.Tc()&&t.D(64)}lt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},lt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},lt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},lt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},lt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},lt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},lt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},lt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},lt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function br(t){return(t.G&32768)!==0}function Iy(t,e){t.G=e?t.G|32768:t.G&-32769}function Ay(t,e){t.G=e?t.G|65536:t.G&-65537}function Ds(t){return(t.G&131072)!==0}l=lt.prototype,l.Pd=function(t){this.G=t?this.G|131072:this.G&-131073};function hc(t,e){t.G=e?t.G|1048576:t.G&-1048577}l.dh=function(){var t=this.containingGroup;t!==null&&(t.w(),t.placeholder!==null&&t.placeholder.w(),t.vd())},l.N=function(){var t=this.diagram;t!==null&&!Fi(this)&&!br(this)&&this.isVisible()&&this.Eb.v()&&t.N(yl(this,this.Eb))},l.w=function(){X.prototype.w.call(this);var t=this.diagram;t!==null&&(t.te.add(this),this instanceof q&&this.labeledLink!==null&&Th(this.labeledLink),t.Mb(!0))},l.yo=function(t){t||(t=this.ph,t!==null&&Yy(t,this))},l.zo=function(t){t||(t=this.ph,t!==null&&Uy(t,this))},l.Fj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.Kl(t))}},l.Xy=function(){return zy(this,this)};function zy(t,e){var n=e.containingGroup;return n!==null?1+zy(t,n):e instanceof q&&(e=e.labeledLink,e!==null)?zy(t,e):0}l.az=function(){return Gw(this,this)};function Gw(t,e){var n=e.containingGroup;return n!==null||e instanceof q&&(n=e.labeledLink,n!==null)?Gw(t,n):e}l.Md=function(t){return t instanceof pt?By(this,this,t):!1};function By(t,e,n){if(e===n||n===null)return!1;var i=e.containingGroup;return i===null||i!==n&&!By(t,i,n)?e instanceof q&&(e=e.labeledLink,e!==null)?By(t,e,n):!1:!0}l.Sw=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof pt&&hc(e,!0),e instanceof q){var n=e.labeledLink;n!==null&&(e=n)}e=e.containingGroup}for(n=null,e=t;e!==null;){if((e.G&1048576)!==0){n=e;break}e instanceof q&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof pt&&hc(e,!1),e instanceof q&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return n},lt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof q&&this.isLinkLabel)},lt.prototype.D=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&(t&this.layoutConditions)!==0){var e=this.layer;e!==null&&e.isTemporary||this instanceof q&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.ph,e!==null){var n=e.layout;n!==null?n.D():e.D(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.D())};function Rw(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function js(t,e,n,i,r,a){if(a===void 0&&(a=null),!(t.contains(e)||a!==null&&!a(e)||e instanceof Ct)){if(t.add(e),e instanceof q){if(n&&e instanceof pt)for(var h=e.memberParts;h.next();)js(t,h.value,n,i,r,a);if(r!==!1)for(h=e.linksConnected;h.next();){var g=h.value;if(!t.contains(g)){var f=g.fromNode,c=g.toNode;f=f===null||t.contains(f),c=c===null||t.contains(c),(r?f&&c:f||c)&&js(t,g,n,i,r,a)}}if(1<i)for(e=e.Au();e.next();)js(t,e.value,n,i-1,r,a)}else if(e instanceof H)for(e=e.labelNodes;e.next();)js(t,e.value,n,i,r,a)}}I.Object.defineProperties(lt.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.ua(this.data)}},adornments:{get:function(){return this.Hf===null?Ui:this.Hf.iteratorValues}},layer:{get:function(){return this.Ah}},diagram:{get:function(){var t=this.Ah;return t==null?null:t.diagram}},layerName:{get:function(){return this.zg},set:function(t){var e=this.zg;if(e!==t){var n=this.diagram;if((n===null||n.Ij(t)!==null&&!n.partManager.addsToTemporaryLayer)&&(this.zg=t,n!==null&&n.Va(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(n=e.diagram,n!==null&&(t=n.Ij(t),t!==null&&t!==e)))){var i=e.lc(-1,this,!0);if(0<=i&&n.bb(Fe,"parts",e,this,null,i,!0),i=t.ii(99999999,this,!0),e.visible!==t.visible&&this.Ub(t.visible),0<=i&&n.bb(xe,"parts",t,null,this,!0,i),i=this.layerChanged,i!==null){var r=n.$;n.$=!0,i(this,e,t),n.$=r}}}}},layerChanged:{get:function(){return this.O!==null?this.O.Zp:null},set:function(t){var e=this.layerChanged;e!==t&&(En(this),this.O.Zp=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.eo},set:function(t){var e=this.eo;if(e!==t){this.eo=t;var n=this.layer;n!==null&&Mf(n,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.af===null){var t=this.locationObjectName;t!==""?(t=this.fb(t),t!==null?this.af=t:this.af=this):this instanceof Ct?this.type!==X.Link&&this.placeholder!==null?this.af=this.placeholder:this.af=this:this.af=this}return this.af.visible?this.af:this}},minLocation:{get:function(){return this.O!==null?this.O.oq:zm},set:function(t){var e=this.minLocation;e.C(t)||(t=t.J(),En(this),this.O.oq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.O!==null?this.O.jq:Bm},set:function(t){var e=this.maxLocation;e.C(t)||(t=t.J(),En(this),this.O.jq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.O!==null?this.O.gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(En(this),this.O.gq=t,this.af=null,this.w(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.O!==null?this.O.hq:nn},set:function(t){var e=this.locationSpot;e.C(t)||(t=t.J(),En(this),this.O.hq=t,this.w(),this.g("locationSpot",e,t))}},location:{get:function(){return this.de},set:function(t){var e=t.x,n=t.y,i=this.de;if(!(i.x===e||isNaN(i.x)&&isNaN(e))||!(i.y===n||isNaN(i.y)&&isNaN(n))){if(t=t.copy(),e=t,this.eh())e=!1;else{if(this.de=e,this.G|=2097152,Fi(this)===!1&&(lc(this),n=this.pa,n.v())){var r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var a=n.copy();n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),Ew(this,r,n,a.x,a.y),this.g("position",a,n.copy())}}e=!0}e&&this.g("location",i,t.copy())}}},category:{get:function(){return this.Jf},set:function(t){var e=this.Jf;if(e!==t){var n=this.diagram,i=this.data,r=null;if(n!==null&&i!==null&&!(this instanceof Ct)){var a=n.model.undoManager;a.isEnabled&&!a.isUndoingRedoing&&(r=this.clone(),r.R.addAll(this.R))}this.Jf=t,this.g("category",e,t),n===null||i===null||this instanceof Ct?this instanceof Ct&&(r=this.adornedPart,r!==null&&(t=r.Hf,t!==null&&t.remove(e),r.Tg(this.category,this))):(a=n.model,a.undoManager.isUndoingRedoing||(this.eh()?(n.partManager.setLinkCategoryForData(i,t),n=n.partManager.findLinkTemplateForCategory(t),n!==null&&(ji(n),n=n.copy(),n!==null&&Ey(this,n,e,t))):(a!==null&&a.Rl(i,t),n=y2(n.partManager,i,t),n!==null&&(ji(n),n=n.copy(),n===null||n instanceof H||(i=this.location.copy(),Ey(this,n,e,t),this.location.v()||(this.location=i)))),r!==null&&(e=this.clone(),e.R.addAll(this.R),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){Ey(this,t,this.category,t.category)}},copyable:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Rb())}},groupable:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Rb())}},isInDocumentBounds:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;if(e!==t){this.G^=64;var n=this.diagram;n!==null&&n.Va(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.D(t?4:8))}},selectable:{get:function(){return(this.G&256)!==0},set:function(t){var e=(this.G&256)!==0;e!==t&&(this.G^=256,this.g("selectable",e,t),this.Rb())}},reshapable:{get:function(){return(this.G&512)!==0},set:function(t){var e=(this.G&512)!==0;e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Rb())}},resizable:{get:function(){return(this.G&1024)!==0},set:function(t){var e=(this.G&1024)!==0;e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Rb())}},rotatable:{get:function(){return(this.G&2048)!==0},set:function(t){var e=(this.G&2048)!==0;e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Rb())}},isSelected:{get:function(){return(this.G&4096)!==0},set:function(t){var e=(this.G&4096)!==0;if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(n!==null&&n.selection.count>=n.maxSelectionCount)){this.G^=4096;var i=!1;if(n!==null){i=n.skipsUndoManager,n.skipsUndoManager=!0;var r=n.selection;r.ja(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Rb(),t=this.selectionChanged,t!==null&&t(this),n!==null&&(n.Mb(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return(this.G&524288)!==0},set:function(t){var e=(this.G&524288)!==0;if(e!==t){this.G^=524288;var n=this.diagram;n!==null&&(n=n.highlighteds,n.ja(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.G&8192)!==0},set:function(t){var e=(this.G&8192)!==0;e!==t&&(this.G^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.G&262144)!==0},set:function(t){var e=(this.G&262144)!==0;e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.O!==null?this.O.Qp:null},set:function(t){var e=this.highlightedChanged;e!==t&&(En(this),this.O.Qp=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.O!==null?this.O.Sq:""},set:function(t){var e=this.selectionObjectName;e!==t&&(En(this),this.O.Sq=t,this.Kg=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.O!==null?this.O.Qq:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(En(this),this.O.Qq=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.Kg===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.fb(t),t!==null?this.Kg=t:this.Kg=this):this instanceof H?(t=this.path,t!==null?this.Kg=t:this.Kg=this):this.Kg=this}return this.Kg}},selectionChanged:{get:function(){return this.O!==null?this.O.Rq:null},set:function(t){var e=this.selectionChanged;e!==t&&(En(this),this.O.Rq=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.O!==null?this.O.Eq:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(En(this),this.O.Eq=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.O!==null?this.O.Gq:""},set:function(t){var e=this.resizeObjectName;e!==t&&(En(this),this.O.Gq=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.O!==null?this.O.Fq:lf},set:function(t){var e=this.resizeCellSize;e.C(t)||(t=t.J(),En(this),this.O.Fq=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.O!==null?this.O.Hq:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(En(this),this.O.Hq=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.O!==null?this.O.Iq:""},set:function(t){var e=this.rotateObjectName;e!==t&&(En(this),this.O.Iq=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.O!==null?this.O.Kq:Je},set:function(t){var e=this.rotationSpot;e.C(t)||(t=t.J(),En(this),this.O.Kq=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==t&&(this.cc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.ph},set:function(t){if(this.Tc()){var e=this.ph;if(e!==t){t===null||this!==t&&!t.Md(this)||(this===t&&B("Cannot make a Group a member of itself: "+this.toString()),B("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.D(2);var n=this.diagram;if(e!==null?Uy(e,this):this instanceof pt&&n!==null&&n.Uh.remove(this),this.ph=t,t!==null?Yy(t,this):this instanceof pt&&n!==null&&n.Uh.add(this),this.D(1),n!==null&&n.$){var i=this.data,r=n.model;if(i!==null&&r.Oj()){var a=r.ua(t!==null?t.data:null);r.Po(i,a)}}if(i=this.containingGroupChanged,i!==null&&(r=!0,n!==null&&(r=n.$,n.$=!0),i(this,e,t),n!==null&&(n.$=r)),this instanceof pt){for(n=new Z,js(n,this,!0,0,!0),n=n.iterator;n.next();)if(i=n.value,i instanceof q)for(i=i.linksConnected;i.next();)Xh(i.value)}if(this instanceof q){for(n=this.linksConnected;n.next();)Xh(n.value);n=this.labeledLink,n!==null&&Xh(n)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&Mf(e,-1,t))}}else B("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.O!==null?this.O.np:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(En(this),this.O.np=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof q&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.O!==null?this.O.bq:127},set:function(t){var e=this.layoutConditions;e!==t&&(En(this),this.O.bq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.O!==null?this.O.yp:null},set:function(t){var e=this.dragComputation;e!==t&&(En(this),this.O.yp=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.O!==null?this.O.Wq:Gm},set:function(t){var e=this.shadowOffset;e.C(t)||(t=t.J(),En(this),this.O.Wq=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.O!==null?this.O.Vq:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(En(this),this.O.Vq=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.O!==null?this.O.Lg:4},set:function(t){var e=this.shadowBlur;e!==t&&(En(this),this.O.Lg=t,this.N(),this.g("shadowBlur",e,t))}}}),lt.prototype.invalidateLayout=lt.prototype.D,lt.prototype.findCommonContainingGroup=lt.prototype.Sw,lt.prototype.isMemberOf=lt.prototype.Md,lt.prototype.findTopLevelPart=lt.prototype.az,lt.prototype.findSubGraphLevel=lt.prototype.Xy,lt.prototype.ensureBounds=lt.prototype.Za,lt.prototype.getDocumentBounds=lt.prototype.gi,lt.prototype.findObject=lt.prototype.fb,lt.prototype.moveTo=lt.prototype.moveTo,lt.prototype.invalidateAdornments=lt.prototype.Rb,lt.prototype.clearAdornments=lt.prototype.zj,lt.prototype.removeAdornment=lt.prototype.Af,lt.prototype.addAdornment=lt.prototype.Tg,lt.prototype.findAdornment=lt.prototype.Hj,lt.prototype.updateTargetBindings=lt.prototype.Ka;var Vw=!1;lt.className="Part",lt.LayoutNone=0,lt.LayoutAdded=1,lt.LayoutRemoved=2,lt.LayoutShown=4,lt.LayoutHidden=8,lt.LayoutNodeSized=16,lt.LayoutGroupLayout=32,lt.LayoutNodeReplaced=64,lt.LayoutStandard=127,lt.LayoutAll=16777215;function Ct(t,e){t===void 0||t instanceof Se||typeof t=="string"?lt.call(this,t):(lt.call(this),t&&(e=t)),this.G&=-257,this.zg="Adornment",this.me=null,this.ew=0,this.yw=!1,this.j=this.Xa=null,e&&Object.assign(this,e)}O(Ct,lt),Ct.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},Ct.prototype.updateRelationshipsFromData=function(){},Ct.prototype.Rj=function(t){var e=this.adornedObject,n=e==null?void 0:e.part;if(n instanceof H&&e instanceof yt){e=n.path,n.Rj(t),t=e.geometry,n=this.R.s,e=n.length;for(var i=0;i<e;i++){var r=n[i];r.isPanelMain&&r instanceof yt&&(r.sa=t)}}},Ct.prototype.mi=function(){var t=this.me;return t===null?!0:(t=t.part,t===null||!Fi(t))},Ct.prototype.Tc=function(){return!1},Ct.prototype.$j=function(t,e,n,i,r,a,h){if(t===xe&&e==="elements"){if(r instanceof wn)this.Xa===null&&(this.Xa=r);else if(r instanceof X){var g=r.vl(function(f){return f instanceof wn});g instanceof wn&&this.Xa===null&&(this.Xa=g)}}else t===Fe&&e==="elements"&&this.Xa!==null&&(i===this.Xa?this.Xa=null:i instanceof X&&this.Xa.jg(i)&&(this.Xa=null));lt.prototype.$j.call(this,t,e,n,i,r,a,h)},Ct.prototype.updateAdornments=function(){},Ct.prototype.Fj=function(){},I.Object.defineProperties(Ct.prototype,{placeholder:{get:function(){return this.Xa}},adornedObject:{get:function(){return this.me},set:function(t){var e=this.adornedPart,n=null;t!==null&&(n=t.part),e===null||t!==null&&e===n||e.Af(this.category),this.me=t,n!==null&&n.Tg(this.category,this)}},adornedPart:{get:function(){var t=this.me;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),Ct.className="Adornment";function Gy(){this.ic=!1,this.ur=this.bj=this.eq=this.cq=null,this.ap=Km,this.Dq=dc,this.gr=this.dj=this.mq=this.lq=null}Gy.prototype.copy=function(){var t=new Gy;return t.cq=this.cq,t.eq=this.eq,t.bj=this.bj,t.ur=this.ur,t.ap=this.ap.J(),t.Dq=this.Dq,t.lq=this.lq,t.mq=this.mq,t.dj=this.dj,t.gr=this.gr,t};function q(t,e){t===void 0||t instanceof Se||typeof t=="string"?lt.call(this,t):(lt.call(this),t&&(e=t)),this.U=13,this.ya=null,this.jb=new tt,this.sc=this.Qe=this.Nk=null,this.Rg=!1,e&&Object.assign(this,e)}O(q,lt),q.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.U=this.U,this.ya!==null&&(t.ya=this.ya.ic?this.ya:this.ya.copy())},l=q.prototype,l.qf=function(t){lt.prototype.qf.call(this,t),t.vd(),t.Qe=this.Qe,t.sc=null};function ts(t){t.ya===null?t.ya=new Gy:t.ya.ic&&(t.ya=t.ya.copy())}l.ih=function(){lt.prototype.ih.call(this),this.ya!==null&&(this.ya.ic=!0)};function Yw(t,e){e!==null&&(t.Qe===null&&(t.Qe=new Z),t.Qe.add(e))}function Uw(t,e,n,i){if(e===null||t.Qe===null)return null;for(var r=t.Qe.iterator;r.next();){var a=r.value;if(a.cs===t&&a.Pu===e&&a.vx===n&&a.wx===i||a.cs===e&&a.Pu===t&&a.vx===i&&a.wx===n)return a}return null}l.uz=function(t,e,n){e==null&&(e=""),n==null&&(n=""),t=Uw(this,t,e,n),t!==null&&t.Al()},l.$j=function(t,e,n,i,r,a,h){t===xe&&e==="elements"?this.sc=null:t===Fe&&e==="elements"&&(this.sc=null),lt.prototype.$j.call(this,t,e,n,i,r,a,h)},l.vd=function(t){for(var e=this.linksConnected;e.next();){var n=e.value;t!==void 0&&t.contains(n)||($n(n.fromPort),$n(n.toPort),n.ab())}};function Xw(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&($n(n.fromPort),$n(n.toPort),n.ab())}}function $n(t){if(t!==null){var e=t.Hn;e!==null&&e.Al(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||$n(e.port)}}l.mi=function(){return!0},q.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.fo(this.avoidableMargin),t},q.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},q.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=!0,e=ll,n=this.diagram;if(n!==null){if(n.animationManager.es(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===ll){if(t=this.ig(),t!==null&&!t.isTreeExpanded)return!1}else if(e===J0){if(t=t?this.xu():this.yu(),0<t.count&&t.all(function(i){return!i.isTreeExpanded}))return!1}else if(e===Z0&&(t=t?this.xu():this.yu(),0<t.count&&t.any(function(i){return!i.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},q.prototype.Ub=function(t){lt.prototype.Ub.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&this.containingGroup!==null){var i=n.wo(this);i===null||i.Md(this.containingGroup)||n.ab()}n.Ub(t)}},q.prototype.Tw=function(){var t=new Z,e=new Z;return _w(this,this,t,e),e.iterator};function _w(t,e,n,i){if(e!==null&&!n.has(e)){n.add(e);var r=!0,a=t.diagram;a!==null&&(r=a.isTreePathToChildren),e.linksConnected.each(function(h){h.isTreeLink?(r?h.fromNode===e:h.toNode===e)&&_w(t,r?h.toNode:h.fromNode,n,i):i.add(h)})}}q.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.jb.iterator;var e=new Ae(this.jb),n=this;return e.predicate=function(i){return i.fromNode===n&&i.fromPortId===t||i.toNode===n&&i.toPortId===t},e},l=q.prototype,l.ro=function(t){t===void 0&&(t=null);var e=new Ae(this.jb),n=this;return e.predicate=function(i){return i.fromNode!==n?!1:t===null?!0:i.fromPortId===t},e},l.Kd=function(t){t===void 0&&(t=null);var e=new Ae(this.jb),n=this;return e.predicate=function(i){return i.toNode!==n?!1:t===null?!0:i.toPortId===t},e},l.wu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var r=i.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):n!==null&&n!==r?(e=new Z,e.add(n),e.add(r)):n=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):n!==null&&n!==r?(e=new Z,e.add(n),e.add(r)):n=r)}return e!==null?e.iterator:n!==null?new Re(n):Ui},l.yu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var r=i.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):n!==null&&n!==r?(e=new Z,e.add(n),e.add(r)):n=r)}return e!==null?e.iterator:n!==null?new Re(n):Ui},l.xu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var r=i.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):n!==null&&n!==r?(e=new Z,e.add(n),e.add(r)):n=r)}return e!==null?e.iterator:n!==null?new Re(n):Ui},l.Sy=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=new Ae(this.jb),r=this;return i.predicate=function(a){return!((a.fromNode!==r||a.toNode!==t||e!==null&&a.fromPortId!==e||n!==null&&a.toPortId!==n)&&(a.fromNode!==t||a.toNode!==r||n!==null&&a.fromPortId!==n||e!==null&&a.toPortId!==e))},i},l.Ty=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=new Ae(this.jb),r=this;return i.predicate=function(a){return!(a.fromNode!==r||a.toNode!==t||e!==null&&a.fromPortId!==e||n!==null&&a.toPortId!==n)},i};function uc(t,e,n){$n(n);var i=t.jb.contains(e);if(i||t.jb.add(e),!i||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var a=!0,h=t.diagram;h!==null&&(a=h.$,h.$=!0),r(t,e,n),h!==null&&(h.$=a)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,n!==null&&e!==null&&n!==e&&(i=!0,t=t.diagram,t!==null&&(i=t.isTreePathToChildren),r=i?e:n,a=i?n:e,r.Rg||(r.Rg=a),!a.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(i?n===a&&(a.isTreeLeaf=!1):e===a&&(a.isTreeLeaf=!1))))}function gc(t,e,n){$n(n);var i=t.jb.remove(e),r=null;if(i||e.toNode===e.fromNode){var a=t.linkDisconnected;if(r=t.diagram,a!==null){var h=!0;r!==null&&(h=r.$,r.$=!0),a(t,e,n),r!==null&&(r.$=h)}}i&&e.isTreeLink&&(n=!0,r!==null&&(n=r.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,t!==null&&(t.Rg=!1),e===null||e.isTreeLeaf||(e.jb.count===0?(e.Rg=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Cg(e)))}function Cg(t){if(t.Rg=!1,t.jb.count!==0){var e=!0,n=t.diagram;if(n===null||!n.undoManager.isUndoingRedoing){for(n!==null&&(e=n.isTreePathToChildren),n=t.jb.iterator;n.next();){var i=n.value;if(i.isTreeLink){if(e){if(i.fromNode===t){t.isTreeLeaf=!1;return}}else if(i.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}q.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},l=q.prototype,l.yo=function(t){lt.prototype.yo.call(this,t),t||(Cg(this),t=this.Nk,t!==null&&bw(t,this))},l.zo=function(t){lt.prototype.zo.call(this,t),t||(t=this.Nk,t!==null&&t.rd!==null&&(t.rd.remove(this),t.w()))},l.Fj=function(){if(0<this.jb.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,n=this.jb.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,lt.prototype.Fj.call(this)},l.Kr=function(t){if(this.sc===null){if(t===""&&this.He===!1)return this;Kw(this)}var e=this.sc.I(t);return e!==null||t!==""&&(e=this.sc.I(""),e!==null)?e:this};function Kw(t){t.sc===null?t.sc=new ct:t.sc.clear(),t.$l(t,function(e,n){Hw(e,n)}),t.sc.count===0&&t.sc.add("",t)}function Hw(t,e){var n=e.portId;n!==null&&t.sc!==null&&t.sc.add(n,e)}function Ry(t,e,n){var i=e.portId;if(i!==null&&(t.sc!==null&&t.sc.remove(i),e=t.diagram,e!==null&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,n===null&&(n=Kt()),n.push(i);if(n!==null){for(t=0;t<n.length;t++)e.remove(n[t]);Xt(n)}}}l.wz=function(t){if(t===null||t===this)return!1;var e=!0,n=this.diagram;if(n!==null&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.jb.iterator;i.next();){var r=i.value;if(r.isTreeLink&&(e=r.fromNode,e!==n&&e!==this))break}if(e===this||e===null||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.jb.iterator;i.next()&&(r=i.value,!r.isTreeLink||(e=r.toNode,e===n||e===this)););if(e===this||e===null||e===n)return!1;n=e}return!0},l.ez=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.jb.iterator;n.next();){var i=n.value;if(i.isTreeLink&&(t=i.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,n=e.jb.iterator;n.next()&&(i=n.value,!i.isTreeLink||(t=i.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},l.Py=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)hc(e,!0),e=e.ig();var n=null;for(e=t;e!==null;){if((e.G&1048576)!==0){n=e;break}e=e.ig()}for(e=this;e!==null;)hc(e,!1),e=e.ig();return n},l.$g=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},l.ig=function(){var t=this.Rg;if(t===null)return null;if(t instanceof q)return t;var e=!0;if(t=this.diagram,t!==null&&(e=t.isTreePathToChildren),t=this.jb.iterator,e){for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.fromNode,e!==this))return this.Rg=e}else for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.toNode,e!==this))return this.Rg=e;return this.Rg=null},l.cz=function(){function t(n,i){i.add(n);var r=n.$g();r!==null&&(i.add(r),n=n.ig(),n!==null&&t(n,i))}var e=new Z;return t(this,e),e},l.bz=function(){return Ww(this,this)};function Ww(t,e){return e=e.ig(),e===null?0:1+Ww(t,e)}l.to=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Ae(this.jb);var n=this;return e.predicate=t?function(i){return!!(i.isTreeLink&&i.fromNode===n)}:function(i){return!!(i.isTreeLink&&i.toNode===n)},e},l.Au=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var n=e=null,i=this.jb.iterator;if(t)for(;i.next();)t=i.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):n!==null&&n!==t?(e=new tt,e.add(n),e.add(t)):n=t);else for(;i.next();)t=i.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):n!==null&&n!==t?(e=new tt,e.add(n),e.add(t)):n=t);return e!==null?e.iterator:n!==null?new Re(n):Ui},l.dz=function(t){t===void 0&&(t=1/0);var e=new Z;return js(e,this,!1,t,!0),e},q.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Ie){e.Ie=!0;var n=new Z;n.add(this),$w(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ll),e.Ie=!1}};function $w(t,e,n,i,r,a,h){if(1<i)for(var g=n?t.ro():t.Kd();g.next();){var f=g.value;f.isTreeLink&&(f=f.wo(t),f===null||f===t||e.contains(f)||(e.add(f),$w(f,e,n,i-1,r,a,h)))}else Jw(t,e,n,r,a,h)}function Jw(t,e,n,i,r,a){for(var h=r===t?!0:t.isTreeExpanded,g=n?t.ro():t.Kd();g.next();){var f=g.value;if(f.isTreeLink&&(f=f.wo(t),f!==null&&f!==t)){var c=e.contains(f);c||e.add(f),h&&(a&&i.vj(f,r),f.dh(),f.Ub(!1)),f.isTreeExpanded&&(f.wasTreeExpanded=f.isTreeExpanded,c||Jw(f,e,n,i,r,a))}}t.isTreeExpanded=!1}q.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Ie){e.Ie=!0;var n=new Z;n.add(this),Zw(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ll),e.Ie=!1}};function Zw(t,e,n,i,r,a,h){for(var g=a===t?!1:t.isTreeExpanded,f=n?t.ro():t.Kd();f.next();){var c=f.value;c.isTreeLink&&(g||c.xd||c.ab(),c=c.wo(t),c!==null&&c!==t&&!e.contains(c)&&(e.add(c),g||(c.Ub(!0),c.dh(),h&&r.xj(c,a)),2<i||c.wasTreeExpanded))&&(c.wasTreeExpanded=!1,Zw(c,e,n,i-1,r,a,h))}t.isTreeExpanded=!0}I.Object.defineProperties(q.prototype,{portSpreading:{get:function(){return this.ya!==null?this.ya.Dq:dc},set:function(t){var e=this.portSpreading;e!==t&&(ts(this),this.ya.Dq=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.vd())}},avoidable:{get:function(){return(this.U&8)!==0},set:function(t){var e=(this.U&8)!==0;if(e!==t){this.U^=8;var n=this.diagram;n!==null&&H0(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.ya!==null?this.ya.ap:Km},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.avoidableMargin;if(!e.C(t)){t=t.J(),ts(this),this.ya.ap=t;var n=this.diagram;n!==null&&H0(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return this.ya!==null?this.ya.cq:null},set:function(t){var e=this.linkConnected;e!==t&&(ts(this),this.ya.cq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.ya!==null?this.ya.eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(ts(this),this.ya.eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ya!==null?this.ya.bj:null},set:function(t){var e=this.linkValidation;e!==t&&(ts(this),this.ya.bj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Nk!==null}},labeledLink:{get:function(){return this.Nk},set:function(t){var e=this.Nk;if(e!==t){var n=this.diagram,i=this.data;if(e!==null){if(e.rd!==null&&(e.rd.remove(this),e.w()),n!==null&&i!==null&&!n.undoManager.isUndoingRedoing){var r=e.data,a=n.model;if(r!==null&&a.ki()){var h=a.ua(i);h!==void 0&&a.xx(r,h)}}this.containingGroup=null}this.Nk=t,t!==null&&(bw(t,this),n===null||i===null||n.undoManager.isUndoingRedoing||(r=t.data,n=n.model,r!==null&&n.ki()&&(i=n.ua(i),i!==void 0&&n.hu(r,i))),this.containingGroup=t.containingGroup),Th(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Kr("")}},ports:{get:function(){return this.sc===null&&Kw(this),this.sc.iteratorValues}},isTreeExpanded:{get:function(){return(this.U&1)!==0},set:function(t){var e=(this.U&1)!==0;if(e!==t){this.U^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var i=!0;n!==null&&(i=n.$,n.$=!0),e(this),n!==null&&(n.$=i)}n!==null&&n.undoManager.isUndoingRedoing?this.Ub(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.U&2)!==0},set:function(t){var e=(this.U&2)!==0;e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.ya!==null?this.ya.ur:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(ts(this),this.ya.ur=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.U&4)!==0},set:function(t){var e=(this.U&4)!==0;e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),q.prototype.expandTree=q.prototype.expandTree,q.prototype.collapseTree=q.prototype.collapseTree,q.prototype.findTreeParts=q.prototype.dz,q.prototype.findTreeChildrenNodes=q.prototype.Au,q.prototype.findTreeChildrenLinks=q.prototype.to,q.prototype.findTreeLevel=q.prototype.bz,q.prototype.findTreeParentChain=q.prototype.cz,q.prototype.findTreeParentNode=q.prototype.ig,q.prototype.findTreeParentLink=q.prototype.$g,q.prototype.findCommonTreeParent=q.prototype.Py,q.prototype.findTreeRoot=q.prototype.ez,q.prototype.isInTreeOf=q.prototype.wz,q.prototype.findPort=q.prototype.Kr,q.prototype.findLinksTo=q.prototype.Ty,q.prototype.findLinksBetween=q.prototype.Sy,q.prototype.findNodesInto=q.prototype.xu,q.prototype.findNodesOutOf=q.prototype.yu,q.prototype.findNodesConnected=q.prototype.wu,q.prototype.findLinksInto=q.prototype.Kd,q.prototype.findLinksOutOf=q.prototype.ro,q.prototype.findExternalTreeLinksConnected=q.prototype.Tw,q.prototype.invalidateConnectedLinks=q.prototype.vd,q.prototype.invalidateLinkBundle=q.prototype.uz;var xN=new $(q,"SpreadingNone",10),dc=new $(q,"SpreadingEvenly",11),Vy=new $(q,"SpreadingPacked",12);q.className="Node",q.SpreadingNone=xN,q.SpreadingEvenly=dc,q.SpreadingPacked=Vy;function pt(t,e){t===void 0||t instanceof Se||typeof t=="string"?q.call(this,t):(q.call(this),t&&(e=t)),this.U|=4608,this.on=new Z,this.Xa=null,this.Kc=new Dt,this.Kc.group=this,this.Vk=new Z,this.ib=this.Dp=null,e&&Object.assign(this,e)}O(pt,q),pt.prototype.cloneProtected=function(t){q.prototype.cloneProtected.call(this,t),this.U=this.U&-32769;var e=t.vl(function(n){return n instanceof wn});e instanceof wn?t.Xa=e:t.Xa=null,this.Kc!==null?(t.Kc=this.Kc.copy(),t.Kc.group=t):(t.Kc!==null&&(t.Kc.group=null),t.Kc=null),this.ib!==null&&(t.ib=this.ib.copy())},l=pt.prototype,l.qf=function(t){q.prototype.qf.call(this,t);var e=t.Jj();for(t=t.memberParts;t.next();){var n=t.value;if(n.w(),n.D(8),n.zj(),n instanceof q)n.vd(e);else if(n instanceof H)for(n=n.labelNodes;n.next();)n.value.vd(e)}},l.$j=function(t,e,n,i,r,a,h){if(t===xe&&e==="elements"){if(r instanceof wn)this.Xa===null?this.Xa=r:this.Xa!==r&&B("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof X){var g=r.vl(function(f){return f instanceof wn});g instanceof wn&&(this.Xa===null?this.Xa=g:this.Xa!==g&&B("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Fe&&e==="elements"&&this.Xa!==null&&(i===this.Xa?this.Xa=null:i instanceof X&&this.Xa.jg(i)&&(this.Xa=null));q.prototype.$j.call(this,t,e,n,i,r,a,h)},l.Fl=function(t,e){q.prototype.Fl.call(this,t,e),this.isClipping&&this.type!==X.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof X&&(t=t.vb()),this.ib===null&&(this.ib=new G),t.gi(this.ib),t instanceof yt&&this.ib.vc(-t.strokeWidth,-t.strokeWidth))},l.Vg=function(t,e,n,i){this.af=this.Xa,q.prototype.Vg.call(this,t,e,n,i)},l.Za=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof H||e.Za()}),q.prototype.Za.call(this)},l.mi=function(){if(!q.prototype.mi.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof q){if(e.isVisible()&&Fi(e))return!1}else if(e instanceof H&&e.isVisible()&&Fi(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function Yy(t,e){if(t.on.add(e)){e instanceof pt&&t.Vk.add(e);var n=t.memberAdded;if(n!==null){var i=!0,r=t.diagram;r!==null&&(i=r.$,r.$=!0),n(t,e),r!==null&&(r.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!1)}e instanceof H&&!t.computesBoundsIncludingLinks||(e=t.Xa,e===null&&(e=t),e.w())}function Uy(t,e){if(t.on.remove(e)){e instanceof pt&&t.Vk.remove(e);var n=t.memberRemoved;if(n!==null){var i=!0,r=t.diagram;r!==null&&(i=r.$,r.$=!0),n(t,e),r!==null&&(r.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!0)}e instanceof H&&!t.computesBoundsIncludingLinks||(e=t.Xa,e===null&&(e=t),e.w())}l.Fj=function(){if(0<this.on.count){var t=this.diagram;if(t!==null)for(var e=this.on.copy().iterator;e.next();)t.remove(e.value)}q.prototype.Fj.call(this)},pt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=b0(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},pt.prototype.addMembers=function(t,e){var n=this.diagram;if(n===null)return!1;n=n.commandHandler;var i=!0;for(t=b0(t).iterator;t.next();){var r=t.value;!e||n.isValidMember(this,r)?r.containingGroup=this:i=!1}return i},pt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t===null||!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},l=pt.prototype,l.vd=function(t){var e=(this.U&65536)!==0;if(q.prototype.vd.call(this,t),!e)for((this.U&65536)===0&&(this.U=this.U^65536),e=this.vu();e.next();){var n=e.value;if(t===void 0||!t.contains(n)){var i=n.fromNode;i!==null&&i!==this&&i.Md(this)&&!i.isVisible()?($n(n.fromPort),$n(n.toPort),n.ab()):(i=n.toNode,i!==null&&i!==this&&i.Md(this)&&!i.isVisible()&&($n(n.fromPort),$n(n.toPort),n.ab()))}}},l.vu=function(){var t=this.diagram!==null&&this.diagram.tw;if(t&&this.Dp!==null)return this.Dp.iterator;var e=this.Jj();e.add(this);for(var n=new Z,i=e.iterator;i.next();){var r=i.value;if(r instanceof q)for(r=r.linksConnected;r.next();){var a=r.value;e.contains(a)||n.add(a)}}return t&&(this.Dp=n),n.iterator},l.Ry=function(){var t=this.Jj();t.add(this);for(var e=new Z,n=t.iterator;n.next();){var i=n.value;if(i instanceof q)for(i=i.linksConnected;i.next();){var r=i.value,a=r.fromNode;a===null||t.contains(a)&&a!==this||e.add(a),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},l.Qy=function(){function t(n,i){n!==null&&(i.add(n),t(n.containingGroup,i))}var e=new Z;return t(this,e),e},l.Jj=function(){var t=new Z;return js(t,this,!0,0,!0),t.remove(this),t},l.Ub=function(t){q.prototype.Ub.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ub(t)},pt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ie){t.Ie=!0;var e=this.Jj();Qw(this,e,t,this),t.Ie=!1}};function Qw(t,e,n,i){for(var r=t.memberParts;r.next();){var a=r.value;if(a.Ub(!1),a instanceof pt&&a.isSubGraphExpanded&&(a.wasSubGraphExpanded=a.isSubGraphExpanded,Qw(a,e,n,i)),a instanceof q)a.vd(e),n.vj(a,i);else if(a instanceof H)for(a=a.labelNodes;a.next();)a.value.vd(e)}t.isSubGraphExpanded=!1}pt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ie){t.Ie=!0;var e=this.Jj();qw(this,e,t,this),t.Ie=!1}};function qw(t,e,n,i){for(var r=t.memberParts;r.next();){var a=r.value;if(a.Ub(!0),a instanceof pt&&a.wasSubGraphExpanded&&(a.wasSubGraphExpanded=!1,qw(a,e,n,i)),a instanceof q)a.vd(e),n.xj(a,i);else if(a instanceof H)for(a=a.labelNodes;a.next();)a.value.vd(e)}t.isSubGraphExpanded=!0}pt.prototype.move=function(t,e){e===void 0&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var r=t.x,a=t.y;if(!(i===r||isNaN(i)&&isNaN(r))||!(n===a||isNaN(n)&&isNaN(a))){for(i=r-(isNaN(i)?0:i),n=a-(isNaN(n)?0:n),a=C.alloc(),q.prototype.move.call(this,t,e),t=new Z,e=this.Jj().iterator;e.next();)r=e.value,r instanceof H&&(r.suspendsRouting&&t.add(r),r.xd||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.eh()||r instanceof q&&r.isLinkLabel)){var h=r.position,g=r.location;h.v()?(a.x=h.x+i,a.y=h.y+n,r.position=a):g.v()&&(a.x=g.x+i,a.y=g.y+n,r.location=a)}for(e.reset();e.next();)r=e.value,r instanceof H&&(r.suspendsRouting=t.contains(r),r.xd||r.fromNode!==this&&r.toNode!==this)&&(h=r.position,a.x=h.x+i,a.y=h.y+n,a.v()?r.move(a):r.ab(),_y(r)&&r.ab());C.free(a)}},I.Object.defineProperties(pt.prototype,{placeholder:{get:function(){return this.Xa}},computesBoundsAfterDrag:{get:function(){return(this.U&2048)!==0},set:function(t){var e=(this.U&2048)!==0;e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.U&4096)!==0},set:function(t){var e=(this.U&4096)!==0;e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.U&8192)!==0},set:function(t){var e=(this.U&8192)!==0;e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.U&16384)!==0},set:function(t){var e=(this.U&16384)!==0;e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.on.iterator}},layout:{get:function(){return this.Kc},set:function(t){var e=this.Kc;if(e!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&B("A layout cannot be both the Diagram.layout and a Group.layout: "+t),e!==null&&(e.diagram=null,e.group=null),this.Kc=t;var n=this.diagram;t!==null&&(t.diagram=n,t.group=this),n!==null&&(n.mh=!0),this.g("layout",e,t),n!==null&&n.Mb()}}},memberAdded:{get:function(){return this.ya!==null?this.ya.lq:null},set:function(t){var e=this.memberAdded;e!==t&&(ts(this),this.ya.lq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.ya!==null?this.ya.mq:null},set:function(t){var e=this.memberRemoved;e!==t&&(ts(this),this.ya.mq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ya!==null?this.ya.dj:null},set:function(t){var e=this.memberValidation;e!==t&&(ts(this),this.ya.dj=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.U&256)!==0},set:function(t){var e=(this.U&256)!==0;e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.U&512)!==0},set:function(t){var e=(this.U&512)!==0;if(e!==t){this.U^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var i=!0;n!==null&&(i=n.$,n.$=!0),e(this),n!==null&&(n.$=i)}n!==null&&n.undoManager.isUndoingRedoing?(this.Xa!==null&&this.Xa.w(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.U&1024)!==0},set:function(t){var e=(this.U&1024)!==0;e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.ya!==null?this.ya.gr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(ts(this),this.ya.gr=t,this.g("subGraphExpandedChanged",e,t))}},gh:{get:function(){return(this.U&32768)!==0},set:function(t){(this.U&32768)!==0!==t&&(this.U^=32768)}}}),pt.prototype.expandSubGraph=pt.prototype.expandSubGraph,pt.prototype.collapseSubGraph=pt.prototype.collapseSubGraph,pt.prototype.findSubGraphParts=pt.prototype.Jj,pt.prototype.findContainingGroupChain=pt.prototype.Qy,pt.prototype.findExternalNodesConnected=pt.prototype.Ry,pt.prototype.findExternalLinksConnected=pt.prototype.vu,pt.prototype.ensureBounds=pt.prototype.Za,pt.className="Group";function wn(t){st.call(this),this.ub=oh,this.Nn=new G(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}O(wn,st),wn.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.ub=this.ub.J(),t.Nn=this.Nn.copy()},wn.prototype.Xg=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return oo(0,0,e.width,e.height,t.x,t.y)},wn.prototype.El=function(){var t=this.part;if(t!==null&&(t instanceof pt||t instanceof Ct)||B("Placeholder is not inside a Group or Adornment."),t instanceof pt){var e=this.computeBorder(this.Nn),n=this.minSize,i=this.bc;for(cr(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.ve(0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||i===null||i.animationManager.Ju(t)||isNaN(e.x)||isNaN(e.y)||(n=C.alloc(),n.oi(e,t.locationSpot),n.C(t.location)||(t.location=n),C.free(n))}else{e=this.bc,n=this.ub,i=n.left+n.right;var r=n.top+n.bottom,a=t.adornedObject;t.angle=a.fi();var h=0;a instanceof yt&&(h=a.strokeWidth);var g=a.uf(),f=a.naturalBounds,c=(f.width+h)*g;h=(f.height+h)*g,t.type!==X.Link&&(g=a.ia(t.category==="Selection"?nn:t.locationSpot,C.alloc()),t.location=g,C.free(g)),isNaN(c)||isNaN(h)?(t=a.ia(nn,C.alloc()),c=G.allocAt(t.x,t.y,0,0),c.Me(a.ia(Xo,t)),c.Me(a.ia(rh,t)),c.Me(a.ia(sh,t)),cr(e,c.width+i||0,c.height+r||0),this.ve(-n.left,-n.top,e.width,e.height),C.free(t),G.free(c)):(cr(e,c+i||0,h+r||0),this.ve(-n.left,-n.top,e.width,e.height))}},wn.prototype.Vg=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},wn.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(n!==null&&e instanceof pt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Nn.v()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&(n=i.computeBorder(e,this.Nn,t),n!==null))return n}n=G.alloc(),i=this.computeMemberBounds(n);var r=this.ub;return e instanceof pt&&!e.isSubGraphExpanded?t.h(i.x-r.left,i.y-r.top,0,0):t.h(i.x-r.left,i.y-r.top,Math.max(i.width+r.left+r.right,0),Math.max(i.height+r.top+r.bottom,0)),G.free(n),e instanceof pt&&e.computesBoundsIncludingLocation&&e.location.v()&&t.Me(e.location),t},wn.prototype.computeMemberBounds=function(t){if(!(this.part instanceof pt))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,r=-1/0,a=-1/0,h=e.memberParts;h.next();){var g=h.value;if(g.isVisible()){if(g instanceof H&&(!e.computesBoundsIncludingLinks||Sr(g)||g.fromNode===e||g.toNode===e))continue;g=g.actualBounds,g.left<n&&(n=g.left),g.top<i&&(i=g.top),g.right>r&&(r=g.right),g.bottom>a&&(a=g.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,r-n,a-i):(e=e.location,t.h(e.x,e.y,0,0)),t},I.Object.defineProperties(wn.prototype,{padding:{get:function(){return this.ub},set:function(t){typeof t=="number"&&(t=new At(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.g("padding",e,t),this.w())}}}),wn.className="Placeholder";function H(t){lt.call(this,X.Link),this.Oa=8,this.Ue=null,this.Ve="",this.hf=this.Om=null,this.jf="",this.Xn=null,this.dk=Ln,this.wm=0,this.ym=Ln,this.zm=NaN,this.kj=$y,this.Sn=.5,this.rd=null,this.Jb=new tt().freeze(),this.ef=this.Eg=null,this.bl=new G,this.sa=new W,this.u=this.m=this.If=this.Mf=null,this.Yt=new C,this.Gp=this.qw=this.pw=null,this.Ys=NaN,this.aa=null,this.j=[],t&&Object.assign(this,t)}O(H,lt),H.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.Oa=this.Oa&-113,t.Ve=this.Ve,t.Om=this.Om,t.jf=this.jf,t.Xn=this.Xn,t.dk=this.dk,t.wm=this.wm,t.ym=this.ym,t.zm=this.zm,t.kj=this.kj,t.Sn=this.Sn,this.aa!==null&&(t.aa=this.aa.copy())},l=H.prototype,l.qf=function(t){lt.prototype.qf.call(this,t),this.Ve=t.Ve,this.jf=t.jf,t.Eg=null,t.ab(),t.If=this.If;var e=t.fromPort;e!==null&&$n(e),t=t.toPort,t!==null&&$n(t)},l.ob=function(t){t.classType===H?(t.value&2)===2?this.routing=t:t===si||t===ns||t===Kh?this.curve=t:t===Dg||t===yc||t===vc?this.adjusting=t:t!==$y&&t!==Ln&&B("Unknown Link enum value for a Link property: "+t):lt.prototype.ob.call(this,t)},l.Rc=function(){this.aa===null&&(this.aa=new mg)},l.mi=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),Fi(t)||br(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),Fi(t)||br(t)))},l.fv=function(){return!1},l.ns=function(){},l.Tc=function(){return!1},H.prototype.computeAngle=function(t,e,n){return H.computeAngle(e,n)},H.computeAngle=function(t,e){switch(t){default:case Ln:t=0;break;case jg:t=e;break;case Og:t=e+90;break;case Eg:t=e-90;break;case Jy:t=e+180;break;case Sc:t=A.Eo(e),90<t&&270>t&&(t-=180);break;case Ig:t=A.Eo(e+90),90<t&&270>t&&(t-=180);break;case Ag:t=A.Eo(e-90),90<t&&270>t&&(t-=180);break;case Pc:if(t=A.Eo(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return A.Eo(t)};function Xh(t){var e=t.fromNode,n=t.toNode,i=null;if(e!==null?i=n!==null?e.Sw(n):e.containingGroup:n!==null?i=n.containingGroup:i=null,e=i,n=t.ph,n!==e){n!==null&&Uy(n,t),t.ph=e,e!==null&&Yy(e,t);var r=t.containingGroupChanged;if(r!==null){var a=!0,h=t.diagram;h!==null&&(a=h.$,h.$=!0),r(t,n,e),h!==null&&(h.$=a)}!t.xd||t.pw!==n&&t.qw!==n||t.ab()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=i}l=H.prototype,l.dh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&lt.prototype.dh.call(this)},l.wo=function(t){var e=this.fromNode;return t===e?this.toNode:e},l.jz=function(t){var e=this.fromPort;return t===e?this.toPort:e};function bw(t,e){t.rd===null&&(t.rd=new Z),t.rd.add(e),t.w()}l.yo=function(t){if(lt.prototype.yo.call(this,t),xa(this)&&this.Ao(this.actualBounds),!t){t=this.Ue;var e=null;t!==null&&(e=this.fromPort,uc(t,this,e));var n=this.hf;if(n!==null){var i=this.toPort;n===t&&i===e||uc(n,this,i)}Tg(this)}},l.zo=function(t){if(lt.prototype.zo.call(this,t),xa(this)&&this.Ao(this.actualBounds),!t){t=this.Ue;var e=null;t!==null&&(e=this.fromPort,gc(t,this,e));var n=this.hf;if(n!==null){var i=this.toPort;n===t&&i===e||gc(n,this,i)}Fg(this)}},l.Fj=function(){if(this.xd=!0,this.rd!==null){var t=this.diagram;if(t!==null)for(var e=this.rd.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},H.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},H.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var r=n.y;for(isNaN(r)&&(r=0),i=t.x-i,r=t.y-r,e===!0?lt.prototype.move.call(this,t,!1):(t=C.allocAt(n.x+i,n.y+r),lt.prototype.move.call(this,t,!1),C.free(t)),es(this,i,r),t=this.labelNodes;t.next();)e=t.value,n=e.position,e.moveTo(n.x+i,n.y+r)},H.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},H.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},H.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(sf),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===si))return this.sa.Bu(.5,t),t.add(this.i(0)),n=this.sa.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===si){if(e===3){n=this.i(0),i=this.i(1);var r=this.i(2);return A.Gw(n.x,n.y,i.x,i.y,i.x,i.y,r.x,r.y,t),t}if(i=(e-1)/3|0,n=3*(i/2|0),i%2===1){i=this.i(n),r=this.i(n+1);var a=this.i(n+2);n=this.i(n+3),A.Gw(i.x,i.y,r.x,r.y,a.x,a.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var h=this.flattenedLengths;for(n=this.flattenedTotalLength,r=a=i=0;i<n/2&&a<e&&(r=h[a],!(i+r>n/2));)i+=r,a++;return e=this.i(a),a=this.i(a+1),1>Math.abs(e.x-a.x)?e.y>a.y?t.h(e.x,e.y-(n/2-i)):t.h(e.x,e.y+(n/2-i)):1>Math.abs(e.y-a.y)?e.x>a.x?t.h(e.x-(n/2-i),e.y):t.h(e.x+(n/2-i),e.y):(n=(n/2-i)/r,t.h(e.x+n*(a.x-e.x),e.y+n*(a.y-e.y))),t},H.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).Ya(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===si))return this.sa.Yw(.5);if(this.computeCurve()===si&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2===1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2);return n=this.i(n+3),A.ty(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Ya(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var r=0;n=0;for(var a;r<i/2&&n<t&&(a=e[n],!(r+a>i/2));)r+=a,n++;if(e=this.i(n),i=this.i(n+1),1>Math.abs(e.x-i.x)&&1>Math.abs(e.y-i.y)){if(0<n&&n+2<t)return this.i(n-1).Ya(this.i(n+2))}else{if(1>Math.abs(e.x-i.x))return e.y>i.y?270:90;if(1>Math.abs(e.y-i.y))return e.x>i.x?180:0}return e.Ya(i)},l=H.prototype,l.i=function(t){return this.Jb.s[t]},l.Wc=function(t,e){this.Jb.Vc(t,e)},l.M=function(t,e,n){this.Jb.Vc(t,new C(e,n))},l.sz=function(t,e){this.Jb.Cb(t,e)},l.l=function(t,e,n){this.Jb.Cb(t,new C(e,n))},l.fe=function(t){this.Jb.add(t)},l.mf=function(t,e){this.Jb.add(new C(t,e))},l.Yu=function(t){this.Jb.mb(t)},l.Aj=function(){this.Jb.clear()};function es(t,e,n){if(e!==0||n!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var i=t.xd,r=new tt,a=t.Jb.iterator;a.next();){var h=a.value;r.add(new C(h.x+e,h.y+n).freeze())}r.freeze(),a=t.Jb,t.Jb=r,h=t.diagram,isNaN(e)||isNaN(n)||h!==null&&h.animationManager.zb?t.w():(t.de.h(t.de.x+e,t.de.y+n),t.pa.h(t.pa.x+e,t.pa.y+n),Th(t)),i?fc(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),h!==null&&h.animationManager.zb&&(e=h.animationManager,t.ef=r,e.dl.add(t)),t.g("points",a,r)}}l.jh=function(){this.Eg===null&&(this.Eg=this.Jb,this.Jb=this.Jb.copy())},l.pf=function(){if(this.Eg!==null){for(var t=this.Eg,e=this.Jb,n=1/0,i=1/0,r=t.s,a=r.length,h=0;h<a;h++){var g=r[h];n=Math.min(g.x,n),i=Math.min(g.y,i)}g=h=1/0;for(var f=e.s,c=f.length,m=0;m<c;m++){var y=f[m];h=Math.min(y.x,h),g=Math.min(y.y,g),y.freeze()}if(e.freeze(),c===a){for(a=0;a<c;a++)if(m=r[a],y=f[a],m.x-n!==y.x-h||m.y-i!==y.y-g){this.mc(!0);break}}else this.mc(!0);this.Eg=null,n=this.diagram,n!==null&&n.animationManager.zb&&(n=n.animationManager,this.ef=e,n.dl.add(this)),fc(this),this.g("points",t,e)}},l.$u=function(){this.Eg!==null&&(this.Jb=this.Eg,this.Eg=null)};function fc(t){t.Jb.count===0?t.xd=!1:(t.xd=!0,t.Gp=null,t.Ys=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),Wy(t,!1))}l.ab=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Zr.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.ef!==null&&!t.isTicking&&t.isAnimating&&(this.ef=null)}t=this.path,t!==null&&(this.xd=!1,this.w(),t.w())}},l.mg=function(){if(!this.xd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.jh(),t=this.computePoints()}catch{this.computingPoints=!1,this.$u()}finally{this.computingPoints=!1,t?this.pf():this.$u()}}},H.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Pl||(Pl=new q,Pl.desiredSize=tl,Pl.Za()),this.defaultFromPoint&&(Pl.location=this.defaultFromPoint,Pl.Za(),e=t=Pl)):e=this.fromPort,e!==null&&!t.isVisible()){var n=t.findVisibleNode();n!==null&&n!==t?(t=n,e=n.port):t=n}if(this.pw=t,t===null||!t.location.v())return!1;for(;!(e===null||e.actualBounds.v()&&e.zf());)e=e.panel;if(e===null)return!1;var i=this.toNode,r=null;if(i===null?(xl||(xl=new q,xl.desiredSize=tl,xl.Za()),this.defaultToPoint&&(xl.location=this.defaultToPoint,xl.Za(),r=i=xl)):r=this.toPort,r===null||i.isVisible()||(n=i.findVisibleNode(),n!==null&&n!==i?(i=n,r=n.port):i=n),this.qw=i,i===null||!i.location.v())return!1;for(;!(r===null||r.actualBounds.v()&&r.zf());)r=r.panel;if(r===null)return!1;var a=this.pointsCount,h=this.computeSpot(!0,e);n=this.computeSpot(!1,r);var g=_h(h),f=_h(n),c=e===r&&e!==null,m=this.isOrthogonal,y=this.curve===si;this.Mf=c&&!m?y=!0:!1;var S=this.computeAdjusting()===Ln||c;if(!m&&!c&&g&&f){if(g=!1,!S&&3<=a&&(S=this.getLinkPoint(t,e,h,!0,!1,i,r),f=this.getLinkPoint(i,r,n,!1,!1,t,e),g=this.adjustPoints(0,S,a-1,f))&&(S=this.getLinkPoint(t,e,h,!0,!1,i,r),f=this.getLinkPoint(i,r,n,!1,!1,t,e),this.adjustPoints(0,S,a-1,f)),!g)if(this.Aj(),y){a=this.getLinkPoint(t,e,h,!0,!1,i,r),S=this.getLinkPoint(i,r,n,!1,!1,t,e),g=S.x-a.x,f=S.y-a.y,c=this.computeCurviness(),y=m=0;var x=a.x+g/3,P=a.y+f/3,L=x,N=P;A.B(f,0)?N=0<g?N-c:N+c:(m=-g/f,y=Math.sqrt(c*c/(m*m+1)),0>c&&(y=-y),L=(0>f?-1:1)*y+x,N=m*(L-x)+P),x=a.x+2*g/3,P=a.y+2*f/3;var k=x,F=P;A.B(f,0)?F=0<g?F-c:F+c:(k=(0>f?-1:1)*y+x,F=m*(k-x)+P),this.Aj(),this.fe(a),this.mf(L,N),this.mf(k,F),this.fe(S),this.Wc(0,this.getLinkPoint(t,e,h,!0,!1,i,r)),this.Wc(3,this.getLinkPoint(i,r,n,!1,!1,t,e))}else a=i,S=r,i=this.getLinkPoint(t,e,h,!0,!1,a,S),r=this.getLinkPoint(a,S,n,!1,!1,t,e),this.hasCurviness()?(S=r.x-i.x,n=r.y-i.y,h=this.computeCurviness(),t=i.x+S/2,e=i.y+n/2,a=t,g=e,A.B(n,0)?g=0<S?g-h:g+h:(S=-S/n,a=Math.sqrt(h*h/(S*S+1)),0>h&&(a=-a),a=(0>n?-1:1)*a+t,g=S*(a-t)+e),this.fe(i),this.mf(a,g),this.fe(r)):(this.fe(i),this.fe(r),g=G.alloc(),e.gi(g),f=g.ba(r),S.gi(g),c=g.ba(i),(f||c)&&(h=e.ia(pc(h),new C),this.Wc(0,this.getLinkPointFromPoint(t,e,h,r,!0,h)),n=S.ia(pc(n),new C),this.Wc(1,this.getLinkPointFromPoint(a,S,n,i,!1,n))),G.free(g))}else{y=this.isAvoiding,S&&(m&&y||c)&&this.Aj();var D=c?this.computeCurviness():0;y=this.getLinkPoint(t,e,h,!0,m,i,r),x=L=P=0,(m||!g||c)&&(N=this.computeEndSegmentLength(t,e,h,!0),x=this.getLinkDirection(t,e,y,h,!0,m,i,r),c&&(g||h.C(n)||!m&&h.x+n.x===1&&h.y+n.y===1)&&(x-=m?90:30,0>D&&(x-=180)),0>x?x+=360:360<=x&&(x-=360),c&&(N+=Math.abs(D)*(m?1:2)),x===0?P=N:x===90?L=N:x===180?P=-N:x===270?L=-N:(P=N*Math.cos(x*Math.PI/180),L=N*Math.sin(x*Math.PI/180)),h.Fc()&&c&&(N=e.ia(Gt,C.alloc()),k=C.allocAt(N.x+1e3*P,N.y+1e3*L),this.getLinkPointFromPoint(t,e,N,k,!0,y),C.free(N),C.free(k))),N=this.getLinkPoint(i,r,n,!1,m,t,e);var j=F=k=0;if(m||!f||c){var E=this.computeEndSegmentLength(i,r,n,!1);j=this.getLinkDirection(i,r,N,n,!1,m,t,e),c&&(f||h.C(n)||!m&&h.x+n.x===1&&h.y+n.y===1)&&(j+=m?0:30,0>D&&(j+=180)),0>j?j+=360:360<=j&&(j-=360),c&&(E+=Math.abs(D)*(m?1:2)),j===0?k=E:j===90?F=E:j===180?k=-E:j===270?F=-E:(k=E*Math.cos(j*Math.PI/180),F=E*Math.sin(j*Math.PI/180)),n.Fc()&&c&&(n=r.ia(Gt,C.alloc()),h=C.allocAt(n.x+1e3*k,n.y+1e3*F),this.getLinkPointFromPoint(i,r,n,h,!1,N),C.free(n),C.free(h))}n=y,(m||!g||c)&&(n=new C(y.x+P,y.y+L)),h=N,(m||!f||c)&&(h=new C(N.x+k,N.y+F)),!S&&!m&&g&&3<a&&this.adjustPoints(0,y,a-2,h)?this.Wc(a-1,N):!S&&!m&&f&&3<a&&this.adjustPoints(1,n,a-1,N)?this.Wc(0,y):!S&&(m?6<=a:4<a)&&this.adjustPoints(1,n,a-2,h)?(this.Wc(0,y),this.Wc(a-1,N)):(this.Aj(),this.fe(y),(m||!g||c)&&this.fe(n),m&&this.addOrthoPoints(n,x,h,j,t,i),(m||!f||c)&&this.fe(h),this.fe(N))}return!0};function Xy(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}H.prototype.getLinkPointFromPoint=function(t,e,n,i,r,a){if(a===void 0&&(a=new C),t===null||e===null)return a.assign(n),a;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.ke()||(r=r.panel),r===null){r=i.x,i=i.y;var h=n.x;n=n.y}else{t=r.ge,r=1/(t.m11*t.m22-t.m12*t.m21),h=t.m22*r;var g=-t.m12*r,f=-t.m21*r,c=t.m11*r,m=r*(t.m21*t.dy-t.m22*t.dx),y=r*(t.m12*t.dx-t.m11*t.dy);r=i.x*h+i.y*f+m,i=i.x*g+i.y*c+y,h=n.x*h+n.y*f+m,n=n.x*g+n.y*c+y}return e.Kj(r,i,h,n,a),t!==null&&a.transform(t),a};function cc(t,e){var n=e.Hn;return n===null&&(n=new wl,n.port=e,n.node=e.part,e.Hn=n),a2(n,t)}H.prototype.getLinkPoint=function(t,e,n,i,r,a,h,g){if(g===void 0&&(g=new C),n.pb()&&!_h(n))return e.ia(n,g),g;if(n.Uc()){var f=cc(this,e);if(f!==null){if(g.assign(f.Co),r&&this.routing===e2){var c=cc(this,h);if(c!==null&&f.tl<c.tl){f=C.alloc(),c=C.alloc();var m=new G(e.ia(nn,f),e.ia(Xo,c)),y=this.computeSpot(!i,h);t=this.getLinkPoint(a,h,y,!i,r,t,e,c),(n.xf(lh)||n.xf(hh))&&t.y>=m.y&&t.y<=m.y+m.height?g.y=t.y:(n.xf(ah)||n.xf(uh))&&t.x>=m.x&&t.x<=m.x+m.width&&(g.x=t.x),C.free(f),C.free(c)}}return g}}return n=e.ia(pc(n),C.alloc()),this.pointsCount>(r?6:2)?(h=i?this.i(1):this.i(this.pointsCount-2),r&&(h=Xy(n,h.copy()))):(f=this.computeSpot(!i,h),a=C.alloc(),h=h.ia(pc(f),a),r&&(h=Xy(n,h)),C.free(a)),this.getLinkPointFromPoint(t,e,n,h,i,g),C.free(n),g},H.prototype.getLinkDirection=function(t,e,n,i,r,a,h,g){t:if(i.pb())var f=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.Uc()&&(f=cc(this,e),f!==null))switch(f.Gc){case 1:f=270;break t;case 2:f=180;break t;default:case 4:f=0;break t;case 8:f=90;break t}f=e.ia(Gt,C.alloc()),this.pointsCount>(a?6:2)?(g=r?this.i(1):this.i(this.pointsCount-2),g=a?Xy(f,g.copy()):n):(n=C.alloc(),g=g.ia(Gt,n),C.free(n)),n=Math.abs(g.x-f.x)>Math.abs(g.y-f.y)?g.x>=f.x?0:180:g.y>=f.y?90:270,C.free(f),f=n}return i.Fc()&&h.Md(t)&&(f+=180,360<=f&&(f-=360)),_h(i)||(t=e.fi(),t===0)||(45<=t&&135>t?f+=90:135<=t&&225>t?f+=180:225<=t&&315>t&&(f+=270),360<=f&&(f-=360)),f},H.prototype.computeEndSegmentLength=function(t,e,n,i){return e!==null&&n.Uc()&&(t=cc(this,e),t!==null)?t.tu:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},H.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Gt:(e=this.fromSpot,e.Sb()&&(e=t.fromSpot),t=e===Je?$e:e)):(t=e||this.toPort,t===null?t=Gt:(e=this.toSpot,e.Sb()&&(e=t.toSpot),t=e===Je?$e:e)),t};function _h(t){return t===$e||t.x===.5&&t.y===.5}function pc(t){return t.x===.5&&t.y===.5?t:Gt}H.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Ln&&4<this.pointsCount?this.computeMidPoint(new C):(t=e.Hn,t=t!==null?a2(t,this):null,t!==null?t.Co:e.ia(Gt))},H.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},H.prototype.tf=function(t,e,n,i,r,a){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var h=a;if(a===void 0&&(h=xt.alloc(),h.reset()),h.multiply(this.transform),this.Wg(t,h))return fy(this,e,n,r),a===void 0&&xt.free(h),!0;if(this.Sc(t,h)){var g=!1;if(!this.isAtomic)for(var f=this.R.s,c=f.length;c--;){var m=f[c];if(m.visible||m===this.locationObject){var y=m.actualBounds,S=this.naturalBounds;if(!(y.x>S.width||y.y>S.height||0>y.x+y.width||0>y.y+y.height)){if(y=xt.alloc(),y.set(h),m instanceof X)g=m.tf(t,e,n,i,r,y);else if(this.path===m){if(m instanceof yt)if(g=t,S=i,m.pickable===!1)g=!1;else if(y.multiply(m.transform),S)t:{var x=g,P=y;if(m.Wg(x,P))g=!0;else{if(P===void 0&&(P=m.transform,x.Ee(m.actualBounds))){g=!0;break t}g=x.left,S=x.right;var L=x.top;x=x.bottom;var N=C.alloc(),k=C.alloc(),F=C.alloc(),D=xt.alloc();D.set(P),D.Ou(m.transform),D.Tr(),k.x=S,k.y=L,k.transform(D),N.x=g,N.y=L,N.transform(D),P=!1,Pa(m,N,k,F)?P=!0:(N.x=S,N.y=x,N.transform(D),Pa(m,N,k,F)?P=!0:(k.x=g,k.y=x,k.transform(D),Pa(m,N,k,F)?P=!0:(N.x=g,N.y=L,N.transform(D),Pa(m,N,k,F)&&(P=!0)))),xt.free(D),C.free(N),C.free(k),C.free(F),g=P}}else g=m.Wg(g,y)}else g=Zx(m,t,i,y);g&&(S=m,e!==null&&(S=e(m)),S&&(n===null||n(S))&&r.add(S)),xt.free(y)}}}return a===void 0&&xt.free(h),g||this.background!==null||this.areaBackground!==null}return a===void 0&&xt.free(h),!1},H.prototype.computeCurve=function(){if(this.Mf===null){var t=this.fromPort,e=this.isOrthogonal;this.Mf=t!==null&&t===this.toPort&&!e}return this.Mf?si:this.curve},H.prototype.computeCorner=function(){if(this.curve===si)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},H.prototype.findMidLabel=function(){for(var t=this.path,e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-1/0||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},H.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=i2;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(e!==null&&n!==null){var i=this.findMidLabel();if(i!==null){var r=i.naturalBounds,a=i.margin,h=isNaN(r.width)?30:r.width*i.scale+a.left+a.right;r=isNaN(r.height)?14:r.height*i.scale+a.top+a.bottom,i=i.segmentOrientation,i===jg||i===Sc||i===Jy?t=Math.max(t,r):i===Eg||i===Ag||i===Og||i===Ig?t=Math.max(t,h):(e=e.ia(Gt).Ya(n.ia(Gt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*h)+Math.abs(Math.cos(e)*r)+1)),this.curve===si&&(t*=1.333)}}return t},H.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===Ln&&n.ab()}},H.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=n2;var e=this.If;if(e!==null){for(var n=Kt(),i=0,r=e.links,a=0;a<r.length;a++){var h=r[a].computeSpacing();n.push(h),i+=h}for(i=-i/2,a=0;a<r.length;a++){if(r[a]===this){t=i+n[a]/2;break}i+=n[a]}e.cs===this.fromNode&&(t=-t),Xt(n)}}return t},H.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},H.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.If!==null},H.prototype.adjustPoints=function(t,e,n,i){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===yc)return!1;r===vc&&(r=Dg)}switch(r){case yc:var a=this.i(t),h=this.i(n);if(!a.$a(e)||!h.$a(i)){r=a.x,a=a.y;var g=h.x-r,f=h.y-a,c=Math.sqrt(g*g+f*f);if(!A.ca(c,0)){if(A.ca(g,0))var m=0>f?-Math.PI/2:Math.PI/2;else m=Math.atan(f/Math.abs(g)),0>g&&(m=Math.PI-m);h=e.x;var y=e.y;g=i.x-h;var S=i.y-y;for(f=Math.sqrt(g*g+S*S),A.ca(g,0)?S=0>S?-Math.PI/2:Math.PI/2:(S=Math.atan(S/Math.abs(g)),0>g&&(S=Math.PI-S)),c=f/c,m=S-m,this.Wc(t,e),t+=1;t<n;t++)e=this.i(t),g=e.x-r,f=e.y-a,e=Math.sqrt(g*g+f*f),A.ca(e,0)||(A.ca(g,0)?f=0>f?-Math.PI/2:Math.PI/2:(f=Math.atan(f/Math.abs(g)),0>g&&(f=Math.PI-f)),g=f+m,e*=c,this.M(t,h+e*Math.cos(g),y+e*Math.sin(g)));this.Wc(n,i)}}return!0;case vc:if(a=this.i(t),y=this.i(n),!a.$a(e)||!y.$a(i)){r=a.x,a=a.y,h=y.x,y=y.y,c=(h-r)*(h-r)+(y-a)*(y-a),g=e.x,m=e.y,f=i.x,S=i.y;var x=1;if(f-g!==0){var P=(S-m)/(f-g);x=Math.sqrt(1+1/(P*P))}else P=9e9;for(this.Wc(t,e),t+=1;t<n;t++){e=this.i(t);var L=e.x,N=e.y,k=.5;c!==0&&(k=((r-L)*(r-h)+(a-N)*(a-y))/c);var F=r+k*(h-r),D=a+k*(y-a);e=Math.sqrt((L-F)*(L-F)+(N-D)*(N-D)),N<P*(L-F)+D&&(e=-e),0<P&&(e=-e),L=g+k*(f-g),k=m+k*(S-m),P!==0?(e=L+e/x,this.M(t,e,k-(e-L)/P)):this.M(t,L,k+e)}this.Wc(n,i)}return!0;case Dg:t:{if(this.isOrthogonal&&(r=this.i(t),a=this.i(t+1),h=this.i(t+2),g=a.x,m=a.y,y=g,c=m,A.B(r.y,a.y)?A.B(a.x,h.x)?m=e.y:A.B(a.y,h.y)&&(g=e.x):A.B(r.x,a.x)&&(A.B(a.y,h.y)?g=e.x:A.B(a.x,h.x)&&(m=e.y)),this.M(t+1,g,m),r=this.i(n),a=this.i(n-1),h=this.i(n-2),g=a.x,m=a.y,f=g,S=m,A.B(r.y,a.y)?A.B(a.x,h.x)?m=i.y:A.B(a.y,h.y)&&(g=i.x):A.B(r.x,a.x)&&(A.B(a.y,h.y)?g=i.x:A.B(a.x,h.x)&&(m=i.y)),this.M(n-1,g,m),_y(this))){this.M(t+1,y,c),this.M(n-1,f,S),n=!1;break t}this.Wc(t,e),this.Wc(n,i),n=!0}return n;default:return!1}},H.prototype.addOrthoPoints=function(t,e,n,i,r,a){0>e?e+=360:360<=e&&(e-=360),0>i?i+=360:360<=i&&(i-=360);var h=i;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=315<=i||45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var g=r.actualBounds.copy(),f=a.actualBounds.copy();if(g.v()&&f.v()){g.vc(zg,zg),f.vc(zg,zg),g.Me(t),f.Me(n);var c=C.alloc(),m=C.alloc();e===0?n.x>t.x||i===270&&n.y<t.y&&f.right>t.x||i===90&&n.y>t.y&&f.right>t.x?(c.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),i===180?(c.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),m.x=c.x,m.y=n.y):i===270&&n.y<t.y||i===90&&n.y>t.y?(c.x=t.x<f.left?this.computeMidOrthoPosition(t.x,t.y,f.left,n.y,!1):t.x<f.right&&(i===270&&t.y<f.top||i===90&&t.y>f.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):f.right,m.x=c.x,m.y=n.y):i===0&&t.x<f.left&&t.y>f.top&&t.y<f.bottom&&(c.x=t.x,c.y=t.y<n.y?Math.min(n.y,f.top):Math.max(n.y,f.bottom),m.y=c.y)):(c.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),(i===180||i===90&&n.y<g.top||i===270&&n.y>g.bottom)&&(i===180&&(f.ba(t)||g.ba(n))?c.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(i===180||i===90)?c.y=this.computeMidOrthoPosition(t.x,g.top,n.x,Math.max(n.y,f.bottom),!0):n.y>t.y&&(i===180||i===270)&&(c.y=this.computeMidOrthoPosition(t.x,g.bottom,n.x,Math.min(n.y,f.top),!0)),m.x=n.x,m.y=c.y),c.y>g.top&&c.y<g.bottom&&(n.x>=g.left&&n.x<=t.x||t.x<=f.right&&t.x>=n.x?(i===90||i===270)&&(c.h(Math.max((t.x+n.x)/2,t.x),t.y),m.h(c.x,n.y)):(c.y=i===270||(i===0||i===180)&&n.y<t.y?Math.min(n.y,i===0?g.top:Math.min(g.top,f.top)):Math.max(n.y,i===0?g.bottom:Math.max(g.bottom,f.bottom)),m.x=n.x,m.y=c.y))):e===180?n.x<t.x||i===270&&n.y<t.y&&f.left<t.x||i===90&&n.y>t.y&&f.left<t.x?(c.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),i===0?(c.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),m.x=c.x,m.y=n.y):i===270&&n.y<t.y||i===90&&n.y>t.y?(c.x=t.x>f.right?this.computeMidOrthoPosition(t.x,t.y,f.right,n.y,!1):t.x>f.left&&(i===270&&t.y<f.top||i===90&&t.y>f.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):f.left,m.x=c.x,m.y=n.y):i===180&&t.x>f.right&&t.y>f.top&&t.y<f.bottom&&(c.x=t.x,c.y=t.y<n.y?Math.min(n.y,f.top):Math.max(n.y,f.bottom),m.y=c.y)):(c.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),(i===0||i===90&&n.y<g.top||i===270&&n.y>g.bottom)&&(i===0&&(f.ba(t)||g.ba(n))?c.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(i===0||i===90)?c.y=this.computeMidOrthoPosition(t.x,g.top,n.x,Math.max(n.y,f.bottom),!0):n.y>t.y&&(i===0||i===270)&&(c.y=this.computeMidOrthoPosition(t.x,g.bottom,n.x,Math.min(n.y,f.top),!0)),m.x=n.x,m.y=c.y),c.y>g.top&&c.y<g.bottom&&(n.x<=g.right&&n.x>=t.x||t.x>=f.left&&t.x<=n.x?(i===90||i===270)&&(c.h(Math.min((t.x+n.x)/2,t.x),t.y),m.h(c.x,n.y)):(c.y=i===270||(i===0||i===180)&&n.y<t.y?Math.min(n.y,i===180?g.top:Math.min(g.top,f.top)):Math.max(n.y,i===180?g.bottom:Math.max(g.bottom,f.bottom)),m.x=n.x,m.y=c.y))):e===90?n.y>t.y||i===180&&n.x<t.x&&f.bottom>t.y||i===0&&n.x>t.x&&f.bottom>t.y?(c.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),i===270?(c.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),m.x=n.x,m.y=c.y):i===180&&n.x<t.x||i===0&&n.x>t.x?(c.y=t.y<f.top?this.computeMidOrthoPosition(t.x,t.y,n.x,f.top,!0):t.y<f.bottom&&(i===180&&t.x<f.left||i===0&&t.x>f.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):f.bottom,m.x=n.x,m.y=c.y):i===90&&t.y<f.top&&t.x>f.left&&t.x<f.right&&(c.x=t.x<n.x?Math.min(n.x,f.left):Math.max(n.x,f.right),c.y=t.y,m.x=c.x)):(c.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),(i===270||i===0&&n.x<g.left||i===180&&n.x>g.right)&&(i===270&&(f.ba(t)||g.ba(n))?c.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(i===270||i===0)?c.x=this.computeMidOrthoPosition(g.left,t.y,Math.max(n.x,f.right),n.y,!1):n.x>t.x&&(i===270||i===180)&&(c.x=this.computeMidOrthoPosition(g.right,t.y,Math.min(n.x,f.left),n.y,!1)),m.x=c.x,m.y=n.y),c.x>g.left&&c.x<g.right&&(n.y>=g.top&&n.y<=t.y||t.y<=f.bottom&&t.y>=n.y?(i===0||i===180)&&(c.h(t.x,Math.max((t.y+n.y)/2,t.y)),m.h(n.x,c.y)):(c.x=i===180||(i===90||i===270)&&n.x<t.x?Math.min(n.x,i===90?g.left:Math.min(g.left,f.left)):Math.max(n.x,i===90?g.right:Math.max(g.right,f.right)),m.x=c.x,m.y=n.y))):n.y<t.y||i===180&&n.x<t.x&&f.top<t.y||i===0&&n.x>t.x&&f.top<t.y?(c.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),i===90?(c.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),m.x=n.x,m.y=c.y):i===180&&n.x<t.x||i===0&&n.x>=t.x?(c.y=t.y>f.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,f.bottom,!0):t.y>f.top&&(i===180&&t.x<f.left||i===0&&t.x>f.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):f.top,m.x=n.x,m.y=c.y):i===270&&t.y>f.bottom&&t.x>f.left&&t.x<f.right&&(c.x=t.x<n.x?Math.min(n.x,f.left):Math.max(n.x,f.right),c.y=t.y,m.x=c.x)):(c.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),(i===90||i===0&&n.x<g.left||i===180&&n.x>g.right)&&(i===90&&(f.ba(t)||g.ba(n))?c.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(i===90||i===0)?c.x=this.computeMidOrthoPosition(g.left,t.y,Math.max(n.x,f.right),n.y,!1):n.x>t.x&&(i===90||i===180)&&(c.x=this.computeMidOrthoPosition(g.right,t.y,Math.min(n.x,f.left),n.y,!1)),m.x=c.x,m.y=n.y),c.x>g.left&&c.x<g.right&&(n.y<=g.bottom&&n.y>=t.y||t.y>=f.top&&t.y<=n.y?(i===0||i===180)&&(c.h(t.x,Math.min((t.y+n.y)/2,t.y)),m.h(n.x,c.y)):(c.x=i===180||(i===90||i===270)&&n.x<t.x?Math.min(n.x,i===270?g.left:Math.min(g.left,f.left)):Math.max(n.x,i===270?g.right:Math.max(g.right,f.right)),m.x=c.x,m.y=n.y)));var y=n;if(this.isAvoiding){var S=this.diagram;if(S===null||r===a||this.layer.isTemporary||!Ox(S)||g.ba(y)&&!a.Md(r)||f.ba(t)&&!r.Md(a))e=!1;else{var x=_0(S,!0,this.containingGroup,null);if(this.segmentIndex!==17&&x.Pj(Math.min(t.x,c.x),Math.min(t.y,c.y),Math.abs(t.x-c.x),Math.abs(t.y-c.y))&&x.Pj(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y))&&x.Pj(Math.min(m.x,y.x),Math.min(m.y,y.y),Math.abs(m.x-y.x),Math.abs(m.y-y.y)))e=!1;else{r=t,a=y;var P=n=null;if(S.isVirtualized){S=x.bounds.copy(),S.vc(-x.lo,-x.ko);var L=C.alloc();Hh(x,t.x,t.y)||(A.wf(S.x,S.y,S.x+S.width,S.y+S.height,t.x,t.y,c.x,c.y,L)?(n=t=L.copy(),e=L.Ya(c)):A.wf(S.x,S.y,S.x+S.width,S.y+S.height,c.x,c.y,m.x,m.y,L)?(n=t=L.copy(),e=L.Ya(m)):A.wf(S.x,S.y,S.x+S.width,S.y+S.height,m.x,m.y,y.x,y.y,L)&&(n=t=L.copy(),e=L.Ya(y))),Hh(x,y.x,y.y)||(A.wf(S.x,S.y,S.x+S.width,S.y+S.height,y.x,y.y,m.x,m.y,L)?(P=y=L.copy(),i=m.Ya(L)):A.wf(S.x,S.y,S.x+S.width,S.y+S.height,m.x,m.y,c.x,c.y,L)?(P=y=L.copy(),i=c.Ya(L)):A.wf(S.x,S.y,S.x+S.width,S.y+S.height,c.x,c.y,t.x,t.y,L)&&(P=y=L.copy(),i=t.Ya(L))),C.free(L)}g=g.copy().Xc(f),g.vc(x.lo*x.ps,x.ko*x.ps),r2(x,t,e,y,i,g,!0),f=Zo(x,y.x,y.y),!x.abort&&f>=Wh&&(o2(x),g.vc(x.lo*x.mx,x.ko*x.nx),r2(x,t,e,y,i,g,!1),f=Zo(x,y.x,y.y)),!x.abort&&f<Wh&&Zo(x,y.x,y.y)!==is?(Ky(this,x,y.x,y.y,i,!0,h),g=this.i(2),4>this.pointsCount?(e===0||e===180?(g.x=t.x,g.y=y.y):(g.x=y.x,g.y=t.y),this.M(2,g.x,g.y),this.l(3,g.x,g.y)):(h=this.i(3),e===0||e===180?A.B(g.x,h.x)?(g=e===0?Math.max(g.x,t.x):Math.min(g.x,t.x),this.M(2,g,t.y),this.M(3,g,h.y)):A.B(g.y,h.y)?(Math.abs(t.y-g.y)<=x.ko/2&&(this.M(2,g.x,t.y),this.M(3,h.x,t.y)),this.l(2,g.x,t.y)):this.M(2,t.x,g.y):(e===90||e===270)&&(A.B(g.y,h.y)?(g=e===90?Math.max(g.y,t.y):Math.min(g.y,t.y),this.M(2,t.x,g),this.M(3,h.x,g)):A.B(g.x,h.x)?(Math.abs(t.x-g.x)<=x.lo/2&&(this.M(2,t.x,g.y),this.M(3,t.x,h.y)),this.l(2,t.x,g.y)):this.M(2,g.x,t.y))),n!==null&&(t=this.i(1),h=this.i(2),t.x!==h.x&&t.y!==h.y?e===0||e===180?this.l(2,t.x,h.y):this.l(2,h.x,t.y):e===0||e===180?this.l(2,r.x,n.y):this.l(2,n.x,r.y)),P!==null&&(i===0||i===180?this.mf(a.x,P.y):this.mf(P.x,a.y)),e=!0):e=!1}}}else e=!1;e||(this.fe(c.copy()),this.fe(m.copy())),C.free(c),C.free(m)}},H.prototype.computeMidOrthoPosition=function(t,e,n,i,r){var a=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Uc()||this.computeSpot(!1,this.toPort).Uc()||(a=this.computeCurviness()),r?(e+i)/2+a:(t+n)/2+a};function _y(t){if(t.diagram===null||!t.isAvoiding||!Ox(t.diagram))return!1;var e=t.points.s,n=e.length;if(4>n)return!1;t=_0(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var r=e[i],a=e[i+1];if(!t.Pj(Math.min(r.x,a.x),Math.min(r.y,a.y),Math.abs(r.x-a.x),Math.abs(r.y-a.y)))return!0}return!1}function Ky(t,e,n,i,r,a,h){var g=e.lo,f=e.ko,c=Zo(e,n,i),m=n,y=i;for(r===0?m+=g:r===90?y+=f:r===180?m-=g:y-=f,r!==h&&c>wa&&Zo(e,m,y)!==c-1&&(Zo(e,n-g,i)===c-1?(r=180,m=n-g,y=i):Zo(e,n+g,i)===c-1?(r=0,m=n+g,y=i):Zo(e,n,i-f)===c-1?(r=270,m=n,y=i-f):Zo(e,n,i+f)===c-1&&(r=90,m=n,y=i+f));c>wa&&Zo(e,m,y)===c-1;)n=m,i=y,r===0?m+=g:r===90?y+=f:r===180?m-=g:y-=f,--c;a?c>wa&&(r===180||r===0?n=Math.floor(n/g)*g+g/2:(r===90||r===270)&&(i=Math.floor(i/f)*f+f/2)):(n=Math.floor(n/g)*g+g/2,i=Math.floor(i/f)*f+f/2),c>wa&&(a=r,h=n,m=i,r===0?(a=90,m+=f):r===90?(a=180,h-=g):r===180?(a=270,m-=f):r===270&&(a=0,h+=g),Zo(e,h,m)===c-1?Ky(t,e,h,m,a,!1,a):(h=n,m=i,r===0?(a=270,m-=f):r===90?(a=0,h+=g):r===180?(a=90,m+=f):r===270&&(a=180,h-=g),Zo(e,h,m)===c-1&&Ky(t,e,h,m,a,!1,a))),t.mf(n,i)}H.prototype.Ny=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),r=vn(e,t,n.x,n.y,i.x,i.y),a=0,h=1;h<this.pointsCount-1;h++){n=this.i(h+1);var g=vn(e,t,i.x,i.y,n.x,n.y);i=n,g<r&&(a=h,r=g)}return a},H.prototype.mc=function(t){this.Zl=!1,t&&this.w()},H.prototype.Rj=function(t){if(!(!t&&(this.xd===!1||(t=this.vb(),this.Zl&&(t===null||t.geometry!==null))))&&(this.sa=this.makeGeometry(),t=this.path,t!==null)){t.sa=this.sa;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var r=e[i];r!==t&&r.isPanelMain&&r instanceof yt&&(r.sa=this.sa)}}},H.prototype.makeGeometry=function(){var t=this.sa,e=this.pointsCount;if(2>e)return t.type=W.j,this.Zl=!0,t;var n=!1,i=this.diagram;i!==null&&xa(this)&&i.th.contains(this)&&(this.bl.width!==0||this.bl.height!==0)&&(n=!0);var r=this.i(0).copy(),a=r.copy();i=this.Jb.s;var h=this.computeCurve();if(h===si&&3<=e&&!A.ca(this.smoothness,0))if(e===3){var g=this.i(1);i=Math.min(r.x,g.x);var f=Math.min(r.y,g.y);g=this.i(2),i=Math.min(i,g.x),f=Math.min(f,g.y)}else{if(this.isOrthogonal)for(f=0;f<e;f++)g=i[f],a.x=Math.min(g.x,a.x),a.y=Math.min(g.y,a.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),f=this.i(i),a.x=Math.min(f.x,a.x),a.y=Math.min(f.y,a.y);i=a.x,f=a.y}else{for(f=0;f<e;f++)g=i[f],a.x=Math.min(g.x,a.x),a.y=Math.min(g.y,a.y);i=a.x,f=a.y}if(i-=this.Yt.x,f-=this.Yt.y,r.x-=i,r.y-=f,e!==2||xa(this)){if(t.type=W.m,g=jw(t),this.computeShortLength(!0)!==0&&(r=vl(this,r,!0,a)),Uh(g,r.x,r.y,!1),h===si&&3<=e&&!A.ca(this.smoothness,0))if(e===3)n=this.i(1),e=n.x-i,n=n.y-f,r=this.i(2).copy(),r.x-=i,r.y-=f,this.computeShortLength(!1)!==0&&(r=vl(this,r,!1,a)),Qr(g,e,n,e,n,r.x,r.y);else if(this.isOrthogonal){e=C.allocAt(i,f),n=C.alloc(),n.assign(this.i(1)),a=C.allocAt(i,f),r=C.allocAt(i,f),h=this.i(0);for(var c,m=this.smoothness/3,y=1;y<this.pointsCount-1;y++){c=this.i(y);var S=h,x=c,P=this.i(Hy(this,c,y,!1));if((!A.ca(S.x,x.x)||!A.ca(x.x,P.x))&&(!A.ca(S.y,x.y)||!A.ca(x.y,P.y))){var L=m;isNaN(L)&&(L=this.smoothness/3);var N=S.x;S=S.y;var k=x.x;x=x.y;var F=P.x;P=P.y;var D=L*mc(N,S,k,x);L*=mc(k,x,F,P),A.ca(S,x)&&A.ca(k,F)&&(k>N?P>x?(a.x=k-D,a.y=x-D,r.x=k+L,r.y=x+L):(a.x=k-D,a.y=x+D,r.x=k+L,r.y=x-L):P>x?(a.x=k+D,a.y=x-D,r.x=k-L,r.y=x+L):(a.x=k+D,a.y=x+D,r.x=k-L,r.y=x-L)),A.ca(N,k)&&A.ca(x,P)&&(x>S?(F>k?(a.x=k-D,a.y=x-D,r.x=k+L):(a.x=k+D,a.y=x-D,r.x=k-L),r.y=x+L):(F>k?(a.x=k-D,a.y=x+D,r.x=k+L):(a.x=k+D,a.y=x+D,r.x=k-L),r.y=x-L)),(A.ca(N,k)&&A.ca(k,F)||A.ca(S,x)&&A.ca(x,P))&&(N=.5*(N+F),S=.5*(S+P),a.x=N,a.y=S,r.x=N,r.y=S),(y===1||y===2&&A.ca(h.x,this.i(0).x)&&A.ca(h.y,this.i(0).y))&&(n.x=.5*(h.x+c.x),n.y=.5*(h.y+c.y)),Qr(g,n.x-i,n.y-f,a.x-i,a.y-f,c.x-i,c.y-f),e.set(a),n.set(r),h=c}}c=h.x,h=h.y,m=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(m=vl(this,m.copy(),!1,dr)),c=.5*(c+m.x),h=.5*(h+m.y),Qr(g,r.x-i,r.y-f,c-i,h-f,m.x-i,m.y-f),C.free(e),C.free(n),C.free(a),C.free(r)}else for(n=3;n<e;n+=3)a=this.i(n-2),n+3>=e&&(n=e-1),r=this.i(n-1),h=this.i(n),n===e-1&&this.computeShortLength(!1)!==0&&(h=vl(this,h.copy(),!1,dr)),Qr(g,a.x-i,a.y-f,r.x-i,r.y-f,h.x-i,h.y-f);else{for(a=C.alloc(),a.assign(this.i(0)),r=C.alloc(),r.assign(a),h=this.computeCorner(),y=1,c=0;y<e;){if(y=Hy(this,a,y,1<y),m=this.i(y),y>=e-1){if(!a.C(m))this.computeShortLength(!1)!==0&&(m=vl(this,m.copy(),!1,dr)),Sl(this,g,-i,-f,a,m,n);else if(c===0)for(y=1;y<e;)r.assign(a),m=this.i(y++),Sl(this,g,-i,-f,a,m,n),a.assign(m);break}if(c=Hy(this,m,y+1,y<e-3),y=-i,N=-f,S=m,k=this.i(c),L=n,A.B(a.y,S.y)&&A.B(S.x,k.x))if(P=Math.min(h,Math.abs(S.x-r.x)/2),P=D=Math.min(P,Math.abs(k.y-S.y)/2),A.B(P,0))Sl(this,g,y,N,a,S,L),a.assign(S);else{var j=S.x,E=S.y;x=j,F=E,S.x>a.x?j=S.x-P:j=S.x+P,k.y>S.y?F=S.y+D:F=S.y-D,k=C.allocAt(j,E),Sl(this,g,y,N,a,k,L),C.free(k),sc(g,S.x+y,S.y+N,x+y,F+N),a.h(x,F)}else A.B(a.x,S.x)&&A.B(S.y,k.y)?(P=Math.min(h,Math.abs(S.y-r.y)/2),P=D=Math.min(P,Math.abs(k.x-S.x)/2),A.B(D,0)?(Sl(this,g,y,N,a,S,L),a.assign(S)):(j=S.x,E=S.y,x=j,F=E,S.y>a.y?E=S.y-P:E=S.y+P,k.x>S.x?x=S.x+D:x=S.x-D,k=C.allocAt(j,E),Sl(this,g,y,N,a,k,L),C.free(k),sc(g,S.x+y,S.y+N,x+y,F+N),a.h(x,F))):(Sl(this,g,y,N,a,S,L),a.assign(S));r.assign(m),y=c}C.free(a)}ac=g}else g=this.i(1).copy(),g.x-=i,g.y-=f,this.computeShortLength(!0)!==0&&(r=vl(this,r,!0,a)),this.computeShortLength(!1)!==0&&(g=vl(this,g,!1,a)),t.type=W.j,t.startX=r.x,t.startY=r.y,t.endX=g.x,t.endY=g.y;return this.Zl=!0,t};function mc(t,e,n,i){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),A.ca(t,0)?e:A.ca(e,0)?t:Math.sqrt(t*t+e*e)))}function vl(t,e,n,i){var r=t.pointsCount;if(2>r)return e;if(n){var a=t.i(1);if(n=a.x-i.x,a=a.y-i.y,i=mc(e.x,e.y,n,a),i===0)return e;r=r===2?.5*i:i,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(a-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=r}else{if(a=t.i(r-2),n=a.x-i.x,a=a.y-i.y,i=mc(e.x,e.y,n,a),i===0)return e;r=r===2?.5*i:i,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-a)/i,e.x-=t*(e.x-n)/i,e.y-=r}return e}function Hy(t,e,n,i){for(var r=t.pointsCount,a=e;A.ca(e.x,a.x)&&A.ca(e.y,a.y);){if(n>=r)return r-1;a=t.i(n++)}if(!A.ca(e.x,a.x)&&!A.ca(e.y,a.y))return n-1;for(var h=a;A.ca(e.x,a.x)&&A.ca(a.x,h.x)&&(!i||(e.y>=a.y?a.y>=h.y:a.y<=h.y))||A.ca(e.y,a.y)&&A.ca(a.y,h.y)&&(!i||(e.x>=a.x?a.x>=h.x:a.x<=h.x));){if(n>=r)return r-1;h=t.i(n++)}return n-2}H.prototype.computeJumpLength=function(){return 10};function Sl(t,e,n,i,r,a,h){if(!h&&xa(t)){h=t.computeJumpLength();var g=h/2,f=[],c=0;if(t.isVisible()&&(c=wN(t,r,a,f)),0<c){if(A.B(r.y,a.y))if(r.x<a.x)for(var m=0;m<c;){var y=Math.max(r.x,Math.min(f[m++]-g,a.x-h));e.lineTo(y+n,a.y+i);for(var S=y+n,x=Math.min(y+h,a.x);m<c&&(y=f[m],y<x+h);)m++,x=Math.min(y+g,a.x);y=a.y-h+i,x+=n;var P=a.y+i;t.curve===ns?Uh(e,x,P,!1):Qr(e,S,y,x,y,x,P)}else for(--c;0<=c;){for(m=Math.min(r.x,Math.max(f[c--]+g,a.x+h)),e.lineTo(m+n,a.y+i),S=m+n,y=Math.max(m-h,a.x);0<=c&&(m=f[c],m>y-h);)c--,y=Math.max(m-g,a.x);m=a.y-h+i,y+=n,x=a.y+i,t.curve===ns?Uh(e,y,x,!1):Qr(e,S,m,y,m,y,x)}else if(A.B(r.x,a.x))if(r.y<a.y)for(m=0;m<c;){for(y=Math.max(r.y,Math.min(f[m++]-g,a.y-h)),e.lineTo(a.x+n,y+i),S=y+i,y=Math.min(y+h,a.y);m<c&&(x=f[m],x<y+h);)m++,y=Math.min(x+g,a.y);x=a.x-h+n,P=a.x+n,y+=i,t.curve===ns?Uh(e,P,y,!1):Qr(e,x,S,x,y,P,y)}else for(--c;0<=c;){for(m=Math.min(r.y,Math.max(f[c--]+g,a.y+h)),e.lineTo(a.x+n,m+i),S=m+i,m=Math.max(m-h,a.y);0<=c&&(y=f[c],y>m-h);)c--,m=Math.max(y-g,a.y);y=a.x-h+n,x=a.x+n,m+=i,t.curve===ns?Uh(e,x,m,!1):Qr(e,y,S,y,m,x,m)}}}e.lineTo(a.x+n,a.y+i)}function wN(t,e,n,i){var r=t.diagram;if(r===null||e.C(n))return 0;for(r=r.layers;r.next();){var a=r.value;if(a!==null&&a.visible){a=a.Ma.s;for(var h=a.length,g=0;g<h;g++){var f=a[g];if(f instanceof H){if(f===t)return 0<i.length&&i.sort(function(m,y){return m-y}),i.length;if(f.isVisible()&&xa(f)){var c=f.routeBounds;c.v()&&t.routeBounds.Sc(c)&&!t.usesSamePort(f)&&(c=f.path,c!==null&&c.zf()&&LN(e,n,i,f))}}}}}return 0<i.length&&i.sort(function(m,y){return m-y}),i.length}function LN(t,e,n,i){for(var r=A.B(t.y,e.y),a=i.pointsCount,h=i.i(0),g=C.alloc(),f=1;f<a;f++){var c=i.i(f);if(f<a-1){var m=i.i(f+1);if(h.y===c.y&&c.y===m.y){if(c.x>h.x&&m.x>=c.x||c.x<h.x&&m.x<=c.x)continue}else if(h.x===c.x&&c.x===m.x&&(c.y>h.y&&m.y>=c.y||c.y<h.y&&m.y<=c.y))continue}t:{m=t.x;var y=t.y,S=e.x,x=e.y,P=h.x;h=h.y;var L=c.x,N=c.y;if(A.B(m,S)){if(!A.B(y,x)&&A.B(h,N)&&Math.min(y,x)<h&&Math.max(y,x)>h&&Math.min(P,L)<m&&Math.max(P,L)>m&&!A.B(P,L)){g.x=m,g.y=h,m=!0;break t}}else if(A.B(y,x)&&A.B(P,L)&&Math.min(m,S)<P&&Math.max(m,S)>P&&Math.min(h,N)<y&&Math.max(h,N)>y&&!A.B(h,N)){g.x=P,g.y=y,m=!0;break t}g.x=0,g.y=0,m=!1}m&&(r?n.push(g.x):n.push(g.y)),h=c}C.free(g)}function xa(t){return t=t.curve,t===Kh||t===ns}function Wy(t,e){(e||xa(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.th.contains(t)||t.bl.width===0&&t.bl.height===0||e.th.add(t,t.bl.copy()))}H.prototype.Ao=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var n=e.diagram;if(n!==null&&!n.animationManager.isTicking){var i=!1;for(n=n.layers;n.next();){var r=n.value;if(r.visible){if(r===e){i=!0;var a=!1;r=r.Ma.s;for(var h=r.length,g=0;g<h;g++){var f=r[g];f instanceof H&&(f===this?a=!0:a&&t2(this,f,t))}}else if(i)for(a=r.Ma.s,r=a.length,h=0;h<r;h++)g=a[h],g instanceof H&&t2(this,g,t)}}}}};function t2(t,e,n){if(e!==null&&e.Zl&&e.xd&&xa(e)){var i=e.routeBounds;i.v()&&(t.routeBounds.Sc(i)||n.Sc(i))&&(t.usesSamePort(e)||e.mc(!1))}}H.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),r=t.i(0);if(i.$a(r)||(e=this.i(e-1),t=t.i(n-1),e.$a(t)||i.$a(t)||e.$a(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},H.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(n!==null&&(e=n.isTreePathToChildren),n=this.fromNode,n!==null){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;i!==null;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(n=n.findVisibleNode(),n===null||n===t)return!1}if(n=this.toNode,n!==null){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=n.findVisibleNode(),e===null||e===t)return!1}return!0},H.prototype.Ub=function(t){if(lt.prototype.Ub.call(this,t),this.If!==null&&this.If.Al(),this.rd!==null)for(var e=this.rd.iterator;e.next();)e.value.Ub(t)},H.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?Dg:this.dk};function Tg(t){var e=t.Ue;if(e!==null){var n=t.hf;if(n!==null&&isNaN(t.curviness)){for(var i=t.Ve,r=t.jf,a=t=null,h=e.jb.s,g=h.length,f=0;f<g;f++){var c=h[f];(c.Ue===e&&c.Ve===i&&c.hf===n&&c.jf===r||c.Ue===n&&c.Ve===r&&c.hf===e&&c.jf===i)&&(a===null?a=c:(t===null&&(t=[],t.push(a)),t.push(c)))}if(t!==null){for(a=Uw(e,n,i,r),a===null&&(a=new xc(e,i,n,r),Yw(e,a),Yw(n,a)),a.links=t,e=0;e<t.length;e++)t[e].If=a;a.Al()}}}}function Fg(t){var e=t.If;e!==null&&isNaN(t.curviness)&&(t.If=null,t=e.links.indexOf(t),0<=t&&(No(e.links,t),e.Al()))}H.prototype.eh=function(){return!0},I.Object.defineProperties(H.prototype,{fromNode:{get:function(){return this.Ue},set:function(t){var e=this.Ue;if(e!==t){var n=this.fromPort;e!==null&&(this.hf!==e&&gc(e,this,n),Fg(this),this.D(2)),this.Ue=t,t!==null&&this.Ub(t.isVisible()),this.Mf=null,this.ab();var i=this.diagram;i!==null&&i.$&&i.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,a=this.fromPortChanged;if(a!==null){var h=!0;i!==null&&(h=i.$,i.$=!0),a(this,n,r),i!==null&&(i.$=h)}t!==null&&(this.hf!==t&&uc(t,this,r),Tg(this),this.D(1)),this.g("fromNode",e,t),Xh(this)}}},fromPortId:{get:function(){return this.Ve},set:function(t){var e=this.Ve;if(e!==t){var n=this.fromPort;n!==null&&$n(n),Fg(this),this.Ve=t;var i=this.fromPort;i!==null&&$n(i);var r=this.diagram;if(r!==null){var a=this.data,h=r.model;a!==null&&h.ki()&&h.dv(a,t)}n!==i&&(this.Mf=null,this.ab(),a=this.fromPortChanged,a!==null&&(h=!0,r!==null&&(h=r.$,r.$=!0),a(this,n,i),r!==null&&(r.$=h))),Tg(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Ue;return t===null?null:t.Kr(this.Ve)}},fromPortChanged:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.hf},set:function(t){var e=this.hf;if(e!==t){var n=this.toPort;e!==null&&(this.Ue!==e&&gc(e,this,n),Fg(this),this.D(2)),this.hf=t,t!==null&&this.Ub(t.isVisible()),this.Mf=null,this.ab();var i=this.diagram;i!==null&&i.$&&i.partManager.setToNodeForLink(this,t,e);var r=this.toPort,a=this.toPortChanged;if(a!==null){var h=!0;i!==null&&(h=i.$,i.$=!0),a(this,n,r),i!==null&&(i.$=h)}t!==null&&(this.Ue!==t&&uc(t,this,r),Tg(this),this.D(1)),this.g("toNode",e,t),Xh(this)}}},toPortId:{get:function(){return this.jf},set:function(t){var e=this.jf;if(e!==t){var n=this.toPort;n!==null&&$n(n),Fg(this),this.jf=t;var i=this.toPort;i!==null&&$n(i);var r=this.diagram;if(r!==null){var a=this.data,h=r.model;a!==null&&h.ki()&&h.hv(a,t)}n!==i&&(this.Mf=null,this.ab(),a=this.toPortChanged,a!==null&&(h=!0,r!==null&&(h=r.$,r.$=!0),a(this,n,i),r!==null&&(r.$=h))),Tg(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.hf;return t===null?null:t.Kr(this.jf)}},toPortChanged:{get:function(){return this.Xn},set:function(t){var e=this.Xn;e!==t&&(this.Xn=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.aa!==null?this.aa.Qi:Je},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),(e.Uc()||t.Uc())&&this.fromNode!==null&&$n(this.fromPort),this.ab())}},fromEndSegmentLength:{get:function(){return this.aa!==null?this.aa.Oi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&gt(t,">= 0",H,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),this.ab())}},fromShortLength:{get:function(){return this.aa!==null?this.aa.Pi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.mc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.aa!==null?this.aa.tj:Je},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),(e.Uc()||t.Uc())&&this.toNode!==null&&$n(this.toPort),this.ab())}},toEndSegmentLength:{get:function(){return this.aa!==null?this.aa.rj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&gt(t,">= 0",H,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),this.ab())}},toShortLength:{get:function(){return this.aa!==null?this.aa.sj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.mc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.rd===null?!1:0<this.rd.count}},labelNodes:{get:function(){return this.rd===null?Ui:this.rd.iterator}},relinkableFrom:{get:function(){return(this.Oa&1)!==0},set:function(t){var e=(this.Oa&1)!==0;e!==t&&(this.Oa^=1,this.g("relinkableFrom",e,t),this.Rb())}},relinkableTo:{get:function(){return(this.Oa&2)!==0},set:function(t){var e=(this.Oa&2)!==0;e!==t&&(this.Oa^=2,this.g("relinkableTo",e,t),this.Rb())}},resegmentable:{get:function(){return(this.Oa&4)!==0},set:function(t){var e=(this.Oa&4)!==0;e!==t&&(this.Oa^=4,this.g("resegmentable",e,t),this.Rb())}},isTreeLink:{get:function(){return(this.Oa&8)!==0},set:function(t){var e=(this.Oa&8)!==0;e!==t&&(this.Oa^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&Cg(this.fromNode),this.toNode!==null&&Cg(this.toNode))}},path:{get:function(){var t=this.vb();return t instanceof yt?t:null}},routeBounds:{get:function(){this.mg();var t=this.bl,e=1/0,n=1/0,i=this.pointsCount;if(i===0)t.h(NaN,NaN,0,0);else{if(i===1)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(i===2){i=this.i(0);var r=this.i(1);e=Math.min(i.x,r.x),n=Math.min(i.y,r.y),t.h(i.x,i.y,0,0),t.Me(r)}else if(this.computeCurve()===si&&3<=i&&!this.isOrthogonal)if(r=this.i(0),e=r.x,n=r.y,t.h(e,n,0,0),i===3){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var a=this.i(2);e=Math.min(a.x,e),n=Math.min(a.y,n),A.ql(r.x,r.y,i.x,i.y,i.x,i.y,a.x,a.y,.5,t)}else for(a=3;a<i;a+=3){var h=this.i(a-2);a+3>=i&&(a=i-1);var g=this.i(a-1),f=this.i(a);A.ql(r.x,r.y,h.x,h.y,g.x,g.y,f.x,f.y,.5,t),e=Math.min(f.x,e),n=Math.min(f.y,n),r=f}else for(r=this.i(0),a=this.i(1),e=Math.min(r.x,a.x),n=Math.min(r.y,a.y),t.h(r.x,r.y,0,0),t.Me(a),r=2;r<i;r++)a=this.i(r),e=Math.min(a.x,e),n=Math.min(a.y,n),t.Me(a);this.Yt.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.mg(),this.computeMidPoint(new C)}},midAngle:{get:function(){return this.mg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.Gp===null){this.xd||fc(this);for(var t=this.Gp=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),r=this.i(n+1);A.ca(i.x,r.x)?(i=r.y-i.y,0>i&&(i=-i)):A.ca(i.y,r.y)?(i=r.x-i.x,0>i&&(i=-i)):i=Math.sqrt(i.rf(r)),t.push(i)}}return this.Gp}},flattenedTotalLength:{get:function(){var t=this.Ys;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Ys=t}return t}},points:{get:function(){return this.Jb},set:function(t){var e=this.Jb;if(e!==t){var n=null;if(Array.isArray(t)){var i=t.length%2===0;if(i){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){i=!1;break}}if(i)for(n=new tt,i=0;i<t.length/2;i++)r=new C(t[2*i],t[2*i+1]).freeze(),n.add(r);else{for(i=!0,r=0;r<t.length;r++){var a=t[r];if(!mt(a)||typeof a.x!="number"||isNaN(a.x)||typeof a.y!="number"||isNaN(a.y)){i=!1;break}}if(i)for(n=new tt,i=0;i<t.length;i++)r=t[i],n.add(new C(r.x,r.y).freeze())}}else if(t instanceof tt)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else B("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Jb=n,this.mc(!0),fc(this),t=this.diagram,t!==null&&(t.ji||t.undoManager.isUndoingRedoing||t.Zr.add(this),t.animationManager.zb&&(t=t.animationManager,this.ef=n,t.dl.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Jb.count}},xd:{get:function(){return(this.Oa&16)!==0},set:function(t){(this.Oa&16)!==0!==t&&(this.Oa^=16)}},suspendsRouting:{get:function(){return(this.Oa&32)!==0},set:function(t){(this.Oa&32)!==0!==t&&(this.Oa^=32)}},computingPoints:{get:function(){return(this.Oa&64)!==0},set:function(t){(this.Oa&64)!==0!==t&&(this.Oa^=64)}},defaultFromPoint:{get:function(){return this.m},set:function(t){this.m=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return(this.kj.value&2)===2}},isAvoiding:{get:function(){return(this.kj.value&4)===4}},Zl:{get:function(){return(this.Oa&128)!==0},set:function(t){(this.Oa&128)!==0!==t&&(this.Oa^=128)}},geometry:{get:function(){return this.Zl||(this.mg(),this.sa=this.makeGeometry()),this.sa}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!_h(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!_h(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.dk},set:function(t){var e=this.dk;e!==t&&(this.dk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.wm},set:function(t){var e=this.wm;e!==t&&(this.wm=t,this.mc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.ym},set:function(t){var e=this.ym;e!==t&&(this.ym=t,this.ab(),this.mc(!0),Wy(this,e===ns||e===Kh||t===ns||t===Kh),this.g("curve",e,t))}},curviness:{get:function(){return this.zm},set:function(t){var e=this.zm;e!==t&&(this.zm=t,this.ab(),this.mc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&(this.kj=t,this.Mf=null,this.ab(),Wy(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.mc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.ki())return t.model.uc(this.data)}}}),H.prototype.invalidateOtherJumpOvers=H.prototype.Ao,H.prototype.findClosestSegment=H.prototype.Ny,H.prototype.updateRoute=H.prototype.mg,H.prototype.invalidateRoute=H.prototype.ab,H.prototype.rollbackRoute=H.prototype.$u,H.prototype.commitRoute=H.prototype.pf,H.prototype.startRoute=H.prototype.jh,H.prototype.clearPoints=H.prototype.Aj,H.prototype.removePoint=H.prototype.Yu,H.prototype.addPointAt=H.prototype.mf,H.prototype.addPoint=H.prototype.fe,H.prototype.insertPointAt=H.prototype.l,H.prototype.insertPoint=H.prototype.sz,H.prototype.setPointAt=H.prototype.M,H.prototype.setPoint=H.prototype.Wc,H.prototype.getPoint=H.prototype.i,H.prototype.getOtherPort=H.prototype.jz,H.prototype.getOtherNode=H.prototype.wo;var Pl=null,xl=null,$y=new $(H,"Normal",1),MN=new $(H,"Orthogonal",2),kN=new $(H,"AvoidsNodes",6),e2=new $(H,"AvoidsNodesStraight",7),Ln=new $(H,"None",0),si=new $(H,"Bezier",9),ns=new $(H,"JumpGap",10),Kh=new $(H,"JumpOver",11),Dg=new $(H,"End",17),yc=new $(H,"Scale",18),vc=new $(H,"Stretch",19),jg=new $(H,"OrientAlong",21),Og=new $(H,"OrientPlus90",22),Eg=new $(H,"OrientMinus90",23),Jy=new $(H,"OrientOpposite",24),Sc=new $(H,"OrientUpright",25),Ig=new $(H,"OrientPlus90Upright",26),Ag=new $(H,"OrientMinus90Upright",27),Pc=new $(H,"OrientUpright45",28),n2=16,i2=14,zg=8;H.className="Link",H.Normal=$y,H.Orthogonal=MN,H.AvoidsNodes=kN,H.AvoidsNodesStraight=e2,H.None=Ln,H.Bezier=si,H.JumpGap=ns,H.JumpOver=Kh,H.End=Dg,H.Scale=yc,H.Stretch=vc,H.OrientAlong=jg,H.OrientPlus90=Og,H.OrientMinus90=Eg,H.OrientOpposite=Jy,H.OrientUpright=Sc,H.OrientPlus90Upright=Ig,H.OrientMinus90Upright=Ag,H.OrientUpright45=Pc,H.EndSegmentStep=8,H.CurvinessStart=n2,H.SpacingMin=i2,H.OrthoShortCut=zg;function xc(t,e,n,i){Oe(this),this.ue=this.Sp=!1,this.cs=t,this.vx=e,this.Pu=n,this.wx=i,this.links=[]}xc.prototype.Al=function(){if(!this.Sp){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.Uv.add(this),this.ue=t.undoManager.isUndoingRedoing))}this.Sp=!0},xc.prototype.rv=function(){if(this.Sp){this.Sp=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=n===null||n.ji&&!this.ue,this.ue=!1,e.arrangeBundledLinks(t,n),t.length===1&&(e.If=null,t.length=0)}t.length===0&&(t=this.cs,this!==null&&t.Qe!==null&&t.Qe.remove(this),t=this.Pu,this!==null&&t.Qe!==null&&t.Qe.remove(this))}},xc.className="LinkBundle";function Bg(t){Oe(this),this.Hx=this.group=null,this.Sr=!0,this.abort=!1,this.Ed=this.Dd=1,this.mn=this.ln=-1,this.nc=t.width,this.oc=t.height,this.Xb=null,this.Xh=this.Wh=0,this.ps=11,this.nx=this.mx=22}Bg.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.Dd=Math.floor((t.x-this.nc)/this.nc)*this.nc,this.Ed=Math.floor((e-this.oc)/this.oc)*this.oc,this.ln=Math.ceil((n+2*this.nc)/this.nc)*this.nc,this.mn=Math.ceil((i+2*this.oc)/this.oc)*this.oc,t=1+(Math.ceil((this.ln-this.Dd)/this.nc)|0),e=1+(Math.ceil((this.mn-this.Ed)/this.oc)|0),this.Xb===null||this.Wh<t-1||this.Xh<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Xb=n,this.Wh=t-1,this.Xh=e-1}if(t=Zy,this.Xb!==null)for(e=0;e<=this.Wh;e++)if(n=this.Xb[e],n.fill)n.fill(t);else for(i=0;i<=this.Xh;i++)n[i]=t}};function Hh(t,e,n){return t.Dd<=e&&e<=t.ln&&t.Ed<=n&&n<=t.mn}function Zo(t,e,n){return Hh(t,e,n)?(e-=t.Dd,e/=t.nc,n-=t.Ed,n/=t.oc,t.Xb[e|0][n|0]):Zy}function o2(t){if(t.Xb!==null)for(var e=0;e<=t.Wh;e++)for(var n=t.Xb[e],i=0;i<=t.Xh;i++)n[i]>=wa&&(n[i]=Zy)}Bg.prototype.Pj=function(t,e,n,i){if(t>this.ln||t+n<this.Dd||e>this.mn||e+i<this.Ed)return!0;t=(t-this.Dd)/this.nc|0,e=(e-this.Ed)/this.oc|0,n=Math.max(0,n)/this.nc+1|0;var r=Math.max(0,i)/this.oc+1|0;if(0>t&&(n+=t,t=0),0>e&&(r+=e,e=0),0>n||0>r)return!0;for(i=Math.min(t+n-1,this.Wh)|0,n=Math.min(e+r-1,this.Xh)|0;t<=i;t++){r=this.Xb[t];for(var a=e;a<=n;a++)if(r[a]===is)return!1}return!0};function Qo(t,e,n,i,r,a,h,g,f){if(!(e<a||e>h||n<g||n>f)){var c=e|0,m=n|0,y=t.Xb[c][m];if(y>=wa&&y<Wh)for(r?m+=i:c+=i,y+=1;a<=c&&c<=h&&g<=m&&m<=f&&!(y>=t.Xb[c][m]);)t.Xb[c][m]=y,y+=1,r?m+=i:c+=i;if(c=r?m:c,r)if(0<i)for(n+=i;n<c;n+=i)Qo(t,e,n,1,!r,a,h,g,f),Qo(t,e,n,-1,!r,a,h,g,f);else for(n+=i;n>c;n+=i)Qo(t,e,n,1,!r,a,h,g,f),Qo(t,e,n,-1,!r,a,h,g,f);else if(0<i)for(e+=i;e<c;e+=i)Qo(t,e,n,1,!r,a,h,g,f),Qo(t,e,n,-1,!r,a,h,g,f);else for(e+=i;e>c;e+=i)Qo(t,e,n,1,!r,a,h,g,f),Qo(t,e,n,-1,!r,a,h,g,f)}}function wc(t,e,n,i,r,a,h,g,f){e|=0,n|=0;var c=is,m=wa;for(t.Xb[e][n]=m;c===is&&e>a&&e<h&&n>g&&n<f;)m+=1,t.Xb[e][n]=m,r?n+=i:e+=i,c=t.Xb[e][n]}function Lc(t,e,n,i,r,a,h,g,f){e|=0,n|=0;var c=is,m=Wh;for(t.Xb[e][n]=m;c===is&&e>a&&e<h&&n>g&&n<f;)t.Xb[e][n]=m,r?n+=i:e+=i,c=t.Xb[e][n]}function r2(t,e,n,i,r,a,h){if(t.Xb!==null){t.abort=!1;var g=e.x,f=e.y;if(Hh(t,g,f)){g-=t.Dd,g/=t.nc,f-=t.Ed,f/=t.oc;var c=i.x,m=i.y;if(Hh(t,c,m))if(c-=t.Dd,c/=t.nc,m-=t.Ed,m/=t.oc,1>=Math.abs(g-c)&&1>=Math.abs(f-m))t.abort=!0;else{var y=a.x;i=a.y,e=a.x+a.width;var S=a.y+a.height;y-=t.Dd,y/=t.nc,i-=t.Ed,i/=t.oc,e-=t.Dd,e/=t.nc,S-=t.Ed,S/=t.oc,a=Math.max(0,Math.min(t.Wh,y|0)),e=Math.min(t.Wh,Math.max(0,e|0)),y=Math.max(0,Math.min(t.Xh,i|0)),S=Math.min(t.Xh,Math.max(0,S|0)),i=t.Xb,g|=0,f|=0,c|=0,m|=0;var x=n===0||n===90?1:-1;if(n=n===90||n===270,i[g][f]===is?(wc(t,g,f,x,n,a,e,y,S),wc(t,g,f,1,!n,a,e,y,S),wc(t,g,f,-1,!n,a,e,y,S)):wc(t,g,f,x,n,g,f,g,f),i[c][m]===is?(Lc(t,c,m,r===0||r===90?1:-1,r===90||r===270,a,e,y,S),Lc(t,c,m,1,!(r===90||r===270),a,e,y,S),Lc(t,c,m,-1,!(r===90||r===270),a,e,y,S)):Lc(t,c,m,x,n,c,m,c,m),n=Kt(),h&&s2(t,c,m,r,g,f,n))for((n[0]!==c||n[1]!==m)&&(n.unshift(m),n.unshift(c)),(n[n.length-2]!==g||n[n.length-1]!==f)&&(n.push(g),n.push(f)),t=wa,r=n[n.length-2],h=n[n.length-1],i[r][h]=t++,a=n.length-4;0<=a;a-=2)for(r=n[a+2],h=n[a+3],e=n[a],c=n[a+1];e>r?r++:e<r?r--:c>h?h++:c<h&&h--,i[r][h]=t++,r!==e||h!==c;);else Qo(t,g,f,1,!1,a,e,y,S),Qo(t,g,f,-1,!1,a,e,y,S),Qo(t,g,f,1,!0,a,e,y,S),Qo(t,g,f,-1,!0,a,e,y,S);Xt(n)}}}}function s2(t,e,n,i,r,a,h){for(var g=t.Xb,f=e,c=n;;){if(f===r&&c===a)return!0;var m=f,y=c;if(i===0)if(m<r)m++;else break;else if(i===90)if(y<a)y++;else break;else if(i===180)if(m>r)m--;else break;else if(y>a)y--;else break;var S=g[m][y];if(S===0||S===Qy)break;f=m,c=y}for(;;){if(m=i,y=f,S=c,i===0?S<a?(m=90,S++):S>a&&(m=270,S--):i===90?y<r?(m=0,y++):y>r&&(m=180,y--):i===180?S<a?(m=90,S++):S>a&&(m=270,S--):y<r?(m=0,y++):y>r&&(m=180,y--),y=g[y][S],m!==i&&y!==0&&y!==Qy){if(h.push(f),h.push(c),s2(t,f,c,m,r,a,h))return!0;h.pop(),h.pop()}if(g[f][c]=Qy,i===0){if(f===e)return!1;f--}else if(i===90){if(c===n)return!1;c--}else if(i===180){if(f===e)return!1;f++}else{if(c===n)return!1;c++}}}I.Object.defineProperties(Bg.prototype,{bounds:{get:function(){return new G(this.Dd,this.Ed,this.ln-this.Dd,this.mn-this.Ed)}},lo:{get:function(){return this.nc},set:function(t){0<t&&t!==this.nc&&(this.nc=t,this.initialize(this.bounds))}},ko:{get:function(){return this.oc},set:function(t){0<t&&t!==this.oc&&(this.oc=t,this.initialize(this.bounds))}}});var is=0,wa=1,Wh=999999,Zy=Wh+1,Qy=Wh+2;Bg.className="PositionArray";function wl(){Oe(this),this.port=this.node=null,this.he=[],this.Do=!1}wl.prototype.toString=function(){for(var t=this.he,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];i!==null&&(e+=`
  `+i.toString())}return e};function NN(t,e,n,i){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&e!==15&&(n-=15,0>n&&(n+=360)),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}wl.prototype.Al=function(){this.he.length=0};function a2(t,e){var n=t.he;if(n.length===0){t:if(!t.Do){n=t.Do,t.Do=!0;var i=null,r=t.node,a=r instanceof pt?r:null;if(a===null||a.isSubGraphExpanded)var h=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.Tw();else{if(!a.actualBounds.v()){t.Do=n;break t}i=a,h=i.vu()}a=t.he.length=0;var g=t.port.ia(nn,C.alloc()),f=t.port.ia(Xo,C.alloc());for(r=G.allocAt(g.x,g.y,0,0),r.Me(f),C.free(g),C.free(f),g=C.allocAt(r.x+r.width/2,r.y+r.height/2),f=t.port.fi(),h=h.iterator;h.next();){var c=h.value;if(c.isVisible()&&c.fromPort!==c.toPort){var m=c.fromPort===t.port||c.fromNode!==null&&c.fromNode.Md(i),y=c.computeSpot(m,t.port);if(y.Uc()&&(m=m?c.toPort:c.fromPort,m!==null)){var S=m.part;if(S!==null){var x=S.findVisibleNode();x!==null&&x!==S&&(S=x,m=S.port),m=c.computeOtherPoint(S,m),S=g.Ya(m),S-=f,0>S?S+=360:360<=S&&(S-=360),y=NN(r,y,S,c.isOrthogonal),y===0?(y=4,180<S&&(S-=360)):y===90?(y=8,270<S&&(S-=360)):y===180?y=2:(y=1,90>S&&(S+=360)),x=t.he[a],x===void 0?(x=new qy(c,S,y),t.he[a]=x):(x.link=c,x.angle=S,x.Gc=y),x.Ru.set(m),a++}}}}for(C.free(g),t.he.sort(wl.prototype.j),f=t.he.length,i=-1,a=g=0;a<f;a++)h=t.he[a],h!==void 0&&(h.Gc!==i&&(i=h.Gc,g=0),h.xo=g,g++);for(i=-1,g=0,a=f-1;0<=a;a--)f=t.he[a],f!==void 0&&(f.Gc!==i&&(i=f.Gc,g=f.xo+1),f.tl=g);if(a=t.he,y=t.port,i=t.node.portSpreading,g=C.alloc(),f=C.alloc(),h=C.alloc(),c=C.alloc(),y.ia(nn,g),y.ia(rh,f),y.ia(Xo,h),y.ia(sh,c),x=S=m=y=0,i===Vy)for(var P=0;P<a.length;P++){var L=a[P];if(L!==null){var N=L.link.computeThickness();switch(L.Gc){case 8:S+=N;break;case 2:x+=N;break;case 1:y+=N;break;default:case 4:m+=N}}}var k=P=0,F=1,D=L=0;for(N=0;N<a.length;N++){var j=a[N];if(j!==null){if(P!==j.Gc){switch(P=j.Gc,P){case 8:var E=h;k=c;break;case 2:E=c,k=g;break;case 1:E=g,k=f;break;default:case 4:E=f,k=h}switch(L=k.x-E.x,D=k.y-E.y,P){case 8:S>Math.abs(L)?(F=Math.abs(L)/S,S=Math.abs(L)):F=1;break;case 2:x>Math.abs(D)?(F=Math.abs(D)/x,x=Math.abs(D)):F=1;break;case 1:y>Math.abs(L)?(F=Math.abs(L)/y,y=Math.abs(L)):F=1;break;default:case 4:m>Math.abs(D)?(F=Math.abs(D)/m,m=Math.abs(D)):F=1}k=0}var R=j.Co;if(i===Vy){switch(j=j.link.computeThickness(),j*=F,R.set(E),P){case 8:R.x=E.x+L/2+S/2-k-j/2;break;case 2:R.y=E.y+D/2+x/2-k-j/2;break;case 1:R.x=E.x+L/2-y/2+k+j/2;break;default:case 4:R.y=E.y+D/2-m/2+k+j/2}k+=j}else{var J=.5;i===dc&&(J=(j.xo+1)/(j.tl+1)),R.x=E.x+L*J,R.y=E.y+D*J}}}for(C.free(g),C.free(f),C.free(h),C.free(c),E=t.he,a=0;a<E.length;a++)i=E[a],i!==null&&(i.tu=t.computeEndSegmentLength(i));t.Do=n,G.free(r)}n=t.he}for(t=0;t<n.length;t++)if(r=n[t],r!==null&&r.link===e)return r;return null}wl.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Gc<e.Gc?-1:t.Gc>e.Gc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},wl.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,$e,e.fromPort===this.port),i=t.xo;if(0>i)return n;var r=t.tl;if(1>=r||!e.isOrthogonal)return n;e=t.Ru;var a=t.Co;return(t.Gc===2||t.Gc===8)&&(i=r-1-i),((t=t.Gc===2||t.Gc===4)?e.y<a.y:e.x<a.x)?n+8*i:(t?e.y===a.y:e.x===a.x)?n:n+8*(r-1-i)},wl.className="Knot";function qy(t,e,n){this.link=t,this.angle=e,this.Gc=n,this.Ru=new C,this.tl=this.xo=0,this.Co=new C,this.tu=0}qy.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Gc.toString()+":"+this.xo.toString()+"/"+this.tl.toString()+" "+this.Co.toString()+" "+this.tu.toString()+" "+this.Ru.toString()},qy.className="LinkInfo";function Dt(t){Oe(this),this.m=this.H=null,this.wh=this.Zm=!0,this.en=!1,this.im=new C(0,0).freeze(),this.bn=!0,this.mm=this.an=null,this.dn=!1,this.j=null,this.u=0,this.nn=this.ao=null,this.zr=!1,this.dg=this.lj=null,this.ir=!1,t&&Object.assign(this,t)}Dt.prototype.cloneProtected=function(t){t.Zm=this.Zm,t.wh=this.wh,t.en=this.en,t.im.assign(this.im),t.bn=this.bn,t.an=this.an,t.mm=this.mm,t.dn=!0,t.nn=this.nn,t.ao=this.ao},Dt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Dt.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Dt.prototype.deserializeLayoutProperties=function(t){t!==null&&(this.arrangementOrigin=new C(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Dt.prototype.ob=function(){},Dt.prototype.toString=function(){var t=gr(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},Dt.prototype.D=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.wc(),this.isOngoing&&t.ji||this.isInitial&&!t.ji)&&(this.isValidLayout=!1,t.Mb())}}},Dt.prototype.createNetwork=function(){return new Yt(this)},Dt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof z?(e.eg(t.nodes,!0),e.eg(t.links,!0)):t instanceof pt?e.eg(t.memberParts):e.eg(t.iterator),e},Dt.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(n!==null&&(t=n.diagram,t!==null))break}try{t!==null&&t.Da("Layout"),this.commitLayout()}finally{t!==null&&t.eb("Layout")}}},Dt.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Dt.prototype.doLayout=function(t){var e=new Z;t instanceof z?(Os(this,e,t.nodes,!0,this.gh,!0,!1,!0),Os(this,e,t.parts,!0,this.gh,!0,!1,!0)):t instanceof pt?Os(this,e,t.memberParts,!1,this.gh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.Da("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.eb("Layout")),this.isValidLayout=!0},Dt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,r=this.arrangementOrigin.y,a=0,h=0;for(t=t.iterator;t.next();){var g=t.value;Gg(g);var f=g.measuredBounds,c=f.width;f=f.height,g.moveTo(i,r),g instanceof pt&&(g.gh=!1),i+=Math.max(c,50)+20,h=Math.max(h,Math.max(f,50)),a>=e-1?(a=0,i=n,r+=h+20,h=0):a++}},Dt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,r=0,a=0,h=this.network.vertexes.iterator;h.next();){var g=h.value.node;if(!(g===null||g instanceof H)&&(Gg(g),this.gh(g))){var f=g.measuredBounds,c=f.width;f=f.height,g.moveTo(n,i),g instanceof pt&&(g.gh=!1),n+=Math.max(c,50)+20,a=Math.max(a,Math.max(f,50)),r>=t-1?(r=0,n=e,i+=a+20,a=0):r++}}},Dt.prototype.gh=function(t){return!!(!t.location.v()||t instanceof pt&&t.gh)};function Os(t,e,n,i,r,a,h,g){for(n=n.iterator;n.next();){var f=n.value;i&&!f.isTopLevel||r!==null&&!r(f)||!f.canLayout()||(a&&f instanceof q?f.isLinkLabel||(f instanceof pt&&f.layout===null?Os(t,e,f.memberParts,!1,r,a,h,g):(Gg(f),e.add(f))):h&&f instanceof H?e.add(f):!g||!f.Tc()||f instanceof q||(Gg(f),e.add(f)))}}function Gg(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Za()}Dt.prototype.hi=function(t,e){var n=this.boundsComputation;return n!==null?(e||(e=new G),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Dt.prototype.Iw=function(t){var e=new Z;return t instanceof z?(Os(this,e,t.nodes,!0,null,!0,!0,!0),Os(this,e,t.links,!0,null,!0,!0,!0),Os(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof pt?Os(this,e,t.memberParts,!1,null,!0,!0,!0):Os(this,e,t.iterator,!1,null,!0,!0,!0),e},Dt.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),e=e.placeholder,e!==null&&(n=e.ia(nn),(isNaN(n.x)||isNaN(n.y))&&n.set(t),t=e.padding,n.x+=t.left,n.y+=t.top),n}return t},Dt.prototype.mayUseWorker=function(){return this.mayUseWorkerFunction?this.mayUseWorkerFunction(this):!1},Dt.prototype.workerLayout=function(){return!1};function Mc(t,e){if(t.workerStateChanged!==null){var n={key:t.group?t.group.key:null};e!==void 0&&(n.time=e),t.lj!==null&&(n.running=l2(t.lj)),t.dg!==null&&(n.waiting=l2(t.dg)),t.workerStateChanged(n,t)}}function l2(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}Dt.prototype.uy=function(){var t=Rg(this.constructor);t&&(t.Ne!==null&&t.Ne.terminate(),t.Ne=null,t.Cl.iteratorValues.each(function(e){e.zr=!1,e.lj=null,e.dg=null,e.ir=!1,Mc(e)}),t.Cl.clear())};function kc(t,e){var n=Rg(t);if(n){if(e)for(var i in e)n[i]=e[i]}else throw Error("Unknown Layout class: "+t)}function Rg(t){var e=null;if(typeof t=="function"){if(e=$h.get(t),!e){var n=gr(t);e=$h.get(n),e||(e=new CN,e.pu=t,e.name=n,e.j=t.name,e.hx=d2,$h.set(n,e),$h.set(t,e),$h.set(t.name,e))}}else typeof t=="string"&&(e=$h.get(t));return e}Dt.prototype.qv=function(){if(typeof Worker>"u"||!f2||typeof self>"u"||typeof self.DedicatedWorkerGlobalScope<"u")return!1;if(!this.mayUseWorker())return this.zr&&(this.ir=!0,this.dg=this.lj=null,Mc(this)),!1;var t=Rg(this.constructor);return t===null?!1:(t.Ne===null&&(t.Ne=new Worker(f2),t.Ne.onerror=function(e){e.preventDefault(),Lt("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+`
  `+e.message)},t.Ne.j=function(e){Lt("Worker serialization error: "+e)},t.Ne.onmessage=function(e){var n=e.data;if(n._GoJS==="_GoJS"){if(n.version&&z.version&&n.version!==z.version)Lt("Failure: GoJS v"+z.version+"  Worker v"+n.version);else if(e=t.Cl.get(n.id)){if(t.Cl.remove(n.id),e.zr=!1,e.lj=null,e.ir)e.ir=!1,e.dg=null;else{var i=g2(e,n,!1);e.network=i,e.updateParts(),e.network=null,e.isValidLayout=!0}if(Mc(e,n.time),n=e.dg,n!==null)e.dg=null;else for(i=t.Cl.iteratorValues;i.next();){var r=i.value;if(n=r.dg,n!==null){r.dg=null;break}}n!==null&&h2(e,n)}}},t.Ne.postMessage({_GoJS:"_GoJS",url:t.hx}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Ne.postMessage({_GoJS:"_GoJS",url:e})}),t.Ne.postMessage({_GoJS:"_GoJS",version:-1})),this.lj!==null?this.dg=this.network:h2(this,this.network),Mc(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)};function h2(t,e){t.zr=!0;var n=Rg(t.constructor),i=u2(t,e,!0);i._GoJS="_GoJS",n.Ne.postMessage(i),n.Cl.set(Te(t),t),t.lj=e}function u2(t,e,n){t.onNetworkSerialization(1,n,e,null);var i={};t.serializeLayoutProperties(i,n);var r=[];e.vertexes.each(function(h){var g={};h.serializeVertexProperties(g,n),r.push(g)});var a=[];return e.edges.each(function(h){var g={};h.serializeEdgeProperties(g,n),a.push(g)}),i={id:n?Te(t):t.id,layout:gr(t.constructor),p:i,hA:r,Ly:a},t.onNetworkSerialization(2,n,e,i),i}function g2(t,e,n){n&&(t.id=e.id);var i=t.diagram,r=t.createNetwork();t.onNetworkSerialization(3,n,r,e);var a=e.hA,h=new ct;a&&a.forEach(function(c){var m=null;c.key===null||i===null||n||(m=i.Lb(c.key)),m!==null?m=r.yj(m):(m=r.createVertex(),r.fg(m)),n&&c.key!==null&&(m.data={yh:c.key}),h.set(c.id,m)});var g=e.Ly,f=new ct;return g&&g.forEach(function(c){var m=null;c.key===null||i===null||n||(m=i.findLinkForKey(c.key));var y=r.createEdge();r.ol(y),y.link=m,n&&c.key!==null&&(y.data={yh:c.key}),f.set(c.id,y)}),a&&a.forEach(function(c){var m=h.get(c.id);m&&m.deserializeVertexProperties(c,h,f,n)}),g&&g.forEach(function(c){var m=f.get(c.id);m&&m.deserializeEdgeProperties(c,h,f,n)}),t.deserializeLayoutProperties(e.p,h,f,n,r),t.onNetworkSerialization(4,n,r,e),r}Dt.prototype.onNetworkSerialization=function(){},I.Object.defineProperties(Dt.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t,t!==null&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.Zm},set:function(t){this.Zm!==t&&(this.Zm=t)}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t,t||(this.dn=!0)}},isViewportSized:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)&&this.D()}},isRouting:{get:function(){return this.bn},set:function(t){this.bn!==t&&(this.bn=t)}},isRealtime:{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t)}},isValidLayout:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t,t||(t=this.diagram,t!==null&&(t.mh=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.mm},set:function(t){this.mm!==t&&(this.mm=t,this.D())}},arrangementOrigin:{get:function(){return this.im},set:function(t){this.im.C(t)||(this.im.assign(t),this.D())}},id:{get:function(){return this.u},set:function(t){this.u=t}},mayUseWorkerFunction:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t)}},workerStateChanged:{get:function(){return this.ao},set:function(t){this.ao!==t&&(this.ao=t)}}}),Dt.prototype.useWorker=Dt.prototype.qv,Dt.declareWorkerLayout=kc,Dt.prototype.cancelWorker=Dt.prototype.uy,Dt.prototype.collectParts=Dt.prototype.Iw,Dt.prototype.getLayoutBounds=Dt.prototype.hi,Dt.prototype.invalidateLayout=Dt.prototype.D;var $h=new ct,d2=typeof U.document=="object"&&U.document.currentScript?U.document.currentScript.src:"",f2=typeof URL<"u"&&typeof URL.createObjectURL=="function"&&typeof Blob=="function"?URL.createObjectURL(new Blob([`self.onmessage=function(e){if(e.data.url){
importScripts(e.data.url);}}`],{type:"text/javascript"})):"";Dt.className="Layout",Dt.GoJSScriptURL=d2,Dt.declareWorkerLayout=kc,typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&(self.onmessage=function(t){if(t=t.data,t._GoJS==="_GoJS")if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:z.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=Rg(t.layout));var i=null;if(n&&n.pu&&(i=new n.pu),!i)throw Error("no registered Worker Layout: "+t.layout);i.network=g2(i,t,!0),i.workerLayout=function(){var r=u2(i,i.network,!1);return r._GoJS="_GoJS",r.time=performance.now()-e,self.postMessage(r,void 0),!0},i.doLayout(new tt)}});function CN(){this.pu=null,this.hx=this.j=this.name="",this.scripts=[],this.Ne=null,this.Cl=new ct}function Yt(t){Oe(this),this.Kc=t,this.kf=new Z,this.pe=new Z,this.ds=new ct,this.Yr=new ct}Yt.prototype.clear=function(){if(this.kf)for(var t=this.kf.iterator;t.next();)t.value.clear();if(this.pe)for(t=this.pe.iterator;t.next();)t.value.clear();this.kf=new Z,this.pe=new Z,this.ds=new ct,this.Yr=new ct},Yt.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.kf.count+" edges: "+this.pe.count,1<t){for(var n=this.kf.iterator;n.next();)e+=`
    `+n.value.toString(t-1);for(n=this.pe.iterator;n.next();)e+=`
    `+n.value.toString(t-1)}return e},Yt.prototype.createVertex=function(){return new ce(this)},Yt.prototype.createEdge=function(){return new Ke(this)},Yt.prototype.eg=function(t,e,n){if(t!==null){for(e===void 0&&(e=!1),n===void 0&&(n=null),n===null&&(n=function(h){if(h instanceof q)return!h.isLinkLabel;if(h instanceof H){var g=h.fromNode;return g===null||g.isLinkLabel?!1:(h=h.toNode,!(h===null||h.isLinkLabel))}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof q&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)){if(i instanceof pt&&i.layout===null)this.eg(i.memberParts,!1);else if(this.ei(i)===null){var r=this.createVertex();r.node=i,this.fg(r)}}}for(t.reset();t.next();)if(i=t.value,i instanceof H&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&this.qo(i)===null){var a=i.fromNode;r=i.toNode,a!==null&&r!==null&&a!==r&&(a=this.findGroupVertex(a),r=this.findGroupVertex(r),a!==null&&r!==null&&this.Qj(a,r,i))}}},Yt.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.ei(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.ei(e),t!==null)return t;e=e.containingGroup}return null},l=Yt.prototype,l.fg=function(t){if(t!==null){this.kf.add(t);var e=t.node;e!==null&&this.ds.add(e,t),t.network=this}},l.yj=function(t){if(t===null)return null;var e=this.ei(t);return e===null&&(e=this.createVertex(),e.node=t,this.fg(e)),e},l.su=function(t){if(t!==null&&c2(this,t)){for(var e=t.wd,n=e.count-1;0<=n;n--){var i=e.K(n);this.Gj(i)}for(e=t.Jd,t=e.count-1;0<=t;t--)n=e.K(t),this.Gj(n)}};function c2(t,e){if(e===null)return!1;var n=t.kf.remove(e);return n&&(e=e.node,e!==null&&t.ds.remove(e)),n}l.Gy=function(t){t!==null&&(t=this.ei(t),t!==null&&this.su(t))},l.ei=function(t){return t===null?null:this.ds.I(t)},l.ol=function(t){if(t!==null){by(this,t);var e=t.toVertex;e!==null&&e.iu(t),e=t.fromVertex,e!==null&&e.gu(t)}};function by(t,e){if(e!==null){t.pe.add(e);var n=e.link;n!==null&&t.qo(n)===null&&t.Yr.add(n,e),e.network=t}}l.ky=function(t){if(t===null)return null;var e=t.fromNode,n=t.toNode,i=this.qo(t);return i===null?(i=this.createEdge(),i.link=t,e!==null&&(i.fromVertex=this.yj(e)),n!==null&&(i.toVertex=this.yj(n)),this.ol(i)):(e!==null?i.fromVertex=this.yj(e):i.fromVertex=null,n!==null?i.toVertex=this.yj(n):i.toVertex=null),i},l.Gj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.ru(t),e=t.fromVertex,e!==null&&e.qu(t),tv(this,t)}};function tv(t,e){e!==null&&t.pe.remove(e)&&(e=e.link,e!==null&&t.Yr.remove(e))}l.Fy=function(t){t!==null&&(t=this.qo(t),t!==null&&this.Gj(t))},l.qo=function(t){return t===null?null:this.Yr.I(t)},l.Qj=function(t,e,n){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.ol(i),i}return null},l.Ol=function(t){if(t!==null){var e=t.fromVertex,n=t.toVertex;e!==null&&n!==null&&(e.qu(t),n.ru(t),t.Ol(),e.iu(t),n.gu(t))}},l.oo=function(){for(var t=Kt(),e=this.pe.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.Gj(t[n]);Xt(t)},Yt.prototype.deleteArtificialVertexes=function(){for(var t=Kt(),e=this.kf.iterator;e.next();){var n=e.value;n.node===null&&n.data===null&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.su(t[e]);for(e=Kt(),n=this.pe.iterator;n.next();){var i=n.value;i.link===null&&i.data===null&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.Gj(e[i]);Xt(t),Xt(e)};function TN(t){for(var e=Kt(),n=t.pe.iterator;n.next();){var i=n.value;i.fromVertex!==null&&i.toVertex!==null||e.push(i)}for(n=e.length,i=0;i<n;i++)t.Gj(e[i]);Xt(e)}Yt.prototype.Ix=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),TN(this),this.oo()),t=new tt;for(var e=!0;e;){e=!1;for(var n=this.kf.iterator;n.next();){var i=n.value;if(0<i.wd.count||0<i.Jd.count){e=this.layout.createNetwork(),t.add(e),ev(this,e,i),e=!0;break}}}return t.sort(function(r,a){return r===null||a===null||r===a?0:a.vertexes.count-r.vertexes.count}),t};function ev(t,e,n){if(n!==null&&n.network!==e){c2(t,n),e.fg(n);for(var i=n.sourceEdges;i.next();){var r=i.value;r.network!==e&&(tv(t,r),by(e,r),ev(t,e,r.fromVertex))}for(i=n.destinationEdges;i.next();)n=i.value,n.network!==e&&(tv(t,n),by(e,n),ev(t,e,n.toVertex))}}Yt.prototype.My=function(){for(var t=new Z,e=this.kf.iterator;e.next();)t.add(e.value.node);for(e=this.pe.iterator;e.next();)t.add(e.value.link);return t},I.Object.defineProperties(Yt.prototype,{layout:{get:function(){return this.Kc},set:function(t){t!==null&&(this.Kc=t)}},vertexes:{get:function(){return this.kf}},edges:{get:function(){return this.pe}}}),Yt.prototype.findAllParts=Yt.prototype.My,Yt.prototype.splitIntoSubNetworks=Yt.prototype.Ix,Yt.prototype.deleteSelfEdges=Yt.prototype.oo,Yt.prototype.reverseEdge=Yt.prototype.Ol,Yt.prototype.linkVertexes=Yt.prototype.Qj,Yt.prototype.findEdge=Yt.prototype.qo,Yt.prototype.deleteLink=Yt.prototype.Fy,Yt.prototype.deleteEdge=Yt.prototype.Gj,Yt.prototype.addLink=Yt.prototype.ky,Yt.prototype.addEdge=Yt.prototype.ol,Yt.prototype.findVertex=Yt.prototype.ei,Yt.prototype.deleteNode=Yt.prototype.Gy,Yt.prototype.deleteVertex=Yt.prototype.su,Yt.prototype.addNode=Yt.prototype.yj,Yt.prototype.addVertex=Yt.prototype.fg,Yt.prototype.addParts=Yt.prototype.eg,Yt.className="LayoutNetwork";function ce(t){Oe(this),this.nb=t,this.j=new G(0,0,10,10).freeze(),this.m=new C(5,5).freeze(),this.Lh=this.qb=null,this.wd=new tt,this.Jd=new tt}ce.prototype.serializeVertexProperties=function(t){t.id=Te(this),t.key=this.node?this.node.key:this.data?this.data.yh:void 0,t.key===void 0&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.iA=this.bounds.width,t.pz=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.wd.each(function(i){e.push(Te(i))}),t.Gx=e;var n=[];this.Jd.each(function(i){n.push(Te(i))}),t.Ow=n},ce.prototype.deserializeVertexProperties=function(t,e,n){if(t!==null){this.x=t.x,this.y=t.y,this.width=t.iA,this.height=t.pz,this.focusX=t.fx,this.focusY=t.fy;var i=this;t.Gx&&t.Gx.forEach(function(r){(r=n.get(r))&&i.wd.add(r)}),t.Ow&&t.Ow.forEach(function(r){(r=n.get(r))&&i.Jd.add(r)})}},ce.prototype.clear=function(){this.Lh=this.qb=null,this.wd=new tt,this.Jd=new tt},ce.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+Te(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.wd.iterator;i.next();){var r=i.value;n?n=!1:t+=",",t+=r.toString(0)}for(r="",n=!0,i=this.Jd.iterator;i.next();){var a=i.value;n?n=!1:r+=",",r+=a.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},ce.prototype.commit=function(){var t=this.qb;if(t!==null){var e=this.bounds,n=t.bounds;mt(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof pt)){n=G.alloc();var i=this.network.layout.hi(t,n),r=t.locationObject.ia(Gt);if(i.v()&&r.v()){t.moveTo(e.x+this.focusX-(r.x-i.x),e.y+this.focusY-(r.y-i.y)),G.free(n);return}G.free(n)}t.moveTo(e.x,e.y)}},ce.prototype.iu=function(t){t!==null&&(this.wd.contains(t)||this.wd.add(t))},ce.prototype.ru=function(t){t!==null&&this.wd.remove(t)},ce.prototype.gu=function(t){t!==null&&(this.Jd.contains(t)||this.Jd.add(t))},ce.prototype.qu=function(t){t!==null&&this.Jd.remove(t)};function nv(t,e){return t=t.Lh,e=e.Lh,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}I.Object.defineProperties(ce.prototype,{sourceEdgesArrayAccess:{get:function(){return this.wd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Jd._dataArray}},data:{get:function(){return this.qb},set:function(t){if(this.qb=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,i=e.width;e=e.height,this.m.h(i/2,e/2),this.j.h(t,n,i,e)}}},node:{get:function(){return this.Lh},set:function(t){if(this.Lh!==t){this.Lh=t,t.Za();var e=this.network.layout,n=G.alloc(),i=e.hi(t,n);e=i.x;var r=i.y,a=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,a,i),G.free(n),!(t instanceof pt)&&(t=t.locationObject.ia(Gt),t.v())){this.m.h(t.x-e,t.y-r);return}this.m.h(a/2,i/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.C(t)||this.j.assign(t)}},focus:{get:function(){return this.m},set:function(t){this.m.C(t)||this.m.assign(t)}},centerX:{get:function(){return this.j.x+this.m.x},set:function(t){var e=this.j;e.x+this.m.x!==t&&(e.ja(),e.x=t-this.m.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.m.y},set:function(t){var e=this.j;e.y+this.m.y!==t&&(e.ja(),e.y=t-this.m.y,e.freeze())}},focusX:{get:function(){return this.m.x},set:function(t){var e=this.m;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},focusY:{get:function(){return this.m.y},set:function(t){var e=this.m;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ja(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ja(),e.height=t,e.freeze())}},network:{get:function(){return this.nb},set:function(t){this.nb=t}},sourceVertexes:{get:function(){for(var t=new Z,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new Z,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new Z,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.wd.iterator}},destinationEdges:{get:function(){return this.Jd.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.wd.count+this.Jd.count}}}),ce.prototype.deleteDestinationEdge=ce.prototype.qu,ce.prototype.addDestinationEdge=ce.prototype.gu,ce.prototype.deleteSourceEdge=ce.prototype.ru,ce.prototype.addSourceEdge=ce.prototype.iu,ce.className="LayoutVertex",ce.standardComparer=nv,ce.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Lh;var n=e.Lh;if(t!==null){if(n!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(t[n]!==""&&t[n]!==void 0){var i=parseFloat(e[n]),r=parseFloat(t[n]);if(isNaN(i))if(isNaN(r)){if(e[n].localeCompare(t[n])!==0)return e[n].localeCompare(t[n])}else return 1;else{if(isNaN(r))return-1;if(i-r!==0)return i-r}}else if(e[n]!=="")return 1;return t[n]!==""&&t[n]!==void 0?-1:0}return 1}return n!==null?-1:0}return 1}return e!==null?-1:0};function Ke(t){Oe(this),this.hb=t,this.jd=this.ad=this.Pk=this.qb=null}Ke.prototype.clear=function(){this.jd=this.ad=this.Pk=this.qb=null},Ke.prototype.serializeEdgeProperties=function(t){t.id=Te(this),t.key=this.link?this.link.key:this.data?this.data.yh:void 0,t.key===void 0&&(t.key=null),t.from=this.fromVertex?Te(this.fromVertex):null,t.dA=this.toVertex?Te(this.toVertex):null},Ke.prototype.deserializeEdgeProperties=function(t,e){if(t!==null){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.dA))&&(this.toVertex=t)}},Ke.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+Te(this);return 0<t&&(e+=this.Pk!==null?"("+this.Pk.toString()+")":"",1<t&&(e+=" "+(this.ad?this.ad.toString():"null")+" --> "+(this.jd?this.jd.toString():"null"))),e},Ke.prototype.Ol=function(){var t=this.ad;this.ad=this.jd,this.jd=t},Ke.prototype.commit=function(){},Ke.prototype.bx=function(t){return this.jd===t?this.ad:this.ad===t?this.jd:null},I.Object.defineProperties(Ke.prototype,{network:{get:function(){return this.hb},set:function(t){this.hb=t}},data:{get:function(){return this.qb},set:function(t){this.qb!==t&&(this.qb=t)}},link:{get:function(){return this.Pk},set:function(t){this.Pk!==t&&(this.Pk=t)}},fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}}}),Ke.prototype.getOtherVertex=Ke.prototype.bx,Ke.className="LayoutEdge";function Be(t){Dt.call(this),this.isViewportSized=!0,this.bo=this.co=NaN,this.pg=new dt(NaN,NaN).freeze(),this.gf=new dt(10,10).freeze(),this.Fb=Vg,this.Nb=Cc,this.fd=Yg,this.Zc=p2,t&&Object.assign(this,t)}O(Be,Dt),Be.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.co=this.co,t.bo=this.bo,t.pg.assign(this.pg),t.gf.assign(this.gf),t.Fb=this.Fb,t.Nb=this.Nb,t.fd=this.fd,t.Zc=this.Zc},Be.prototype.ob=function(t){t.classType===Be?t===Yg||t===Fc||t===iv||t===Tc?this.sorting=t:t===Cc||t===uo?this.arrangement=t:t===Vg||t===Nc?this.alignment=t:B("Unknown enum value: "+t):Dt.prototype.ob.call(this,t)},Be.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Iw(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.eh()||i.fromNode===null&&i.toNode===null){if(i.Za(),i instanceof pt)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var r=e.Ea();if(r.length!==0){switch(this.sorting){case Tc:r.reverse();break;case Yg:r.sort(this.comparer);break;case Fc:r.sort(this.comparer),r.reverse()}var a=this.wrappingColumn;isNaN(a)&&(a=0);var h=this.wrappingWidth;switch(isNaN(h)&&t!==null?(e=t.padding,h=Math.max(t.viewportBounds.width-e.left-e.right,0)):h=Math.max(this.wrappingWidth,0),0>=a&&0>=h&&(a=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),t!==null&&t.Da("Layout"),i=[],this.alignment){case Nc:var g=e,f=n,c=G.alloc(),m=Math.max(this.cellSize.width,1);if(!isFinite(m))for(var y=m=0;y<r.length;y++){var S=this.hi(r[y],c);m=Math.max(m,S.width)}if(m=Math.max(m+g,1),y=Math.max(this.cellSize.height,1),!isFinite(y))for(S=y=0;S<r.length;S++){var x=this.hi(r[S],c);y=Math.max(y,x.height)}y=Math.max(y+f,1),S=this.arrangement;for(var P=x=this.arrangementOrigin.x,L=this.arrangementOrigin.y,N=0,k=0,F=0;F<r.length;F++){var D=r[F],j=this.hi(D,c),E=Math.ceil((j.width+g)/m)*m,R=Math.ceil((j.height+f)/y)*y;switch(S){case uo:var J=Math.abs(P-j.width);break;default:J=P+j.width}switch((0<a&&N>a-1||0<h&&0<N&&J-x>h)&&(i.push(new G(0,L,h+g,k)),N=0,P=x,L+=k,k=0),k=Math.max(k,R),S){case uo:j=-j.width;break;default:j=0}switch(D.moveTo(P+j,L),S){case uo:P-=E;break;default:P+=E}N++}i.push(new G(0,L,h+g,k)),G.free(c);break;case Vg:for(f=h,m=a,y=e,S=n,h=G.alloc(),x=Math.max(this.cellSize.width,1),a=L=c=0,g=C.alloc(),P=0;P<r.length;P++)k=r[P],N=this.hi(k,h),k=qr(k,k.locationObject,k.locationSpot,g),c=Math.max(c,k.x),L=Math.max(L,N.width-k.x),a=Math.max(a,k.y);switch(P=this.arrangement,P){case uo:c+=y;break;default:L+=y}x=isFinite(x)?Math.max(x+y,1):Math.max(c+L,1);var it=k=this.arrangementOrigin.x;for(F=this.arrangementOrigin.y,L=0,f>=c&&(f-=c),c=D=0,E=Math.max(this.cellSize.height,1),j=a=0,R=!0,N=C.alloc(),J=0;J<r.length;J++){var nt=r[J],et=this.hi(nt,h),Y=qr(nt,nt.locationObject,nt.locationSpot,g);if(0<L)switch(P){case uo:it=(it-k-(et.width-Y.x))/x,it=A.ca(Math.round(it),it)?Math.round(it):Math.floor(it),it=it*x+k;break;default:it=(it-k+Y.x)/x,it=A.ca(Math.round(it),it)?Math.round(it):Math.ceil(it),it=it*x+k}else switch(P){case uo:D=it+Y.x+et.width;break;default:D=it-Y.x}switch(P){case uo:var vt=-(it+Y.x)+D;break;default:vt=it+et.width-Y.x-D}if(0<m&&L>m-1||0<f&&0<L&&vt>f){for(i.push(new G(0,R?F-a:F,f+y,j+a+S)),it=0;it<L&&J!==L;it++){vt=r[J-L+it];var ut=qr(vt,vt.locationObject,vt.locationSpot,N);vt.moveTo(vt.position.x,vt.position.y+a-ut.y)}j+=S,F=R?F+j:F+(j+a),L=j=a=0,it=k,R=!1}switch(it===k&&(c=P===uo?Math.max(c,et.width-Y.x):Math.min(c,-Y.x)),a=Math.max(a,Y.y),j=Math.max(j,et.height-Y.y),isFinite(E)&&(j=Math.max(j,Math.max(et.height,E)-Y.y)),R?nt.moveTo(it-Y.x,F-Y.y):nt.moveTo(it-Y.x,F),P){case uo:it-=Y.x+y;break;default:it+=et.width-Y.x+y}L++}if(i.push(new G(0,F,f+y,(R?j:j+a)+S)),r.length!==L)for(f=0;f<L;f++)m=r[r.length-L+f],y=qr(m,m.locationObject,m.locationSpot,g),m.moveTo(m.position.x,m.position.y+a-y.y);if(C.free(g),C.free(N),P===uo)for(r=0;r<i.length;r++)a=i[r],a.width+=c,a.x-=c;else for(r=0;r<i.length;r++)a=i[r],a.x>c&&(a.width+=a.x-c,a.x=c);G.free(h)}for(g=a=h=r=0;g<i.length;g++)f=i[g],r=Math.min(r,f.x),h=Math.min(h,f.y),a=Math.max(a,f.x+f.width);this.arrangement===uo?this.commitLayers(i,new C(r+e/2-(a+r),h-n/2)):this.commitLayers(i,new C(r-e/2,h-n/2)),t!==null&&t.eb("Layout"),this.isValidLayout=!0}},Be.prototype.commitLayers=function(){};function p2(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}I.Object.defineProperties(Be.prototype,{wrappingWidth:{get:function(){return this.co},set:function(t){this.co!==t&&(0<t||isNaN(t))&&(this.co=t,this.isViewportSized=isNaN(t),this.D())}},wrappingColumn:{get:function(){return this.bo},set:function(t){this.bo!==t&&(0<t||isNaN(t))&&(this.bo=t,this.D())}},cellSize:{get:function(){return this.pg},set:function(t){this.pg.C(t)||(this.pg.assign(t),this.D())}},spacing:{get:function(){return this.gf},set:function(t){this.gf.C(t)||(this.gf.assign(t),this.D())}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==Vg&&t!==Nc||(this.Fb=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==Cc&&t!==uo||(this.Nb=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==iv&&t!==Tc&&t!==Yg&&t!==Fc||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}}});var Nc=new $(Be,"Position",0),Vg=new $(Be,"Location",1),Cc=new $(Be,"LeftToRight",2),uo=new $(Be,"RightToLeft",3),iv=new $(Be,"Forward",4),Tc=new $(Be,"Reverse",5),Yg=new $(Be,"Ascending",6),Fc=new $(Be,"Descending",7);Be.className="GridLayout",Be.standardComparer=p2,Be.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(e[n]!==""&&e[n]!==void 0){var i=parseFloat(t[n]),r=parseFloat(e[n]);if(isNaN(i))if(isNaN(r)){if(t[n].localeCompare(e[n])!==0)return t[n].localeCompare(e[n])}else return 1;else{if(isNaN(r))return-1;if(i-r!==0)return i-r}}else if(t[n]!=="")return 1;return e[n]!==""&&e[n]!==void 0?-1:0}return 1}return e!==null?-1:0},Be.Position=Nc,Be.Location=Vg,Be.LeftToRight=Cc,Be.RightToLeft=uo,Be.Forward=iv,Be.Reverse=Tc,Be.Ascending=Yg,Be.Descending=Fc;function It(){this.vn=new Z,this.kn=new Z,this.Ma=new Z,this.Se=new ct,this.Re=new ct,this.Wi=new ct,this.H=null,this.Xo=!1}l=It.prototype,l.clear=function(){this.vn.clear(),this.kn.clear(),this.Ma.clear(),this.Se.clear(),this.Re.clear(),this.Wi.clear()},l.Le=function(t){this.H=t},l.ii=function(t){if(t instanceof q){if(this.vn.add(t),t instanceof pt){var e=t.containingGroup;e===null?this.H.Uh.add(t):e.Vk.add(t),e=t.layout,e!==null&&(e.diagram=this.H)}}else t instanceof H?this.kn.add(t):t instanceof Ct||this.Ma.add(t);e=t.data,e===null||t instanceof Ct||(t instanceof H?this.Re.add(e,t):this.Se.add(e,t))},l.lc=function(t){if(t.zj(),t instanceof q){if(this.vn.remove(t),t instanceof pt){var e=t.containingGroup;e===null?this.H.Uh.remove(t):e.Vk.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof H?this.kn.remove(t):t instanceof Ct||this.Ma.remove(t);e=t.data,e===null||t instanceof Ct||(t instanceof H?this.Re.remove(e):this.Se.remove(e))},l.Od=function(){var t=this.H;if(t!==null){for(var e=t.nodeTemplateMap.iterator;e.next();){var n=e.value,i=e.key;(!n.Tc()||n instanceof pt)&&B('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(e=t.groupTemplateMap.iterator;e.next();)n=e.value,i=e.key,n instanceof pt||B('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+n);for(e=t.linkTemplateMap.iterator;e.next();)n=e.value,i=e.key,n instanceof H||B('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+n);for(e=Kt(),n=t.selection.iterator;n.next();)(i=n.value.data)&&e.push(i);for(n=Kt(),t=t.highlighteds.iterator;t.next();)(i=t.value.data)&&n.push(i);for(t=Kt(),i=this.nodes.iterator;i.next();){var r=i.value;r.data!==null&&(t.push(r.data),t.push(r.location))}for(i=this.links.iterator;i.next();)r=i.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(i=this.parts.iterator;i.next();)r=i.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<e.length;i++)r=this.Ec(e[i]),r!==null&&(r.isSelected=!0);for(i=0;i<n.length;i++)r=this.Ec(n[i]),r!==null&&(r.isHighlighted=!0);for(i=0;i<t.length;i+=2)r=this.Ec(t[i]),r!==null&&(r.location=t[i+1]);Xt(e),Xt(n),Xt(t)}},It.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},It.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(r){i.lb(r)&&m2(n,r,!1)}),t.forEach(function(r){i.lb(r)&&n.resolveReferencesForData(r)}),e!==!1&&Tf(this.diagram,!1)};function m2(t,e,n){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Se.contains(e)){n===void 0&&(n=!0);t:{if(e!=null&&!t.H.undoManager.isUndoingRedoing&&!t.Se.contains(e)){var i=t.uo(e),r=y2(t,e,i);if(r!==null&&(ji(r),r=r.copy(),r!==null)){var a=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Jf=i,r.qb=e,t.Xo&&(r.zg="Tool"),t.diagram.add(r),r.qb=null,r.data=e,t.diagram.skipsModelSourceBindings=a,i=r;break t}}i=null}i!==null&&n&&t.resolveReferencesForData(e)}}It.prototype.insertLink=function(){return null},It.prototype.resolveReferencesForData=function(){},It.prototype.uo=function(t){return this.H.model.uo(t)};function y2(t,e,n){t=t.H;var i=t.model;return i.Oj()&&i.Ku(e)?(e=t.groupTemplateMap.I(n),e===null&&(e=t.groupTemplateMap.I(""),e===null&&(P2||(P2=!0,Lt('No Group template found for category "'+n+'"'),Lt("  Using default group template")),e=t.Rx))):(e=t.nodeTemplateMap.I(n),e===null&&(e=t.nodeTemplateMap.I(""),e===null&&(S2||(S2=!0,Lt('No Node template found for category "'+n+'"'),Lt("  Using default node template")),e=t.Tx))),e}It.prototype.getLinkCategoryForData=function(){return""},It.prototype.setLinkCategoryForData=function(){},It.prototype.setFromNodeForLink=function(){},It.prototype.setToNodeForLink=function(){},It.prototype.findLinkTemplateForCategory=function(t){var e=this.H,n=e.linkTemplateMap.I(t);return n===null&&(n=e.linkTemplateMap.I(""),n===null&&(x2||(x2=!0,Lt('No Link template found for category "'+t+'"'),Lt("  Using default link template")),n=e.Sx)),n},It.prototype.removeAllModeledParts=function(){this.gs(this.diagram.model.nodeDataArray)},It.prototype.gs=function(t){var e=this;t.forEach(function(n){e.Lo(n)})},It.prototype.Lo=function(t){t=this.Ec(t),t!==null&&(I0(this.diagram,t,!1),this.unresolveReferencesForPart(t))},It.prototype.unresolveReferencesForPart=function(){},It.prototype.removeDataForLink=function(){},It.prototype.findPartForKey=function(t){return t==null?null:(t=this.H.model.dc(t),t!==null?this.Se.I(t):null)},It.prototype.Lb=function(t){return t==null||(t=this.H.model.dc(t),t===null)?null:(t=this.Se.I(t),t instanceof q?t:null)},It.prototype.findLinkForKey=function(){return null},l=It.prototype,l.Ec=function(t){if(t===null)return null;var e=this.Se.I(t);return e!==null?e:e=this.Re.I(t)},l.ci=function(t){return t===null?null:(t=this.Se.I(t),t instanceof q?t:null)},l.Dc=function(t){return t===null?null:this.Re.I(t)},l.Jr=function(t){for(var e=0;e<arguments.length;++e);e=new Z;for(var n=this.vn.iterator;n.next();){var i=n.value,r=i.data;if(r!==null)for(var a=0;a<arguments.length;a++){var h=arguments[a];if(mt(h)&&ov(this,r,h)){e.add(i);break}}}return e.iterator},l.Ir=function(t){for(var e=0;e<arguments.length;++e);e=new Z;for(var n=this.kn.iterator;n.next();){var i=n.value,r=i.data;if(r!==null)for(var a=0;a<arguments.length;a++){var h=arguments[a];if(mt(h)&&ov(this,r,h)){e.add(i);break}}}return e.iterator};function ov(t,e,n){for(var i in n){var r=e[i],a=n[i];if(Ut(a)){if(!Ut(r)||r.length<a.length)return!1;for(var h=0;h<r.length;h++){var g=a[h];if(g!==void 0&&!v2(t,r[h],g))return!1}}else if(!v2(t,r,a))return!1}return!0}function v2(t,e,n){if(typeof n=="function"){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(mt(e)&&mt(n)){if(!ov(t,e,n))return!1}else if(e!==n)return!1;return!0}It.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.$){e.$=!1;try{var i=t.modelChange;if(i!=="")if(n===Zt){if(i==="nodeCategory"){var r=this.Ec(t.object),a=t.newValue;r!==null&&typeof a=="string"&&(r.category=a)}else i==="nodeDataArray"&&(this.gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===xe){var h=t.newValue;i==="nodeDataArray"&&mt(h)&&m2(this,h),e.isModified=!0}else if(n===Fe){var g=t.oldValue;i==="nodeDataArray"&&mt(g)&&this.Lo(g),e.isModified=!0}else n===so&&(i==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.Uo(),this.updateAllTargetBindings()):i==="ModelDisplaced"&&this.Od());else if(n===Zt){var f=t.propertyName,c=t.object;c===e.model?(f==="nodeKeyProperty"||f==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Od()):this.updateDataBindings(c,f),e.isModified=!0}else if(n===xe||n===Fe){var m=t.change===xe,y=m?t.newParam:t.oldParam,S=m?t.newValue:t.oldValue,x=this.Wi.I(t.object);if(Array.isArray(x))for(t=0;t<x.length;t++){var P=x[t];if(m)$f(P,S,y,!0);else if(!(0>y)){var L=y+xg(P);P.lc(L,!0),yy(P,L,y)}}e.isModified=!0}}finally{e.$=!0}}}}},It.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ka(t);for(e=this.nodes.iterator;e.next();)e.value.Ka(t);for(e=this.links.iterator;e.next();)e.value.Ka(t)},It.prototype.Uo=function(){for(var t=this.H.model,e=new Z,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var r=[];for(this.nodes.each(function(h){h.data===null||e.contains(h.data)||r.push(h.data)}),this.parts.each(function(h){h.data===null||e.contains(h.data)||r.push(h.data)}),r.forEach(function(h){D2(t,h,!1)}),i=0;i<n.length;i++){var a=n[i];this.Ec(a)===null&&F2(t,a,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},It.prototype.refreshDataBoundLinks=function(){},It.prototype.updateRelationshipsFromData=function(){},It.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var n=this.Ec(t);if(n!==null)n.Ka(e);else{n=null;for(var i=this.Wi.iterator;i.next();){for(var r=i.value,a=0;a<r.length;a++){var h=r[a].Uw(t);h!==null&&(n===null&&(n=Kt()),n.push(h))}if(n!==null)break}if(n!==null){for(i=0;i<n.length;i++)n[i].Ka(e);Xt(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function rv(t,e){var n=e.xh;if(Ut(n)){var i=t.Wi.I(n);if(i===null)i=[],i.push(e),t.Wi.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function sv(t,e,n){va(e,function(h){h=h.R.s;for(var g=h.length,f=0;f<g;f++)V0(n,h[f])});var i=e.xh;if(Ut(i)){var r=t.Wi.I(i);if(r!==null){for(var a=0;a<r.length;a++)if(r[a]===e){r.splice(a,1),r.length===0&&t.Wi.remove(i);break}}}}It.prototype.Ej=function(t,e,n){n===void 0&&(n=!1);var i=new ct;if(Ut(t))for(var r=0;r<t.length;r++)Dc(this,t[r],e,i,n);else for(t=t.iterator;t.next();)Dc(this,t.value,e,i,n);if(e!==null){n=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.Em.dragsLink,r=new Z;for(var a=new ct,h=i.iterator;h.next();){var g=h.value;if(g instanceof H)t||g.fromNode!==null&&g.toNode!==null||r.add(g);else if(g instanceof q&&g.data!==null&&n.Bl()){var f=g;g=h.key;var c=g.ig();c!==null&&(c=i.I(c),c!==null?(n.ie(f.data,n.ua(c.data)),f=e.Dc(f.data),g=g.$g(),g!==null&&f!==null&&a.add(g,f)):n.ie(f.data,void 0))}}if(0<r.count&&e.hs(r,!1),0<a.count)for(n=a.iterator;n.next();)i.add(n.key,n.value)}if(e!==null&&this.H!==null&&(e=e.model,n=e.afterCopyFunction,n!==null)){var m=new ct;i.each(function(y){y.key.data!==null&&m.add(y.key.data,y.value.data)}),n(m,e,this.H.model)}for(e=i.iterator;e.next();)e.value.Ka();return i};function Dc(t,e,n,i,r){if(e===null||r&&!e.canCopy())return null;if(i.contains(e))return i.I(e);var a=t.copyPartData(e,n);if(!(a instanceof lt))return null;if(a.isSelected=!1,a.isHighlighted=!1,i.add(e,a),e instanceof q){for(var h=e.linksConnected;h.next();){var g=h.value;if(g.fromNode===e){var f=i.I(g);f!==null&&(f.fromNode=a)}g.toNode===e&&(g=i.I(g),g!==null&&(g.toNode=a))}if(e instanceof pt&&a instanceof pt)for(e=e.memberParts;e.next();)h=Dc(t,e.value,n,i,r),h instanceof H||h===null||(h.containingGroup=a)}else if(e instanceof H&&a instanceof H)for(h=e.fromNode,h!==null&&(h=i.I(h),h!==null&&(a.fromNode=h)),h=e.toNode,h!==null&&(h=i.I(h),h!==null&&(a.toNode=h)),e=e.labelNodes;e.next();)h=Dc(t,e.value,n,i,r),h!==null&&h instanceof q&&(h.labeledLink=a);return a}It.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(i!==null&&e!==null){var r=e.model;t instanceof H||(i=r.copyNodeData(i),mt(i)&&(r.lf(i),n=e.Ec(i)))}else ji(t),n=t.copy(),n!==null&&(r=this.H,e!==null?e.add(n):i!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,n instanceof H||(r=e.copyNodeData(i)),mt(r)&&(n.data=r)));return n},I.Object.defineProperties(It.prototype,{nodes:{get:function(){return this.vn}},links:{get:function(){return this.kn}},parts:{get:function(){return this.Ma}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.Xo},set:function(t){this.Xo=t}}}),It.prototype.updateAllRelationshipsFromData=It.prototype.Uo,It.prototype.findLinksByExample=It.prototype.Ir,It.prototype.findNodesByExample=It.prototype.Jr,It.prototype.findLinkForData=It.prototype.Dc,It.prototype.findNodeForData=It.prototype.ci,It.prototype.findPartForData=It.prototype.Ec,It.prototype.findNodeForKey=It.prototype.Lb,It.prototype.removeModeledPart=It.prototype.Lo,It.prototype.removeModeledParts=It.prototype.gs,It.prototype.rebuildParts=It.prototype.Od;var S2=!1,P2=!1,x2=!1;It.className="PartManager";function De(t){It.apply(this,arguments)}O(De,It),De.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),w2(this,t.linkDataArray)},De.prototype.addModeledParts=function(t){for(It.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)Xh(t.value);Tf(this.diagram,!1)};function w2(t,e){e.forEach(function(n){L2(t,n)}),Tf(t.diagram,!1)}function L2(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Re.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(i!==null){ji(i);var r=i.copy();if(r!==null){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Jf=n,r.qb=e,n=t.diagram.model;var a=Ic(n,e,!0);a!==""&&(r.fromPortId=a),a=ai(n,e,!0),a!==void 0&&(a=t.Lb(a),a instanceof q&&(r.fromNode=a)),a=Ic(n,e,!1),a!==""&&(r.toPortId=a),a=ai(n,e,!1),a!==void 0&&(a=t.Lb(a),a instanceof q&&(r.toNode=a)),n=n.vf(e),Array.isArray(n)&&n.forEach(function(h){h=t.Lb(h),h!==null&&(h.labeledLink=r)}),t.Xo&&(r.zg="Tool"),t.diagram.add(r),r.qb=null,r.data=e,t.diagram.skipsModelSourceBindings=i}}}}De.prototype.removeAllModeledParts=function(){var t=this.diagram.model;M2(this,t.linkDataArray),this.gs(t.nodeDataArray)};function M2(t,e){e.forEach(function(n){t.Lo(n)})}De.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Mr(t)},De.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Oo(t,e)},De.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.cv(t.data,n.ua(e!==null?e.data:null))},De.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.gv(t.data,n.ua(e!==null?e.data:null))},De.prototype.removeDataForLink=function(t){this.diagram.model.Jl(t.data)},De.prototype.findPartForKey=function(t){var e=It.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.Zg(t),t!==null)?this.Re.I(t):e},De.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Zg(t),t!==null?this.Re.I(t):null)},De.prototype.doModelChanged=function(t){var e=this;if(It.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.$){n.$=!1;try{var r=t.modelChange;if(r!==""){if(i===Zt){if(r==="linkFromKey"){var a=this.Dc(t.object);if(a!==null){var h=this.Lb(t.newValue);a.fromNode=h}}else if(r==="linkToKey"){var g=this.Dc(t.object);if(g!==null){var f=this.Lb(t.newValue);g.toNode=f}}else if(r==="linkFromPortId"){var c=this.Dc(t.object);if(c!==null){var m=t.newValue;typeof m=="string"&&(c.fromPortId=m)}}else if(r==="linkToPortId"){var y=this.Dc(t.object);if(y!==null){var S=t.newValue;typeof S=="string"&&(y.toPortId=S)}}else if(r==="nodeGroupKey"){var x=this.Ec(t.object);if(x!==null){var P=t.newValue;if(P!==void 0){var L=this.Lb(P);L instanceof pt?x.containingGroup=L:x.containingGroup=null}else x.containingGroup=null}}else if(r==="linkLabelKeys"){var N=this.Dc(t.object);if(N!==null){var k=t.oldValue,F=t.newValue;Array.isArray(k)&&k.forEach(function(Y){0<=F.indexOf(Y)||(Y=e.Lb(Y),Y!==null&&(Y.labeledLink=null))}),Array.isArray(F)&&F.forEach(function(Y){Y=e.Lb(Y),Y!==null&&(Y.labeledLink=N)})}}else if(r==="linkCategory"){var D=this.Dc(t.object),j=t.newValue;D!==null&&typeof j=="string"&&(D.category=j)}else r==="linkDataArray"&&(M2(this,t.oldValue),w2(this,t.newValue));n.isModified=!0}else if(i===xe){var E=t.newValue;if(r==="linkDataArray"&&typeof E=="object"&&E!==null)L2(this,E);else if(r==="linkLabelKeys"&&Is(E)){var R=this.Dc(t.object),J=this.Lb(E);R!==null&&J!==null&&(J.labeledLink=R)}n.isModified=!0}else if(i===Fe){var it=t.oldValue;if(r==="linkDataArray"&&typeof it=="object"&&it!==null)this.Lo(it);else if(r==="linkLabelKeys"&&Is(it)){var nt=this.Lb(it);nt!==null&&(nt.labeledLink=null)}n.isModified=!0}}else if(i===Zt){var et=t.propertyName;t.object!==n.model||et!=="linkFromKeyProperty"&&et!=="linkToKeyProperty"&&et!=="linkFromPortIdProperty"&&et!=="linkToPortIdProperty"&&et!=="linkLabelKeysProperty"&&et!=="nodeIsGroupProperty"&&et!=="nodeGroupKeyProperty"&&et!=="linkCategoryProperty"||n.undoManager.isUndoingRedoing||this.Od(),n.isModified=!0}}finally{n.$=!0}}}}},De.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new Z,i=e.linkDataArray;i.forEach(function(a){n.add(a)});var r=[];this.links.each(function(a){a.data===null||n.contains(a.data)||r.push(a.data)}),r.forEach(function(a){z2(e,a,!1)}),i.forEach(function(a){t.Dc(a)===null&&A2(e,a,!1)})},De.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var n=t.diagram;if(n!==null){var i=n.model;if(t instanceof H){var r=ai(i,e,!0);if(r=n.Lb(r),t.fromNode=r,r=ai(i,e,!1),r=n.Lb(r),t.toNode=r,e=i.vf(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var a=t.labelNodes.first();if(i.ua(a.data)===r)return}r=new Z().addAll(e);var h=new Z;t.labelNodes.each(function(g){g.data!==null&&(g=i.ua(g.data),g!==void 0&&h.add(g))}),e=h.copy(),e.Ko(r),r=r.copy(),r.Ko(h),(0<e.count||0<r.count)&&(e.each(function(g){g=n.Lb(g),g!==null&&g.labeledLink===t&&(g.labeledLink=null)}),r.each(function(g){g=n.Lb(g),g!==null&&g.labeledLink!==t&&(g.labeledLink=t)}))}}else!(t instanceof Ct)&&(e=i.ah(e),e=n.findPartForKey(e),e===null||e instanceof pt)&&(t.containingGroup=e)}}},De.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(n!==void 0){var i=Ug(e,n),r=this.Ec(t);if(i!==null&&r!==null){i=i.iterator;for(var a={};i.next();){var h=i.value;e.lb(h)?r instanceof pt&&e.ah(h)===n&&(h=this.Ec(h),h!==null&&(h.containingGroup=r)):(a.link=this.Dc(h),a.link!==null&&r instanceof q&&(ai(e,h,!0)===n&&(a.link.fromNode=r),ai(e,h,!1)===n&&(a.link.toNode=r),h=e.vf(h),Array.isArray(h)&&h.some(function(g){return function(f){return f===n?(r.labeledLink=g.link,!0):!1}}(a)))),a={link:a.link}}co(e,n)}t=e.ah(t),t!==void 0&&(t=this.Lb(t),t instanceof pt&&(r.containingGroup=t))}},De.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof q){var n=e.ua(t.data);if(n!==void 0){for(var i=t.linksConnected;i.next();)fo(e,n,i.value.data);if(t.isLinkLabel&&(i=t.labeledLink,i!==null&&fo(e,n,i.data)),t instanceof pt)for(t=t.memberParts;t.next();)i=t.value.data,e.lb(i)&&fo(e,n,i)}}},De.prototype.copyPartData=function(t,e){var n=It.prototype.copyPartData.call(this,t,e);if(t instanceof H)if(t=t.data,t!==null&&e!==null){var i=e.model;t=i.no(t),typeof t=="object"&&t!==null&&(i.Yh(t),n=e.Dc(t))}else n!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.no(t),typeof e=="object"&&e!==null&&(n.data=e)));return n},De.prototype.insertLink=function(t,e,n,i){var r=this.diagram,a=r.model,h=r.toolManager.findTool("Linking"),g="";if(t!==null&&(e===null&&(e=t),g=e.portId,g===null&&(g="")),e="",n!==null&&(i===null&&(i=n),e=i.portId,e===null&&(e="")),i=h.archetypeLinkData,i instanceof H){if(ji(i),a=i.copy(),a!==null)return a.fromNode=t,a.fromPortId=g,a.toNode=n,a.toPortId=e,r.add(a),t=h.archetypeLabelNodeData,t instanceof q&&(ji(t),t=t.copy(),t!==null&&(t.labeledLink=a,r.add(t))),a}else if(i!==null&&(i=a.no(i),typeof i=="object"&&i!==null))return t!==null&&Zh(a,i,a.ua(t.data),!0),Qh(a,i,g,!0),n!==null&&Zh(a,i,a.ua(n.data),!1),Qh(a,i,e,!1),a.Yh(i),t=h.archetypeLabelNodeData,t===null||t instanceof q||(t=a.copyNodeData(t),typeof t=="object"&&t!==null&&(a.lf(t),t=a.ua(t),t!==void 0&&a.hu(i,t))),r.Dc(i);return null},De.prototype.findLinkForKey=De.prototype.findLinkForKey,De.prototype.findPartForKey=De.prototype.findPartForKey,De.prototype.removeAllModeledParts=De.prototype.removeAllModeledParts,De.prototype.addModeledParts=De.prototype.addModeledParts,De.prototype.addAllModeledParts=De.prototype.addAllModeledParts,De.className="GraphLinksPartManager";function Si(){It.apply(this,arguments),this.Jg=null}O(Si,It);function jc(t,e,n){if(e!==null&&n!==null&&n.$g()===null){var i=t.diagram.toolManager.findTool("Linking"),r=e,a=n;if(t.diagram.isTreePathToChildren||(r=n,a=e),(i===null||!Qu(i,r,a,null,!0))&&(e=t.getLinkCategoryForData(n.data),i=t.findLinkTemplateForCategory(e),i!==null&&(ji(i),i=i.copy(),i!==null))){var h=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,i.Jf=e,i.qb=n.data,i.fromNode=r,i.toNode=a,t.diagram.add(i),i.qb=null,i.data=n.data,t.diagram.skipsModelSourceBindings=h}}}Si.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Pr(t)},Si.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ms(t,e)},Si.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(n===void 0&&(n=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)i.ie(t.data,i.ua(e));else{var r=this.Jg;this.Jg=t,n!==null&&i.ie(n.data,void 0),i.ie(e,i.ua(t.toNode!==null?t.toNode.data:null)),this.Jg=r}},Si.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(n===void 0&&(n=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.Jg;this.Jg=t,n!==null&&i.ie(n.data,void 0),i.ie(e,i.ua(t.fromNode!==null?t.fromNode.data:null)),this.Jg=r}else i.ie(t.data,i.ua(e))},Si.prototype.removeDataForLink=function(t){this.diagram.model.ie(t.data,void 0)},Si.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.dc(t),t!==null?this.Re.I(t):null)},Si.prototype.doModelChanged=function(t){if(It.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.$){e.$=!1;try{var i=t.modelChange;if(i!==""){if(n===Zt){if(i==="nodeParentKey"){var r=t.object,a=this.Lb(t.newValue),h=this.ci(r);if(this.Jg!==null)a!==null&&(this.Jg.data=r,this.Jg.category=this.getLinkCategoryForData(r));else if(h!==null){var g=h.$g();g!==null?a===null?e.remove(g):e.isTreePathToChildren?g.fromNode=a:g.toNode=a:jc(this,a,h)}}else if(i==="parentLinkCategory"){var f=this.ci(t.object),c=t.newValue;if(f!==null&&typeof c=="string"){var m=f.$g();m!==null&&(m.category=c)}}e.isModified=!0}}else if(n===Zt){var y=t.propertyName;t.object===e.model&&y==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Od()),e.isModified=!0}}finally{e.$=!0}}}}},Si.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var n=t.diagram;if(n!==null){var i=n.model;t instanceof q&&(e=i.bh(e),e=n.Lb(e),i=t.ig(),e!==i&&(i=t.$g(),e!==null?i!==null?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:jc(this,e,t):i!==null&&I0(n,i,!1)))}}},Si.prototype.updateDataBindings=function(t,e){It.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.Ec(t)!==null&&(t=this.Dc(t),t!==null&&t.Ka(e))},Si.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(n!==void 0){var i=Ug(e,n),r=this.Ec(t);if(i!==null&&r!==null){for(i=i.iterator;i.next();){var a=i.value;e.lb(a)&&r instanceof q&&e.bh(a)===n&&jc(this,r,this.ci(a))}co(e,n)}t=e.bh(t),t!==void 0&&r instanceof q&&(t=this.Lb(t),jc(this,t,r))}},Si.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof q){var n=e.ua(t.data),i=this.Dc(t.data);if(i!==null){i.isSelected=!1,i.isHighlighted=!1;var r=i.layer;if(r!==null){var a=r.lc(-1,i,!1);0<=a&&this.diagram.bb(Fe,"parts",r,i,null,a,null),a=i.layerChanged,a!==null&&a(i,r,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(i?r.toNode:r.fromNode).data,e.lb(r)&&fo(e,n,r)}},Si.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,r=n;return this.diagram.isTreePathToChildren||(i=n,r=t),i!==null&&r!==null?(e.ie(r.data,e.ua(i.data)),r.$g()):null},Si.prototype.findLinkForKey=Si.prototype.findLinkForKey,Si.className="TreePartManager";function rt(t,e){this.Zk=new Z,this.Xk=new Z,this.Av=`,
  "insertedNodeKeys": `,this.Px=`,
  "modifiedNodeData": `,this.Cv=`,
  "removedNodeKeys": `,this.kh=null,Oe(this),this.Am=this.va="",this.xg=!1,this.j={},this.Mc=[],this.kb=new ct,this.Mh="key",this.pk=this.Rk=null,this.rm=this.sm=!1,this.um=!0,this.fm=null,this.gj="category",this.Lf=new ct,this.ot=new tt,this.Mg=!1,this.m=null,this.undoManager=new se,t!==void 0&&(Ut(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}rt.prototype.cloneProtected=function(t){t.va=this.va,t.Am=this.Am,t.xg=this.xg,t.Mh=this.Mh,t.Rk=this.Rk,t.pk=this.pk,t.sm=this.sm,t.rm=this.rm,t.um=this.um,t.fm=this.fm,t.gj=this.gj},rt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},rt.prototype.clear=function(){this.Mc=[],this.kb.clear(),this.Lf.clear(),this.undoManager.clear()},rt.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.Qo();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var n=t.length,i=0;i<n;i++){var r=t[i];e+=" "+this.ua(r)+":"+Hn(r)}}return e},rt.prototype.eA=function(t){t.change!==so&&B("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Ye?(N2(this,e),t=this.uv(e,t.propertyName==="FinishedUndo"),this.kh=null,t):null},rt.prototype.uv=function(t,e){var n=this,i=!1,r=new Z,a=new Z,h=new Z,g=this.kh;t.changes.each(function(y){y.model===n&&(y.modelChange==="nodeDataArray"?y.change===xe?r.add(y.newValue):y.change===Fe&&h.add(y.oldValue):n.lb(y.object)?a.add(y.object):y.change!==Zt||n.modelData!==y.object&&y.propertyName!=="modelData"?y.object!==null&&(g&&g.contains(y.object)?g.get(y.object).each(function(S){n.lb(S)&&a.add(S)}):y.object instanceof rt||n.ki()&&n.Cc(y.object)||C2(n,y.object).each(function(S){a.add(S)})):i=!0)});var f=this.Xk;f.clear(),r.each(function(y){f.add(n.ua(y)),e||a.add(y)});var c=this.Zk;c.clear(),h.each(function(y){c.add(n.ua(y)),e&&a.add(y)}),t=n.cloneDeep(a.Ea());var m=null;return i&&(m===null&&(m={}),m.modelData=this.cloneDeep(this.modelData)),0<f.count&&(m===null&&(m={}),e?m.removedNodeKeys=f.Ea():m.insertedNodeKeys=f.Ea()),0<t.length&&(m===null&&(m={}),m.modifiedNodeData=t),0<c.count&&(m===null&&(m={}),e?m.insertedNodeKeys=c.Ea():m.removedNodeKeys=c.Ea()),c.clear(),f.clear(),m},rt.prototype.cloneDeep=function(t){return Jh(this,t,!0)};function Jh(t,e,n,i,r,a){function h(y,S){g?(y.__gohashid===void 0&&a.push(y),i.set(y,S)):(y=Ms++,i.set(y,S),r.set(y,e))}if(!mt(e))return e;a||(a=[]);var g=Object.isExtensible(e);if(i||(i=new ct),g){var f=i.get(e);if(f)return f}else for(r||(r=new ct),f=r.iterator;f.next();){var c=f.key;if(f.value===e&&(c=i.get(c)))return c}if(Array.isArray(e)){f=[],h(e,f);for(var m=0;m<e.length;m++)f.push(Jh(t,e[m],!1,i,r,a))}else if(e instanceof C||e instanceof dt||e instanceof G||e instanceof At||e instanceof ht)f=e.copy(),h(e,f);else{if(e instanceof Et||e instanceof W||e instanceof $)return e;if(e instanceof tt)f=new tt().addAll(Jh(t,e.Ea(),!1,i,r,a)),h(e,f);else if(e instanceof Z)f=new Z().addAll(Jh(t,e.Ea(),!1,i,r,a)),h(e,f);else if(e instanceof ct)f=new ct().addAll(Jh(t,e.Ea(),!1,i,r,a)),h(e,f);else if(e instanceof Date)f=new Date(e.getTime()),h(e,f);else if(e instanceof RegExp)f=new RegExp(e),h(e,f),f.lastIndex=e.lastIndex;else if(typeof e.copy=="function")f=e.copy(),h(e,f);else for(m in f={},h(e,f),e)m!=="__gohashid"&&(f[m]=Jh(t,e[m],!1,i,r,a))}return n&&a.forEach(function(y){delete y.__gohashid}),f}l=rt.prototype,l.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},l.am=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},l.Io=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function k2(t,e){e=e.modelData,mt(e)&&(t.Ll(e),t.modelData=e)}l.vv=function(){var t=this.modelData,e=!1,n;for(n in t)if(!T2(n,t[n])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+av(this,this.modelData)),t+`,
  "nodeDataArray": `+Es(this,this.nodeDataArray,!0)},l.Uu=function(t){k2(this,t),t=t.nodeDataArray,Ut(t)&&(this.Ll(t),this.nodeDataArray=t)};function N2(t,e){function n(r,a){if((a=a.part)&&(a=a.data,r!==a)){var h=i.get(r);h===null?(h=new Z,h.add(a),i.add(r,h)):h.add(a)}}var i=t.kh;i===null&&(i=new ct,e.changes.each(function(r){if(r.diagram!==null){var a=r.change;a===Zt?(r=r.object.panel)&&(a=r.data)&&n(a,r):(a===xe||a===Fe)&&(r=r.object,(a=r.itemArray)&&n(a,r))}}),t.kh=i)}function C2(t,e){for(var n=new Z,i=0;i<t.nodeDataArray.length;i++){var r=t.nodeDataArray[i];Oc(t,e,r,r,n)}return n}function Oc(t,e,n,i,r){if(Array.isArray(n))for(var a=0;a<n.length;a++){var h=n[a];if(h===e)return r.add(i),!0;if(Oc(t,e,h,i,r))return!0}else if(mt(n)&&Object.getPrototypeOf(n)===Object.prototype)for(a in n){if(h=n[a],h===e)return r.add(i),!0;if(Oc(t,e,h,i,r))return!0}return!1}l.tv=function(t,e){var n=this,i=!1,r=new Z,a=new Z,h=new Z,g=this.kh;t.changes.each(function(m){m.model===n&&(m.modelChange==="nodeDataArray"?m.change===xe?r.add(m.newValue):m.change===Fe&&h.add(m.oldValue):n.lb(m.object)?a.add(m.object):m.change!==Zt||n.modelData!==m.object&&m.propertyName!=="modelData"?m.object!==null&&(g&&g.contains(m.object)?g.get(m.object).each(function(y){n.lb(y)&&a.add(y)}):m.object instanceof rt||n.ki()&&n.Cc(m.object)||C2(n,m.object).each(function(y){a.add(y)})):i=!0)});var f=this.Xk;f.clear(),r.each(function(m){f.add(n.ua(m)),e||a.add(m)});var c=this.Zk;return c.clear(),h.each(function(m){c.add(n.ua(m)),e&&a.add(m)}),t="",i&&(t+=`,
  "modelData": `+av(this,this.modelData)),0<f.count&&(t+=(e?this.Cv:this.Av)+Es(this,f.Ea(),!0)),0<a.count&&(t+=this.Px+Es(this,a.Ea(),!0)),0<c.count&&(t+=(e?this.Av:this.Cv)+Es(this,c.Ea(),!0)),c.clear(),f.clear(),t},l.Ho=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&B("applyIncrementalJson cannot change Model properties"),k2(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new ct;if(Array.isArray(n))for(var r=0;r<n.length;r++){var a=n[r],h=this.ua(a);h!=null&&i.set(h,a)}if(Array.isArray(e))for(r=e.length,a=0;a<r;a++){h=e[a];var g=this.dc(h);g===null&&(g=(g=i.get(h))?g:this.copyNodeData({}),this.Sl(g,h),this.lf(g))}if(Array.isArray(n)){for(e=n.length,i=0;i<e;i++)if(r=n[i],a=this.ua(r),a=this.dc(a),a!==null){for(var f in r)f==="__gohashid"||f===this.nodeKeyProperty||this.Nj()&&f===this.nodeIsGroupProperty||this.setDataProperty(a,f,r[f]);this.Tl(r,a)}}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,f=0;f<n;f++)e=this.dc(t[f]),e!==null&&this.Kl(e)},l.Jx=function(t,e){t.change!==so&&B("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Ye?(e===void 0&&(e=Xg(this,this)),N2(this,n),t=this.tv(n,t.propertyName==="FinishedUndo"),this.kh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.am()+t+"}"):'{ "incremental": 0 }'},l.fA=function(t,e){return this.Jx(t,e)},l.Qo=function(t){return t===void 0&&(t=Xg(this,this)),'{ "class": '+this.quote(t)+this.am()+this.vv()+"}"},l.toJSON=function(t){return this.Qo(t)},l.Dw=function(t){var e=null;if(typeof t=="string")try{e=U.JSON.parse(t)}catch{}else typeof t=="object"?e=t:B("Unable to modify a Model from: "+t);var n=e.incremental;typeof n!="number"&&B("Unable to apply non-incremental changes to Model: "+t),n!==0&&(this.Da("applyIncrementalJson"),this.Ho(e),this.eb("applyIncrementalJson"))},l.qy=function(t){return this.Dw(t)},rt.constructGraphLinksModel=function(){return new rt},l=rt.prototype,l.Ll=function(t){if(Ut(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(mt(i)){var r=n;i=this.Ll(i),Array.isArray(t)?t[r]=i:B("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(mt(t)){for(e in t)if(n=t[e],mt(n)&&(n=this.Ll(n),t[e]=n,e==="points"&&Array.isArray(n))){for(r=n.length%2===0,i=0;i<n.length;i++)if(typeof n[i]!="number"){r=!1;break}if(r){for(r=new tt,i=0;i<n.length/2;i++)r.add(new C(n[2*i],n[2*i+1]));r.freeze(),t[e]=r}}return FN(t)}return t},l.bm=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.bm(t.valueOf()):Ut(t)?Es(this,t):mt(t)?av(this,t):typeof t=="function"?"null":t.toString()};function Es(t,e,n){n===void 0&&(n=!1);var i=e.length;if(0>=i)return"[]";var r=new Uo;r.add("["),n&&1<i&&r.add(`
`);for(var a=0;a<i;a++){var h=e[a];h!==void 0&&(0<a&&(r.add(","),n&&r.add(`
`)),r.add(t.bm(h)))}return n&&1<i&&r.add(`
`),r.add("]"),r.toString()}function T2(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function Mn(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function av(t,e){var n=e;if(n instanceof C)e={class:"go.Point",x:Mn(n.x),y:Mn(n.y)};else if(n instanceof dt)e={class:"go.Size",width:Mn(n.width),height:Mn(n.height)};else if(n instanceof G)e={class:"go.Rect",x:Mn(n.x),y:Mn(n.y),width:Mn(n.width),height:Mn(n.height)};else if(n instanceof At)e={class:"go.Margin",top:Mn(n.top),right:Mn(n.right),bottom:Mn(n.bottom),left:Mn(n.left)};else if(n instanceof ht)n.pb()?e={class:"go.Spot",x:Mn(n.x),y:Mn(n.y),offsetX:Mn(n.offsetX),offsetY:Mn(n.offsetY)}:e={class:"go.Spot",enum:n.toString()};else if(n instanceof Et){if(e={class:"go.Brush",type:n.type.name},n.type===Zr?e.color=n.color:(n.type===Lr||n.type===ri)&&(e.start=n.start,e.end=n.end,n.type===ri&&(n.startRadius!==0&&(e.startRadius=Mn(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=Mn(n.endRadius)))),n.colorStops!==null){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof W?(e={class:"go.Geometry",type:n.type.name},n.startX!==0&&(e.startX=Mn(n.startX)),n.startY!==0&&(e.startY=Mn(n.startY)),n.endX!==0&&(e.endX=Mn(n.endX)),n.endY!==0&&(e.endY=Mn(n.endY)),n.spot1.C(nn)||(e.spot1=n.spot1),n.spot2.C(Xo)||(e.spot2=n.spot2),n.type===W.m&&(e.path=W.ga(n))):n instanceof $&&(e={class:"go.EnumValue",classType:Xg(t,n.classType),name:n.name});i="{",n=!0;for(var r in e){var a=le(e,r);if(!T2(r,a))if(n?n=!1:i+=",",i+=t.quote(r)+":",r==="points"&&a instanceof tt){var h="[";for(a=a.iterator;a.next();){var g=a.value;1<h.length&&(h+=","),h+=t.bm(g.x),h+=",",h+=t.bm(g.y)}h+="]",i+=h}else i+=t.bm(a)}return i+"}"}function kn(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function FN(t){if(typeof t!="object")return t;var e=t.class||"";if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var n=t;if(e==="Point")n=new C(kn(t.x),kn(t.y));else if(e==="Size")n=new dt(kn(t.width),kn(t.height));else if(e==="Rect")n=new G(kn(t.x),kn(t.y),kn(t.width),kn(t.height));else if(e==="Margin")n=new At(kn(t.top),kn(t.right),kn(t.bottom),kn(t.left));else if(e==="Spot")typeof t.enum=="string"?n=r0(t.enum):n=new ht(kn(t.x),kn(t.y),kn(t.offsetX),kn(t.offsetY));else if(e==="Brush"){if(n=new Et,n.type=Yi(Et,t.type),typeof t.color=="string"&&(n.color=t.color),t.start instanceof ht&&(n.start=t.start),t.end instanceof ht&&(n.end=t.end),typeof t.startRadius=="number"&&(n.startRadius=kn(t.startRadius)),typeof t.endRadius=="number"&&(n.endRadius=kn(t.endRadius)),t=t.colorStops,mt(t))for(var i in t)n.addColorStop(parseFloat(i),t[i])}else e==="Geometry"?(n=null,typeof t.path=="string"?n=W.parse(t.path):n=new W,n.type=Yi(W,t.type),typeof t.startX=="number"&&(n.startX=kn(t.startX)),typeof t.startY=="number"&&(n.startY=kn(t.startY)),typeof t.endX=="number"&&(n.endX=kn(t.endX)),typeof t.endY=="number"&&(n.endY=kn(t.endY)),t.spot1 instanceof ht&&(n.spot1=t.spot1),t.spot2 instanceof ht&&(n.spot2=t.spot2)):e==="EnumValue"&&(i=t.classType,i.indexOf("go.")===0&&(i=i.substr(3)),i=hv(i),typeof i=="function"&&(n=Yi(i,t.name)));return n}l.Ug=function(t){return this.ot.add(t),this},l.ak=function(t){this.ot.remove(t)},l.Cr=function(t){this.skipsUndoManager||this.undoManager.Fu(t);for(var e=this.ot,n=e.length,i=0;i<n;i++)e.K(i)(t)},l.bb=function(t,e,n,i,r,a,h){pe(this,"",t,e,n,i,r,a,h)},l.g=function(t,e,n,i,r){pe(this,"",Zt,t,this,e,n,i,r)},l.fs=function(t,e,n,i,r,a){pe(this,"",Zt,e,t,n,i,r,a)};function pe(t,e,n,i,r,a,h,g,f){g===void 0&&(g=null),f===void 0&&(f=null);var c=new bt;c.model=t,c.change=n,c.modelChange=e,c.propertyName=i,c.object=r,c.oldValue=a,c.oldParam=g,c.newValue=h,c.newParam=f,t.Cr(c)}rt.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===Zt){var n=t.object,i=t.propertyName,r=t.I(e);i===this.nodeKeyProperty&&this.lb(n)&&(e=t.I(!e),e!==void 0&&this.kb.remove(e),r!==void 0&&this.kb.add(r,n)),Wt(n,i,r)}else t.change===xe?(n=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,mt(t)&&typeof n=="number"&&(i=this.ua(t),e?(this.Mc[n]===t&&No(this.Mc,n),i!==void 0&&this.kb.remove(i)):(this.Mc[n]!==t&&Bn(this.Mc,n,t),i!==void 0&&this.kb.add(i,t)))):t.modelChange===""?((i=t.object)&&!Ut(i)&&t.propertyName&&(i=le(t.object,t.propertyName)),Ut(i)&&typeof n=="number"&&(t=t.newValue,e?No(i,n):Bn(i,n,t))):B("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Fe?(n=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,mt(t)&&typeof n=="number"&&(i=this.ua(t),e?(this.Mc[n]!==t&&Bn(this.Mc,n,t),i!==void 0&&this.kb.add(i,t)):(this.Mc[n]===t&&No(this.Mc,n),i!==void 0&&this.kb.remove(i)))):t.modelChange===""?((i=t.object)&&!Ut(i)&&t.propertyName&&(i=le(t.object,t.propertyName)),Ut(i)&&typeof n=="number"&&(t=t.oldValue,e?Bn(i,n,t):No(i,n))):B("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==so&&B("unknown ChangedEvent: "+t.toString())},rt.prototype.Da=function(t){return this.undoManager.Da(t)},rt.prototype.eb=function(t){return this.undoManager.eb(t)},rt.prototype.Bf=function(){return this.undoManager.Bf()},rt.prototype.commit=function(t,e){e===void 0&&(e="");var n=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.eb(e):this.undoManager.Bf(),this.skipsUndoManager=n}},l=rt.prototype,l.Ka=function(t,e){e===void 0&&(e=""),pe(this,"SourceChanged",so,e,t,null,null)},l.ua=function(t){if(t!==null){var e=this.Mh;if(e!==""&&(e=le(t,e),e!==void 0)){if(Is(e))return e;B("Key value for node data "+t+" is not a number or a string: "+e)}}},l.Sl=function(t,e){if(t!==null){var n=this.Mh;if(n!=="")if(this.lb(t)){var i=le(t,n);i!==e&&this.dc(e)===null&&(Wt(t,n,e),i!==void 0&&this.kb.remove(i),this.kb.add(e,t),pe(this,"nodeKey",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n),this.Mo(i,e))}else Wt(t,n,e)}};function Is(t){return typeof t=="number"||typeof t=="string"}l.lb=function(t){var e=this.ua(t);return e===void 0?!1:this.kb.I(e)===t},l.dc=function(t){return t===null&&B("Model.findNodeDataForKey:key must not be null"),t!==void 0&&Is(t)?this.kb.I(t):null},l.Mu=function(t){if(t!==null){var e=this.Mh;if(e!==""){var n=this.ua(t);if(n===void 0||this.kb.contains(n)){var i=this.Rk;if(i!==null&&(n=i(this,t),n!=null&&!this.kb.contains(n))){Wt(t,e,n);return}if(typeof n=="string"){for(i=2;this.kb.contains(n+i);)i++;Wt(t,e,n+i)}else if(n===void 0||typeof n=="number"){for(n=-this.kb.count-1;this.kb.contains(n);)n--;Wt(t,e,n)}}}}},l.lf=function(t){t!==null&&(ba(t),this.lb(t)||F2(this,t,!0))};function F2(t,e,n){var i=t.ua(e);(i===void 0||t.kb.I(i)!==e)&&(t.Mu(e),i=t.ua(e),i===void 0&&B("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(i,e),i=null,n&&(i=t.Mc.length,Bn(t.Mc,i,e)),pe(t,"nodeDataArray",xe,"nodeDataArray",t,null,e,null,i),t.Nl(e),t.Ml(e))}l.my=function(t){if(Ut(t))for(var e=t.length,n=0;n<e;n++)this.lf(t[n]);else for(t=t.iterator;t.next();)this.lf(t.value)},l.Kl=function(t){t!==null&&D2(this,t,!0)};function D2(t,e,n){var i=t.ua(e);if(i!==void 0&&t.kb.remove(i),i=null,n){t:if(n=t.Mc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var r=0;r<i;r++)if(n[r]===e){i=r;break t}i=-1}if(0>i)return;No(t.Mc,i)}pe(t,"nodeDataArray",Fe,"nodeDataArray",t,e,null,i,null),t.To(e)}l.Uz=function(t){if(Ut(t))for(var e=t.length,n=0;n<e;n++)this.Kl(t[n]);else for(t=t.iterator;t.next();)this.Kl(t.value)},l.Hz=function(t){if(t!==this.nodeDataArray&&Ut(t)){var e=this.Zk;e.clear(),e.addAll(this.kb.iteratorKeys);var n=this.Xk;n.clear();for(var i=t.length,r=0;r<i;r++){var a=t[r],h=this.ua(a);if(h!==void 0){n.add(h);var g=this.dc(h);g!==a&&(g!==null?(this.ho(g,a),this.Tl(a,g)):(a=this.cloneDeep(a),this.Sl(a,h),this.lf(a)))}else h=this.cloneDeep(a),this.lf(h),n.add(this.ua(h))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.dc(i))&&this.Kl(i);e.clear(),n.clear()}},l.Mo=function(t,e){e!==void 0&&(t=Ug(this,t),t instanceof Z&&this.Lf.add(e,t))},l.ov=function(){},l.Nl=function(){},l.Ml=function(){},l.To=function(){};function fo(t,e,n){if(e!==void 0){var i=t.Lf.I(e);i===null&&(i=new Z,t.Lf.add(e,i)),i.add(n)}}function co(t,e,n){if(e!==void 0){var i=t.Lf.I(e);i instanceof Z&&(n==null?t.Lf.remove(e):(i.remove(n),i.count===0&&t.Lf.remove(e)))}}function Ug(t,e){return e===void 0?null:(t=t.Lf.I(e),t instanceof Z?t:null)}l.xy=function(t){t===void 0?this.Lf.clear():this.Lf.remove(t)},rt.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.pk;return t=e!==null?e(t,this):Ec(this,t,!0),mt(t)&&Oe(t),t};function Ec(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var r=Ec(t,e[n],t.copiesArrayObjects);i.push(r)}return Oe(i),i}if(n&&mt(e)){n=(n=e.constructor)?new n:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(i in e)if(i==="__gohashid")n.__gohashid=void 0;else if(i===r)n[r]=void 0;else{var a=le(e,i),h=Xg(t,a);h==="GraphObject"||h==="Diagram"||h==="Layer"||h==="RowColumnDefinition"||h==="AnimationManager"||h==="Tool"||h==="CommandHandler"||h==="Layout"||h==="InputEvent"||h==="DiagramEvent"||a instanceof rt||a instanceof se||a instanceof Ye||a instanceof bt||(a=Ec(t,a,!1)),Wt(n,i,a)}return Oe(n),n}return e instanceof C||e instanceof dt||e instanceof G||e instanceof ht||e instanceof At?e.copy():e}rt.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty){this.Sl(t,n);return}if(e===this.nodeCategoryProperty){this.Rl(t,n);return}}else!j2&&t instanceof st&&(j2=!0,Lt('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Lt("  Is that really your intent?"));var i=le(t,e);i!==n&&(Wt(t,e,n),this.fs(t,e,i,n))},l=rt.prototype,l.set=function(t,e,n){this.setDataProperty(t,e,n)},l.ho=function(t,e){if(e){var n=this.lb(t),i;for(i in e)i==="__gohashid"||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},l.iy=function(t,e){this.Qr(t,-1,e)},l.Qr=function(t,e,n){0>e&&(e=t.length),Bn(t,e,n),pe(this,"",xe,"",t,null,n,null,e)},l.Xu=function(t,e){e===void 0&&(e=-1),t===this.Mc&&B("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var n=t[e];No(t,e),pe(this,"",Fe,"",t,n,null,e,null)},l.uo=function(t){if(t===null)return"";var e=this.gj;if(e===""||(e=le(t,e),e===void 0))return"";if(typeof e=="string")return e;B("getCategoryForNodeData found a non-string category for "+t+": "+e)},l.Rl=function(t,e){if(t!==null){var n=this.gj;if(n!=="")if(this.lb(t)){var i=le(t,n);i===void 0&&(i=""),i!==e&&(Wt(t,n,e),pe(this,"nodeCategory",Zt,n,t,i,e))}else Wt(t,n,e)}},l.Tl=function(t,e){this.Rl(e,this.uo(t))},l.Bl=function(){return!1},l.Nj=function(){return!1},l.ki=function(){return!1},l.Vr=function(){return!1},l.Oj=function(){return!1};function lv(){return new rt}function Xg(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return Xg(t,e.constructor);return typeof e}function hv(t){return $i[t]?$i[t]:U.go!==void 0&&U.go[t]?U.go[t]:null}function le(t,e){if(!t||!e)return null;try{if(typeof e=="function")var n=e(t);else typeof t.getAttribute=="function"?(n=t.getAttribute(e),n===null&&(n=void 0)):n=t[e]}catch{}return n}function Wt(t,e,n){if(t&&e)try{typeof e=="function"?e(t,n):typeof t.setAttribute=="function"?t.setAttribute(e,n):t[e]=n}catch{}}I.Object.defineProperties(rt.prototype,{name:{get:function(){return this.va},set:function(t){var e=this.va;e!==t&&(this.va=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Am},set:function(t){var e=this.Am;e!==t&&(this.Am=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ka(t))}},undoManager:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&(e!==null&&e.yx(this),this.m=t,t!==null&&t.Bw(this))}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t}},nodeKeyProperty:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(t===""&&B("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&B("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Mh=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e!==t&&(this.Rk=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Mc},set:function(t){var e=this.Mc;if(e!==t){this.kb.clear(),this.ov();for(var n=t.length,i=0;i<n;i++){var r=t[i];mt(r)||B("Model.nodeDataArray must only contain Objects, not: "+r),ba(r)}for(this.Mc=t,i=new tt,r=0;r<n;r++){var a=t[r],h=this.ua(a);h===void 0||this.kb.I(h)!==null?i.add(a):this.kb.add(h,a)}for(i=i.iterator;i.next();)r=i.value,this.Mu(r),a=this.ua(r),a!==void 0&&this.kb.add(a,r);for(pe(this,"nodeDataArray",Zt,"nodeDataArray",this,e,t),e=0;e<n;e++)i=t[e],this.Nl(i),this.Ml(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.sm},set:function(t){var e=this.sm;e!==t&&(this.sm=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.rm},set:function(t){var e=this.rm;e!==t&&(this.rm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.um},set:function(t){var e=this.um;e!==t&&(this.um=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.fm},set:function(t){var e=this.fm;e!==t&&(this.fm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),rt.prototype.setCategoryForNodeData=rt.prototype.Rl,rt.prototype.getCategoryForNodeData=rt.prototype.uo,rt.prototype.removeArrayItem=rt.prototype.Xu,rt.prototype.insertArrayItem=rt.prototype.Qr,rt.prototype.addArrayItem=rt.prototype.iy,rt.prototype.assignAllDataProperties=rt.prototype.ho,rt.prototype.set=rt.prototype.set,rt.prototype.clearUnresolvedReferences=rt.prototype.xy,rt.prototype.mergeNodeDataArray=rt.prototype.Hz,rt.prototype.removeNodeDataCollection=rt.prototype.Uz,rt.prototype.removeNodeData=rt.prototype.Kl,rt.prototype.addNodeDataCollection=rt.prototype.my,rt.prototype.addNodeData=rt.prototype.lf,rt.prototype.makeNodeDataKeyUnique=rt.prototype.Mu,rt.prototype.findNodeDataForKey=rt.prototype.dc,rt.prototype.containsNodeData=rt.prototype.lb,rt.prototype.setKeyForNodeData=rt.prototype.Sl,rt.prototype.getKeyForNodeData=rt.prototype.ua,rt.prototype.updateTargetBindings=rt.prototype.Ka,rt.prototype.commit=rt.prototype.commit,rt.prototype.rollbackTransaction=rt.prototype.Bf,rt.prototype.commitTransaction=rt.prototype.eb,rt.prototype.startTransaction=rt.prototype.Da,rt.prototype.raiseDataChanged=rt.prototype.fs,rt.prototype.raiseChanged=rt.prototype.g,rt.prototype.raiseChangedEvent=rt.prototype.bb,rt.prototype.removeChangedListener=rt.prototype.ak,rt.prototype.addChangedListener=rt.prototype.Ug,rt.prototype.writeJsonValue=rt.prototype.bm,rt.prototype.replaceJsonObjects=rt.prototype.Ll,rt.prototype.applyIncrementalJSON=rt.prototype.qy,rt.prototype.applyIncrementalJson=rt.prototype.Dw,rt.prototype.toJSON=rt.prototype.toJSON,rt.prototype.toJson=rt.prototype.Qo,rt.prototype.toIncrementalJSON=rt.prototype.fA,rt.prototype.toIncrementalJson=rt.prototype.Jx,rt.prototype.toIncrementalData=rt.prototype.eA,rt.prototype.clear=rt.prototype.clear;var j2=!1,$i={};rt.className="Model",rt.fromJSON=rt.fromJson=function(t,e){e===void 0&&(e=null);var n=null;if(typeof t=="string")try{n=U.JSON.parse(t)}catch{}else typeof t=="object"?n=t:B("Unable to construct a Model from: "+t);if(e===null){t=null;var i=n.class;if(typeof i=="string")try{var r=null;i.indexOf("go.")===0?(i=i.substr(3),r=hv(i)):(r=hv(i),r===null&&(r=U[i])),typeof r=="function"&&(t=new r)}catch{}t===null||t instanceof rt?e=t:B("Unable to construct a Model of declared class: "+n.class)}return e===null&&(e=rt.constructGraphLinksModel()),e.Io(n),e.Uu(n),e},rt.safePropertyValue=le,rt.safePropertySet=Wt,$i.Brush=Et,$i.ChangedEvent=bt,$i.Geometry=W,$i.Margin=At,$i.Panel=X,$i.Point=C,$i.Rect=G,$i.Size=dt,$i.Spot=ht,$i.Transaction=Ye,$i.UndoManager=se;function ue(t,e,n,i){Oe(this),this._isFrozen=!1,t===void 0&&(t=""),e===void 0&&(e=t),n===void 0&&(n=null),this.j=-1,this.sd=null,this.ml=t,this.ll=this.Wn=0,this.Zq=null,this.cn=!1,this.hl=e,this.qm=n,i===void 0?(this.Uk=E2,this.jk=null):(this.Uk=_g,this.jk=i),this.Vs=new Z}ue.prototype.copy=function(){var t=new ue;return t.ml=this.ml,t.Wn=this.Wn,t.ll=this.ll,t.Zq=this.Zq,t.cn=this.cn,t.hl=this.hl,t.qm=this.qm,t.Uk=this.Uk,t.jk=this.jk,t},l=ue.prototype,l.ob=function(t){t.classType===ue&&(this.mode=t)},l.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.ti!==-1?" "+this.ti:"")+" "+this.mode.name+")"},l.freeze=function(){return this._isFrozen=!0,this},l.ja=function(){return this._isFrozen=!1,this},l.px=function(t){return t===void 0&&(t=null),this.mode=_g,this.backConverter=t,this},l.Fo=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},l.Kz=function(){return this.sourceName=null,this.isToModel=!0,this};function O2(t,e,n){return t=t.sourceName,t===null||t===""?e:t==="/"?n.part:t==="."?n:t===".."?n.panel:e.fb(t)}l.pv=function(t,e,n){var i=this.hl;if(n===void 0||i===""||i===n){n=this.ml;var r=this.qm;if(r===null&&n==="")Lt("Binding error: target property is the empty string: "+this.toString());else{var a=e;if(i!==""&&(a=le(e,i)),a!==void 0)if(r===null)n!==""&&Wt(t,n,a);else try{if(n!==""){var h=r(a,t);Wt(t,n,h)}else r(a,t)}catch{}}}},l.Vo=function(t,e,n,i){if(this.Uk===_g){var r=this.ml;if(n===void 0||r===n){n=this.hl;var a=this.jk,h=t;if(r!==""&&(h=le(t,r)),h!==void 0&&!this.Vs.contains(t))try{this.Vs.add(t);var g=i!==null?i.diagram:null,f=g!==null?g.model:null;if(a===null){if(n!=="")f!==null?f.setDataProperty(e,n,h):Wt(e,n,h);else if(f!==null&&i!==null&&0<=i.itemIndex&&i.panel!==null&&Array.isArray(i.panel.itemArray)){var c=i.itemIndex,m=i.panel.itemArray;f.Xu(m,c),f.Qr(m,c,h)}}else try{if(n!==""){var y=a(h,e,f);f!==null?f.setDataProperty(e,n,y):Wt(e,n,y)}else{var S=a(h,e,f);if(S!==void 0&&f!==null&&i!==null&&0<=i.itemIndex&&i.panel!==null&&Array.isArray(i.panel.itemArray)){var x=i.itemIndex,P=i.panel.itemArray;f.Xu(P,x),f.Qr(P,x,S)}}}catch{}}finally{this.Vs.remove(t)}}}},I.Object.defineProperties(ue.prototype,{ti:{get:function(){return this.j},set:function(t){this._isFrozen&&ot(this),this.j=t}},targetProperty:{get:function(){return this.ml},set:function(t){this._isFrozen&&ot(this),this.ml=t}},sourceName:{get:function(){return this.Zq},set:function(t){this._isFrozen&&ot(this),this.Zq=t,t!==null&&(this.cn=!1)}},isToModel:{get:function(){return this.cn},set:function(t){this._isFrozen&&ot(this),this.cn=t}},sourceProperty:{get:function(){return this.hl},set:function(t){this._isFrozen&&ot(this),this.hl=t}},converter:{get:function(){return this.qm},set:function(t){this._isFrozen&&ot(this),this.qm=t}},backConverter:{get:function(){return this.jk},set:function(t){this._isFrozen&&ot(this),this.jk=t}},mode:{get:function(){return this.Uk},set:function(t){this._isFrozen&&ot(this),this.Uk=t}}}),ue.prototype.updateSource=ue.prototype.Vo,ue.prototype.updateTarget=ue.prototype.pv,ue.prototype.ofModel=ue.prototype.Kz,ue.prototype.ofObject=ue.prototype.Fo,ue.prototype.makeTwoWay=ue.prototype.px;var DN="Binding",E2=new $(ue,"OneWay",1),_g=new $(ue,"TwoWay",2);ue.className="Binding",ue.parseEnum=function(t,e){return function(n){return n=Yi(t,n),n===null?e:n}},ue.toString=Hn,ue.OneWay=E2,ue.TwoWay=_g;function kt(t,e,n){rt.call(this),this.zv=`,
  "insertedLinkKeys": `,this.Ox=`,
  "modifiedLinkData": `,this.Bv=`,
  "removedLinkKeys": `,this.ed=[],this.Rf=new Z,this.rb=new ct,this.Bh="",this.Li=this.nk=this.Sk=null,this.Ze="from",this.$e="to",this.aj=this.$i="",this.Zi="category",this.ce="",this.Yk="isGroup",this.ye="group",this.tm=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(Ut(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}O(kt,rt),kt.constructGraphLinksModel=rt.constructGraphLinksModel,kt.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.Bh=this.Bh,t.Sk=this.Sk,t.nk=this.nk,t.Ze=this.Ze,t.$e=this.$e,t.$i=this.$i,t.aj=this.aj,t.Zi=this.Zi,t.ce=this.ce,t.Yk=this.Yk,t.ye=this.ye,t.tm=this.tm},l=kt.prototype,l.clear=function(){rt.prototype.clear.call(this),this.ed=[],this.rb.clear(),this.Rf.clear()},l.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.Qo();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var n=t.length,i;for(i=0;i<n;i++){var r=t[i];e+=" "+this.ua(r)+":"+Hn(r)}for(e+=`
 link data:`,t=this.linkDataArray,n=t.length,i=0;i<n;i++)r=t[i],e+=" "+ai(this,r,!0)+"-->"+ai(this,r,!1)}return e},l.uv=function(t,e){this.linkKeyProperty===""&&B("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=rt.prototype.uv.call(this,t,e),i=this,r=new Z,a=new Z,h=new Z,g=this.kh;t.changes.each(function(m){m.model===i&&(m.modelChange==="linkDataArray"?m.change===xe?r.add(m.newValue):m.change===Fe&&h.add(m.oldValue):i.Cc(m.object)?a.add(m.object):m.object!==null&&(m.object!==null&&g&&g.contains(m.object)?g.get(m.object).each(function(y){i.Cc(y)&&a.add(y)}):m.object instanceof rt||i.lb(m.object)||I2(i,m.object).each(function(y){a.add(y)})))});var f=this.Xk;f.clear(),r.each(function(m){f.add(i.uc(m)),e||a.add(m)});var c=this.Zk;return c.clear(),h.each(function(m){c.add(i.uc(m)),e&&a.add(m)}),t=i.cloneDeep(a.Ea()),0<f.count&&(n===null&&(n={}),e?n.removedLinkKeys=f.Ea():n.insertedLinkKeys=f.Ea()),0<t.length&&(n===null&&(n={}),n.modifiedLinkData=t),0<c.count&&(n===null&&(n={}),e?n.insertedLinkKeys=c.Ea():n.removedLinkKeys=c.Ea()),c.clear(),f.clear(),n},l.am=function(){var t=rt.prototype.am.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},l.Io=function(t){rt.prototype.Io.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},l.vv=function(){var t=rt.prototype.vv.call(this),e=`,
  "linkDataArray": `+Es(this,this.linkDataArray,!0);return t+e},l.Uu=function(t){rt.prototype.Uu.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Ll(t),this.linkDataArray=t)};function I2(t,e){for(var n=new Z,i=0;i<t.linkDataArray.length;i++){var r=t.linkDataArray[i];Oc(t,e,r,r,n)}return n}l.tv=function(t,e){this.linkKeyProperty===""&&B("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=rt.prototype.tv.call(this,t,e),i=this,r=new Z,a=new Z,h=new Z,g=this.kh;t.changes.each(function(m){m.model===i&&(m.modelChange==="linkDataArray"?m.change===xe?r.add(m.newValue):m.change===Fe&&h.add(m.oldValue):i.Cc(m.object)?a.add(m.object):m.object!==null&&(m.object!==null&&g&&g.contains(m.object)?g.get(m.object).each(function(y){i.Cc(y)&&a.add(y)}):m.object instanceof rt||i.lb(m.object)||I2(i,m.object).each(function(y){a.add(y)})))});var f=this.Xk;f.clear(),r.each(function(m){f.add(i.uc(m)),e||a.add(m)});var c=this.Zk;return c.clear(),h.each(function(m){c.add(i.uc(m)),e&&a.add(m)}),t=n,0<f.count&&(t+=(e?this.Bv:this.zv)+Es(this,f.Ea(),!0)),0<a.count&&(t+=this.Ox+Es(this,a.Ea(),!0)),0<c.count&&(t+=(e?this.zv:this.Bv)+Es(this,c.Ea(),!0)),c.clear(),f.clear(),t},l.Ho=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&B("applyIncrementalJson cannot change Model properties"),rt.prototype.Ho.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var r=e[i],a=this.Zg(r);a===null&&(a=this.no({}),this.ks(a,r),this.Yh(a))}if(e=t.modifiedLinkData,Array.isArray(e)){for(n=e.length,i=0;i<n;i++)if(r=e[i],a=this.uc(r),a=this.Zg(a),a!==null){for(var h in r)h!=="__gohashid"&&h!==this.linkKeyProperty&&this.setDataProperty(a,h,r[h]);B2(this,r,a)}}if(t=t.removedLinkKeys,Array.isArray(t))for(h=t.length,e=0;e<h;e++)n=this.Zg(t[e]),n!==null&&this.Jl(n)},kt.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===Zt){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.Cc(n)){var r=t.I(e);e=t.I(!e),e!==void 0&&this.rb.remove(e),r!==void 0&&this.rb.add(r,n),Wt(n,i,r);return}}else if(t.change===xe){if(n=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,mt(t)&&typeof n=="number"&&(i=this.uc(t),e?(this.Rf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),i!==void 0&&this.rb.remove(i)):(this.Rf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),i!==void 0&&this.rb.add(i,t)));return}if(t.modelChange==="linkLabelKeys"){i=this.vf(t.object),Array.isArray(i)&&typeof n=="number"&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue));return}}else if(t.change===Fe){if(n=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,mt(t)&&typeof n=="number"&&(i=this.uc(t),e?(this.Rf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),i!==void 0&&this.rb.add(i,t)):(this.Rf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),i!==void 0&&this.rb.remove(i)));return}if(t.modelChange==="linkLabelKeys"){i=this.vf(t.object),Array.isArray(i)&&typeof n=="number"&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)));return}}rt.prototype.changeState.call(this,t,e)}},l=kt.prototype,l.Dl=function(t){if(t!==void 0){var e=this.Li;if(e!==null){var n=this.dc(t);n===null&&(n=this.copyNodeData(e),Wt(n,this.nodeKeyProperty,t),this.lf(n))}return t}},l.$w=function(t){return ai(this,t,!0)},l.cv=function(t,e){Zh(this,t,e,!0)},l.ex=function(t){return ai(this,t,!1)},l.gv=function(t,e){Zh(this,t,e,!1)};function ai(t,e,n){if(e!==null&&(t=n?t.Ze:t.$e,t!==""&&(t=le(e,t),t!==void 0))){if(Is(t))return t;B((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Zh(t,e,n,i){if(n===null&&(n=void 0),e!==null){var r=i?t.Ze:t.$e;if(r!=="")if(n=t.Dl(n),t.Cc(e)){var a=le(e,r);a!==n&&(co(t,a,e),Wt(e,r,n),t.dc(n)===null&&fo(t,n,e),pe(t,i?"linkFromKey":"linkToKey",Zt,r,e,a,n),typeof r=="string"&&t.Ka(e,r))}else Wt(e,r,n)}}l.ax=function(t){return Ic(this,t,!0)},l.dv=function(t,e){Qh(this,t,e,!0)},l.gx=function(t){return Ic(this,t,!1)},l.hv=function(t,e){Qh(this,t,e,!1)};function Ic(t,e,n){return e===null||(t=n?t.$i:t.aj,t==="")?"":(e=le(e,t),e===void 0?"":e)}function Qh(t,e,n,i){if(e!==null){var r=i?t.$i:t.aj;if(r!=="")if(t.Cc(e)){var a=le(e,r);a===void 0&&(a=""),a!==n&&(Wt(e,r,n),pe(t,i?"linkFromPortId":"linkToPortId",Zt,r,e,a,n),typeof r=="string"&&t.Ka(e,r))}else Wt(e,r,n)}}l.vf=function(t){if(t===null)return Ac;var e=this.ce;return e===""?Ac:(t=le(t,e),t===void 0?Ac:t)},l.ls=function(t,e){if(t!==null){var n=this.ce;if(n!=="")if(this.Cc(t)){var i=le(t,n);if(i===void 0&&(i=Ac),i!==e){if(Array.isArray(i))for(var r=i.length,a=0;a<r;a++)co(this,i[a],t);for(Wt(t,n,e),r=e.length,a=0;a<r;a++){var h=e[a];this.dc(h)===null&&fo(this,h,t)}pe(this,"linkLabelKeys",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n)}}else Wt(t,n,e)}},l.hu=function(t,e){if(e!=null&&t!==null){var n=this.ce;if(n!==""){var i=le(t,n);if(i===void 0)n=[],n.push(e),this.ls(t,n);else if(Array.isArray(i)){var r=i.indexOf(e);0<=r||(r=i.length,i.push(e),this.Cc(t)&&(this.dc(e)===null&&fo(this,e,t),pe(this,"linkLabelKeys",xe,n,t,null,e,null,r)))}else B(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},l.xx=function(t,e){if(e!=null&&t!==null){var n=this.ce;if(n!==""){var i=le(t,n);if(Array.isArray(i)){var r=i.indexOf(e);0>r||(i.splice(r,1),this.Cc(t)&&(co(this,e,t),pe(this,"linkLabelKeys",Fe,n,t,e,null,r,null)))}else i!==void 0&&B(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},l.uc=function(t){if(t!==null){var e=this.Bh;if(e!==""&&(e=le(t,e),e!==void 0)){if(Is(e))return e;B("Key value for link data "+t+" is not a number or a string: "+e)}}},l.ks=function(t,e){if(t!==null){var n=this.Bh;if(n!=="")if(this.Cc(t)){var i=le(t,n);i!==e&&this.Zg(e)===null&&(Wt(t,n,e),i!==void 0&&this.rb.remove(i),this.rb.add(e,t),pe(this,"linkKey",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else Wt(t,n,e)}},l.Zg=function(t){return t===null&&B("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&Is(t)?this.rb.I(t):null},l.$r=function(t){if(t!==null){var e=this.Bh;if(e!==""){var n=this.uc(t);if(n===void 0||this.rb.contains(n)){var i=this.Sk;if(i!==null&&(n=i(this,t),n!=null&&!this.rb.contains(n))){Wt(t,e,n);return}if(typeof n=="string"){for(i=2;this.rb.contains(n+i);)i++;Wt(t,e,n+i)}else if(n===void 0||typeof n=="number"){for(n=-this.rb.count-1;this.rb.contains(n);)n--;Wt(t,e,n)}}}}},l.Cc=function(t){return t===null?!1:this.Rf.contains(t)},l.Yh=function(t){t!==null&&(ba(t),this.Cc(t)||A2(this,t,!0))};function A2(t,e,n){if(t.linkKeyProperty!==""){var i=t.uc(e);if(i!==void 0&&t.rb.I(i)===e)return;t.$r(e),i=t.uc(e),i===void 0&&B("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.rb.add(i,e)}t.Rf.add(e),i=null,n&&(i=t.ed.length,t.ed.splice(i,0,e)),pe(t,"linkDataArray",xe,"linkDataArray",t,null,e,null,i),uv(t,e)}l.ly=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Yh(t[n]);else for(t=t.iterator;t.next();)this.Yh(t.value)},l.Jl=function(t){t!==null&&z2(this,t,!0)};function z2(t,e,n){t.Rf.remove(e);var i=t.uc(e);if(i!==void 0&&t.rb.remove(i),i=null,n){if(i=t.ed.indexOf(e),0>i)return;t.ed.splice(i,1)}if(pe(t,"linkDataArray",Fe,"linkDataArray",t,e,null,i,null),n=ai(t,e,!0),co(t,n,e),n=ai(t,e,!1),co(t,n,e),i=t.vf(e),Array.isArray(i))for(var r=i.length,a=0;a<r;a++)n=i[a],co(t,n,e)}l.Sz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Jl(t[n]);else for(t=t.iterator;t.next();)this.Jl(t.value)},l.Gz=function(t){if(this.linkKeyProperty===""&&B("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Ut(t)){var e=this.Zk;e.clear(),e.addAll(this.rb.iteratorKeys);var n=this.Xk;n.clear();for(var i=t.length,r=0;r<i;r++){var a=t[r],h=this.uc(a);if(h!==void 0){n.add(h);var g=this.Zg(h);g!==a&&(g!==null?(this.ho(g,a),B2(this,a,g)):(a=this.cloneDeep(a),this.ks(a,h),this.Yh(a)))}else h=this.cloneDeep(a),this.Yh(h),n.add(this.uc(h))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.Zg(i))&&this.Jl(i);e.clear(),n.clear()}};function uv(t,e){var n=ai(t,e,!0);n=t.Dl(n),t.dc(n)===null&&fo(t,n,e),n=ai(t,e,!1),n=t.Dl(n),t.dc(n)===null&&fo(t,n,e);var i=t.vf(e);if(Array.isArray(i))for(var r=i.length,a=0;a<r;a++)n=i[a],t.dc(n)===null&&fo(t,n,e)}l.no=function(t){if(t===null)return null;var e=this.nk;return t=e!==null?e(t,this):Ec(this,t,!0),mt(t)&&(Oe(t),this.Ze!==""&&Wt(t,this.Ze,void 0),this.$e!==""&&Wt(t,this.$e,void 0),this.ce!==""&&Wt(t,this.ce,[])),t},l.Ku=function(t){if(t===null)return!1;var e=this.Yk;return e===""?!1:!!le(t,e)},l.ah=function(t){if(t!==null){var e=this.ye;if(e!==""&&(e=le(t,e),e!==void 0)){if(Is(e))return e;B("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},l.Po=function(t,e){if(e===null&&(e=void 0),t!==null){var n=this.ye;if(n!=="")if(this.lb(t)){var i=le(t,n);i!==e&&(co(this,i,t),Wt(t,n,e),this.dc(e)===null&&fo(this,e,t),pe(this,"nodeGroupKey",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else Wt(t,n,e)}},kt.prototype.copyNodeData=function(t){return t===null?null:(t=rt.prototype.copyNodeData.call(this,t),this.Cj||this.ye===""||le(t,this.ye)===void 0||Wt(t,this.ye,void 0),t)},kt.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty){this.Sl(t,n);return}if(e===this.nodeCategoryProperty){this.Rl(t,n);return}if(e===this.nodeGroupKeyProperty){this.Po(t,n);return}}else if(this.Cc(t)){if(e===this.linkFromKeyProperty){Zh(this,t,n,!0);return}if(e===this.linkToKeyProperty){Zh(this,t,n,!1);return}if(e===this.linkFromPortIdProperty){Qh(this,t,n,!0);return}if(e===this.linkToPortIdProperty){Qh(this,t,n,!1);return}if(e===this.linkKeyProperty){this.ks(t,n);return}if(e===this.linkCategoryProperty){this.Oo(t,n);return}if(e===this.linkLabelKeysProperty){this.ls(t,n);return}}var i=le(t,e);i!==n&&(Wt(t,e,n),this.fs(t,e,i,n))},l=kt.prototype,l.ho=function(t,e){if(e){var n=this.lb(t),i=this.Cc(t),r;for(r in e)r==="__gohashid"||n&&r===this.nodeKeyProperty||n&&r===this.nodeIsGroupProperty&&le(t,r)===e[r]||i&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},l.Mo=function(t,e){rt.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e);for(n=this.Rf.iterator;n.next();){var i=n.value,r=t,a=e;if(ai(this,i,!0)===r){var h=this.Ze;Wt(i,h,a),pe(this,"linkFromKey",Zt,h,i,r,a),typeof h=="string"&&this.Ka(i,h)}if(ai(this,i,!1)===r&&(h=this.$e,Wt(i,h,a),pe(this,"linkToKey",Zt,h,i,r,a),typeof h=="string"&&this.Ka(i,h)),h=this.vf(i),Array.isArray(h))for(var g=h.length,f=this.ce,c=0;c<g;c++)h[c]===r&&(h[c]=a,pe(this,"linkLabelKeys",xe,f,i,r,a,c,c))}},l.Zu=function(t,e,n){if(this.ah(t)===e){var i=this.ye;Wt(t,i,n),pe(this,"nodeGroupKey",Zt,i,t,e,n),typeof i=="string"&&this.Ka(t,i)}},l.ov=function(){rt.prototype.ov.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)uv(this,t[n])},l.Nl=function(t){rt.prototype.Nl.call(this,t),t=this.ua(t);var e=Ug(this,t);if(e!==null){var n=Kt();for(e=e.iterator;e.next();){var i=e.value;if(this.lb(i)){if(this.ah(i)===t){var r=this.ye;pe(this,"nodeGroupKey",Zt,r,i,t,t),typeof r=="string"&&this.Ka(i,r),n.push(i)}}else if(ai(this,i,!0)===t&&(r=this.Ze,pe(this,"linkFromKey",Zt,r,i,t,t),typeof r=="string"&&this.Ka(i,r),n.push(i)),ai(this,i,!1)===t&&(r=this.$e,pe(this,"linkToKey",Zt,r,i,t,t),typeof r=="string"&&this.Ka(i,r),n.push(i)),r=this.vf(i),Array.isArray(r))for(var a=r.length,h=this.ce,g=0;g<a;g++)r[g]===t&&(pe(this,"linkLabelKeys",xe,h,i,t,t,g,g),n.push(i))}for(e=0;e<n.length;e++)co(this,t,n[e]);Xt(n)}},l.Ml=function(t){rt.prototype.Ml.call(this,t);var e=this.ah(t);this.dc(e)===null&&fo(this,e,t)},l.To=function(t){rt.prototype.To.call(this,t);var e=this.ah(t);co(this,e,t)},l.Mr=function(t){if(t===null)return"";var e=this.Zi;if(e===""||(e=le(t,e),e===void 0))return"";if(typeof e=="string")return e;B("getCategoryForLinkData found a non-string category for "+t+": "+e)},kt.prototype.getLinkCategoryForData=function(t){return this.Mr(t)},kt.prototype.Oo=function(t,e){if(t!==null){var n=this.Zi;if(n!=="")if(this.Cc(t)){var i=le(t,n);i===void 0&&(i=""),i!==e&&(Wt(t,n,e),pe(this,"linkCategory",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else Wt(t,n,e)}},kt.prototype.setLinkCategoryForData=function(t,e){this.Oo(t,e)},l=kt.prototype,l.Tl=function(t,e){rt.prototype.Tl.call(this,t,e),this.Po(e,this.ah(t))};function B2(t,e,n){t.Oo(n,t.Mr(e)),t.cv(n,t.$w(e)),t.gv(n,t.ex(e)),t.ls(n,t.vf(e)),t.dv(n,t.ax(e)),t.hv(n,t.gx(e))}l.Nj=function(){return!0},l.ki=function(){return!0},l.Vr=function(){return!0},l.Oj=function(){return!0},I.Object.defineProperties(kt.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Ze},set:function(t){var e=this.Ze;e!==t&&(this.Ze=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.$i},set:function(t){var e=this.$i;e!==t&&(this.$i=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.ce},set:function(t){var e=this.ce;e!==t&&(this.ce=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.ed},set:function(t){var e=this.ed;if(e!==t){this.rb.clear();for(var n=t.length,i=0;i<n;i++){var r=t[i];mt(r)||B("GraphLinksModel.linkDataArray must only contain Objects, not: "+r),ba(r)}if(this.ed=t,this.linkKeyProperty!==""){for(i=new tt,r=0;r<n;r++){var a=t[r],h=this.uc(a);h===void 0||this.rb.I(h)!==null?i.add(a):this.rb.add(h,a)}for(i=i.iterator;i.next();)r=i.value,this.$r(r),a=this.uc(r),a!==void 0&&this.rb.add(a,r)}for(i=new Z,r=0;r<n;r++)i.add(t[r]);for(this.Rf=i,pe(this,"linkDataArray",Zt,"linkDataArray",this,e,t),e=0;e<n;e++)uv(this,t[e])}}},linkKeyProperty:{get:function(){return this.Bh},set:function(t){var e=this.Bh;if(e!==t){this.Bh=t,this.rb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var r=this.linkDataArray[i],a=this.uc(r);a===void 0&&(this.$r(r),a=this.uc(r)),a!==void 0&&this.rb.add(a,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Sk},set:function(t){var e=this.Sk;e!==t&&(this.Sk=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.nk},set:function(t){var e=this.nk;e!==t&&(this.nk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e!==t&&(this.Yk=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ye},set:function(t){var e=this.ye;e!==t&&(this.ye=t,this.g("nodeGroupKeyProperty",e,t))}},Cj:{get:function(){return this.tm},set:function(t){this.tm!==t&&(this.tm=t)}},linkCategoryProperty:{get:function(){return this.Zi},set:function(t){var e=this.Zi;e!==t&&(this.Zi=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),kt.prototype.setCategoryForLinkData=kt.prototype.Oo,kt.prototype.getCategoryForLinkData=kt.prototype.Mr,kt.prototype.assignAllDataProperties=kt.prototype.ho,kt.prototype.setGroupKeyForNodeData=kt.prototype.Po,kt.prototype.getGroupKeyForNodeData=kt.prototype.ah,kt.prototype.isGroupForNodeData=kt.prototype.Ku,kt.prototype.copyLinkData=kt.prototype.no,kt.prototype.mergeLinkDataArray=kt.prototype.Gz,kt.prototype.removeLinkDataCollection=kt.prototype.Sz,kt.prototype.removeLinkData=kt.prototype.Jl,kt.prototype.addLinkDataCollection=kt.prototype.ly,kt.prototype.addLinkData=kt.prototype.Yh,kt.prototype.containsLinkData=kt.prototype.Cc,kt.prototype.makeLinkDataKeyUnique=kt.prototype.$r,kt.prototype.findLinkDataForKey=kt.prototype.Zg,kt.prototype.setKeyForLinkData=kt.prototype.ks,kt.prototype.getKeyForLinkData=kt.prototype.uc,kt.prototype.removeLabelKeyForLinkData=kt.prototype.xx,kt.prototype.addLabelKeyForLinkData=kt.prototype.hu,kt.prototype.setLabelKeysForLinkData=kt.prototype.ls,kt.prototype.getLabelKeysForLinkData=kt.prototype.vf,kt.prototype.setToPortIdForLinkData=kt.prototype.hv,kt.prototype.getToPortIdForLinkData=kt.prototype.gx,kt.prototype.setFromPortIdForLinkData=kt.prototype.dv,kt.prototype.getFromPortIdForLinkData=kt.prototype.ax,kt.prototype.setToKeyForLinkData=kt.prototype.gv,kt.prototype.getToKeyForLinkData=kt.prototype.ex,kt.prototype.setFromKeyForLinkData=kt.prototype.cv,kt.prototype.getFromKeyForLinkData=kt.prototype.$w,kt.prototype.clear=kt.prototype.clear;var Ac=Object.freeze([]);kt.className="GraphLinksModel",$i.GraphLinksModel=kt,rt.constructGraphLinksModel=rt.constructGraphLinksModel=function(){return new kt},rt.initDiagramModel=lv=function(){return new kt};function Nn(t,e){rt.call(this),this.ze="parent",this.vm=!1,this.ij="parentLinkCategory",t!==void 0&&(Ut(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}O(Nn,rt),Nn.constructGraphLinksModel=rt.constructGraphLinksModel,Nn.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.ze=this.ze,t.vm=this.vm,t.ij=this.ij},l=Nn.prototype,l.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.Qo();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var n=t.length,i=0;i<n;i++){var r=t[i];e+=" "+this.ua(r)+":"+Hn(r)}}return e},l.am=function(){var t=rt.prototype.am.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},l.Io=function(t){rt.prototype.Io.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},l.Ho=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&B("applyIncrementalJson cannot change Model properties"),rt.prototype.Ho.call(this,t)},l.Dl=function(t){return t},l.bh=function(t){if(t!==null){var e=this.ze;if(e!==""&&(e=le(t,e),e!==void 0)){if(Is(e))return e;B("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},l.ie=function(t,e){if(e===null&&(e=void 0),t!==null){var n=this.ze;if(n!=="")if(e=this.Dl(e),this.lb(t)){var i=le(t,n);i!==e&&(co(this,i,t),Wt(t,n,e),this.dc(e)===null&&fo(this,e,t),pe(this,"nodeParentKey",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else Wt(t,n,e)}},l.Pr=function(t){if(t===null)return"";var e=this.ij;return e===""||(e=le(t,e),e===void 0)?"":typeof e=="string"?e:(B("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Nn.prototype.getLinkCategoryForData=function(t){return this.Pr(t)},Nn.prototype.ms=function(t,e){if(t!==null){var n=this.ij;if(n!=="")if(this.lb(t)){var i=le(t,n);i===void 0&&(i=""),i!==e&&(Wt(t,n,e),pe(this,"parentLinkCategory",Zt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else Wt(t,n,e)}},Nn.prototype.setLinkCategoryForData=function(t,e){this.ms(t,e)},Nn.prototype.copyNodeData=function(t){return t===null?null:(t=rt.prototype.copyNodeData.call(this,t),this.Dj||this.ze===""||le(t,this.ze)===void 0||Wt(t,this.ze,void 0),t)},Nn.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty){this.Sl(t,n);return}if(e===this.nodeCategoryProperty){this.Rl(t,n);return}if(e===this.nodeParentKeyProperty){this.ie(t,n);return}}var i=le(t,e);i!==n&&(Wt(t,e,n),this.fs(t,e,i,n))},l=Nn.prototype,l.Mo=function(t,e){rt.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e)},l.Zu=function(t,e,n){if(this.bh(t)===e){var i=this.ze;Wt(t,i,n),pe(this,"nodeParentKey",Zt,i,t,e,n),typeof i=="string"&&this.Ka(t,i)}},l.Nl=function(t){rt.prototype.Nl.call(this,t),t=this.ua(t);var e=Ug(this,t);if(e!==null){var n=Kt();for(e=e.iterator;e.next();){var i=e.value;if(this.lb(i)&&this.bh(i)===t){var r=this.ze;pe(this,"nodeParentKey",Zt,r,i,t,t),typeof r=="string"&&this.Ka(i,r),n.push(i)}}for(e=0;e<n.length;e++)co(this,t,n[e]);Xt(n)}},l.Ml=function(t){rt.prototype.Ml.call(this,t);var e=this.bh(t);e=this.Dl(e),this.dc(e)===null&&fo(this,e,t)},l.To=function(t){rt.prototype.To.call(this,t);var e=this.bh(t);co(this,e,t)},l.Tl=function(t,e){rt.prototype.Tl.call(this,t,e),this.ms(e,this.Pr(t)),this.ie(e,this.bh(t))},l.Bl=function(){return!0},l.Vr=function(){return!0},I.Object.defineProperties(Nn.prototype,{nodeParentKeyProperty:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,this.g("nodeParentKeyProperty",e,t))}},Dj:{get:function(){return this.vm},set:function(t){this.vm!==t&&(this.vm=t)}},parentLinkCategoryProperty:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),Nn.prototype.setParentLinkCategoryForNodeData=Nn.prototype.ms,Nn.prototype.getParentLinkCategoryForNodeData=Nn.prototype.Pr,Nn.prototype.setParentKeyForNodeData=Nn.prototype.ie,Nn.prototype.getParentKeyForNodeData=Nn.prototype.bh,Nn.className="TreeModel",$i.TreeModel=Nn;function Qt(t){Dt.call(this),this.Qv=this.Hm=this.hc=0,this.zp=360,this.Pv=Ji,this.Ni=0,this.Dv=new C,this.mp=this.ee=0,this.wr=new $g,this.Is=this.hj=0,this.Zx=600,this.In=NaN,this.km=1,this.Un=0,this.jl=360,this.Nb=Ji,this.L=Cn,this.fd=bh,this.Zc=nv,this.gf=6,this.un=Uc,t&&Object.assign(this,t)}O(Qt,Dt),Qt.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.In=this.In,t.km=this.km,t.Un=this.Un,t.jl=this.jl,t.Nb=this.Nb,t.L=this.L,t.fd=this.fd,t.Zc=this.Zc,t.gf=this.gf,t.un=this.un},Qt.prototype.ob=function(t){t.classType===Qt?t===Vc||t===Yc||t===Gc||t===Rc||t===bh?this.sorting=t:t===La||t===qh||t===Cn||t===zs?this.direction=t:t===os||t===As||t===Ji||t===Zi?this.arrangement=t:(t===Ll||t===Uc)&&(this.nodeDiameterFormula=t):Dt.prototype.ob.call(this,t)},Qt.prototype.createNetwork=function(){return new tu(this)},Qt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var n=new tt,i=this.sort(e),r,a,h=this.mp,g=this.arrangement,f=this.nodeDiameterFormula,c=this.radius;(!isFinite(c)||0>=c)&&(c=NaN);var m=this.aspectRatio;(!isFinite(m)||0>=m)&&(m=1);var y=this.startAngle;isFinite(y)||(y=0);var S=this.sweepAngle;if((!isFinite(S)||360<S||1>S)&&(S=360),e=this.spacing,isFinite(e)||(e=NaN),g===Zi&&f===Ll?g=Ji:g===Zi&&f!==Ll&&(g=this.arrangement),(this.direction===La||this.direction===qh)&&this.sorting!==bh){for(f=0;!(f>=i.length)&&(t.add(i.K(f)),!(f+1>=i.length));f+=2)n.add(i.K(f+1));this.direction===La?(this.arrangement===Zi&&t.reverse(),i=new tt,i.addAll(t),i.addAll(n)):(this.arrangement===Zi&&n.reverse(),i=new tt,i.addAll(n),i.addAll(t))}f=i.length;for(var x=a=r=0;x<i.length;x++){var P=y+S*a*(this.direction===Cn?1:-1)/f,L=i.K(x).diameter;isNaN(L)&&(L=Bs(i.K(x),P)),360>S&&(x===0||x===i.length-1)&&(L/=2),r+=L,a++}if(isNaN(c)||g===Zi){if(isNaN(e)&&(e=6),g!==Ji&&g!==Zi){for(a=-1/0,h=0;h<f;h++)x=i.K(h),r=i.K(h===f-1?0:h+1),isNaN(x.diameter)&&Bs(x,0),isNaN(r.diameter)&&Bs(r,0),a=Math.max(a,(x.diameter+r.diameter)/2);h=a+e,g===os?c=(a+e)/(2*Math.PI/f):c=zc(this,h*(360<=S?f:f-1),m,y*Math.PI/180,S*Math.PI/180)}else c=zc(this,r+(360<=S?f:f-1)*(g!==Zi?e:1.6*e),m,y*Math.PI/180,S*Math.PI/180);a=c*m}else if(a=c*m,x=gv(this,c,a,y*Math.PI/180,S*Math.PI/180),isNaN(e))(g===Ji||g===Zi)&&(e=(x-r)/(360<=S?f:f-1));else if(g===Ji||g===Zi)x=(x-r)/(360<=S?f:f-1),x<e?(c=zc(this,r+e*(360<=S?f:f-1),m,y*Math.PI/180,S*Math.PI/180),a=c*m):e=x;else{for(h=-1/0,r=0;r<f;r++)P=i.K(r),L=i.K(r===f-1?0:r+1),isNaN(P.diameter)&&Bs(P,0),isNaN(L.diameter)&&Bs(L,0),h=Math.max(h,(P.diameter+L.diameter)/2);h+=e,r=zc(this,h*(360<=S?f:f-1),m,y*Math.PI/180,S*Math.PI/180),r>c?(c=r,a=c*m):h=x/(360<=S?f:f-1)}if(this.Pv=g,this.hc=c,this.Hm=m,this.Qv=y,this.zp=S,this.Ni=e,this.ee=a,this.mp=h,e=i,i=this.Pv,g=this.hc,c=this.Qv,m=this.zp,y=this.Ni,S=this.ee,f=this.mp,this.direction!==La&&this.direction!==qh||i!==Zi)if(this.direction===La||this.direction===qh){switch(h=0,i){case As:h=180*Bc(this,g,S,c,f)/Math.PI;break;case Ji:f=e=0,h=t.first(),h!==null&&(e=Bs(h,Math.PI/2)),h=n.first(),h!==null&&(f=Bs(h,Math.PI/2)),h=180*Bc(this,g,S,c,y+(e+f)/2)/Math.PI;break;case os:h=m/e.length}if(this.direction===La){switch(i){case As:Wg(this,t,c,zs);break;case Ji:Hg(this,t,c,zs);break;case os:Kg(this,t,m/2,c,zs)}switch(i){case As:Wg(this,n,c+h,Cn);break;case Ji:Hg(this,n,c+h,Cn);break;case os:Kg(this,n,m/2,c+h,Cn)}}else{switch(i){case As:Wg(this,n,c,zs);break;case Ji:Hg(this,n,c,zs);break;case os:Kg(this,n,m/2,c,zs)}switch(i){case As:Wg(this,t,c+h,Cn);break;case Ji:Hg(this,t,c+h,Cn);break;case os:Kg(this,t,m/2,c+h,Cn)}}}else switch(i){case As:Wg(this,e,c,this.direction);break;case Ji:Hg(this,e,c,this.direction);break;case os:Kg(this,e,m,c,this.direction);break;case Zi:G2(this,e,m,c,this.direction)}else G2(this,e,m,c-m/2,Cn)}this.updateParts(),this.network=null,this.isValidLayout=!0};function Kg(t,e,n,i,r){var a=t.zp,h=t.hc;t=t.ee,i=i*Math.PI/180,n=n*Math.PI/180;for(var g=e.length,f=0;f<g;f++){var c=i+(r===Cn?f*n/(360<=a?g:g-1):-(f*n)/g),m=e.K(f),y=h*Math.tan(c)/t;y=Math.sqrt((h*h+t*t*y*y)/(1+y*y)),m.centerX=y*Math.cos(c),m.centerY=y*Math.sin(c),m.actualAngle=180*c/Math.PI}}function Hg(t,e,n,i){var r=t.hc,a=t.ee,h=t.Ni;n=n*Math.PI/180;for(var g=e.length,f=0;f<g;f++){var c=e.K(f),m=e.K(f===g-1?0:f+1),y=a*Math.sin(n);c.centerX=r*Math.cos(n),c.centerY=y,c.actualAngle=180*n/Math.PI,isNaN(c.diameter)&&Bs(c,0),isNaN(m.diameter)&&Bs(m,0),c=Bc(t,r,a,i===Cn?n:-n,(c.diameter+m.diameter)/2+h),n+=i===Cn?c:-c}}function Wg(t,e,n,i){var r=t.hc,a=t.ee,h=t.mp;n=n*Math.PI/180;for(var g=e.length,f=0;f<g;f++){var c=e.K(f);c.centerX=r*Math.cos(n),c.centerY=a*Math.sin(n),c.actualAngle=180*n/Math.PI,c=Bc(t,r,a,i===Cn?n:-n,h),n+=i===Cn?c:-c}}function G2(t,e,n,i,r){var a=t.zp;if(t.hj=0,t.wr=new $g,360>n){for(a=i+(r===Cn?a:-a);0>a;)a+=360;a%=360,180<a&&(a-=360),a*=Math.PI/180,t.Is=a,V2(t,e,n,i,r)}else R2(t,e,n,i,r);t.wr.commit(e)}function R2(t,e,n,i,r){var a=t.hc,h=t.Ni,g=t.Hm,f=a*Math.cos(i*Math.PI/180),c=t.ee*Math.sin(i*Math.PI/180),m=e.Ea();if(m.length===3)m[0].centerX=a,m[0].centerY=0,m[1].centerX=m[0].centerX-m[0].width/2-m[1].width/2-h,m[1].y=m[0].y,m[2].centerX=(m[0].centerX+m[1].centerX)/2,m[2].y=m[0].y-m[2].height-h;else if(m.length===4)m[0].centerX=a,m[0].centerY=0,m[2].centerX=-m[0].centerX,m[2].centerY=m[0].centerY,m[1].centerX=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-h,m[3].centerX=0,m[3].y=Math.max(m[0].y+m[0].height+h,m[2].y+m[2].height+h);else{a=C.alloc();for(var y=0;y<m.length&&(m[y].centerX=f,m[y].centerY=c,!(y>=m.length-1));y++)Y2(t,f,c,m,y,r,a)||U2(t,f,c,m,y,r,a),f=a.x,c=a.y;if(C.free(a),t.hj++,!(23<t.hj)){f=m[0].centerX,c=m[0].centerY,a=m[m.length-1].centerX,y=m[m.length-1].centerY;var S=Math.abs(f-a)-((m[0].width+m[m.length-1].width)/2+h),x=Math.abs(c-y)-((m[0].height+m[m.length-1].height)/2+h);h=0,1>Math.abs(x)?Math.abs(f-a)<(m[0].width+m[m.length-1].width)/2&&(h=0):h=0<x?x:1>Math.abs(S)?0:S,f=Math.abs(a)>Math.abs(y)?0<a!=c>y:0<y!=f<a,(f=r===Cn?f:!f)&&(h=-Math.abs(h),h=Math.min(h,-m[m.length-1].width),h=Math.min(h,-m[m.length-1].height)),t.wr.compare(h,m),1<Math.abs(h)&&(t.hc=8>t.hj?t.hc-h/(2*Math.PI):5>m.length&&10<h?t.hc/2:t.hc-(0<h?1.7:-2.3),t.ee=t.hc*g,R2(t,e,n,i,r))}}}function V2(t,e,n,i,r){for(var a=t.hc,h=t.ee,g=t.Hm,f=a*Math.cos(i*Math.PI/180),c=h*Math.sin(i*Math.PI/180),m=C.alloc(),y=e.Ea(),S=0;S<y.length&&(y[S].centerX=f,y[S].centerY=c,!(S>=y.length-1));S++)Y2(t,f,c,y,S,r,m)||U2(t,f,c,y,S,r,m),f=m.x,c=m.y;if(C.free(m),t.hj++,!(23<t.hj)){if(f=Math.atan2(c,f),f=r===Cn?t.Is-f:f-t.Is,f=Math.abs(f)<Math.abs(f-2*Math.PI)?f:f-2*Math.PI,a=f*(a+h)/2,h=t.wr,Math.abs(a)<Math.abs(h.xl))for(h.xl=a,h.bk=[],h.cm=[],f=0;f<y.length;f++)h.bk[f]=y[f].bounds.x,h.cm[f]=y[f].bounds.y;1<Math.abs(a)&&(t.hc=8>t.hj?t.hc-a/(2*Math.PI):t.hc-(0<a?1.7:-2.3),t.ee=t.hc*g,V2(t,e,n,i,r))}}function Y2(t,e,n,i,r,a,h){var g=t.hc,f=t.ee,c=0;t=(i[r].width+i[r+1].width)/2+t.Ni;var m=!1;if(0<=n!=(a===Cn)){if(a=e+t,a>g){if(a=e-t,a<-g)return h.x=a,h.y=c,!1;m=!0}}else if(a=e-t,a<-g){if(a=e+t,a>g)return h.x=a,h.y=c,!1;m=!0}return c=Math.sqrt(1-Math.min(1,a*a/(g*g)))*f,0>n!==m&&(c=-c),Math.abs(n-c)>(i[r].height+i[r+1].height)/2?(h.x=a,h.y=c,!1):(h.x=a,h.y=c,!0)}function U2(t,e,n,i,r,a,h){var g=t.hc,f=t.ee,c=0;if(t=(i[r].height+i[r+1].height)/2+t.Ni,i=!1,0<=e!=(a===Cn)){if(a=n-t,a<-f){if(a=n+t,a>f){h.x=c,h.y=a;return}i=!0}}else if(a=n+t,a>f){if(a=n-t,a<-f){h.x=c,h.y=a;return}i=!0}c=Math.sqrt(1-Math.min(1,a*a/(f*f)))*g,0>e!==i&&(c=-c),h.x=c,h.y=a}Qt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Qt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new C(0,0):(n.x=this.arrangementOrigin.x+this.hc,n.y=this.arrangementOrigin.y+this.ee);for(var i=this.network.vertexes.iterator;i.next();){var r=i.value;r.x+=n.x,r.y+=n.y,r.commit()}t&&(this.group.Za(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.je(n.je(t)),this.group.move(e),this.Dv=e.je(t))},Qt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function gv(t,e,n,i,r){var a=t.Zx;if(.001>Math.abs(t.Hm-1))return i!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var h=0,g=i!==void 0&&r!==void 0?r/(a+1):Math.PI/(2*(a+1)),f=0,c=0;c<=a;c++){i!==void 0&&r!==void 0?f=i+c*r/a:f=c*Math.PI/(2*a);var m=Math.sin(f);h+=Math.sqrt(1-t*t*m*m)*g}return i!==void 0&&r!==void 0?(e>n?e:n)*h:4*(e>n?e:n)*h}function zc(t,e,n,i,r){return e/(i!==void 0&&r!==void 0?gv(t,1,n,i,r):gv(t,1,n))}function Bc(t,e,n,i,r){if(.001>Math.abs(t.Hm-1))return r/e;var a=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var g=0;;g++){var f=Math.sin(i+g*t);if(h+=(e>n?e:n)*Math.sqrt(1-a*a*f*f)*t,h>=r)return g*t}}Qt.prototype.sort=function(t){switch(this.sorting){case Gc:break;case Rc:t.reverse();break;case Vc:t.sort(this.comparer);break;case Yc:t.sort(this.comparer),t.reverse();break;case bh:return this.Vj(jN(t));default:B("Invalid sorting type.")}return t};function jN(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new tt;for(var i=0;i<t.length;i++){var r=-1,a=-1;if(i===0)for(var h=0;h<t.length;h++){var g=t.K(h).edgesCount;g>r&&(r=g,a=h)}else for(h=0;h<t.length;h++)g=e[h],g>r&&(r=g,a=h);for(n.add(t.K(a)),e[a]=-1,a=t.K(a),h=a.sourceEdges;h.next();)r=t.indexOf(h.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(a=a.destinationEdges;a.next();)r=t.indexOf(a.value.toVertex),0>r||0<=e[r]&&e[r]++}return n}Qt.prototype.Vj=function(t){for(var e=[],n=0;n<t.length;n++){var i=t.K(n);e[n]=[];for(var r,a=i.destinationEdges;a.next();)r=t.indexOf(a.value.toVertex),r!==n&&0>e[n].indexOf(r)&&e[n].push(r);for(i=i.sourceEdges;i.next();)r=t.indexOf(i.value.fromVertex),r!==n&&0>e[n].indexOf(r)&&e[n].push(r)}for(a=[],n=0;n<e.length;n++)a[n]=0;n=[];var h=[],g=[];i=[],r=new tt;for(var f=0,c=0;c<e.length;c++){var m=e[c].length;if(m===1)i.push(c);else if(m===0)r.add(t.K(c));else{if(f===0)n.push(c);else{for(var y=m=1/0,S=-1,x=[],P=0;P<n.length;P++)0>e[n[P]].indexOf(n[P===n.length-1?0:P+1])&&x.push(P===n.length-1?0:P+1);if(x.length===0)for(P=0;P<n.length;P++)x.push(P);for(P=0;P<x.length;P++){for(var L=x[P],N=e[c],k=0,F=0;F<h.length;F++){var D=a[h[F]],j=a[g[F]];if(D<j){var E=D;D=j}else E=j;if(E<L&&L<=D)for(j=0;j<N.length;j++){var R=N[j];0>n.indexOf(R)||E<a[R]&&a[R]<D||E===a[R]||D===a[R]||k++}else for(j=0;j<N.length;j++)R=N[j],0>n.indexOf(R)||E<a[R]&&a[R]<D&&E!==a[R]&&D!==a[R]&&k++}for(N=k,F=k=0;F<e[c].length;F++)E=n.indexOf(e[c][F]),0<=E&&(E=Math.abs(L-(E>=L?E+1:E)),k+=E<n.length+1-E?E:n.length+1-E);for(F=0;F<h.length;F++)E=a[h[F]],D=a[g[F]],E>=L&&E++,D>=L&&D++,E>D&&(j=D,D=E,E=j),D-E<(n.length+2)/2==(E<L&&L<=D)&&k++;(N<m||N===m&&k<y)&&(m=N,y=k,S=L)}for(n.splice(S,0,c),m=0;m<n.length;m++)a[n[m]]=m;for(m=0;m<e[c].length;m++)y=e[c][m],0<=n.indexOf(y)&&(h.push(c),g.push(y))}f++}}for(h=n.length;;){for(a=!0,g=0;g<i.length;g++)if(f=i[g],c=e[f][0],m=n.indexOf(c),0<=m){for(S=y=0;S<e[c].length;S++)x=n.indexOf(e[c][S]),0>x||x===m||(P=x>m?x-m:m-x,y+=x<m!=P>h-P?1:-1);n.splice(0>y?m:m+1,0,f),i.splice(g,1),g--}else a=!1;if(a)break;n.push(i[0]),i.splice(0,1)}for(e=0;e<n.length;e++)r.add(t.K(n[e]));return r},I.Object.defineProperties(Qt.prototype,{radius:{get:function(){return this.In},set:function(t){this.In!==t&&(0<t||isNaN(t))&&(this.In=t,this.D())}},aspectRatio:{get:function(){return this.km},set:function(t){this.km!==t&&0<t&&(this.km=t,this.D())}},startAngle:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t,this.D())}},sweepAngle:{get:function(){return this.jl},set:function(t){this.jl!==t&&(0<t&&360>=t?this.jl=t:this.jl=360,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==Zi&&t!==Ji&&t!==As&&t!==os||(this.Nb=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L===t||t!==Cn&&t!==zs&&t!==La&&t!==qh||(this.L=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Gc&&t!==Rc&&t!==Vc&&!Yc&&t!==bh||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}},spacing:{get:function(){return this.gf},set:function(t){this.gf!==t&&(this.gf=t,this.D())}},nodeDiameterFormula:{get:function(){return this.un},set:function(t){this.un===t||t!==Uc&&t!==Ll||(this.un=t,this.D())}},actualXRadius:{get:function(){return this.hc}},actualYRadius:{get:function(){return this.ee}},actualSpacing:{get:function(){return this.Ni}},actualCenter:{get:function(){return this.Dv}}});var Ji=new $(Qt,"ConstantSpacing",0),As=new $(Qt,"ConstantDistance",1),os=new $(Qt,"ConstantAngle",2),Zi=new $(Qt,"Packed",3),Cn=new $(Qt,"Clockwise",4),zs=new $(Qt,"Counterclockwise",5),La=new $(Qt,"BidirectionalLeft",6),qh=new $(Qt,"BidirectionalRight",7),Gc=new $(Qt,"Forwards",8),Rc=new $(Qt,"Reverse",9),Vc=new $(Qt,"Ascending",10),Yc=new $(Qt,"Descending",11),bh=new $(Qt,"Optimized",12),Uc=new $(Qt,"Pythagorean",13),Ll=new $(Qt,"Circular",14);Qt.className="CircularLayout",Qt.ConstantSpacing=Ji,Qt.ConstantDistance=As,Qt.ConstantAngle=os,Qt.Packed=Zi,Qt.Clockwise=Cn,Qt.Counterclockwise=zs,Qt.BidirectionalLeft=La,Qt.BidirectionalRight=qh,Qt.Forwards=Gc,Qt.Reverse=Rc,Qt.Ascending=Vc,Qt.Descending=Yc,Qt.Optimized=bh,Qt.Pythagorean=Uc,Qt.Circular=Ll;function $g(){this.xl=-1/0,this.cm=this.bk=null}$g.prototype.compare=function(t,e){if(0<t&&0>this.xl||Math.abs(t)<Math.abs(this.xl)&&!(0>t&&0<this.xl))for(this.xl=t,this.bk=[],this.cm=[],t=0;t<e.length;t++)this.bk[t]=e[t].bounds.x,this.cm[t]=e[t].bounds.y},$g.prototype.commit=function(t){if(this.bk!==null&&this.cm!==null)for(var e=0;e<this.bk.length;e++){var n=t.K(e);n.x=this.bk[e],n.y=this.cm[e]}},$g.className="VertexArrangement";function tu(t){Yt.call(this,t)}O(tu,Yt),tu.prototype.createVertex=function(){return new Jg(this)},tu.prototype.createEdge=function(){return new Xc(this)},tu.className="CircularNetwork";function Jg(t){ce.call(this,t),this.u=this.Mi=NaN}O(Jg,ce);function Bs(t,e){var n=t.network;if(n===null)return NaN;if(n=n.layout,n===null)return NaN;if(n.arrangement===Zi)if(n.nodeDiameterFormula===Ll)t.Mi=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),n===0)return t.width;if(e===0)return t.height;t.Mi=Math.min(t.height/n,t.width/e)}else t.Mi=n.nodeDiameterFormula===Ll?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Mi}I.Object.defineProperties(Jg.prototype,{diameter:{get:function(){return this.Mi},set:function(t){this.Mi!==t&&(this.Mi=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),Jg.className="CircularVertex";function Xc(t){Ke.call(this,t)}O(Xc,Ke),Xc.className="CircularEdge";function Ee(t){Dt.call(this),this.Sg=null,this.gn=0,this.Td=new dt(100,100).freeze(),this.jm=!1,this.ff=!0,this.od=!1,this.Tk=100,this.Im=1,this.Pf=1e3,this.pn=10,this.Jn=Math,this.vk=.05,this.uk=50,this.sk=150,this.tk=0,this.Dm=10,this.Cm=5,t&&Object.assign(this,t)}O(Ee,Dt),Ee.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.Td.assign(this.Td),t.jm=this.jm,t.ff=this.ff,t.od=this.od,t.Tk=this.Tk,t.Im=this.Im,t.Pf=this.Pf,t.pn=this.pn,t.Jn=this.Jn,t.vk=this.vk,t.uk=this.uk,t.sk=this.sk,t.tk=this.tk,t.Dm=this.Dm,t.Cm=this.Cm},Ee.prototype.serializeLayoutProperties=function(t,e){Dt.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},Ee.prototype.deserializeLayoutProperties=function(t,e,n,i,r){Dt.prototype.deserializeLayoutProperties.call(this,t,e,n,i,r),this.arrangementSpacing=new dt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},Ee.prototype.createNetwork=function(){return new Ml(this)},Ee.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),!this.qv()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.oo();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)n=e.value,n.stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.ju(),this.gn=0,this.needsClusterLayout()){e=this.network,n=e.Ix();for(var i=n.iterator;i.next();){this.network=i.value;for(var r=this.network.vertexes.iterator;r.next();){var a=r.value;a.Nd=a.vertexes.count,a.hh=1,a.Bj=null,a.Ke=null}X2(this,0,t)}this.network=e;var h=i=n.iterator;i=this.arrangementSpacing;var g=h.count,f=!0;a=r=0;for(var c=Kt(),m=0;m<g+e.vertexes.count+2;m++)c[m]=null;g=0,h.reset();for(var y=G.alloc();h.next();)if(m=h.value,this.computeBounds(m,y),f)f=!1,r=y.x+y.width/2,a=y.y+y.height/2,c[0]=new C(y.x+y.width+i.width,y.y),c[1]=new C(y.x,y.y+y.height+i.height),g=2;else{var S=_2(c,g,r,a,y.width,y.height,i),x=c[S],P=new C(x.x+y.width+i.width,x.y),L=new C(x.x,x.y+y.height+i.height);for(S+1<g&&c.splice(S+1,0,null),c[S]=P,c[S+1]=L,g++,S=x.x-y.x,x=x.y-y.y,m=m.vertexes.iterator;m.next();)P=m.value,P.centerX+=S,P.centerY+=x}for(G.free(y),m=e.vertexes.iterator;m.next();)h=m.value,S=h.bounds,2>g?(r=S.x+S.width/2,a=S.y+S.height/2,c[0]=new C(S.x+S.width+i.width,S.y),c[1]=new C(S.x,S.y+S.height+i.height),g=2):(f=_2(c,g,r,a,S.width,S.height,i),y=c[f],x=new C(y.x+S.width+i.width,y.y),S=new C(y.x,y.y+S.height+i.height),f+1<g&&c.splice(f+1,0,null),c[f]=x,c[f+1]=S,g++,h.centerX=y.x+h.width/2,h.centerY=y.y+h.height/2);for(Xt(c),i=n.iterator;i.next();){for(n=i.value,r=n.vertexes.iterator;r.next();)e.fg(r.value);for(n=n.edges.iterator;n.next();)e.ol(n.value)}}H2(this,t),this.updateParts()}this.Tk=t,this.network=null,this.isValidLayout=!0}},Ee.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Sc(n)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},Ee.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Xc(i.bounds)}return e};function X2(t,e,n){if(ON(t,e)){var i=t.Pf;t.Pf*=1+1/(e+1);var r=EN(t,e),a=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=a,X2(t,e+1,n),H2(t,a),IN(t,r),e=r.vertexes.Ea(),e.sort(function(h,g){return h===null||g===null||h===g?0:g.Nd-h.Nd}),n=0;n<e.length;n++)AN(t,e[n]);t.Pf=i}}function ON(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Sg=t.network.vertexes.Ea(),t=t.Sg,t.sort(function(n,i){return n===null||i===null||n===i?0:i.Nd-n.Nd}),e=t.length-1;0<=e&&1>=t[e].Nd;)e--;return 1<t.length-e}function EN(t,e){for(var n=t.network,i=new Ml(t),r=0;r<t.Sg.length;r++){var a=t.Sg[r];if(1<a.Nd){i.fg(a);var h=new W2;h.ts=a.Nd,h.us=a.width,h.ss=a.height,h.wv=a.focus.x,h.xv=a.focus.y,a.Ke===null&&(a.Ke=new tt),a.Ke.add(h),a.av=a.Ke.count-1}else break}for(a=n.edges.iterator;a.next();){var g=a.value;r=g.fromVertex,h=g.toVertex,r.network===i&&h.network===i?i.ol(g):r.network===i?(g=r.Bj,g===null&&(g=new tt,r.Bj=g),g.add(h),r.Nd--,r.hh+=h.hh):h.network===i&&(g=h.Bj,g===null&&(g=new tt,h.Bj=g),g.add(r),h.Nd--,h.hh+=r.hh)}for(r=i.edges.iterator;r.next();)a=r.value,a.length*=Math.max(1,A.sqrt((a.fromVertex.hh+a.toVertex.hh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){r=e.value;var f=r.Bj;if(f!==null&&0<f.count&&(h=r.Ke.K(r.Ke.count-1).ts-r.Nd,!(0>=h))){for(var c=g=0,m=f.count-h;m<f.count;m++){var y=f.K(m),S=null;for(a=y.edges.iterator;a.next();){var x=a.value;if(x.bx(y)===r){S=x;break}}S!==null&&(c+=S.length,g+=y.width*y.height)}a=r.centerX,f=r.centerY,m=r.width,y=r.height,S=r.focus,x=m*y,1>x&&(x=1),g=A.sqrt((g+x+c*c*4/(h*h))/x),h=(g-1)*m/2,g=(g-1)*y/2,r.bounds=new G(a-S.x-h,f-S.y-g,m+2*h,y+2*g),r.focus=new C(S.x+h,S.y+g)}}return t.network=i,n}function IN(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,i.Ke!==null){var r=i.Ke.K(i.av);i.Nd=r.ts;var a=r.wv,h=r.xv;i.bounds=new G(i.centerX-a,i.centerY-h,r.us,r.ss),i.focus=new C(a,h),i.av--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}function AN(t,e){var n=e.Bj;if(n!==null&&n.count!==0){var i=e.centerX,r=e.centerY,a=e.width,h=e.height;e.Ke!==null&&0<e.Ke.count&&(h=e.Ke.K(0),a=h.us,h=h.ss),a=A.sqrt(a*a+h*h)/2;for(var g=!1,f=h=0,c=0,m=e.vertexes.iterator;m.next();){var y=m.value;1>=y.Nd?f++:(g=!0,c++,h+=Math.atan2(e.centerY-y.centerY,e.centerX-y.centerX))}if(f!==0){for(0<c&&(h/=c),c=e=0,e=g?2*Math.PI/(f+1):2*Math.PI/f,f%2===0&&(c=e/2),1<n.count&&n.sort(function(x,P){return x===null||P===null||x===P?0:P.width*P.height-x.width*x.height}),g=f%2===0?0:1,n=n.iterator;n.next();)if(f=n.value,!(1<f.Nd||t.isFixed(f))){for(m=null,y=f.edges.iterator;y.next();){m=y.value;break}y=f.width;var S=f.height;y=A.sqrt(y*y+S*S)/2,m=a+m.length+y,y=h+(e*(g/2>>1)+c)*(g%2===0?1:-1),f.centerX=i+m*Math.cos(y),f.centerY=r+m*Math.sin(y),g++}}}}function _2(t,e,n,i,r,a,h){var g=9e19,f=-1,c=0;t:for(;c<e;c++){var m=t[c],y=m.x-n,S=m.y-i;if(y=y*y+S*S,y<g){for(S=c-1;0<=S;S--)if(t[S].y>m.y&&t[S].x-m.x<r+h.width)continue t;for(S=c+1;S<e;S++)if(t[S].x>m.x&&t[S].y-m.y<a+h.height)continue t;f=c,g=y}}return f}Ee.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ee.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.wu();e.next();){var n=e.value;if(n.category==="Comment"&&n.isVisible()){var i=this.network.ei(n);i===null&&(i=this.network.yj(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var r=i.destinationEdges;r.next();){var a=r.value;if(a.toVertex===t){n=a;break}}if(n===null){for(r=i.sourceEdges;r.next();)if(a=r.value,a.fromVertex===t){n=a;break}}n===null&&(n=this.network.Qj(t,i,null)),n.length=this.defaultCommentSpringLength}}};function K2(t,e){var n=t.bounds,i=n.x;t=n.y;var r=n.width;n=n.height;var a=e.bounds,h=a.x;e=a.y;var g=a.width;return a=a.height,i+r<h?t>e+a?(n=i+r-h,t=t-e-a,A.sqrt(n*n+t*t)):t+n<e?(i=i+r-h,t=t+n-e,A.sqrt(i*i+t*t)):h-(i+r):i>h+g?t>e+a?(n=i-h-g,t=t-e-a,A.sqrt(n*n+t*t)):t+n<e?(i=i-h-g,t=t+n-e,A.sqrt(i*i+t*t)):i-(h+g):t>e+a?t-(e+a):t+n<e?e-(t+n):.1}function H2(t,e){for(t.Sg=null,e=t.gn+e;t.gn<e&&(t.gn++,zN(t)););t.Sg=null}function zN(t){t.Sg===null&&(t.Sg=t.network.vertexes.Ea());var e=t.Sg;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,r=i,a=n=n.centerY,h=1;h<e.length;h++){var g=e[h];g.forceX=0,g.forceY=0;var f=g.centerX;g=g.centerY,i=Math.min(i,f),r=Math.max(r,f),n=Math.min(n,g),a=Math.max(a,g)}(r=r-i>a-n)?e.sort(function(L,N){return L===null||N===null||L===N?0:L.centerX-N.centerX}):e.sort(function(L,N){return L===null||N===null||L===N?0:L.centerY-N.centerY}),n=t.Pf;var c=i=g=0;for(a=0;a<e.length;a++){h=e[a],i=h.bounds,g=h.focus,f=i.x+g.x;var m=i.y+g.y;i=h.charge*t.electricalFieldX(f,m),c=h.charge*t.electricalFieldY(f,m),i+=h.mass*t.gravitationalFieldX(f,m),c+=h.mass*t.gravitationalFieldY(f,m),h.forceX+=i,h.forceY+=c;for(var y=a+1;y<e.length;y++){var S=e[y];if(S!==h){i=S.bounds,g=S.focus,c=i.x+g.x;var x=i.y+g.y;if(f-c>n||c-f>n){if(r)break}else if(m-x>n||x-m>n){if(!r)break}else{var P=K2(h,S);1>P?(i=t.randomNumberGenerator,i===null&&(t.randomNumberGenerator=i=new _c),P=i.random(),g=i.random(),f>c?(i=Math.abs(S.bounds.right-h.bounds.x),i=(1+i)*P):f<c?(i=Math.abs(S.bounds.x-h.bounds.right),i=-(1+i)*P):(i=Math.max(S.width,h.width),i=(1+i)*P-i/2),m>x?(c=Math.abs(S.bounds.bottom-h.bounds.y),c=(1+c)*g):f<c?(c=Math.abs(S.bounds.y-h.bounds.bottom),c=-(1+c)*g):(c=Math.max(S.height,h.height),c=(1+c)*g-c/2)):(g=-(h.charge*S.charge)/(P*P),i=(c-f)/P*g,c=(x-m)/P*g),h.forceX+=i,h.forceY+=c,S.forceX-=i,S.forceY-=c}}}}for(r=t.network.edges.iterator;r.next();)g=r.value,n=g.fromVertex,a=g.toVertex,h=n.bounds,f=n.focus,i=h.x+f.x,h=h.y+f.y,m=a.bounds,y=a.focus,f=m.x+y.x,m=m.y+y.y,y=K2(n,a),1>y?(y=t.randomNumberGenerator,y===null&&(t.randomNumberGenerator=y=new _c),g=y.random(),y=y.random(),i=(i>f?1:-1)*(1+(a.width>n.width?a.width:n.width))*g,c=(h>m?1:-1)*(1+(a.height>n.height?a.height:n.height))*y):(g=g.stiffness*(y-g.length),i=(f-i)/y*g,c=(m-h)/y*g),n.forceX+=i,n.forceY+=c,a.forceX-=i,a.forceY-=c;for(r=i=0;r<e.length;r++)n=e[r],t.isFixed(n)?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}Ee.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:e>i&&(e=i),n<-i?n=-i:n>i&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},Ee.prototype.moveFixedVertex=function(){},Ee.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.isRouting&&this.commitLinks()},Ee.prototype.ev=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=Je,e.toSpot=Je)}},Ee.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=G.alloc();this.computeBounds(this.network,n),e=this.arrangementOrigin,t=e.x-n.x,e=e.y-n.y,G.free(n)}n=G.alloc();for(var i=this.network.vertexes.iterator;i.next();){var r=i.value;(t!==0||e!==0)&&(n.assign(r.bounds),n.x+=t,n.y+=e,r.bounds=n),r.commit()}G.free(n)},Ee.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ee.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.vk:t},Ee.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.uk:t},Ee.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.sk:t},Ee.prototype.electricalFieldX=function(){return 0},Ee.prototype.electricalFieldY=function(){return 0},Ee.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.tk:t},Ee.prototype.gravitationalFieldX=function(){return 0},Ee.prototype.gravitationalFieldY=function(){return 0},Ee.prototype.isFixed=function(t){return t.isFixed},I.Object.defineProperties(Ee.prototype,{currentIteration:{get:function(){return this.gn}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},arrangesToOrigin:{get:function(){return this.jm},set:function(t){this.jm!==t&&(this.jm=t,this.D())}},setsPortSpots:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},maxIterations:{get:function(){return this.Tk},set:function(t){this.Tk!==t&&0<=t&&(this.Tk=t,this.D())}},epsilonDistance:{get:function(){return this.Im},set:function(t){this.Im!==t&&0<t&&(this.Im=t,this.D())}},infinityDistance:{get:function(){return this.Pf},set:function(t){this.Pf!==t&&1<t&&(this.Pf=t,this.D())}},moveLimit:{get:function(){return this.pn},set:function(t){this.pn!==t&&1<t&&(this.pn=t,this.D())}},randomNumberGenerator:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&(t!==null&&typeof t.random!="function"&&B('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Jn=t)}},defaultSpringStiffness:{get:function(){return this.vk},set:function(t){this.vk!==t&&(this.vk=t,this.D())}},defaultSpringLength:{get:function(){return this.uk},set:function(t){this.uk!==t&&(this.uk=t,this.D())}},defaultElectricalCharge:{get:function(){return this.sk},set:function(t){this.sk!==t&&(this.sk=t,this.D())}},defaultGravitationalMass:{get:function(){return this.tk},set:function(t){this.tk!==t&&(this.tk=t,this.D())}},defaultCommentSpringLength:{get:function(){return this.Dm},set:function(t){this.Dm!==t&&(this.Dm=t,this.D())}},defaultCommentElectricalCharge:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&(this.Cm=t,this.D())}}}),Ee.className="ForceDirectedLayout";function W2(){this.xv=this.wv=this.ss=this.us=this.ts=0}W2.className="ForceDirectedSubnet";function Ml(t){Yt.call(this,t)}O(Ml,Yt),Ml.prototype.createVertex=function(){return new kl(this)},Ml.prototype.createEdge=function(){return new Nl(this)},Ml.className="ForceDirectedNetwork";function kl(t){ce.call(this,t),this.ga=!1,this.Ga=this.u=NaN,this.hh=this.Nd=this.W=this.F=0,this.Ke=this.Bj=null,this.av=0}O(kl,ce),kl.prototype.serializeVertexProperties=function(t,e){ce.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},kl.prototype.deserializeVertexProperties=function(t,e,n,i){ce.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},I.Object.defineProperties(kl.prototype,{isFixed:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}}}),kl.className="ForceDirectedVertex";function Nl(t){Ke.call(this,t),this.j=this.m=NaN}O(Nl,Ke),Nl.prototype.serializeEdgeProperties=function(t,e){Ke.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Nl.prototype.deserializeEdgeProperties=function(t,e,n,i){Ke.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.stiffness=t.stiffness,this.length=t.length},I.Object.defineProperties(Nl.prototype,{stiffness:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Nl.className="ForceDirectedEdge";function _c(){var t=0;this.seed=t,this.Kx=48271,this.Mx=2147483647,this.Q=44488.07041494893,this.Nx=3399,this.Lx=1/2147483647,this.random()}_c.prototype.random=function(){var t=this.seed%this.Q*this.Kx-this.seed/this.Q*this.Nx;return 0<t?this.seed=t:this.seed=t+this.Mx,this.seed*this.Lx},_c.className="RandomNumberGenerator";function zt(t){Dt.call(this),this.gc=this.be=25,this.L=0,this.rk=$c,this.Ok=Jc,this.Fk=Zc,this.Xi=4,this.ek=Qc,this.Tf=15,this.ff=!0,this.jn=4,this.Ja=this.Dh=this.wa=-1,this.zc=this.Bg=0,this.Qa=this.Bd=this.Cd=this.ae=this.Hb=null,this.Cg=0,this.qn=this.fj=null,this.Lc=0,this.rn=null,this.Yc=new C,this.we=[],this.we.length=100,t&&Object.assign(this,t)}O(zt,Dt),zt.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.be=this.be,t.gc=this.gc,t.L=this.L,t.rk=this.rk,t.Ok=this.Ok,t.Fk=this.Fk,t.Xi=this.Xi,t.ek=this.ek,t.Tf=this.Tf,t.ff=this.ff,t.jn=this.jn},zt.prototype.serializeLayoutProperties=function(t,e){Dt.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.wa=this.wa,t.Dh=this.Dh,t.Ja=this.Ja,t.Bg=this.Bg,t.zc=this.zc,t.Hb=this.Hb,t.Cg=this.Cg,t.Lc=this.Lc,t.Yc={x:this.Yc.x,y:this.Yc.y}},zt.prototype.deserializeLayoutProperties=function(t,e,n,i,r){Dt.prototype.deserializeLayoutProperties.call(this,t,e,n,i,r),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=Yi(zt,t.cycleRemoveOption),this.layeringOption=Yi(zt,t.layeringOption),this.initializeOption=Yi(zt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=Yi(zt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.wa=t.wa,this.Dh=t.Dh,this.Ja=t.Ja,this.Bg=t.Bg,this.zc=t.zc,this.Hb=t.Hb,this.Cg=t.Cg,this.Lc=t.Lc,this.Yc=new C(this.Yc.x,this.Yc.y),r&&!i&&r.edges.each(function(a){if(!a.link&&a.fromVertex&&a.toVertex&&(a.fromVertex.node===null||a.toVertex.node===null)){for(var h=a.fromVertex;h!==null&&h.node===null&&0<h.wd.count;){var g=h.wd.K(0);if(g.link){a.link=g.link;break}h=g.fromVertex}if(!a.link){for(g=a.toVertex;g!==null&&g.node===null&&0<g.Jd.count;){var f=g.Jd.K(0);if(f.link){a.link=f.link;break}g=f.toVertex}if(!a.link){for(g=g.wd.iterator;g.next();)if(f=g.value,f.link&&f.fromVertex===h){a.link=f.link;break}}}}})},zt.prototype.ob=function(t){t.classType===zt?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:B("Unknown enum value: "+t):Dt.prototype.ob.call(this,t)},zt.prototype.createNetwork=function(){return new nu(this)},zt.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Dh=-1,this.zc=this.Bg=0,this.rn=this.qn=this.fj=null,t=0;t<this.we.length;t++)this.we[t]=null;if(0<this.network.vertexes.count){if(this.network.oo(),this.qv())return;for(this.cycleRemoveOption!==Qg&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.wa=-1,this.assignLayers(),t.reset();t.next();)this.wa=Math.max(this.wa,t.value.layer);this.cycleRemoveOption===Qg&&this.removeCycles(),t=this.network;for(var e=[],n=t.edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){i=e[n];var r=i.fromVertex,a=i.toVertex;if(!(i.valid||(r.node===null&&r.data===null||a.node===null&&a.data===null)&&r.layer===a.layer)){var h=0,g=0,f=0,c=0;if(i.link!==null){if(g=i.link,g===null)continue;var m=r.node;if(h=a.node,m===null||h===null)continue;var y=g.fromNode;f=g.toNode;var S=g.fromPort;if(g=g.toPort,i.rev){c=y;var x=S;y=f,S=g,f=c,g=x}var P=r.focus;c=a.focus;var L=i.rev?a.bounds:r.bounds;x=C.alloc(),m!==y?L.v()&&y.isVisible()?y.actualBounds.v()?(qr(y,S,Gt,x),x.x+=y.actualBounds.x-L.x,x.y+=y.actualBounds.y-L.y):(qr(y,S,Gt,x),x.v()||x.assign(P)):x.assign(P):L.v()?(qr(y,S,Gt,x),x.v()||x.assign(P)):x.assign(P),y=i.rev?r.bounds:a.bounds,m=C.alloc(),h!==f?y.v()&&f.isVisible()?f.actualBounds.v()?(qr(f,g,Gt,m),m.x+=f.actualBounds.x-y.x,m.y+=f.actualBounds.y-y.y):(qr(f,g,Gt,m),m.v()||m.assign(c)):m.assign(c):y.v()?(qr(f,g,Gt,m),m.v()||m.assign(c)):m.assign(c),this.L===90||this.L===270?(h=Math.round((x.x-P.x)/this.gc),f=x.x,g=Math.round((m.x-c.x)/this.gc),c=m.x):(h=Math.round((x.y-P.y)/this.gc),f=x.y,g=Math.round((m.y-c.y)/this.gc),c=m.y),C.free(x),C.free(m),i.portFromColOffset=h,i.portFromPos=f,i.portToColOffset=g,i.portToPos=c}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(x=r.layer,m=a.layer,y=0,L=i.link,L!==null){var N=L.fromPort,k=L.toPort;if(N!==null&&k!==null){var F=L.fromNode;if(S=L.toNode,F!==null&&S!==null){var D=Wc(this,!0),j=Wc(this,!1),E=this.setsPortSpots?D:L.computeSpot(!0,N);P=this.setsPortSpots?j:L.computeSpot(!1,k);var R=L.isOrthogonal;E.Uc()&&E.xf(j)&&P.Uc()&&P.xf(D)?y=0:(D=L.getLinkPoint(F,N,E,!0,R,S,k,C.alloc()),j=L.getLinkDirection(F,N,D,E,!0,R,S,k),C.free(D),E.Wr()||j!==nL(this,i,!0)?this.setsPortSpots&&F!==null&&F.ports.count===1&&i.rev&&(y+=1):y+=1,E=L.getLinkPoint(S,k,P,!1,R,F,N,C.alloc()),L=L.getLinkDirection(S,k,E,P,!1,R,F,N),C.free(E),P.Wr()||L!==nL(this,i,!1)?this.setsPortSpots&&S!==null&&S.ports.count===1&&i.rev&&(y+=2):y+=2)}}}if(S=y,y=S===1||S===3,(S=S===2||S===3)&&(P=t.createVertex(),P.node=null,P.nf=1,P.layer=x,P.near=r,t.fg(P),r=t.Qj(r,P,i.link),r.valid=!1,r.rev=i.rev,r.portFromColOffset=h,r.portToColOffset=0,r.portFromPos=f,r.portToPos=0,r=P),L=1,y&&L--,x-m>L&&0<x){for(i.valid=!1,P=t.createVertex(),P.node=null,P.nf=2,P.layer=x-1,t.fg(P),r=t.Qj(r,P,i.link),r.valid=!0,r.rev=i.rev,r.portFromColOffset=S?0:h,r.portToColOffset=0,r.portFromPos=S?0:f,r.portToPos=0,r=P,x--;x-m>L&&0<x;)P=t.createVertex(),P.node=null,P.nf=3,P.layer=x-1,t.fg(P),r=t.Qj(r,P,i.link),r.valid=!0,r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=P,x--;r=t.Qj(P,a,i.link),r.valid=!y,y&&(P.near=a),r.rev=i.rev,r.portFromColOffset=0,r.portToColOffset=g,r.portFromPos=0,r.portToPos=c}else i.valid=!0}}for(t=this.Hb=[],e=0;e<=this.wa;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Dh=-1,n=this.zc=this.Bg=0;n<=this.wa;n++)t[n]>t[this.zc]&&(this.Dh=t[n]-1,this.zc=n),t[n]<t[this.Bg]&&(this.Bg=n);for(this.rn=[],n=0;n<t.length;n++)this.rn[n]=[];for(e.reset();e.next();)t=e.value,this.rn[t.layer][t.index]=t;for(this.Ja=-1,t=0;t<=this.wa;t++){for(e=Gs(this,t),n=0,i=this.Hb[t],a=0;a<i;a++)r=e[a],n+=this.nodeMinColumnSpace(r,!0),r.column=n,n+=1,n+=this.nodeMinColumnSpace(r,!1);this.Ja=Math.max(this.Ja,n-1),Rs(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},zt.prototype.linkMinLength=function(){return 1};function dv(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}zt.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.L===90||this.L===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},zt.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var n=e?t.Uj:t.Tj;return n!==null?n:(n=this.L,n===90||n===270?e?t.Uj=t.focus.x/this.gc+1|0:t.Tj=(t.bounds.width-t.focus.x)/this.gc+1|0:e?t.Uj=t.focus.y/this.gc+1|0:t.Tj=(t.bounds.height-t.focus.y)/this.gc+1|0)};function In(t){t.fj===null&&(t.fj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.fj[e]=i.layer,e++,t.fj[e]=i.column,e++,t.fj[e]=i.index,e++}return t.fj}function Pi(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function $2(t,e,n){var i=Gs(t,e),r=t.Hb[e];(t.qn===null||t.qn.length<r*r)&&(t.qn=[]);for(var a=t.qn,h=0;h<r;h++){var g=0,f=i[h],c=f.near;if(c!==null&&c.layer===f.layer)if(f=c.index,f>h)for(var m=h+1;m<f;m++){var y=i[m];y.near===c&&y.nf===c.nf||g++}else for(m=h-1;m>f;m--)y=i[m],y.near===c&&y.nf===c.nf||g++;var S;if(0<=n)for(f=i[h].sourceEdgesArrayAccess,c=0;c<f.length;c++){var x=f[c];if(x.valid&&x.fromVertex.layer!==e)for(y=x.fromVertex.index,m=x.portToPos,x=x.portFromPos,S=c+1;S<f.length;S++){var P=f[S];if(P.valid&&P.fromVertex.layer!==e){var L=P.fromVertex.index,N=P.portToPos;P=P.portFromPos,m<N&&(y>L||y===L&&x>P)&&g++,N<m&&(L>y||L===y&&P>x)&&g++}}}if(0>=n){for(f=i[h].destinationEdgesArrayAccess,c=0;c<f.length;c++)if(x=f[c],x.valid&&x.toVertex.layer!==e)for(y=x.toVertex.index,m=x.portToPos,x=x.portFromPos,S=c+1;S<f.length;S++)P=f[S],P.valid&&P.toVertex.layer!==e&&(L=P.toVertex.index,N=P.portToPos,P=P.portFromPos,x<P&&(y>L||y===L&&m>N)&&g++,P<x&&(L>y||L===y&&N>m)&&g++)}for(a[h*r+h]=g,f=h+1;f<r;f++){var k=0,F=0;if(0<=n){g=i[h].sourceEdgesArrayAccess;var D=i[f].sourceEdgesArrayAccess;for(c=0;c<g.length;c++)if(x=g[c],x.valid&&x.fromVertex.layer!==e)for(y=x.fromVertex.index,x=x.portFromPos,S=0;S<D.length;S++)P=D[S],P.valid&&P.fromVertex.layer!==e&&(L=P.fromVertex.index,P=P.portFromPos,(y<L||y===L&&x<P)&&F++,(L<y||L===y&&P<x)&&k++)}if(0>=n){for(g=i[h].destinationEdgesArrayAccess,D=i[f].destinationEdgesArrayAccess,c=0;c<g.length;c++)if(x=g[c],x.valid&&x.toVertex.layer!==e)for(y=x.toVertex.index,m=x.portToPos,S=0;S<D.length;S++)P=D[S],P.valid&&P.toVertex.layer!==e&&(L=P.toVertex.index,N=P.portToPos,(y<L||y===L&&m<N)&&F++,(L<y||L===y&&N<m)&&k++)}a[h*r+f]=k,a[f*r+h]=F}}return Rs(t,e,i),a}zt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.wa;e++)for(var n=$2(this,e,1),i=this.Hb[e],r=0;r<i;r++)for(var a=r;a<i;a++)t+=n[r*i+a];return t};function Kc(t){for(var e=0,n=0;n<=t.wa;n++){for(var i=t,r=n,a=Gs(i,r),h=i.Hb[r],g=0,f=0;f<h;f++){var c=a[f].destinationEdgesArrayAccess;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m];if(y.valid&&y.toVertex.layer!==r){var S=y.fromVertex.column+y.portFromColOffset,x=y.toVertex.column+y.portToColOffset;g+=(Math.abs(S-x)+1)*dv(y)}}}Rs(i,r,a),e+=g}return e}zt.prototype.normalize=function(){var t=1/0;this.Ja=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ja=Math.max(this.Ja,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ja-=t};function fv(t,e,n){for(var i=Gs(t,e),r=t.Hb[e],a=[],h=0;h<r;h++){var g=i[h],f=null;0>=n&&(f=g.sourceEdgesArrayAccess);var c=null;0<=n&&(c=g.destinationEdgesArrayAccess);var m=0,y=0,S=g.near;if(S!==null&&S.layer===g.layer&&(m+=S.column-1,y++),f!==null)for(S=0;S<f.length;S++){g=f[S];var x=g.fromVertex;g.valid&&!g.rev&&x.layer!==e&&(m+=x.column,y++)}if(c!==null)for(f=0;f<c.length;f++)g=c[f],S=g.toVertex,g.valid&&!g.rev&&S.layer!==e&&(m+=S.column,y++);a[h]=y===0?-1:m/y}return Rs(t,e,i),a}function J2(t,e,n){for(var i=Gs(t,e),r=t.Hb[e],a=[],h=0;h<r;h++){var g=i[h],f=null;0>=n&&(f=g.sourceEdgesArrayAccess);var c=null;0<=n&&(c=g.destinationEdgesArrayAccess);var m=0,y=[],S=g.near;if(S!==null&&S.layer===g.layer&&(y[m]=S.column-1,m++),g=void 0,f!==null)for(S=0;S<f.length;S++){g=f[S];var x=g.fromVertex;g.valid&&!g.rev&&x.layer!==e&&(y[m]=x.column+g.portFromColOffset,m++)}if(c!==null)for(f=0;f<c.length;f++)g=c[f],S=g.toVertex,g.valid&&!g.rev&&S.layer!==e&&(y[m]=S.column+g.portToColOffset,m++);m===0?a[h]=-1:(y.sort(function(P,L){return P-L}),c=m>>1,a[h]=(m&1)!==0?y[c]:y[c-1]+y[c]>>1)}return Rs(t,e,i),a}function Zg(t,e,n,i,r,a){if(e.component===i){if(e.component=n,r)for(var h=e.destinationEdges;h.next();){var g=h.value,f=g.toVertex,c=e.layer-f.layer;g=t.linkMinLength(g),c===g&&Zg(t,f,n,i,r,a)}if(a)for(h=e.sourceEdges;h.next();)g=h.value,f=g.fromVertex,c=f.layer-e.layer,g=t.linkMinLength(g),c===g&&Zg(t,f,n,i,r,a)}}function cv(t,e,n,i,r,a){if(e.component===i){if(e.component=n,r)for(var h=e.destinationEdges;h.next();)cv(t,h.value.toVertex,n,i,r,a);if(a)for(e=e.sourceEdges;e.next();)cv(t,e.value.fromVertex,n,i,r,a)}}zt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.rk){default:case yv:t=this.network;var e=0,n=t.vertexes.count-1,i=[];i.length=n+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;BN(t)!==null;){for(r=Z2(t);r!==null;)i[n]=r,n--,r.valid=!1,r=Z2(t);for(r=Q2(t);r!==null;)i[e]=r,e++,r.valid=!1,r=Q2(t);r=null;for(var a=0,h=this.network.vertexes.iterator;h.next();){var g=h.value;if(g.valid){for(var f=0,c=g.destinationEdges;c.next();)c.value.toVertex.valid&&f++;c=0;for(var m=g.sourceEdges;m.next();)m.value.fromVertex.valid&&c++;(r===null||a<f-c)&&(r=g,a=f-c)}}r!==null&&(i[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)e=i.value,e.fromVertex.index>e.toVertex.index&&(t.Ol(e),e.rev=!0);break;case $c:for(i=this.network.vertexes.iterator;i.next();)t=i.value,t.gg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Cg=0,i.reset();i.next();)e=i.value,e.sourceEdges.count===0&&pv(this,e);for(i.reset();i.next();)e=i.value,e.gg===-1&&pv(this,e);for(t.reset();t.next();)i=t.value,i.forest||(e=i.fromVertex,n=e.finish,r=i.toVertex,a=r.finish,r.gg<e.gg&&n<a&&(this.network.Ol(i),i.rev=!0));break;case Qg:for(t=this.network,e=t.vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)n=e.value,r=i[n.layer],r===void 0?i[n.layer]=[n]:r.push(n);for(n=e=0;n<i.length;n++)if(r=i[n],!r||r.length===0)e++;else if(0<n)for(a=0;a<r.length;a++)r[a].layer-=e;for(i=t.edges.iterator;i.next();)e=i.value,e.fromVertex.layer<e.toVertex.layer&&(t.Ol(e),e.rev=!0)}}};function BN(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Z2(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function Q2(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function pv(t,e){e.gg=t.Cg,t.Cg++;for(var n=e.destinationEdges;n.next();){var i=n.value,r=i.toVertex;r.gg===-1&&(i.forest=!0,pv(t,r))}e.finish=t.Cg,t.Cg++}zt.prototype.assignLayers=function(){switch(this.Ok){case vv:q2(this);break;case Sv:for(var t,e=this.network.vertexes.iterator;e.next();)t=tL(this,e.value),this.wa=Math.max(t,this.wa);for(e.reset();e.next();)t=e.value,t.layer=this.wa-t.layer;break;default:case Jc:for(q2(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&eL(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.wa=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.wa=Math.max(this.wa,n.layer)}}};function q2(t){for(var e=t.network.vertexes.iterator;e.next();){var n=b2(t,e.value);t.wa=Math.max(n,t.wa)}}function b2(t,e){var n=0;if(e.layer===-1){for(var i=e.destinationEdges;i.next();){var r=i.value,a=r.toVertex;r=t.linkMinLength(r),n=Math.max(n,b2(t,a)+r)}e.layer=n}else n=e.layer;return n}function tL(t,e){var n=0;if(e.layer===-1){for(var i=e.sourceEdges;i.next();){var r=i.value,a=r.fromVertex;r=t.linkMinLength(r),n=Math.max(n,tL(t,a)+r)}e.layer=n}else n=e.layer;return n}function eL(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)eL(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,r=i.length,a=0;a<r;a++){var h=i[a],g=h.fromVertex,f=h.toVertex;h=t.linkMinLength(h),g.layer-f.layer>h&&Zg(t,g,0,-1,!0,!1)}for(Zg(t,e,1,-1,!0,!0);e.component!==0;){for(a=0,i=1/0,g=0,f=null,h=t.network.vertexes.iterator;h.next();){var c=h.value;if(c.component===1){var m=0,y=!1,S=c.sourceEdgesArrayAccess;r=S.length;for(var x=0;x<r;x++){var P=S[x],L=P.fromVertex;m+=1,L.component!==1&&(a+=1,L=L.layer-c.layer,P=t.linkMinLength(P),i=Math.min(i,L-P))}for(S=c.destinationEdgesArrayAccess,r=S.length,x=0;x<r;x++)P=S[x].toVertex,--m,P.component!==1?--a:y=!0;(f===null||m<g)&&!y&&(f=c,g=m)}}if(0<a){for(n.reset();n.next();)r=n.value,r.component===1&&(r.layer+=i);e.component=0}else f.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(Zg(t,e,1,-1,!0,!1);e.component!==0;){for(i=0,r=1/0,a=0,g=null,f=t.network.vertexes.iterator;f.next();)if(h=f.value,h.component===1){for(c=0,m=!1,S=h.sourceEdgesArrayAccess,y=S.length,x=0;x<y;x++)P=S[x].fromVertex,c+=1,P.component!==1?i+=1:m=!0;for(S=h.destinationEdgesArrayAccess,y=S.length,x=0;x<y;x++)P=S[x],L=P.toVertex,--c,L.component!==1&&(--i,L=h.layer-L.layer,P=t.linkMinLength(P),r=Math.min(r,L-P));(g===null||c>a)&&!m&&(g=h,a=c)}if(0>i){for(n.reset();n.next();)i=n.value,i.component===1&&(i.layer-=r);e.component=0}else g.component=0}}}function nL(t,e,n){return t.L===90?n&&!e.rev||!n&&e.rev?270:90:t.L===180?n&&!e.rev||!n&&e.rev?0:180:t.L===270?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}zt.prototype.initializeIndices=function(){switch(this.Fk){default:case xv:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.Hb[n],this.Hb[n]++}break;case Zc:for(t=this.network.vertexes.iterator,e=this.wa;0<=e;e--)for(t.reset();t.next();)n=t.value,n.layer===e&&n.index===-1&&iL(this,n);break;case Pv:for(t=this.network.vertexes.iterator,e=0;e<=this.wa;e++)for(t.reset();t.next();)n=t.value,n.layer===e&&n.index===-1&&oL(this,n)}};function iL(t,e){var n=e.layer;for(e.index=t.Hb[n],t.Hb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var r=e[i],a=e[i+1];r.portFromColOffset>a.portFromColOffset&&(n=!0,e[i]=a,e[i+1]=r)}}for(n=0;n<e.length;n++)i=e[n],i.valid&&(i=i.toVertex,i.index===-1&&iL(t,i))}function oL(t,e){var n=e.layer;e.index=t.Hb[n],t.Hb[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var r=e[n],a=e[n+1];r.portToColOffset>a.portToColOffset&&(i=!0,e[n]=a,e[n+1]=r)}for(n=0;n<e.length;n++)i=e[n],i.valid&&(i=i.fromVertex,i.index===-1&&oL(t,i))}zt.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=In(this),n,i;for(n=0;n<this.Xi;n++){for(i=0;i<=this.wa;i++)Hc(this,i,1),Oi(this,i,1);var r=this.countCrossings();for(r<t&&(t=r,e=In(this)),i=this.wa;0<=i;i--)Hc(this,i,-1),Oi(this,i,-1);r=this.countCrossings(),r<t&&(t=r,e=In(this))}for(Pi(this,e),n=0;n<this.Xi;n++){for(i=0;i<=this.wa;i++)Hc(this,i,0),Oi(this,i,0);for(r=this.countCrossings(),r<t&&(t=r,e=In(this)),i=this.wa;0<=i;i--)Hc(this,i,0),Oi(this,i,0);r=this.countCrossings(),r<t&&(t=r,e=In(this))}Pi(this,e);var a,h,g;switch(this.ek){case wv:break;case Lv:for(g=t+1;(i=this.countCrossings())<g;)for(g=i,n=this.wa;0<=n;n--)for(h=0;h<=n;h++){for(a=!0;a;)for(a=!1,i=n;i>=h;i--)a=Oi(this,i,-1)||a;for(r=this.countCrossings(),r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=n;i>=h;i--)a=Oi(this,i,1)||a;for(r=this.countCrossings(),r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=h;i<=n;i++)a=Oi(this,i,1)||a;for(r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=h;i<=n;i++)a=Oi(this,i,-1)||a;for(r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=n;i>=h;i--)a=Oi(this,i,0)||a;for(r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=h;i<=n;i++)a=Oi(this,i,0)||a;r>=t?Pi(this,e):(t=r,e=In(this))}break;default:case Qc:for(n=this.wa,h=0,g=t+1;(i=this.countCrossings())<g;){for(g=i,a=!0;a;)for(a=!1,i=n;i>=h;i--)a=Oi(this,i,-1)||a;for(r=this.countCrossings(),r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=n;i>=h;i--)a=Oi(this,i,1)||a;for(r=this.countCrossings(),r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=h;i<=n;i++)a=Oi(this,i,1)||a;for(r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=h;i<=n;i++)a=Oi(this,i,-1)||a;for(r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=n;i>=h;i--)a=Oi(this,i,0)||a;for(r>=t?Pi(this,e):(t=r,e=In(this)),a=!0;a;)for(a=!1,i=h;i<=n;i++)a=Oi(this,i,0)||a;r>=t?Pi(this,e):(t=r,e=In(this))}}Pi(this,e)};function Hc(t,e,n){var i=Gs(t,e),r=t.Hb[e],a=J2(t,e,n),h=fv(t,e,n);for(n=0;n<r;n++)h[n]===-1&&(h[n]=i[n].column),a[n]===-1&&(a[n]=i[n].column);for(var g=!0,f;g;)for(g=!1,n=0;n<r-1;n++)(a[n+1]<a[n]||a[n+1]===a[n]&&h[n+1]<h[n])&&(g=!0,f=a[n],a[n]=a[n+1],a[n+1]=f,f=h[n],h[n]=h[n+1],h[n+1]=f,f=i[n],i[n]=i[n+1],i[n+1]=f);for(n=a=0;n<r;n++)f=i[n],f.index=n,a+=t.nodeMinColumnSpace(f,!0),f.column=a,a+=1,a+=t.nodeMinColumnSpace(f,!1);Rs(t,e,i)}function Oi(t,e,n){var i=Gs(t,e),r=t.Hb[e];n=$2(t,e,n);var a,h=[];for(a=0;a<r;a++)h[a]=-1;var g=[];for(a=0;a<r;a++)g[a]=-1;for(var f=!1,c=!0;c;)for(c=!1,a=0;a<r-1;a++){var m=n[i[a].index*r+i[a+1].index],y=n[i[a+1].index*r+i[a].index],S=0,x=0,P=i[a].column,L=i[a+1].column,N=t.nodeMinColumnSpace(i[a],!0),k=t.nodeMinColumnSpace(i[a],!1),F=t.nodeMinColumnSpace(i[a+1],!0),D=t.nodeMinColumnSpace(i[a+1],!1);N=P-N+F,k=L-k+D;var j=i[a].sourceEdges.iterator;for(j.reset();j.next();)if(F=j.value,D=F.fromVertex,F.valid&&D.layer===e){for(F=0;i[F]!==D;)F++;F<a&&(S+=2*(a-F),x+=2*(a+1-F)),F===a+1&&(S+=1),F>a+1&&(S+=4*(F-a),x+=4*(F-(a+1)))}for(j=i[a].destinationEdges.iterator,j.reset();j.next();)if(F=j.value,D=F.toVertex,F.valid&&D.layer===e){for(F=0;i[F]!==D;)F++;F===a+1&&(x+=1)}for(j=i[a+1].sourceEdges.iterator,j.reset();j.next();)if(F=j.value,D=F.fromVertex,F.valid&&D.layer===e){for(F=0;i[F]!==D;)F++;F<a&&(S+=2*(a+1-F),x+=2*(a-F)),F===a&&(x+=1),F>a+1&&(S+=4*(F-(a+1)),x+=4*(F-a))}for(j=i[a+1].destinationEdges.iterator,j.reset();j.next();)if(F=j.value,D=F.toVertex,F.valid&&D.layer===e){for(F=0;i[F]!==D;)F++;F===a&&(S+=1)}F=D=0,j=h[i[a].index];var E=g[i[a].index],R=h[i[a+1].index],J=g[i[a+1].index];j!==-1&&(D+=Math.abs(j-P),F+=Math.abs(j-k)),E!==-1&&(D+=Math.abs(E-P),F+=Math.abs(E-k)),R!==-1&&(D+=Math.abs(R-L),F+=Math.abs(R-N)),J!==-1&&(D+=Math.abs(J-L),F+=Math.abs(J-N)),(x<S-.5||x===S&&y<m-.5||x===S&&y===m&&F<D-.5)&&(c=f=!0,i[a].column=k,i[a+1].column=N,m=i[a],i[a]=i[a+1],i[a+1]=m)}for(a=0;a<r;a++)i[a].index=a;return Rs(t,e,i),f}zt.prototype.straightenAndPack=function(){var t=(this.Tf&1)!==0,e=(this.Tf&YN)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.wa;e++)n[e]=0;for(var i,r=this.network.vertexes.iterator;r.next();){var a=r.value;e=a.layer,i=a.column,a=this.nodeMinColumnSpace(a,!1),n[e]=Math.max(n[e],i+a)}for(r.reset();r.next();)a=r.value,e=a.layer,i=a.column,a.column=(8*(this.Ja-n[e])>>1)+8*i;this.Ja*=8}if((this.Tf&2)!==0)for(n=!0;n;){for(n=!1,e=this.zc+1;e<=this.wa;e++)n=eu(this,e,1)||n;for(e=this.zc-1;0<=e;e--)n=eu(this,e,-1)||n;n=eu(this,this.zc,0)||n}if((this.Tf&4)!==0){for(e=this.zc+1;e<=this.wa;e++)mv(this,e,1);for(e=this.zc-1;0<=e;e--)mv(this,e,-1);mv(this,this.zc,0)}if(t&&(rL(this,-1),rL(this,1)),(this.Tf&2)!==0)for(n=!0;n;){for(n=!1,n=eu(this,this.zc,0)||n,e=this.zc+1;e<=this.wa;e++)n=eu(this,e,0)||n;for(e=this.zc-1;0<=e;e--)n=eu(this,e,0)||n}};function eu(t,e,n){for(var i=!1;GN(t,e,n);)i=!0;return i}function GN(t,e,n){var i,r=Gs(t,e),a=t.Hb[e],h=fv(t,e,-1);if(0<n)for(i=0;i<a;i++)h[i]=-1;var g=fv(t,e,1);if(0>n)for(i=0;i<a;i++)g[i]=-1;for(var f=!1,c=!0;c;)for(c=!1,i=0;i<a;i++){var m=r[i].column,y=t.nodeMinColumnSpace(r[i],!0),S=t.nodeMinColumnSpace(r[i],!1),x=0;0>i-1||m-r[i-1].column-1>y+t.nodeMinColumnSpace(r[i-1],!1)?x=m-1:x=m,y=i+1>=a||r[i+1].column-m-1>S+t.nodeMinColumnSpace(r[i+1],!0)?m+1:m;var P=S=0,L=0;if(0>=n)for(var N=r[i].sourceEdges.iterator;N.next();){var k=N.value,F=k.fromVertex;if(k.valid&&F.layer!==e){var D=dv(k),j=k.portFromColOffset;k=k.portToColOffset,F=F.column,S+=(Math.abs(m+k-(F+j))+1)*D,P+=(Math.abs(x+k-(F+j))+1)*D,L+=(Math.abs(y+k-(F+j))+1)*D}}if(0<=n)for(N=r[i].destinationEdges.iterator;N.next();)k=N.value,F=k.toVertex,k.valid&&F.layer!==e&&(D=dv(k),j=k.portFromColOffset,k=k.portToColOffset,F=F.column,S+=(Math.abs(m+j-(F+k))+1)*D,P+=(Math.abs(x+j-(F+k))+1)*D,L+=(Math.abs(y+j-(F+k))+1)*D);k=j=D=0,N=h[r[i].index],F=g[r[i].index],N!==-1&&(D+=Math.abs(N-m),j+=Math.abs(N-x),k+=Math.abs(N-y)),F!==-1&&(D+=Math.abs(F-m),j+=Math.abs(F-x),k+=Math.abs(F-y)),P<S||P===S&&j<D?(c=f=!0,r[i].column=x):(L<S||L===S&&k<D)&&(c=f=!0,r[i].column=y)}return Rs(t,e,r),t.normalize(),f}function mv(t,e,n){var i=Gs(t,e),r=t.Hb[e],a=J2(t,e,n),h=[];for(n=0;n<r;n++)h[n]=a[n];for(a=!0;a;)for(a=!1,n=0;n<r;n++){var g=i[n].column,f=t.nodeMinColumnSpace(i[n],!0),c=t.nodeMinColumnSpace(i[n],!1),m=0;if(h[n]===-1)if(n===0&&n===r-1)m=g;else if(n===0){var y=i[n+1].column;y-g===c+t.nodeMinColumnSpace(i[n+1],!0)?m=g-1:m=g}else n===r-1?(y=i[n-1].column,m=g-y===f+t.nodeMinColumnSpace(i[n-1],!1)?g+1:g):(y=i[n-1].column,f=y+t.nodeMinColumnSpace(i[n-1],!1)+f+1,y=i[n+1].column,c=y-t.nodeMinColumnSpace(i[n+1],!0)-c-1,m=(f+c)/2|0);else n===0&&n===r-1?m=h[n]:n===0?(y=i[n+1].column,c=y-t.nodeMinColumnSpace(i[n+1],!0)-c-1,m=Math.min(h[n],c)):n===r-1?(y=i[n-1].column,f=y+t.nodeMinColumnSpace(i[n-1],!1)+f+1,m=Math.max(h[n],f)):(y=i[n-1].column,f=y+t.nodeMinColumnSpace(i[n-1],!1)+f+1,y=i[n+1].column,c=y-t.nodeMinColumnSpace(i[n+1],!0)-c-1,f<h[n]&&h[n]<c?m=h[n]:f>=h[n]?m=f:c<=h[n]&&(m=c));m!==g&&(a=!0,i[n].column=m)}Rs(t,e,i),t.normalize()}function RN(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var r=i.value,a=t.nodeMinColumnSpace(r,!0),h=t.nodeMinColumnSpace(r,!1);if(r.column-a<=e&&r.column+h>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)n=i.value,n.column>e&&(--n.column,t=!0);return t}function VN(t,e){var n=e+1,i,r=[],a=[];for(i=0;i<=t.wa;i++)r[i]=!1,a[i]=!1;for(var h=t.network.vertexes.iterator;h.next();){i=h.value;var g=i.column-t.nodeMinColumnSpace(i,!0),f=i.column+t.nodeMinColumnSpace(i,!1);g<=e&&f>=e&&(r[i.layer]=!0),g<=n&&f>=n&&(a[i.layer]=!0)}for(g=!0,n=!1,i=0;i<=t.wa;i++)g=g&&!(r[i]&&a[i]);if(g)for(h.reset();h.next();)t=h.value,t.column>e&&(--t.column,n=!0);return n}function rL(t,e){for(var n=0;n<=t.Ja;n++)for(;RN(t,n););for(t.normalize(),n=0;n<t.Ja;n++)for(;VN(t,n););t.normalize();var i;if(0<e)for(n=0;n<=t.Ja;n++){var r=In(t),a=Kc(t);for(i=a+1;a<i;){i=a,sL(t,n,1);var h=Kc(t);h>a?Pi(t,r):h<a&&(a=h,r=In(t))}}if(0>e)for(n=t.Ja;0<=n;n--)for(r=In(t),a=Kc(t),i=a+1;a<i;)i=a,sL(t,n,-1),h=Kc(t),h>a?Pi(t,r):h<a&&(a=h,r=In(t));t.normalize()}function sL(t,e,n){t.Lc=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var r=i.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.Lc)}if(0>n)for(i.reset();i.next();)r=i.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.Lc);for(t.Lc++,i.reset();i.next();)e=i.value,e.component===-1&&(cv(t,e,t.Lc,-1,!0,!0),t.Lc++);var a;for(e=[],a=0;a<t.Lc*t.Lc;a++)e[a]=!1;for(r=[],a=0;a<(t.wa+1)*(t.Ja+1);a++)r[a]=-1;for(i.reset();i.next();){a=i.value;for(var h=a.layer,g=Math.max(0,a.column-t.nodeMinColumnSpace(a,!0)),f=Math.min(t.Ja,a.column+t.nodeMinColumnSpace(a,!1));g<=f;g++)r[h*(t.Ja+1)+g]=a.component}for(a=0;a<=t.wa;a++){if(0<n)for(h=0;h<t.Ja;h++)r[a*(t.Ja+1)+h]!==-1&&r[a*(t.Ja+1)+h+1]!==-1&&r[a*(t.Ja+1)+h]!==r[a*(t.Ja+1)+h+1]&&(e[r[a*(t.Ja+1)+h]*t.Lc+r[a*(t.Ja+1)+h+1]]=!0);if(0>n)for(h=t.Ja;0<h;h--)r[a*(t.Ja+1)+h]!==-1&&r[a*(t.Ja+1)+h-1]!==-1&&r[a*(t.Ja+1)+h]!==r[a*(t.Ja+1)+h-1]&&(e[r[a*(t.Ja+1)+h]*t.Lc+r[a*(t.Ja+1)+h-1]]=!0)}for(r=[],a=0;a<t.Lc;a++)r[a]=!0;for(h=[],h.push(0);h.length!==0;)if(f=h[h.length-1],h.pop(),r[f])for(r[f]=!1,a=0;a<t.Lc;a++)e[f*t.Lc+a]&&h.splice(0,0,a);if(0<n)for(i.reset();i.next();)t=i.value,r[t.component]&&--t.column;if(0>n)for(i.reset();i.next();)n=i.value,r[n.component]&&(n.column+=1)}zt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=Wc(this,!0),e=Wc(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;i!==null&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()};function Wc(t,e){return t.L===270?e?ki:Ci:t.L===90?e?Ci:ki:t.L===180?e?Ni:Wn:e?Wn:Ni}zt.prototype.commitNodes=function(){this.ae=[],this.Cd=[],this.Bd=[],this.Qa=[];for(var t=0;t<=this.wa;t++)this.ae[t]=0,this.Cd[t]=0,this.Bd[t]=0,this.Qa[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.ae[n]=Math.max(this.ae[n],this.nodeMinLayerSpace(e,!0)),this.Cd[n]=Math.max(this.Cd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.be;for(var i=0;i<=this.wa;i++){var r=n;0>=this.ae[i]+this.Cd[i]&&(r=0),0<i&&(e+=r/2),this.L===90||this.L===0?(e+=this.Cd[i],this.Bd[i]=e,e+=this.ae[i]):(e+=this.ae[i],this.Bd[i]=e,e+=this.Cd[i]),i<this.wa&&(e+=r/2),this.Qa[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.wa;i++)this.L===270?this.Bd[i]=e.y+this.Bd[i]:this.L===90?(this.Bd[i]=e.y+n-this.Bd[i],this.Qa[i]=n-this.Qa[i]):this.L===180?this.Bd[i]=e.x+this.Bd[i]:(this.Bd[i]=e.x+n-this.Bd[i],this.Qa[i]=n-this.Qa[i]);for(t.reset(),n=i=1/0;t.next();){r=t.value;var a=r.layer,h=r.column|0;if(this.L===270||this.L===90){var g=e.x+this.gc*h;a=this.Bd[a]}else g=this.Bd[a],a=e.y+this.gc*h;r.centerX=g,r.centerY=a,i=Math.min(r.x,i),n=Math.min(r.y,n)}for(i=e.x-i,e=e.y-n,this.Yc=new C(i,e),t.reset();t.next();)n=t.value,n.x+=i,n.y+=e,n.commit()},zt.prototype.nu=function(){for(var t=0,e=this.be,n=0;n<=this.wa;n++)t+=this.ae[n],t+=this.Cd[n];t+=this.wa*e,e=[],n=this.gc*this.Ja;for(var i=this.maxLayer;0<=i;i--)this.L===270?i===0?e.push(new G(0,0,n,Math.abs(this.Qa[0]))):e.push(new G(0,this.Qa[i-1],n,Math.abs(this.Qa[i-1]-this.Qa[i]))):this.L===90?i===0?e.push(new G(0,this.Qa[0],n,Math.abs(this.Qa[0]-t))):e.push(new G(0,this.Qa[i],n,Math.abs(this.Qa[i-1]-this.Qa[i]))):this.L===180?i===0?e.push(new G(0,0,Math.abs(this.Qa[0]),n)):e.push(new G(this.Qa[i-1],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n)):i===0?e.push(new G(this.Qa[0],0,Math.abs(this.Qa[0]-t),n)):e.push(new G(this.Qa[i],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n));this.commitLayers(e,this.Yc)},zt.prototype.commitLayers=function(){},zt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.jh(),e.Aj(),e.pf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.mg();for(t.reset();t.next();){var n=t.value;if(e=n.link,e!==null){e.jh();var i=e,r=i.fromNode,a=i.toNode,h=i.fromPort,g=i.toPort;if(r!==null){var f=r.findVisibleNode();f!==null&&f!==r&&(r=f,h=f.port)}a!==null&&(f=a.findVisibleNode(),f!==null&&f!==a&&(a=f,g=f.port));var c=e.computeSpot(!0,h);f=e.computeSpot(!1,g);var m=n.fromVertex,y=n.toVertex;if(n.valid){if(e.curve===si&&e.pointsCount===4)if(m.column===y.column)n=e.getLinkPoint(r,h,c,!0,!1,a,g),h=e.getLinkPoint(a,g,f,!1,!1,r,h),n.v()||n.set(r.actualBounds.center),h.v()||h.set(a.actualBounds.center),e.Aj(),e.mf(n.x,n.y),e.mf((2*n.x+h.x)/3,(2*n.y+h.y)/3),e.mf((n.x+2*h.x)/3,(n.y+2*h.y)/3),e.mf(h.x,h.y);else{var S=!1,x=!1;if(h!==null&&c===$e&&(S=!0),g!==null&&f===$e&&(x=!0),S||x){var P=e.i(0).x;if(n=e.i(0).y,m=e.i(3).x,i=e.i(3).y,S){if(this.L===90||this.L===270){S=P;var L=(n+i)/2}else S=(P+m)/2,L=n;e.M(1,S,L),c=e.getLinkPoint(r,h,c,!0,!1,a,g),c.v()||c.set(r.actualBounds.center),e.M(0,c.x,c.y)}x&&(this.L===90||this.L===270?(c=m,n=(n+i)/2):(c=(P+m)/2,n=i),e.M(2,c,n),r=e.getLinkPoint(a,g,f,!1,!1,r,h),r.v()||r.set(a.actualBounds.center),e.M(3,r.x,r.y))}}e.pf()}else if(m.layer===y.layer)e.pf();else{if(S=x=!1,L=this.be,P=e.firstPickIndex+1,e.isOrthogonal){S=!0;var N=e.pointsCount;4<N&&e.points.removeRange(2,N-3)}else if(e.curve===si)x=!0,N=e.pointsCount,4<N&&e.points.removeRange(2,N-3),N===4&&(P=2);else{N=e.pointsCount;var k=c===$e,F=f===$e;2<N&&k&&F?e.points.removeRange(1,N-2):3<N&&k&&!F?e.points.removeRange(1,N-3):3<N&&!k&&F?e.points.removeRange(2,N-2):4<N&&!k&&!F&&e.points.removeRange(2,N-3)}if(n.rev){for(;y!==null&&m!==y;){var D=N=null;for(k=y.sourceEdges.iterator;k.next()&&(F=k.value,F.link!==n.link||(N=F.fromVertex,D=F.toVertex,N.node!==null)););if(N===null)break;if(N!==m){k=e.i(P-1).x,F=e.i(P-1).y;var j=N.centerX,E=N.centerY;if(S)this.L===180||this.L===0?P===e.firstPickIndex+1?(e.l(P++,k,F),e.l(P++,k,E)):(D!==null?D.centerY:F)!==E&&(D=this.Qa[N.layer-1]+this.Yc.x,e.l(P++,D,F),e.l(P++,D,E)):P===e.firstPickIndex+1?(e.l(P++,k,F),e.l(P++,j,F)):(D!==null?D.centerX:k)!==j&&(D=this.Qa[N.layer-1]+this.Yc.y,e.l(P++,k,D),e.l(P++,j,D));else if(P===e.firstPickIndex+1){D=Math.max(10,this.ae[y.layer]);var R=Math.max(10,this.Cd[y.layer]);if(x)this.L===180?j<=y.bounds.x?(y=y.bounds.x,e.l(P++,y-D,E),e.l(P++,y,E),e.l(P++,y+R,E)):(e.l(P++,j-D,E),e.l(P++,j,E),e.l(P++,j+R,E)):this.L===90?E>=y.bounds.bottom?(y=y.bounds.y+y.bounds.height,e.l(P++,j,y+R),e.l(P++,j,y),e.l(P++,j,y-D)):(e.l(P++,j,E+R),e.l(P++,j,E),e.l(P++,j,E-D)):this.L===270?E<=y.bounds.y?(y=y.bounds.y,e.l(P++,j,y-D),e.l(P++,j,y),e.l(P++,j,y+R)):(e.l(P++,j,E-D),e.l(P++,j,E),e.l(P++,j,E+R)):this.L===0&&(j>=y.bounds.right?(y=y.bounds.x+y.bounds.width,e.l(P++,y+R,E),e.l(P++,y,E),e.l(P++,y-D,E)):(e.l(P++,j+R,E),e.l(P++,j,E),e.l(P++,j-D,E)));else{e.l(P++,k,F);var J=0;this.L===180||this.L===0?((this.L===180?j>=y.bounds.right:j<=y.bounds.x)&&(J=(this.L===0?-D:R)/2),e.l(P++,k+J,E)):((this.L===270?E>=y.bounds.bottom:E<=y.bounds.y)&&(J=(this.L===90?-D:R)/2),e.l(P++,j,F+J)),e.l(P++,j,E)}}else D=Math.max(10,this.ae[N.layer]),R=Math.max(10,this.Cd[N.layer]),x?this.L===180?(e.l(P++,j-D-L,E),e.l(P++,Math.min(j-D+L/2,j),E),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,Math.max(j+R-L/2,j),E),e.l(P++,j+R+L,E)):this.L===90?(e.l(P++,j,E+R+L),e.l(P++,j,Math.max(E+R-L/2,E)),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,j,Math.min(E-D+L/2,E)),e.l(P++,j,E-D-L)):this.L===270?(e.l(P++,j,E-D-L),e.l(P++,j,Math.min(E-D+L/2,E)),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,j,Math.max(E+R-L/2,E)),e.l(P++,j,E+R+L)):(e.l(P++,j+R+L,E),e.l(P++,Math.max(j+R-L/2,j),E),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,Math.min(j-D+L/2,j),E),e.l(P++,j-D-L,E)):e.l(P++,j,E)}y=N}(g===null||c!==$e||S)&&(k=e.i(P-1).x,F=e.i(P-1).y,j=e.i(P).x,E=e.i(P).y,S?(L=this.Cd[m.layer],this.L===180||this.L===0?(S=F,S>=m.bounds.y&&S<=m.bounds.bottom&&(this.L===180?j>=m.bounds.x:j<=m.bounds.right)&&(y=m.centerX+(this.L===180?-L:L),S<m.bounds.y+m.bounds.height/2?S=m.bounds.y-this.gc/2:S=m.bounds.bottom+this.gc/2,e.l(P++,y,F),e.l(P++,y,S)),e.l(P++,j,S)):(S=k,S>=m.bounds.x&&S<=m.bounds.right&&(this.L===270?E>=m.bounds.y:E<=m.bounds.bottom)&&(y=m.centerY+(this.L===270?-L:L),S<m.bounds.x+m.bounds.width/2?S=m.bounds.x-this.gc/2:S=m.bounds.right+this.gc/2,e.l(P++,k,y),e.l(P++,S,y)),e.l(P++,S,E)),e.l(P++,j,E)):x?(D=Math.max(10,this.ae[m.layer]),R=Math.max(10,this.Cd[m.layer]),this.L===180&&j>=m.bounds.x?(y=m.bounds.x+m.bounds.width,e.M(P-2,y,F),e.M(P-1,y+R,F)):this.L===90&&E<=m.bounds.bottom?(y=m.bounds.y,e.M(P-2,k,y),e.M(P-1,k,y-D)):this.L===270&&E>=m.bounds.y?(y=m.bounds.y+m.bounds.height,e.M(P-2,k,y),e.M(P-1,k,y+R)):this.L===0&&j<=m.bounds.right&&(y=m.bounds.x,e.M(P-2,y,F),e.M(P-1,y-D,F))):(D=Math.max(10,this.ae[m.layer]),R=Math.max(10,this.Cd[m.layer]),S=0,this.L===180||this.L===0?((this.L===180?j<=m.bounds.x:j>=m.bounds.right)&&(S=(this.L===0?R:-D)/2),e.l(P++,j+S,F)):((this.L===270?E<=m.bounds.y:E>=m.bounds.bottom)&&(S=(this.L===90?R:-D)/2),e.l(P++,k,E+S)),e.l(P++,j,E)))}else{for(;m!==null&&m!==y;){for(D=N=null,m=m.destinationEdges.iterator;m.next()&&(k=m.value,k.link!==n.link||(N=k.toVertex,D=k.fromVertex,D.node!==null&&(D=null),N.node!==null)););if(N===null)break;N!==y&&(k=e.i(P-1).x,F=e.i(P-1).y,j=N.centerX,E=N.centerY,S?this.L===180||this.L===0?(D!==null?D.centerY:F)!==E&&(D=this.Qa[N.layer]+this.Yc.x,P===e.firstPickIndex+1&&(D=this.L===0?Math.max(D,k):Math.min(D,k)),e.l(P++,D,F),e.l(P++,D,E)):(D!==null?D.centerX:k)!==j&&(D=this.Qa[N.layer]+this.Yc.y,P===e.firstPickIndex+1&&(D=this.L===90?Math.max(D,F):Math.min(D,F)),e.l(P++,k,D),e.l(P++,j,D)):(D=Math.max(10,this.ae[N.layer]),R=Math.max(10,this.Cd[N.layer]),x?this.L===180?(e.l(P++,j+R+L,E),e.l(P++,Math.max(j+R-L/2,j),E),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,Math.min(j-D+L/2,j),E),e.l(P++,j-D-L,E)):this.L===90?(e.l(P++,j,E-D-L),e.l(P++,j,Math.min(E-D+L/2,E)),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,j,Math.max(E+R-L/2,E)),e.l(P++,j,E+R+L)):this.L===270?(e.l(P++,j,E+R+L),e.l(P++,j,Math.max(E+R-L/2,E)),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,j,Math.min(E-D+L/2,E)),e.l(P++,j,E-D-L)):(e.l(P++,j-D-L,E),e.l(P++,Math.min(j-D+L/2,j),E),e.l(P++,j,E),e.l(P++,j,E),e.l(P++,Math.max(j+R-L/2,j),E),e.l(P++,j+R+L,E)):this.L===180?(e.l(P++,j+R,E),e.l(P++,j-D,E)):this.L===90?(e.l(P++,j,E-D),e.l(P++,j,E+R)):this.L===270?(e.l(P++,j,E+R),e.l(P++,j,E-D)):(e.l(P++,j-D,E),e.l(P++,j+R,E)))),m=N}S&&(k=e.i(P-1).x,F=e.i(P-1).y,j=e.i(P).x,E=e.i(P).y,this.L===180||this.L===0?F!==E&&(D=this.L===0?Math.min(Math.max((j+k)/2,this.Qa[y.layer]+this.Yc.x),j):Math.max(Math.min((j+k)/2,this.Qa[y.layer]+this.Yc.x),j),e.l(P++,D,F),e.l(P++,D,E)):k!==j&&(D=this.L===90?Math.min(Math.max((E+F)/2,this.Qa[y.layer]+this.Yc.y),E):Math.max(Math.min((E+F)/2,this.Qa[y.layer]+this.Yc.y),E),e.l(P++,k,D),e.l(P++,j,D)))}i!==null&&x&&(h!==null&&(c===$e&&(c=e.i(0),i=e.i(2),c.C(i)||e.M(1,(c.x+i.x)/2,(c.y+i.y)/2)),c=e.getLinkPoint(r,h,$e,!0,!1,a,g),c.v()||c.set(r.actualBounds.center),e.M(0,c.x,c.y)),g!==null&&(f===$e&&(f=e.i(e.pointsCount-1),c=e.i(e.pointsCount-3),f.C(c)||e.M(e.pointsCount-2,(f.x+c.x)/2,(f.y+c.y)/2)),r=e.getLinkPoint(a,g,$e,!1,!1,r,h),r.v()||r.set(a.actualBounds.center),e.M(e.pointsCount-1,r.x,r.y))),e.pf(),n.commit()}}}this.avoidOrthogonalOverlaps()},zt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new tt,e=this.network.edges.iterator;e.next();){var n=e.value.link;n!==null&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(this.L===90||this.L===270){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(i!==null&&i.isOrthogonal)for(var r=2;r<i.pointsCount-3;r++){var a=i.i(r),h=i.i(r+1);if(this.B(a.y,h.y)&&!this.B(a.x,h.x)){var g=new Vs;g.layer=Math.floor(a.y/2);var f=i.i(0),c=i.i(i.pointsCount-1);if(g.first=f.x*f.x+f.y,g.fc=c.x*c.x+c.y,g.ld=Math.min(a.x,h.x),g.Bc=Math.max(a.x,h.x),g.index=r,g.link=i,r+2<i.pointsCount){f=i.i(r-1),c=i.i(r+2);var m=0;f.y<a.y?m=c.y<a.y?3:a.x<h.x?2:1:f.y>a.y&&(m=c.y>a.y?0:h.x<a.x?2:1),g.j=m}n.push(g)}}}if(1<n.length)for(n.sort(this.Cx),t=0;t<n.length;){for(a=n[t].layer,i=t+1;i<n.length&&n[i].layer===a;)i++;if(1<i-t)for(a=t;a<i;){for(h=n[a].Bc,r=t+1;r<i&&n[r].ld<h;)h=Math.max(h,n[r].Bc),r++;if(h=r-a,1<h){for(this.ri(n,this.js,a,a+h),m=1,g=n[a].fc,f=a;f<r;f++)c=n[f],c.fc!==g&&(m++,g=c.fc);this.ri(n,this.Bx,a,a+h);var y=1;for(g=n[a].first,f=a;f<r;f++)c=n[f],c.first!==g&&(y++,g=c.first);for(f=!0,c=y,m<y?(f=!1,c=m,g=n[a].fc,this.ri(n,this.js,a,a+h)):g=n[a].first,m=0,y=a;y<r;y++){var S=n[y];(f?S.first:S.fc)!==g&&(m++,g=f?S.first:S.fc);var x=S.link;a=x.i(S.index),h=x.i(S.index+1);var P=this.linkSpacing*(m-(c-1)/2);e++,x.jh(),x.M(S.index,a.x,a.y+P),x.M(S.index+1,h.x,h.y+P),x.pf()}}a=r}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(i=t.value,i!==null&&i.isOrthogonal)for(r=2;r<i.pointsCount-3;r++)a=i.i(r),h=i.i(r+1),this.B(a.x,h.x)&&!this.B(a.y,h.y)&&(g=new Vs,g.layer=Math.floor(a.x/2),f=i.i(0),c=i.i(i.pointsCount-1),g.first=f.x+f.y*f.y,g.fc=c.x+c.y*c.y,g.ld=Math.min(a.y,h.y),g.Bc=Math.max(a.y,h.y),g.index=r,g.link=i,r+2<i.pointsCount&&(f=i.i(r-1),c=i.i(r+2),m=0,f.x<a.x?m=c.x<a.x?3:a.y<h.y?2:1:f.x>a.x&&(m=c.x>a.x?0:h.y<a.y?2:1),g.j=m),n.push(g));if(1<n.length)for(n.sort(this.Cx),t=0;t<n.length;){for(a=n[t].layer,i=t+1;i<n.length&&n[i].layer===a;)i++;if(1<i-t)for(a=t;a<i;){for(h=n[a].Bc,r=t+1;r<i&&n[r].ld<h;)h=Math.max(h,n[r].Bc),r++;if(h=r-a,1<h){for(this.ri(n,this.js,a,a+h),m=1,g=n[a].fc,f=a;f<r;f++)c=n[f],c.fc!==g&&(m++,g=c.fc);for(this.ri(n,this.Bx,a,a+h),y=1,g=n[a].first,f=a;f<r;f++)c=n[f],c.first!==g&&(y++,g=c.first);for(f=!0,c=y,m<y?(f=!1,c=m,g=n[a].fc,this.ri(n,this.js,a,a+h)):g=n[a].first,m=0,y=a;y<r;y++)S=n[y],(f?S.first:S.fc)!==g&&(m++,g=f?S.first:S.fc),x=S.link,a=x.i(S.index),h=x.i(S.index+1),P=this.linkSpacing*(m-(c-1)/2),e++,x.jh(),x.M(S.index,a.x+P,a.y),x.M(S.index+1,h.x+P,h.y),x.pf()}a=r}t=i}}}},l=zt.prototype,l.Cx=function(t,e){return t instanceof Vs&&e instanceof Vs&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},l.Bx=function(t,e){return t instanceof Vs&&e instanceof Vs&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},l.js=function(t,e){return t instanceof Vs&&e instanceof Vs&&t!==e?t.fc<e.fc?-1:t.fc>e.fc||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},l.B=function(t,e){return t-=e,-1<t&&1>t},l.ri=function(t,e,n,i){var r=t.length,a=i-n;if(!(1>=a))if((0>n||n>=r-1)&&B("not in range 0 <= from < length: "+n),a===2)i=t[n],r=t[n+1],0<e(i,r)&&(t[n]=r,t[n+1]=i);else if(n===0)if(i>=r)t.sort(e);else for(n=t.slice(0,i),n.sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=r)for(i=t.slice(n),i.sort(e),e=n;e<r;e++)t[e]=i[e-n];else for(r=t.slice(n,i),r.sort(e),e=n;e<i;e++)t[e]=r[e-n]};function Gs(t,e){var n=t.Hb[e];if(n>=t.we.length){for(var i=[],r=0;r<t.we.length;r++)i[r]=t.we[r];t.we=i}for(t.we[n]===void 0||t.we[n]===null?i=[]:(i=t.we[n],t.we[n]=null),t=t.rn[e],e=0;e<t.length;e++)n=t[e],i[n.index]=n;return i}function Rs(t,e,n){t.we[t.Hb[e]]=n}I.Object.defineProperties(zt.prototype,{layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&0<=t&&(this.be=t,this.D())}},columnSpacing:{get:function(){return this.gc},set:function(t){this.gc!==t&&0<t&&(this.gc=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L!==t&&(t===0||t===90||t===180||t===270?(this.L=t,this.D()):B("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.rk},set:function(t){this.rk===t||t!==yv&&t!==$c&&t!==Qg||(this.rk=t,this.D())}},layeringOption:{get:function(){return this.Ok},set:function(t){this.Ok===t||t!==Jc&&t!==vv&&t!==Sv||(this.Ok=t,this.D())}},initializeOption:{get:function(){return this.Fk},set:function(t){this.Fk===t||t!==Zc&&t!==Pv&&t!==xv||(this.Fk=t,this.D())}},iterations:{get:function(){return this.Xi},set:function(t){this.Xi!==t&&0<=t&&(this.Xi=t,this.D())}},aggressiveOption:{get:function(){return this.ek},set:function(t){this.ek===t||t!==wv&&t!==Qc&&t!==Lv||(this.ek=t,this.D())}},packOption:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&0<=t&&8>t&&(this.Tf=t,this.D())}},setsPortSpots:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},linkSpacing:{get:function(){return this.jn},set:function(t){this.jn!==t&&0<=t&&(this.jn=t,this.D())}},maxLayer:{get:function(){return this.wa}},maxIndex:{get:function(){return this.Dh}},maxColumn:{get:function(){return this.Ja}},minIndexLayer:{get:function(){return this.Bg}},maxIndexLayer:{get:function(){return this.zc}}});var $c=new $(zt,"CycleDepthFirst",0),yv=new $(zt,"CycleGreedy",1),Qg=new $(zt,"CycleFromLayers",2),Jc=new $(zt,"LayerOptimalLinkLength",0),vv=new $(zt,"LayerLongestPathSink",1),Sv=new $(zt,"LayerLongestPathSource",2),Zc=new $(zt,"InitDepthFirstOut",0),Pv=new $(zt,"InitDepthFirstIn",1),xv=new $(zt,"InitNaive",2),wv=new $(zt,"AggressiveNone",0),Qc=new $(zt,"AggressiveLess",1),Lv=new $(zt,"AggressiveMore",2),YN=8;zt.className="LayeredDigraphLayout",zt.CycleDepthFirst=$c,zt.CycleGreedy=yv,zt.CycleFromLayers=Qg,zt.LayerOptimalLinkLength=Jc,zt.LayerLongestPathSink=vv,zt.LayerLongestPathSource=Sv,zt.InitDepthFirstOut=Zc,zt.InitDepthFirstIn=Pv,zt.InitNaive=xv,zt.AggressiveNone=wv,zt.AggressiveLess=Qc,zt.AggressiveMore=Lv,zt.PackNone=0,zt.PackExpand=1,zt.PackStraighten=2,zt.PackMedian=4,zt.PackAll=15;function Vs(){this.index=this.Bc=this.ld=this.fc=this.first=this.layer=0,this.link=null,this.j=0}Vs.className="SegInfo";function nu(t){Yt.call(this,t)}O(nu,Yt),nu.prototype.createVertex=function(){return new Cl(this)},nu.prototype.createEdge=function(){return new Tl(this)},nu.className="LayeredDigraphNetwork";function Cl(t){ce.call(this,t),this.Wa=this.rg=this.Ah=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.gg=NaN,this.nf=0,this.Tj=this.Uj=null}O(Cl,ce),Cl.prototype.serializeVertexProperties=function(t,e){ce.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?Te(this.near):null,t.valid=this.valid,t.gg=this.gg,t.finish=this.finish,t.nf=this.nf,t.Uj=this.Uj,t.Tj=this.Tj},Cl.prototype.deserializeVertexProperties=function(t,e,n,i){ce.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.gg=t.gg,this.finish=t.finish,this.nf=t.nf,this.Uj=t.Uj,this.Tj=t.Tj},I.Object.defineProperties(Cl.prototype,{layer:{get:function(){return this.Ah},set:function(t){this.Ah!==t&&(this.Ah=t)}},column:{get:function(){return this.rg},set:function(t){this.rg!==t&&(this.rg=t)}},index:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Cl.className="LayeredDigraphVertex";function Tl(t){Ke.call(this,t),this.j=this.ga=this.Ga=!1,this.W=this.u=NaN,this.F=this.m=0}O(Tl,Ke),Tl.prototype.serializeEdgeProperties=function(t,e){Ke.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Tl.prototype.deserializeEdgeProperties=function(t,e,n,i){Ke.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},I.Object.defineProperties(Tl.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},valid:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},rev:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},portFromColOffset:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Tl.className="LayeredDigraphEdge";function Mt(t){Dt.call(this),this.Qb=new Z,this.En=ep,this.qd=qo,this.Yn=ip,this.aq=Iv,this.Ev=[],this.od=!0,this.Nb=op,this.Td=new dt(10,10).freeze();var e=new Ol(this);this.V=new Ei(e),this.Y=new Ei(e),this.Xt=[],t&&Object.assign(this,t)}O(Mt,Dt),Mt.prototype.cloneProtected=function(t){Dt.prototype.cloneProtected.call(this,t),t.En=this.En,t.Yn=this.Yn,t.aq=this.aq,t.od=this.od,t.Nb=this.Nb,t.Td.assign(this.Td),t.V.copyInheritedPropertiesFrom(this.V),t.Y.copyInheritedPropertiesFrom(this.Y)},Mt.prototype.ob=function(t){t.classType===Mt?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:B("Unknown enum value: "+t):Dt.prototype.ob.call(this,t)},Mt.prototype.createNetwork=function(){return new Ol(this)},Mt.prototype.makeNetwork=function(t){function e(i){if(i instanceof q)return!i.isLinkLabel&&i.category!=="Comment";if(i instanceof H){var r=i.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(i=i.toNode,!(i===null||i.isLinkLabel||i.category==="Comment"))}return!1}var n=this.createNetwork();return t instanceof z?(n.eg(t.nodes,!0,e),n.eg(t.links,!0,e)):t instanceof pt?n.eg(t.memberParts,!1,e):n.eg(t.iterator,!1,e),n},Mt.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==rp&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof z&&(e=t),this.path===ep&&e!==null?this.qd=e.isTreePathToChildren?qo:Dl:this.qd=this.path===ep?qo:this.path,0<this.network.vertexes.count){for(this.network.oo(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Qb.count){for(t=new Z,e=this.Qb.iterator;e.next();){var n=e.value;n instanceof q?(n=this.network.ei(n),n!==null&&t.add(n)):n instanceof Ei&&t.add(n)}this.Qb=t}for(this.Qb.count===0&&this.findRoots(),t=this.Qb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,Mv(this,e));for(e=this.network.vertexes,t=null;t=UN(e),0<t.count;)e=aL(this,t),e!==null&&this.Qb.add(e),e.initialized=!0,Mv(this,e),e=t;for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Ei&&hL(this,e);for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Ei&&uL(this,e);for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Ei&&gL(this,e);if(this.ju(),this.layerStyle===sp){for(t=[],e=this.network.vertexes.iterator;e.next();){n=e.value;var i=n.parent;i===null&&(i=n),i=i.angle===0||i.angle===180;var r=t[n.level];r===void 0&&(r=0),t[n.level]=Math.max(r,i?n.width:n.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.Ev=t,e=this.network.vertexes.iterator;e.next();)n=e.value,i=n.parent,i===null&&(i=n),i.angle===0||i.angle===180?(i.angle===180&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(i.angle===270&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===Av)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,n=e.angle===0||e.angle===180,i=-1,r=0;r<e.children.length;r++){var a=e.children[r];i=Math.max(i,n?a.width:a.height)}if(0<=i)for(r=0;r<e.children.length;r++)a=e.children[r],n?(e.angle===180&&(a.focusX+=i-a.width),a.width=i):(e.angle===270&&(a.focusY+=i-a.height),a.height=i)}for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof Ei&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Qb=new Z,this.isValidLayout=!0};function UN(t){var e=new Z;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}Mt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.qd){case qo:n.sourceEdges.count===0&&this.Qb.add(n);break;case Dl:n.destinationEdges.count===0&&this.Qb.add(n);break;default:B("Unhandled path value "+this.qd.toString())}}this.Qb.count===0&&(t=aL(this,t),t!==null&&this.Qb.add(t))};function aL(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.qd){case qo:r.sourceEdges.count<n&&(n=r.sourceEdges.count,i=r);break;case Dl:r.destinationEdges.count<n&&(n=r.destinationEdges.count,i=r);break;default:B("Unhandled path value "+t.qd.toString())}}return i}function Mv(t,e){if(e!==null){switch(t.qd){case qo:if(0<e.destinationEdges.count){for(var n=new tt,i=e.destinationVertexes;i.next();){var r=i.value;lL(t,e,r)&&n.add(r)}0<n.count&&(e.children=n.Ea())}break;case Dl:if(0<e.sourceEdges.count){for(n=new tt,i=e.sourceVertexes;i.next();)r=i.value,lL(t,e,r)&&n.add(r);0<n.count&&(e.children=n.Ea())}break;default:B("Unhandled path value"+t.qd.toString())}for(n=e.children,i=n.length,r=0;r<i;r++){var a=n[r];a.initialized=!0,a.level=e.level+1,a.parent=e,t.Qb.remove(a)}for(e=0;e<i;e++)Mv(t,n[e])}}function lL(t,e,n){if(n.initialized){if(e===null)var i=!1;else{for(i=e.parent;i!==null&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}Mt.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var n=t.children,i=0,r=0;r<n.length;r++)n[r]===e&&i++;if(0<i){i=Array(n.length-i);for(var a=r=0;a<n.length;a++)n[a]!==e&&(i[r++]=n[a]);t.children=i}}};function hL(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===er&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,r=0,a=e.children,h=a.length,g=0;g<h;g++){var f=a[g];hL(t,f),n+=f.descendantCount+1,i=Math.max(i,f.maxChildrenCount),r=Math.max(r,f.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?r+1:0}}function XN(t,e){switch(t.Yn){default:case ip:return e.parent!==null?e.parent:t.V;case Ov:return e.parent===null?t.V:e.parent.parent===null?t.Y:e.parent;case jv:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.Y:t.V;case Dv:var n=!0;if(e.childrenCount===0)n=!1;else for(var i=e.children,r=i.length,a=0;a<r;a++)if(0<i[a].childrenCount){n=!1;break}return n&&e.parent!==null?t.Y:e.parent!==null?e.parent:t.V}}Mt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(XN(this,t)),t.parent!==null&&t.parent.alignment===er){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;i%2===0?i!==n.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function uL(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var n=e.length,i=0;i<n;i++)uL(t,e[i])}}Mt.prototype.assignTreeVertexValues=function(){};function gL(t,e){if(e!==null){e.alignment!==er&&t.sortTreeVertexChildren(e),e=e.children;for(var n=e.length,i=0;i<n;i++)gL(t,e[i])}}Mt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case ou:break;case bg:t.children.reverse();break;case td:t.children.sort(t.comparer);break;case ed:t.children.sort(t.comparer),t.children.reverse();break;default:B("Unhandled sorting value "+t.sorting.toString())}},Mt.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Mt.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,r=!1;n!==null&&(i=n.angle,r=n.alignment,r=Ys(r)),e=e===90||e===270,i=i===90||i===270,n=t.childrenCount===0;var a=0,h=0,g=0,f=t.commentSpacing;if(t.node!==null)for(var c=t.node.wu();c.next();){var m=c.value;m.category==="Comment"&&m.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(m),m.Za(),m=m.measuredBounds,e&&!n||!r&&!i&&n||r&&i&&n?(a=Math.max(a,m.width),h+=m.height+Math.abs(g)):(a+=m.width+Math.abs(g),h=Math.max(h,m.height)),g=f)}t.comments!==null&&(e&&!n||!r&&!i&&n||r&&i&&n?(a+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),a=Math.max(0,a-t.width)),r=G.allocAt(0,0,t.bounds.width+a,t.bounds.height+h),t.bounds=r,G.free(r))};function Ys(t){return t===ss||t===er||t===as||t===Nr}function qg(t){return t===ss||t===er}function kv(t){var e=t.parent;if(e!==null){var n=e.alignment;if(Ys(n)){if(qg(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2===0}if(n===as)return!0}}return!1}Mt.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,n=t.parent,i=t.angle,r=0,a=!1;n!==null&&(r=n.angle,a=n.alignment,a=Ys(a)),i=i===90||i===270,n=r===90||r===270;for(var h=t.childrenCount===0,g=kv(t),f=0,c=t.comments,m=c.length,y=C.alloc(),S=0;S<m;S++){var x=c[S],P=x.measuredBounds;if(i&&!h||!a&&!n&&h||a&&n&&h){if(135<r&&!a||n&&g)if(0<=t.commentMargin)for(y.h(t.bounds.x-t.commentMargin-P.width,t.bounds.y+f),x.move(y),x=x.Kd();x.next();){var L=x.value;L.fromSpot=Ni,L.toSpot=Wn}else for(y.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+f),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=Wn,L.toSpot=Ni;else if(0<=t.commentMargin)for(y.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+f),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=Wn,L.toSpot=Ni;else for(y.h(t.bounds.x+t.commentMargin-P.width,t.bounds.y+f),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=Ni,L.toSpot=Wn;f=0<=t.commentSpacing?f+(P.height+t.commentSpacing):f+(t.commentSpacing-P.height)}else{if(135<r&&!a||!n&&g)if(0<=t.commentMargin)for(y.h(t.bounds.x+f,t.bounds.y-t.commentMargin-P.height),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=ki,L.toSpot=Ci;else for(y.h(t.bounds.x+f,t.bounds.y+2*t.focus.y-t.commentMargin),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=Ci,L.toSpot=ki;else if(0<=t.commentMargin)for(y.h(t.bounds.x+f,t.bounds.y+2*t.focus.y+t.commentMargin),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=Ci,L.toSpot=ki;else for(y.h(t.bounds.x+f,t.bounds.y+t.commentMargin-P.height),x.move(y),x=x.Kd();x.next();)L=x.value,L.fromSpot=ki,L.toSpot=Ci;f=0<=t.commentSpacing?f+(P.width+t.commentSpacing):f+(t.commentSpacing-P.width)}}if(C.free(y),e=f-t.commentSpacing-(i?e.height:e.width),this.qd===qo)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},Mt.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case np:dL(this,t);break;case nd:if(t.alignment===er)dL(this,t);else if(t.childrenCount===0)i=t.parent,n=!1,e=0,i!==null&&(e=i.angle,n=i.alignment,n=Ys(n)),i=kv(t),t.S.h(0,0),t.Ca.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||n)&&!i?t.ka.h(0,0):e===180&&!n||(e===90||e===270)&&i?t.ka.h(t.width-2*t.focus.x,0):t.ka.h(0,t.height-2*t.focus.y),t.Bo=null,t.No=null;else{var r=Qi(t);e=r===90||r===270;var a=0,h=t.children,g=h.length;for(n=0;n<g;n++)i=h[n],a=Math.max(a,e?i.Ca.width:i.Ca.height);var f=t.alignment,c=f===tr,m=Ys(f),y=Math.max(0,t.breadthLimit);n=iu(t);var S=t.nodeSpacing,x=rs(t),P=t.rowSpacing,L=0;(f===bo||c||t.Pl||t.Ql&&t.maxGenerationCount===1)&&(L=Math.max(0,t.rowIndent)),i=t.width;var N=t.height,k=0,F=0,D=0,j=null,E=null,R=0,J=0,it=0,nt=0,et=0,Y=0,vt=0,ut=0;if(m&&!qg(f)&&135<r&&h.reverse(),qg(f))if(1<g)for(var jt=0;jt<g;jt++)jt%2===0&&jt!==g-1&&(ut=Math.max(ut,e?h[jt].Ca.width:h[jt].Ca.height));else g===1&&(ut=e?h[0].Ca.width:h[0].Ca.height);if(m){switch(f){case ss:F=135>r?fL(t,h,ut,k,F):cL(t,h,ut,k,F),ut=F.x,k=F.width,F=F.height;break;case as:for(j=0;j<g;j++)E=h[j],y=E.Ca,D=Y===0?0:P,e?(E.S.h(a-y.width,nt+D),k=Math.max(k,y.width),F=Math.max(F,nt+D+y.height),nt+=D+y.height):(E.S.h(it+D,a-y.height),k=Math.max(k,it+D+y.width),F=Math.max(F,y.height),it+=D+y.width),Y++;break;case Nr:for(j=0;j<g;j++)E=h[j],a=E.Ca,y=Y===0?0:P,e?(E.S.h(S/2+t.focus.x,nt+y),k=Math.max(k,a.width),F=Math.max(F,nt+y+a.height),nt+=y+a.height):(E.S.h(it+y,S/2+t.focus.y),k=Math.max(k,it+y+a.width),F=Math.max(F,a.height),it+=y+a.width),Y++}j=Vn(this,2),E=Vn(this,2),e?(j[0].h(0,0),j[1].h(0,F),E[0].h(k,0)):(j[0].h(0,0),j[1].h(k,0),E[0].h(0,F)),E[1].h(k,F)}else for(jt=0;jt<g;jt++){var Ht=h[jt],Me=Ht.Ca;if(e){0<y&&0<Y&&it+S+Me.width>y&&(it<a&&Ma(t,f,a-it,0,vt,jt-1),et++,Y=0,vt=jt,D=F,it=0,nt=135<r?-F-P:F+P),bc(this,Ht,0,nt);var je=0;if(Y===0)j=Ht.Bo,E=Ht.No,R=Me.width,J=Me.height,(j===null||E===null||r!==Qi(Ht))&&(j=Vn(this,2),E=Vn(this,2),j[0].h(0,0),j[1].h(0,J),E[0].h(R,0),E[1].h(R,J));else{var sn=Kt();J=pL(this,t,Ht,j,E,R,J,sn),je=J.x,j=sn[0],E=sn[1],R=J.width,J=J.height,Xt(sn),it<Me.width&&0>je&&(Fl(t,-je,0,vt,jt-1),tp(j,-je,0),tp(E,-je,0),je=0)}Ht.S.h(je,nt),k=Math.max(k,R),F=Math.max(F,D+(et===0?0:P)+Me.height),it=R}else 0<y&&0<Y&&nt+S+Me.height>y&&(nt<a&&Ma(t,f,0,a-nt,vt,jt-1),et++,Y=0,vt=jt,D=k,nt=0,it=135<r?-k-P:k+P),bc(this,Ht,it,0),je=0,Y===0?(j=Ht.Bo,E=Ht.No,R=Me.width,J=Me.height,(j===null||E===null||r!==Qi(Ht))&&(j=Vn(this,2),E=Vn(this,2),j[0].h(0,0),j[1].h(R,0),E[0].h(0,J),E[1].h(R,J))):(sn=Kt(),J=pL(this,t,Ht,j,E,R,J,sn),je=J.x,j=sn[0],E=sn[1],R=J.width,J=J.height,Xt(sn),nt<Me.height&&0>je&&(Fl(t,0,-je,vt,jt-1),tp(j,0,-je),tp(E,0,-je),je=0)),Ht.S.h(it,je),F=Math.max(F,J),k=Math.max(k,D+(et===0?0:P)+Me.width),nt=J;Y++}switch(0<et&&(e?(F+=Math.max(0,n),it<k&&Ma(t,f,k-it,0,vt,g-1),0<L&&(c||Fl(t,L,0,0,g-1),k+=L)):(k+=Math.max(0,n),nt<F&&Ma(t,f,0,F-nt,vt,g-1),0<L&&(c||Fl(t,0,L,0,g-1),F+=L))),L=c=0,f){case ru:e?c+=k/2-t.focus.x-x/2:L+=F/2-t.focus.y-x/2;break;case jl:0<et?e?c+=k/2-t.focus.x-x/2:L+=F/2-t.focus.y-x/2:e?(ut=h[0].S.x+h[0].ka.x,c+=ut+(h[g-1].S.x+h[g-1].ka.x+2*h[g-1].focus.x-ut)/2-t.focus.x-x/2):(ut=h[0].S.y+h[0].ka.y,L+=ut+(h[g-1].S.y+h[g-1].ka.y+2*h[g-1].focus.y-ut)/2-t.focus.y-x/2);break;case bo:e?(c-=x,k+=x):(L-=x,F+=x);break;case tr:e?(c+=k-t.width+x,k+=x):(L+=F-t.height+x,F+=x);break;case ss:e?1<g?c+=ut+S/2-t.focus.x:c+=h[0].focus.x-t.focus.x+h[0].ka.x:1<g?L+=ut+S/2-t.focus.y:L+=h[0].focus.y-t.focus.y+h[0].ka.y;break;case as:e?c+=k+S/2-t.focus.x:L+=F+S/2-t.focus.y;break;case Nr:break;default:B("Unhandled alignment value "+f.toString())}for(x=0;x<g;x++)ut=h[x],e?ut.S.h(ut.S.x+ut.ka.x-c,ut.S.y+(135<r?(m?-F:-ut.Ca.height)+ut.ka.y-n:N+n+ut.ka.y)):ut.S.h(ut.S.x+(135<r?(m?-k:-ut.Ca.width)+ut.ka.x-n:i+n+ut.ka.x),ut.S.y+ut.ka.y-L);if(g=h=0,m?e?(k=Nv(t,k,c),0>c&&(c=0),135<r&&(L+=F+n),F+=N+n,f===Nr&&(h+=S/2+t.focus.x),g+=N+n):(135<r&&(c+=k+n),k+=i+n,F=Cv(t,F,L),0>L&&(L=0),f===Nr&&(g+=S/2+t.focus.y),h+=i+n):e?(t.comments===null?i>k&&(k=Tv(f,i-k,0),h=k.x,g=k.y,k=i,c=0):k=Nv(t,k,c),0>c&&(h-=c,c=0),135<r&&(L+=F+n),F=Math.max(Math.max(F,N),F+N+n),g+=N+n):(135<r&&(c+=k+n),k=Math.max(Math.max(k,i),k+i+n),t.comments===null?N>F&&(F=Tv(f,0,N-F),h=F.x,g=F.y,F=N,L=0):F=Cv(t,F,L),0>L&&(g-=L,L=0),h+=i+n),0<et)r=Vn(this,4),et=Vn(this,4),e?(r[2].h(0,N+n),r[3].h(r[2].x,F),et[2].h(k,r[2].y),et[3].h(et[2].x,r[3].y)):(r[2].h(i+n,0),r[3].h(k,r[2].y),et[2].h(r[2].x,F),et[3].h(r[3].x,et[2].y));else{for(r=Vn(this,j.length+2),et=Vn(this,E.length+2),f=0;f<j.length;f++)m=j[f],r[f+2].h(m.x+h,m.y+g);for(f=0;f<E.length;f++)m=E[f],et[f+2].h(m.x+h,m.y+g)}e?(r[0].h(c,0),r[1].h(r[0].x,N),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),et[0].h(c+i,0),et[1].h(et[0].x,N),et[2].y<et[1].y&&(et[2].x<et[0].x?et[2].assign(et[1]):et[1].assign(et[2])),et[3].y<et[2].y&&(et[3].x<et[0].x?et[3].assign(et[2]):et[2].assign(et[3])),r[2].y-=n/2,et[2].y-=n/2):(r[0].h(0,L),r[1].h(i,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),et[0].h(0,L+N),et[1].h(i,et[0].y),et[2].x<et[1].x&&(et[2].y<et[0].y?et[2].assign(et[1]):et[1].assign(et[2])),et[3].x<et[2].x&&(et[3].y<et[0].y?et[3].assign(et[2]):et[2].assign(et[3])),r[2].x-=n/2,et[2].x-=n/2),po(this,j),po(this,E),t.Bo=r,t.No=et,t.ka.h(c,L),t.Ca.h(k,F)}break;default:B("Unhandled compaction value "+t.compaction.toString())}}};function dL(t,e){if(e.childrenCount===0){var n=!1,i=0;e.parent!==null&&(i=e.parent.angle,n=e.parent.alignment,n=Ys(n));var r=kv(e);e.S.h(0,0),e.Ca.h(e.width,e.height),e.parent===null||e.comments===null||(i!==180&&i!==270||n)&&!r?e.ka.h(0,0):i===180&&!n||(i===90||i===270)&&r?e.ka.h(e.width-2*e.focus.x,0):e.ka.h(0,e.height-2*e.focus.y)}else{i=Qi(e),n=i===90||i===270;var a=0;r=e.children;for(var h=r.length,g=0;g<h;g++){var f=r[g];a=Math.max(a,n?f.Ca.width:f.Ca.height)}var c=e.alignment,m=c===bo,y=c===tr;g=Ys(c);var S=Math.max(0,e.breadthLimit);f=iu(e);var x=e.nodeSpacing,P=rs(e),L=m||y?0:P/2,N=e.rowSpacing,k=0;(m||y||e.Pl||e.Ql&&e.maxGenerationCount===1)&&(k=Math.max(0,e.rowIndent)),m=e.width;var F=e.height,D=0,j=0,E=0,R=0,J=0,it=0,nt=0,et=0,Y=0;if(g&&!qg(c)&&135<i&&r.reverse(),qg(c))if(1<h)for(var vt=0;vt<h;vt++){var ut=r[vt],jt=ut.Ca;vt%2===0&&vt!==h-1&&(Y=Math.max(Y,(n?jt.width:jt.height)+Us(ut)-x))}else h===1&&(Y=n?r[0].Ca.width:r[0].Ca.height);if(g)switch(c){case ss:case er:j=135>i?fL(e,r,Y,D,j):cL(e,r,Y,D,j),Y=j.x,D=j.width,j=j.height;break;case as:for(t=0;t<h;t++)S=r[t],L=S.Ca,E=nt===0?0:N,n?(S.S.h(a-L.width,J+E),D=Math.max(D,L.width),j=Math.max(j,J+E+L.height),J+=E+L.height):(S.S.h(R+E,a-L.height),D=Math.max(D,R+E+L.width),j=Math.max(j,L.height),R+=E+L.width),nt++;break;case Nr:for(a=0;a<h;a++)t=r[a],S=t.Ca,L=nt===0?0:N,n?(t.S.h(x/2+e.focus.x,J+L),D=Math.max(D,S.width),j=Math.max(j,J+L+S.height),J+=L+S.height):(t.S.h(R+L,x/2+e.focus.y),D=Math.max(D,R+L+S.width),j=Math.max(j,S.height),R+=L+S.width),nt++}else for(vt=0;vt<h;vt++){if(ut=r[vt],jt=ut.Ca,n){0<S&&0<nt&&R+x+jt.width>S&&(R<a&&Ma(e,c,a-R,0,et,vt-1),it++,nt=0,et=vt,E=j,R=0,J=135<i?-j-N:j+N);var Ht=nt===0?L:x;bc(t,ut,0,J),ut.S.h(R+Ht,J),D=Math.max(D,R+Ht+jt.width),j=Math.max(j,E+(it===0?0:N)+jt.height),R+=Ht+jt.width}else 0<S&&0<nt&&J+x+jt.height>S&&(J<a&&Ma(e,c,0,a-J,et,vt-1),it++,nt=0,et=vt,E=D,J=0,R=135<i?-D-N:D+N),Ht=nt===0?L:x,bc(t,ut,R,0),ut.S.h(R,J+Ht),j=Math.max(j,J+Ht+jt.height),D=Math.max(D,E+(it===0?0:N)+jt.width),J+=Ht+jt.height;nt++}switch(0<it&&(n?(j+=Math.max(0,f),R<D&&Ma(e,c,D-R,0,et,h-1),0<k&&(y||Fl(e,k,0,0,h-1),D+=k)):(D+=Math.max(0,f),J<j&&Ma(e,c,0,j-J,et,h-1),0<k&&(y||Fl(e,0,k,0,h-1),j+=k))),k=y=0,c){case ru:n?y+=D/2-e.focus.x-P/2:k+=j/2-e.focus.y-P/2;break;case jl:0<it?n?y+=D/2-e.focus.x-P/2:k+=j/2-e.focus.y-P/2:n?(c=r[0].S.x+r[0].ka.x,y+=c+(r[h-1].S.x+r[h-1].ka.x+2*r[h-1].focus.x-c)/2-e.focus.x-P/2):(c=r[0].S.y+r[0].ka.y,k+=c+(r[h-1].S.y+r[h-1].ka.y+2*r[h-1].focus.y-c)/2-e.focus.y-P/2);break;case bo:n?(y-=P,D+=P):(k-=P,j+=P);break;case tr:n?(y+=D-e.width+P,D+=P):(k+=j-e.height+P,j+=P);break;case ss:case er:n?1<h?y+=Y+x/2-e.focus.x:y+=r[0].focus.x-e.focus.x+r[0].ka.x:1<h?k+=Y+x/2-e.focus.y:k+=r[0].focus.y-e.focus.y+r[0].ka.y;break;case as:n?y+=D+x/2-e.focus.x:k+=j+x/2-e.focus.y;break;case Nr:break;default:B("Unhandled alignment value "+c.toString())}for(P=0;P<h;P++)c=r[P],n?c.S.h(c.S.x+c.ka.x-y,c.S.y+(135<i?(g?-j:-c.Ca.height)+c.ka.y-f:F+f+c.ka.y)):c.S.h(c.S.x+(135<i?(g?-D:-c.Ca.width)+c.ka.x-f:m+f+c.ka.x),c.S.y+c.ka.y-k);n?(D=Nv(e,D,y),0>y&&(y=0),135<i&&(k+=j+f),j=Math.max(Math.max(j,F),j+F+f)):(135<i&&(y+=D+f),D=Math.max(Math.max(D,m),D+m+f),j=Cv(e,j,k),0>k&&(k=0)),e.ka.h(y,k),e.Ca.h(D,j)}}function fL(t,e,n,i,r){var a=e.length;if(a===0)return new G(n,0,i,r);if(a===1)return t=e[0],i=t.Ca.width,r=t.Ca.height,new G(n,0,i,r);for(var h=t.nodeSpacing,g=t.rowSpacing,f=Qi(t)===90,c=0,m=0,y=0,S=0;S<a;S++)if(!(S%2!==0||1<a&&S===a-1)){var x=e[S],P=x.Ca,L=c===0?0:g;if(f){var N=Us(x)-h;x.S.h(n-(P.width+N),y+L),i=Math.max(i,P.width+N),r=Math.max(r,y+L+P.height),y+=L+P.height}else N=Us(x)-h,x.S.h(m+L,n-(P.height+N)),r=Math.max(r,P.height+N),i=Math.max(i,m+L+P.width),m+=L+P.width;c++}for(c=0,x=m,S=y,f?(m=n+h,y=0):(m=0,y=n+h),P=0;P<a;P++)if(P%2!==0){L=e[P],N=L.Ca;var k=c===0?0:g;if(f){var F=Us(L)-h;L.S.h(m+F,y+k),i=Math.max(i,m+N.width+F),r=Math.max(r,y+k+N.height),y+=k+N.height}else F=Us(L)-h,L.S.h(m+k,y+F),i=Math.max(i,m+k+N.width),r=Math.max(r,y+N.height+F),m+=k+N.width;c++}return 1<a&&a%2===1&&(e=e[a-1],a=e.Ca,g=e.parent===null?0:e.parent.rowSpacing,f?(e.S.h(n+h/2-e.focus.x-e.ka.x,r+g),f=n+h/2-e.focus.x-e.ka.x,i=Math.max(i,f+a.width),0>f&&(i-=f),r=Math.max(r,Math.max(S,y)+g+a.height),0>e.S.x&&(n=qc(t,e.S.x,!1,n,h))):(e.S.h(i+g,n+h/2-e.focus.y-e.ka.y),i=Math.max(i,Math.max(x,m)+g+a.width),y=n+h/2-e.focus.y-e.ka.y,r=Math.max(r,y+a.height),0>y&&(r-=y),0>e.S.y&&(n=qc(t,e.S.y,!0,n,h)))),new G(n,0,i,r)}function cL(t,e,n,i,r){var a=e.length;if(a===0)return new G(n,0,i,r);if(a===1)return e=e[0],i=e.Ca.width,r=e.Ca.height,new G(n,0,i,r);for(var h=t.nodeSpacing,g=t.rowSpacing,f=Qi(t)===270,c=0,m=0,y=0,S=0;S<a;S++)if(!(S%2!==0||1<a&&S===a-1)){var x=e[S],P=x.Ca,L=c===0?0:g;if(f){var N=Us(x)-h;y-=L+P.height,x.S.h(n-(P.width+N),y),i=Math.max(i,P.width+N),r=Math.max(r,Math.abs(y))}else N=Us(x)-h,m-=L+P.width,x.S.h(m,n-(P.height+N)),r=Math.max(r,P.height+N),i=Math.max(i,Math.abs(m));c++}for(c=0,x=m,S=y,f?(m=n+h,y=0):(m=0,y=n+h),P=0;P<a;P++)if(P%2!==0){L=e[P],N=L.Ca;var k=c===0?0:g;if(f){var F=Us(L)-h;y-=k+N.height,L.S.h(m+F,y),i=Math.max(i,m+N.width+F),r=Math.max(r,Math.abs(y))}else F=Us(L)-h,m-=k+N.width,L.S.h(m,y+F),r=Math.max(r,y+N.height+F),i=Math.max(i,Math.abs(m));c++}for(1<a&&a%2===1&&(g=e[a-1],c=g.Ca,P=g.parent===null?0:g.parent.rowSpacing,f?(g.S.h(n+h/2-g.focus.x-g.ka.x,-r-c.height-P),m=n+h/2-g.focus.x-g.ka.x,i=Math.max(i,m+c.width),0>m&&(i-=m),r=Math.max(r,Math.abs(Math.min(S,y))+P+c.height),0>g.S.x&&(n=qc(t,g.S.x,!1,n,h))):(g.S.h(-i-c.width-P,n+h/2-g.focus.y-g.ka.y),i=Math.max(i,Math.abs(Math.min(x,m))+P+c.width),y=n+h/2-g.focus.y-g.ka.y,r=Math.max(r,y+c.height),0>y&&(r-=y),0>g.S.y&&(n=qc(t,g.S.y,!0,n,h)))),t=0;t<a;t++)h=e[t],f?h.S.h(h.S.x,h.S.y+r):h.S.h(h.S.x+i,h.S.y);return new G(n,0,i,r)}function Us(t){return t.parent===null?0:t.parent.nodeSpacing}function qc(t,e,n,i,r){t=t.children;for(var a=t.length,h=0;h<a;h++)n?t[h].S.h(t[h].S.x,t[h].S.y-e):t[h].S.h(t[h].S.x-e,t[h].S.y);return e=t[a-1],Math.max(i,n?e.ka.y+e.focus.y-r/2:e.ka.x+e.focus.x-r/2)}function Nv(t,e,n){switch(t.alignment){case jl:case ru:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case bo:return t.width>e?t.width:e;case tr:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case ss:case er:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case as:return t.width-t.focus.x+t.nodeSpacing/2+e;case Nr:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Cv(t,e,n){switch(t.alignment){case jl:case ru:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case bo:return t.height>e?t.height:e;case tr:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case ss:case er:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case as:return t.height-t.focus.y+t.nodeSpacing/2+e;case Nr:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function Tv(t,e,n){switch(t){case ru:e/=2,n/=2;break;case jl:e/=2,n/=2;break;case bo:n=e=0;break;case tr:break;default:B("Unhandled alignment value "+t.toString())}return new C(e,n)}function Ma(t,e,n,i,r,a){e=Tv(e,n,i),Fl(t,e.x,e.y,r,a)}function Fl(t,e,n,i,r){if(e!==0||n!==0)for(t=t.children;i<=r;i++){var a=t[i].S;a.x+=e,a.y+=n}}function bc(t,e,n,i){var r=e.parent;switch(t.qd){case qo:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(n,i);break;case Dl:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(n,i);break;default:B("Unhandled path value "+t.qd.toString())}}function tp(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];r.x+=e,r.y+=n}}function pL(t,e,n,i,r,a,h,g){var f=Qi(e),c=f===90||f===270,m=e.nodeSpacing;e=i;var y=r;i=a;var S=h,x=n.Bo,P=n.No;h=n.Ca;var L=c?Math.max(S,h.height):Math.max(i,h.width);if((x===null||f!==Qi(n))&&(x=Vn(t,2),P=Vn(t,2),c?(x[0].h(0,0),x[1].h(0,h.height),P[0].h(h.width,0),P[1].h(P[0].x,x[1].y)):(x[0].h(0,0),x[1].h(h.width,0),P[0].h(0,h.height),P[1].h(x[1].x,P[0].y))),c){if(S=9999999,!(y===null||2>y.length||x===null||2>x.length))for(r=n=0;n<y.length&&r<x.length;){a=y[n];var N=x[r];f=N.x,c=N.y,f+=i;var k=a;n+1<y.length&&(k=y[n+1]);var F=N;N=F.x,F=F.y,r+1<x.length&&(F=x[r+1],N=F.x,F=F.y,N+=i);var D=S;a.y===c?D=f-a.x:a.y>c&&a.y<F?D=f+(a.y-c)/(F-c)*(N-f)-a.x:c>a.y&&c<k.y&&(D=f-(a.x+(c-a.y)/(k.y-a.y)*(k.x-a.x))),D<S&&(S=D),k.y<=a.y?n++:F<=c?r++:(k.y<=F&&n++,F<=k.y&&r++)}if(S=i-S,S+=m,n=x,r=S,e===null||2>e.length||n===null||2>n.length)i=null;else{for(m=Vn(t,e.length+n.length),i=a=f=0;a<n.length&&n[a].y<e[0].y;)c=n[a++],m[i++].h(c.x+r,c.y);for(;f<e.length;)c=e[f++],m[i++].h(c.x,c.y);for(f=e[e.length-1].y;a<n.length&&n[a].y<=f;)a++;for(;a<n.length&&n[a].y>f;)c=n[a++],m[i++].h(c.x+r,c.y);for(n=Vn(t,i),f=0;f<i;f++)n[f].assign(m[f]);po(t,m),i=n}if(a=P,f=S,y===null||2>y.length||a===null||2>a.length)r=null;else{for(m=Vn(t,y.length+a.length),r=c=n=0;n<y.length&&y[n].y<a[0].y;)k=y[n++],m[r++].h(k.x,k.y);for(;c<a.length;)k=a[c++],m[r++].h(k.x+f,k.y);for(a=a[a.length-1].y;n<y.length&&y[n].y<=a;)n++;for(;n<y.length&&y[n].y>a;)f=y[n++],m[r++].h(f.x,f.y);for(a=Vn(t,r),n=0;n<r;n++)a[n].assign(m[n]);po(t,m),r=a}return a=Math.max(0,S)+h.width,h=L,po(t,e),po(t,x),po(t,y),po(t,P),g[0]=i,g[1]=r,new G(S,0,a,h)}if(i=9999999,!(y===null||2>y.length||x===null||2>x.length))for(r=n=0;n<y.length&&r<x.length;)a=y[n],N=x[r],f=N.x,c=N.y,c+=S,k=a,n+1<y.length&&(k=y[n+1]),F=N,N=F.x,F=F.y,r+1<x.length&&(F=x[r+1],N=F.x,F=F.y,F+=S),D=i,a.x===f?D=c-a.y:a.x>f&&a.x<N?D=c+(a.x-f)/(N-f)*(F-c)-a.y:f>a.x&&f<k.x&&(D=c-(a.y+(f-a.x)/(k.x-a.x)*(k.y-a.y))),D<i&&(i=D),k.x<=a.x?n++:N<=f?r++:(k.x<=N&&n++,N<=k.x&&r++);if(S-=i,S+=m,n=x,r=S,e===null||2>e.length||n===null||2>n.length)i=null;else{for(m=Vn(t,e.length+n.length),i=a=f=0;a<n.length&&n[a].x<e[0].x;)c=n[a++],m[i++].h(c.x,c.y+r);for(;f<e.length;)c=e[f++],m[i++].h(c.x,c.y);for(f=e[e.length-1].x;a<n.length&&n[a].x<=f;)a++;for(;a<n.length&&n[a].x>f;)c=n[a++],m[i++].h(c.x,c.y+r);for(n=Vn(t,i),f=0;f<i;f++)n[f].assign(m[f]);po(t,m),i=n}if(a=P,f=S,y===null||2>y.length||a===null||2>a.length)r=null;else{for(m=Vn(t,y.length+a.length),r=c=n=0;n<y.length&&y[n].x<a[0].x;)k=y[n++],m[r++].h(k.x,k.y);for(;c<a.length;)k=a[c++],m[r++].h(k.x,k.y+f);for(a=a[a.length-1].x;n<y.length&&y[n].x<=a;)n++;for(;n<y.length&&y[n].x>a;)f=y[n++],m[r++].h(f.x,f.y);for(a=Vn(t,r),n=0;n<r;n++)a[n].assign(m[n]);po(t,m),r=a}return a=L,h=Math.max(0,S)+h.height,po(t,e),po(t,x),po(t,y),po(t,P),g[0]=i,g[1]=r,new G(S,0,a,h)}function Vn(t,e){if(t=t.Xt[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var n=0;n<e;n++)t[n]=new C;return t}function po(t,e){var n=e.length,i=t.Xt[n];i===void 0&&(i=[],t.Xt[n]=i),i.push(e)}Mt.prototype.arrangeTrees=function(){if(this.Nb===rp)for(var t=this.Qb.iterator;t.next();){var e=t.value;if(e instanceof Ei){var n=e.node;if(n!==null){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),Fv(this,e,n,i)}}}else{for(t=[],e=this.Qb.iterator;e.next();)n=e.value,n instanceof Ei&&t.push(n);switch(this.sorting){case ou:break;case bg:t.reverse();break;case td:t.sort(this.comparer);break;case ed:t.sort(this.comparer),t.reverse();break;default:B("Unhandled sorting value "+this.sorting.toString())}for(n=this.arrangementOrigin,e=n.x,n=n.y,i=0;i<t.length;i++){var r=t[i];switch(Fv(this,r,e+r.ka.x,n+r.ka.y),this.Nb){case op:n+=r.Ca.height+this.Td.height;break;case Ev:e+=r.Ca.width+this.Td.width;break;default:B("Unhandled arrangement value "+this.Nb.toString())}}}};function Fv(t,e,n,i){if(e!==null){e.x=n,e.y=i,e=e.children;for(var r=e.length,a=0;a<r;a++){var h=e[a];Fv(t,h,n+h.S.x,i+h.S.y)}}}Mt.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()},Mt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Mt.prototype.nu=function(){if(this.layerStyle===sp){for(var t=this.Ev,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var r=i.value;n===null?n=r.bounds.copy():n.Xc(r.bounds);var a=e[r.level];a===void 0?a=iu(r):a=Math.max(a,iu(r)),e[r.level]=a}for(i=0;i<e.length;i++)e[i]===void 0&&(e[i]=0);if(this.angle===90||this.angle===270?(n.vc(this.nodeSpacing/2,this.layerSpacing),i=new C(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.vc(this.layerSpacing,this.nodeSpacing/2),i=new C(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],n=this.angle===90||this.angle===270?n.width:n.height,a=0,this.angle===180||this.angle===270)for(var h=0;h<t.length;h++)a+=t[h]+e[h];for(h=0;h<t.length;h++){var g=t[h]+e[h];this.angle===270?(a-=g,r.push(new G(0,a,n,g))):this.angle===90?(r.push(new G(0,a,n,g)),a+=g):this.angle===180?(a-=g,r.push(new G(a,0,g,n))):(r.push(new G(a,0,g,n)),a+=g)}this.commitLayers(r,i)}},Mt.prototype.commitLayers=function(){},Mt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Mt.prototype.ev=function(){for(var t=this.Qb.iterator;t.next();){var e=t.value;e instanceof Ei&&mL(this,e)}};function mL(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var n=e.length,i=0;i<n;i++)mL(t,e[i])}}Mt.prototype.setPortSpots=function(t){var e=t.alignment;if(Ys(e)){var n=this.qd===qo,i=Qi(t);switch(i){case 0:var r=Wn;break;case 90:r=Ci;break;case 180:r=Ni;break;default:r=ki}var a=t.children,h=a.length;switch(e){case ss:case er:for(e=0;e<h;e++){var g=a[e];if(g=(n?g.sourceEdges:g.destinationEdges).first(),g!==null&&(g=g.link,g!==null)){var f=i===90||i===270?Ni:ki;if(h===1||e===h-1&&h%2===1)switch(i){case 0:f=Ni;break;case 90:f=ki;break;case 180:f=Wn;break;default:f=Ci}else e%2===0&&(f=i===90||i===270?Wn:Ci);n?(t.setsPortSpot&&(g.fromSpot=r),t.setsChildPortSpot&&(g.toSpot=f)):(t.setsPortSpot&&(g.fromSpot=f),t.setsChildPortSpot&&(g.toSpot=r))}}break;case as:for(i=i===90||i===270?Wn:Ci,a=n?t.destinationEdges:t.sourceEdges;a.next();)h=a.value.link,h!==null&&(n?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=r)));break;case Nr:for(i=i===90||i===270?Ni:ki,a=n?t.destinationEdges:t.sourceEdges;a.next();)h=a.value.link,h!==null&&(n?(t.setsPortSpot&&(h.fromSpot=r),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=r)))}}else if(n=Qi(t),this.qd===qo){for(r=t.destinationEdges;r.next();)if(i=r.value.link,i!==null){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:i.fromSpot=Wn;break;case 90:i.fromSpot=Ci;break;case 180:i.fromSpot=Ni;break;default:i.fromSpot=ki}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:i.toSpot=Ni;break;case 90:i.toSpot=ki;break;case 180:i.toSpot=Wn;break;default:i.toSpot=Ci}else i.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(i=r.value.link,i!==null){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:i.toSpot=Wn;break;case 90:i.toSpot=Ci;break;case 180:i.toSpot=Ni;break;default:i.toSpot=ki}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:i.fromSpot=Ni;break;case 90:i.fromSpot=ki;break;case 180:i.fromSpot=Wn;break;default:i.fromSpot=Ci}else i.fromSpot=t.childPortSpot}};function Qi(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function iu(t){var e=Qi(t);e=e===90||e===270;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function rs(t){var e=Qi(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=e===90||e===270?t.width*i:t.height*i}return n=Math.max(0,n)}I.Object.defineProperties(Mt.prototype,{roots:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t,this.D())}},path:{get:function(){return this.En},set:function(t){this.En!==t&&(this.En=t,this.D())}},treeStyle:{get:function(){return this.Yn},set:function(t){this.Nb===t||t!==ip&&t!==jv&&t!==Dv&&t!==Ov||(this.Yn=t,this.D())}},layerStyle:{get:function(){return this.aq},set:function(t){this.Nb===t||t!==Iv&&t!==Av&&t!==sp||(this.aq=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==op&&t!==Ev&&t!==rp||(this.Nb=t,this.D())}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.D())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.D())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==ou&&t!==bg&&t!==td&&!ed||(this.V.sorting=t,this.D())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.D())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(t===0||t===90||t===180||t===270?(this.V.angle=t,this.D()):B("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.D())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.D())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.D())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.D())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.D())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.D())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==np&&t!==nd||(this.V.compaction=t,this.D())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.D())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.D())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.D())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.D())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.D())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.D())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.C(t)||(this.V.portSpot=t,this.D())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.D())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.C(t)||(this.V.childPortSpot=t,this.D())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==ou&&t!==bg&&t!==td&&!ed||(this.Y.sorting=t,this.D())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.D())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.Y.angle=t,this.D())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.D())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.D())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.D())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.D())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.D())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.D())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==np&&t!==nd||(this.Y.compaction=t,this.D())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.D())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.D())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.D())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.D())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.D())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.D())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.C(t)||(this.Y.portSpot=t,this.D())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.D())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.C(t)||(this.Y.childPortSpot=t,this.D())}}});var ep=new $(Mt,"PathDefault",-1),qo=new $(Mt,"PathDestination",0),Dl=new $(Mt,"PathSource",1),ou=new $(Mt,"SortingForwards",10),bg=new $(Mt,"SortingReverse",11),td=new $(Mt,"SortingAscending",12),ed=new $(Mt,"SortingDescending",13),ru=new $(Mt,"AlignmentCenterSubtrees",20),jl=new $(Mt,"AlignmentCenterChildren",21),bo=new $(Mt,"AlignmentStart",22),tr=new $(Mt,"AlignmentEnd",23),ss=new $(Mt,"AlignmentBus",24),er=new $(Mt,"AlignmentBusBranching",25),as=new $(Mt,"AlignmentTopLeftBus",26),Nr=new $(Mt,"AlignmentBottomRightBus",27),np=new $(Mt,"CompactionNone",30),nd=new $(Mt,"CompactionBlock",31),ip=new $(Mt,"StyleLayered",40),Dv=new $(Mt,"StyleLastParents",41),jv=new $(Mt,"StyleAlternating",42),Ov=new $(Mt,"StyleRootOnly",43),op=new $(Mt,"ArrangementVertical",50),Ev=new $(Mt,"ArrangementHorizontal",51),rp=new $(Mt,"ArrangementFixedRoots",52),Iv=new $(Mt,"LayerIndividual",60),Av=new $(Mt,"LayerSiblings",61),sp=new $(Mt,"LayerUniform",62);Mt.className="TreeLayout",Mt.PathDefault=ep,Mt.PathDestination=qo,Mt.PathSource=Dl,Mt.SortingForwards=ou,Mt.SortingReverse=bg,Mt.SortingAscending=td,Mt.SortingDescending=ed,Mt.AlignmentCenterSubtrees=ru,Mt.AlignmentCenterChildren=jl,Mt.AlignmentStart=bo,Mt.AlignmentEnd=tr,Mt.AlignmentBus=ss,Mt.AlignmentBusBranching=er,Mt.AlignmentTopLeftBus=as,Mt.AlignmentBottomRightBus=Nr,Mt.CompactionNone=np,Mt.CompactionBlock=nd,Mt.StyleLayered=ip,Mt.StyleLastParents=Dv,Mt.StyleAlternating=jv,Mt.StyleRootOnly=Ov,Mt.ArrangementVertical=op,Mt.ArrangementHorizontal=Ev,Mt.ArrangementFixedRoots=rp,Mt.LayerIndividual=Iv,Mt.LayerSiblings=Av,Mt.LayerUniform=sp;function Ol(t){Yt.call(this,t)}O(Ol,Yt),Ol.prototype.createVertex=function(){return new Ei(this)},Ol.prototype.createEdge=function(){return new su(this)},Ol.className="TreeNetwork";function Ei(t){ce.call(this,t),this.W=!1,this.cb=null,this.u=[],this.hb=this.Ga=this.F=this.ga=0,this.od=null,this.S=new C(0,0),this.Ca=new dt(0,0),this.ka=new C(0,0),this.Ql=this.Pl=this.Xz=!1,this.No=this.Bo=null,this.fd=ou,this.Zc=nv,this.Gb=0,this.Fb=jl,this.uq=this.tq=0,this.vq=20,this.be=50,this.$p=0,this.kp=nd,this.cp=0,this.Mq=25,this.jp=this.Lq=10,this.ip=20,this.Uq=!0,this.Cq=Je,this.Tq=!0,this.gp=Je}O(Ei,ce),Ei.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.fd=t.sorting,this.Zc=t.comparer,this.Gb=t.angle,this.Fb=t.alignment,this.tq=t.nodeIndent,this.uq=t.nodeIndentPastParent,this.vq=t.nodeSpacing,this.be=t.layerSpacing,this.$p=t.layerSpacingParentOverlap,this.kp=t.compaction,this.cp=t.breadthLimit,this.Mq=t.rowSpacing,this.Lq=t.rowIndent,this.jp=t.commentSpacing,this.ip=t.commentMargin,this.Uq=t.setsPortSpot,this.Cq=t.portSpot,this.Tq=t.setsChildPortSpot,this.gp=t.childPortSpot)},I.Object.defineProperties(Ei.prototype,{initialized:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},parent:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(t!==null)for(var e=t.length,n=0;n<e;n++);this.u=t}}},level:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},maxGenerationCount:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},comments:{get:function(){return this.od},set:function(t){if(this.od!==t){if(t!==null)for(var e=t.length,n=0;n<e;n++);this.od=t}}},sorting:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t)}},angle:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb!==t&&(this.Fb=t)}},nodeIndent:{get:function(){return this.tq},set:function(t){this.tq!==t&&(this.tq=t)}},nodeIndentPastParent:{get:function(){return this.uq},set:function(t){this.uq!==t&&(this.uq=t)}},nodeSpacing:{get:function(){return this.vq},set:function(t){this.vq!==t&&(this.vq=t)}},layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&(this.be=t)}},layerSpacingParentOverlap:{get:function(){return this.$p},set:function(t){this.$p!==t&&(this.$p=t)}},compaction:{get:function(){return this.kp},set:function(t){this.kp!==t&&(this.kp=t)}},breadthLimit:{get:function(){return this.cp},set:function(t){this.cp!==t&&(this.cp=t)}},rowSpacing:{get:function(){return this.Mq},set:function(t){this.Mq!==t&&(this.Mq=t)}},rowIndent:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},commentSpacing:{get:function(){return this.jp},set:function(t){this.jp!==t&&(this.jp=t)}},commentMargin:{get:function(){return this.ip},set:function(t){this.ip!==t&&(this.ip=t)}},setsPortSpot:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},portSpot:{get:function(){return this.Cq},set:function(t){this.Cq.C(t)||(this.Cq=t)}},setsChildPortSpot:{get:function(){return this.Tq},set:function(t){this.Tq!==t&&(this.Tq=t)}},childPortSpot:{get:function(){return this.gp},set:function(t){this.gp.C(t)||(this.gp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Ca},set:function(t){this.Ca.set(t)}},subtreeOffset:{get:function(){return this.ka},set:function(t){this.ka.set(t)}}}),Ei.className="TreeVertex";function su(t){Ke.call(this,t),this.Ft=new C(0,0)}O(su,Ke),su.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.qd){case qo:n=this.fromVertex,i=this.toVertex;break;case Dl:n=this.toVertex,i=this.fromVertex;break;default:B("Unhandled path value "+e.qd.toString())}if(n!==null&&i!==null)if(e=this.Ft,e.x!==0||e.y!==0||n.Xz){i=n.bounds;var r=Qi(n),a=iu(n),h=n.rowSpacing;t.mg();var g=t.curve===si,f=t.isOrthogonal,c;if(t.jh(),f||g){for(c=2;4<t.pointsCount;)t.Yu(2);var m=t.i(1),y=t.i(2)}else{for(c=1;3<t.pointsCount;)t.Yu(1);m=t.i(0),y=t.i(t.pointsCount-1)}var S=t.i(t.pointsCount-1);r===0?(n.alignment===tr?(r=i.bottom+e.y,e.y===0&&m.y>S.y+n.rowIndent&&(r=Math.min(r,Math.max(m.y,r-rs(n))))):n.alignment===bo?(r=i.top+e.y,e.y===0&&m.y<S.y-n.rowIndent&&(r=Math.max(r,Math.min(m.y,r+rs(n))))):r=n.Pl||n.Ql&&n.maxGenerationCount===1?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,g?(t.l(c,m.x,r),c++,t.l(c,i.right+a,r),c++,t.l(c,i.right+a+(e.x-h)/3,r),c++,t.l(c,i.right+a+2*(e.x-h)/3,r),c++,t.l(c,i.right+a+(e.x-h),r),c++,t.l(c,y.x,r)):(f&&(t.l(c,i.right+a/2,m.y),c++),t.l(c,i.right+a/2,r),c++,t.l(c,i.right+a+e.x-(f?h/2:h),r),c++,f&&t.l(c,t.i(c-1).x,y.y))):r===90?(n.alignment===tr?(r=i.right+e.x,e.x===0&&m.x>S.x+n.rowIndent&&(r=Math.min(r,Math.max(m.x,r-rs(n))))):n.alignment===bo?(r=i.left+e.x,e.x===0&&m.x<S.x-n.rowIndent&&(r=Math.max(r,Math.min(m.x,r+rs(n))))):r=n.Pl||n.Ql&&n.maxGenerationCount===1?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,g?(t.l(c,r,m.y),c++,t.l(c,r,i.bottom+a),c++,t.l(c,r,i.bottom+a+(e.y-h)/3),c++,t.l(c,r,i.bottom+a+2*(e.y-h)/3),c++,t.l(c,r,i.bottom+a+(e.y-h)),c++,t.l(c,r,y.y)):(f&&(t.l(c,m.x,i.bottom+a/2),c++),t.l(c,r,i.bottom+a/2),c++,t.l(c,r,i.bottom+a+e.y-(f?h/2:h)),c++,f&&t.l(c,y.x,t.i(c-1).y))):r===180?(n.alignment===tr?(r=i.bottom+e.y,e.y===0&&m.y>S.y+n.rowIndent&&(r=Math.min(r,Math.max(m.y,r-rs(n))))):n.alignment===bo?(r=i.top+e.y,e.y===0&&m.y<S.y-n.rowIndent&&(r=Math.max(r,Math.min(m.y,r+rs(n))))):r=n.Pl||n.Ql&&n.maxGenerationCount===1?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,g?(t.l(c,m.x,r),c++,t.l(c,i.left-a,r),c++,t.l(c,i.left-a+(e.x+h)/3,r),c++,t.l(c,i.left-a+2*(e.x+h)/3,r),c++,t.l(c,i.left-a+(e.x+h),r),c++,t.l(c,y.x,r)):(f&&(t.l(c,i.left-a/2,m.y),c++),t.l(c,i.left-a/2,r),c++,t.l(c,i.left-a+e.x+(f?h/2:h),r),c++,f&&t.l(c,t.i(c-1).x,y.y))):r===270?(n.alignment===tr?(r=i.right+e.x,e.x===0&&m.x>S.x+n.rowIndent&&(r=Math.min(r,Math.max(m.x,r-rs(n))))):n.alignment===bo?(r=i.left+e.x,e.x===0&&m.x<S.x-n.rowIndent&&(r=Math.max(r,Math.min(m.x,r+rs(n))))):r=n.Pl||n.Ql&&n.maxGenerationCount===1?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,g?(t.l(c,r,m.y),c++,t.l(c,r,i.top-a),c++,t.l(c,r,i.top-a+(e.y+h)/3),c++,t.l(c,r,i.top-a+2*(e.y+h)/3),c++,t.l(c,r,i.top-a+(e.y+h)),c++,t.l(c,r,y.y)):(f&&(t.l(c,m.x,i.top-a/2),c++),t.l(c,r,i.top-a/2),c++,t.l(c,r,i.top-a+e.y+(f?h/2:h)),c++,f&&t.l(c,y.x,t.i(c-1).y))):B("Invalid angle "+r),t.pf()}else t=this.link,a=Qi(n),a!==Qi(i)&&(h=iu(n),g=n.bounds,n=i.bounds,a===0&&n.left-g.right<h+1||a===90&&n.top-g.bottom<h+1||a===180&&g.left-n.right<h+1||a===270&&g.top-n.bottom<h+1||(t.mg(),n=t.curve===si,e=t.isOrthogonal,i=Ys(this.fromVertex.alignment),t.jh(),a===0?(a=g.right+h/2,n?t.pointsCount===4&&(n=t.i(3).y,t.M(1,a-20,t.i(1).y),t.l(2,a-20,n),t.l(3,a,n),t.l(4,a+20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,a,t.i(2).y),t.M(3,a,t.i(3).y)):t.pointsCount===4?t.l(2,a,t.i(2).y):t.pointsCount===3?t.M(1,a,t.i(2).y):t.pointsCount===2&&t.l(1,a,t.i(1).y)):a===90?(a=g.bottom+h/2,n?t.pointsCount===4&&(n=t.i(3).x,t.M(1,t.i(1).x,a-20),t.l(2,n,a-20),t.l(3,n,a),t.l(4,n,a+20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,a),t.M(3,t.i(3).x,a)):t.pointsCount===4?t.l(2,t.i(2).x,a):t.pointsCount===3?t.M(1,t.i(2).x,a):t.pointsCount===2&&t.l(1,t.i(1).x,a)):a===180?(a=g.left-h/2,n?t.pointsCount===4&&(n=t.i(3).y,t.M(1,a+20,t.i(1).y),t.l(2,a+20,n),t.l(3,a,n),t.l(4,a-20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,a,t.i(2).y),t.M(3,a,t.i(3).y)):t.pointsCount===4?t.l(2,a,t.i(2).y):t.pointsCount===3?t.M(1,a,t.i(2).y):t.pointsCount===2&&t.l(1,a,t.i(1).y)):a===270&&(a=g.top-h/2,n?t.pointsCount===4&&(n=t.i(3).x,t.M(1,t.i(1).x,a+20),t.l(2,n,a+20),t.l(3,n,a),t.l(4,n,a-20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,a),t.M(3,t.i(3).x,a)):t.pointsCount===4?t.l(2,t.i(2).x,a):t.pointsCount===3?t.M(1,t.i(2).x,a):t.pointsCount===2&&t.l(1,t.i(1).x,a)),t.pf()))}},I.Object.defineProperties(su.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},relativePoint:{get:function(){return this.Ft},set:function(t){this.Ft.set(t)}}}),su.className="TreeEdge",te.prototype.initializeStandardTools=function(){this.gb("Action",new Vr,this.mouseDownTools),this.gb("Relinking",new Ti,this.mouseDownTools),this.gb("LinkReshaping",new ve,this.mouseDownTools),this.gb("Rotating",new ei,this.mouseDownTools),this.gb("Resizing",new Sn,this.mouseDownTools),this.gb("Linking",new Gn,this.mouseMoveTools),this.gb("Dragging",new ee,this.mouseMoveTools),this.gb("DragSelecting",new _o,this.mouseMoveTools),this.gb("Panning",new Ko,this.mouseMoveTools),this.gb("ContextMenu",new ni,this.mouseUpTools),this.gb("TextEditing",new $t,this.mouseUpTools),this.gb("ClickCreating",new ua,this.mouseUpTools),this.gb("ClickSelecting",new ph,this.mouseUpTools)},Fo("Horizontal",new Bf),Fo("Spot",new Rf),Fo("Table",new Yf),Fo("Viewbox",new _f),Fo("TableRow",new Uf),Fo("TableColumn",new Xf),Fo("Graduated",new Pg),Fo("Grid",new Sg),Ff.add("GraphLinksModel",De),Ff.add("TreeModel",Si),kc(Ee,null),kc(zt,null);var ap=U.go,zv={get licenseKey(){return z.licenseKey},set licenseKey(t){z.licenseKey=t},get version(){return z.version},Group:pt,EnumValue:$,List:tt,Set:Z,Map:ct,Point:C,Size:dt,Rect:G,Margin:At,Spot:ht,Geometry:W,PathFigure:ze,PathSegment:Tt,InputEvent:fi,DiagramEvent:il,ChangedEvent:bt,Model:rt,GraphLinksModel:kt,TreeModel:Nn,Binding:ue,Transaction:Ye,UndoManager:se,CommandHandler:Vt,Tool:Ft,DraggingTool:ee,DraggingInfo:Cs,DraggingOptions:Ch,LinkingBaseTool:Ze,LinkingTool:Gn,RelinkingTool:Ti,LinkReshapingTool:ve,ResizingTool:Sn,RotatingTool:ei,ClickSelectingTool:ph,ActionTool:Vr,ClickCreatingTool:ua,HTMLInfo:Yr,ContextMenuTool:ni,DragSelectingTool:_o,PanningTool:Ko,TextEditingTool:$t,ToolManager:te,Animation:on,AnimationManager:ci,AnimationTrigger:Ho,Layer:rn,Diagram:z,Palette:jf,Overview:yr,Brush:Et,GraphObject:st,Panel:X,RowColumnDefinition:Le,Shape:yt,TextBlock:Rt,Picture:Rn,Part:lt,Adornment:Ct,Node:q,Link:H,Placeholder:wn,Layout:Dt,LayoutNetwork:Yt,LayoutVertex:ce,LayoutEdge:Ke,GridLayout:Be,PanelLayout:Se,CircularLayout:Qt,CircularNetwork:tu,CircularVertex:Jg,CircularEdge:Xc,ForceDirectedLayout:Ee,ForceDirectedNetwork:Ml,ForceDirectedVertex:kl,ForceDirectedEdge:Nl,LayeredDigraphLayout:zt,LayeredDigraphNetwork:nu,LayeredDigraphVertex:Cl,LayeredDigraphEdge:Tl,TreeLayout:Mt,TreeNetwork:Ol,TreeVertex:Ei,TreeEdge:su};typeof ap=="object"&&ap.version&&Lt("WARNING: a `go` object on the root object is already defined.  "+("Debug"in ap?"debug ":"")+"version: "+ap.version+", replaced with version: "+zv.version),z.prototype.go=zv,U.go=zv,typeof $p<"u"&&typeof $p.exports=="object"&&($p.exports=typeof global<"u"?global.go:self.go)})();const wt=typeof global<"u"?global.go:self.go;wt.Group;wt.EnumValue;wt.List;wt.Set;wt.Map;const Sd=wt.Point;wt.Size;wt.Rect;wt.Margin;const Nd=wt.Spot;wt.Geometry;wt.PathFigure;wt.PathSegment;wt.InputEvent;wt.DiagramEvent;wt.ChangedEvent;wt.Model;const sP=wt.GraphLinksModel;wt.TreeModel;const Pd=wt.Binding;wt.Transaction;wt.UndoManager;wt.CommandHandler;wt.Tool;wt.DraggingTool;wt.DraggingInfo;wt.LinkingBaseTool;wt.LinkingTool;wt.RelinkingTool;wt.LinkReshapingTool;wt.ResizingTool;wt.RotatingTool;wt.ClickSelectingTool;wt.ActionTool;wt.ClickCreatingTool;wt.HTMLInfo;wt.ContextMenuTool;wt.DragSelectingTool;wt.PanningTool;wt.TextEditingTool;const dF=wt.ToolManager,fF=wt.Animation,cF=wt.AnimationManager;wt.AnimationTrigger;wt.Layer;const Im=wt.Diagram;wt.Palette;const pF=wt.Overview;wt.Brush;const mF=wt.GraphObject,yF=wt.Panel;wt.RowColumnDefinition;const xd=wt.Shape,CM=wt.TextBlock;wt.TextBlockMetrics;wt.Picture;wt.Part;const vF=wt.Adornment,SF=wt.Node,mS=wt.Link,PF=wt.Placeholder;wt.Layout;wt.LayoutNetwork;wt.LayoutVertex;wt.LayoutEdge;wt.GridLayout;wt.PanelLayout;wt.CircularLayout;wt.CircularNetwork;wt.CircularVertex;wt.CircularEdge;wt.ForceDirectedLayout;wt.ForceDirectedNetwork;wt.ForceDirectedVertex;wt.ForceDirectedEdge;wt.LayeredDigraphLayout;wt.LayeredDigraphNetwork;wt.LayeredDigraphVertex;wt.LayeredDigraphEdge;wt.TreeLayout;wt.TreeNetwork;wt.TreeVertex;wt.TreeEdge;wt.version;var u1=function(l,o){return u1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,d){s.__proto__=d}||function(s,d){for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(s[u]=d[u])},u1(l,o)};function aP(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");u1(l,o);function s(){this.constructor=l}l.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}var Bk={exports:{}},Am={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xF=Ls.exports,wF=Symbol.for("react.element"),LF=Symbol.for("react.fragment"),MF=Object.prototype.hasOwnProperty,kF=xF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NF={key:!0,ref:!0,__self:!0,__source:!0};function Gk(l,o,s){var d,u={},p=null,v=null;s!==void 0&&(p=""+s),o.key!==void 0&&(p=""+o.key),o.ref!==void 0&&(v=o.ref);for(d in o)MF.call(o,d)&&!NF.hasOwnProperty(d)&&(u[d]=o[d]);if(l&&l.defaultProps)for(d in o=l.defaultProps,o)u[d]===void 0&&(u[d]=o[d]);return{$$typeof:wF,type:l,key:p,ref:v,props:u,_owner:kF.current}}Am.Fragment=LF;Am.jsx=Gk;Am.jsxs=Gk;(function(l){l.exports=Am})(Bk);const bl=Bk.exports.jsx;var CF=function(l){aP(o,l);function o(s){var d=l.call(this,s)||this;return d.wasCleared=!1,d.modelChangedListener=null,d.divRef=Ls.exports.createRef(),d}return o.prototype.getDiagram=function(){return this.divRef.current===null?null:Im.fromDiv(this.divRef.current)},o.prototype.clear=function(){var s=this.getDiagram();s!==null&&(s.clear(),this.wasCleared=!0)},o.prototype.componentDidMount=function(){var s=this;if(this.divRef.current!==null){var d=this.props.initDiagram();d.div=this.divRef.current,this.modelChangedListener=function(u){if(u.isTransactionFinished&&u.model&&!u.model.isReadOnly&&s.props.onModelChange){var p=u.model.toIncrementalData(u);p!==null&&s.props.onModelChange(p)}},d.addModelChangedListener(this.modelChangedListener),d.delayInitialization(function(){s.mergeData(d,!0)})}},o.prototype.componentWillUnmount=function(){var s=this.getDiagram();s!==null&&(s.div=null,this.modelChangedListener!==null&&(s.removeModelChangedListener(this.modelChangedListener),this.modelChangedListener=null))},o.prototype.shouldComponentUpdate=function(s,d){return s.divClassName!==this.props.divClassName||s.style!==this.props.style?!0:!(s.skipsDiagramUpdate||s.nodeDataArray===this.props.nodeDataArray&&s.linkDataArray===this.props.linkDataArray&&s.modelData===this.props.modelData)},o.prototype.componentDidUpdate=function(s,d){var u=this;if(!(s.nodeDataArray===this.props.nodeDataArray&&s.linkDataArray===this.props.linkDataArray&&s.modelData===this.props.modelData)){var p=this.getDiagram();p!==null&&(this.wasCleared?p.delayInitialization(function(){u.mergeData(p,!0),u.wasCleared=!1}):this.mergeData(p,!1))}},o.prototype.mergeData=function(s,d){var u=this,p=s.model;p.commit(function(v){u.props.modelData!==void 0&&v.assignAllDataProperties(v.modelData,u.props.modelData),v.mergeNodeDataArray(u.props.nodeDataArray),u.props.linkDataArray!==void 0&&v instanceof sP&&v.mergeLinkDataArray(u.props.linkDataArray)},d?"initial merge":"merge data")},o.prototype.render=function(){return bl("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},o}(Ls.exports.Component);(function(l){aP(o,l);function o(s){var d=l.call(this,s)||this;return d.divRef=Ls.exports.createRef(),d}return o.prototype.getOverview=function(){return this.divRef.current===null?null:Im.fromDiv(this.divRef.current)},o.prototype.componentDidMount=function(){if(this.divRef.current!==null){var s;this.props.initOverview!==void 0?s=this.props.initOverview():(s=new pF,s.contentAlignment=Nd.Center),s.div=this.divRef.current,s.observed=this.props.observedDiagram}},o.prototype.componentWillUnmount=function(){var s=this.getOverview();s!==null&&(s.div=null,s.observed=null)},o.prototype.shouldComponentUpdate=function(s,d){return s.divClassName!==this.props.divClassName||s.style!==this.props.style?!0:s.observedDiagram!==this.props.observedDiagram},o.prototype.componentDidUpdate=function(s,d){if(s.observedDiagram!==this.props.observedDiagram){var u=this.getOverview();u!==null&&(u.observed=this.props.observedDiagram)}},o.prototype.render=function(){return bl("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},o})(Ls.exports.Component);(function(l){aP(o,l);function o(s){var d=l.call(this,s)||this;return d.wasCleared=!1,d.divRef=Ls.exports.createRef(),d}return o.prototype.getPalette=function(){return this.divRef.current===null?null:Im.fromDiv(this.divRef.current)},o.prototype.clear=function(){var s=this.getPalette();s!==null&&(s.clear(),this.wasCleared=!0)},o.prototype.componentDidMount=function(){var s=this;if(this.divRef.current!==null){var d=this.props.initPalette();d.div=this.divRef.current,d.delayInitialization(function(){s.mergeData(d,!0)})}},o.prototype.componentWillUnmount=function(){var s=this.getPalette();s!==null&&(s.div=null)},o.prototype.shouldComponentUpdate=function(s,d){return s.divClassName!==this.props.divClassName||s.style!==this.props.style?!0:!(s.nodeDataArray===this.props.nodeDataArray&&s.linkDataArray===this.props.linkDataArray&&s.modelData===this.props.modelData)},o.prototype.componentDidUpdate=function(s,d){var u=this;if(!(s.nodeDataArray===this.props.nodeDataArray&&s.linkDataArray===this.props.linkDataArray&&s.modelData===this.props.modelData)){var p=this.getPalette();p!==null&&(this.wasCleared?p.delayInitialization(function(){u.mergeData(p,!0),u.wasCleared=!1}):this.mergeData(p,!1))}},o.prototype.mergeData=function(s,d){var u=this,p=s.model;p.commit(function(v){u.props.modelData!==void 0&&v.assignAllDataProperties(v.modelData,u.props.modelData),v.mergeNodeDataArray(u.props.nodeDataArray),u.props.linkDataArray!==void 0&&v instanceof sP&&v.mergeLinkDataArray(u.props.linkDataArray)},d?"initial merge":"merge data")},o.prototype.render=function(){return bl("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},o})(Ls.exports.Component);function re(l,o,s,d){s===void 0&&(s=0),d===void 0&&(d=1/0),this._name=l,this._defaultValue=o,this._minimum=s,this._maximum=d}Object.defineProperty(re.prototype,"name",{get:function(){return this._name},set:function(l){if(typeof l!="string"||l==="")throw new Error("Shape name must be a valid string.");this._name=l}});Object.defineProperty(re.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(l){if(typeof l!="number"||isNaN(l))throw new Error("The default value must be a real number, not: "+l);this._defaultValue=l}});Object.defineProperty(re.prototype,"minimum",{get:function(){return this._minimum},set:function(l){if(typeof l!="number"||isNaN(l))throw new Error("Minimum must be a real number, not: "+l);this._minimum=l}});Object.defineProperty(re.prototype,"maximum",{get:function(){return this._maximum},set:function(l){if(typeof l!="number"||isNaN(l))throw new Error("Maximum must be a real number, not: "+l);this._maximum=l}});go.Shape._FigureParameters={};go.Shape.getFigureParameter=function(l,o){var s=go.Shape._FigureParameters[l];return s?s[o]:null};go.Shape.setFigureParameter=function(l,o,s){if(!(s instanceof re))throw new Error("Third argument to Shape.setFigureParameter is not FigureParameter: "+s);if(s.defaultValue<s.minimum||s.defaultValue>s.maximum)throw new Error("defaultValue must be between minimum and maximum, not: "+s.defaultValue);var d=go.Shape._FigureParameters[l];d||(d=[],go.Shape._FigureParameters[l]=d),d[o]=s};var lP=[];function g1(l,o){var s=lP.pop();return s===void 0?new go.Point(l,o):(s.x=l,s.y=o,s)}function Ne(){var l=lP.pop();return l===void 0?new go.Point:l}function me(l){lP.push(l)}function Ro(l,o,s,d,u,p,v,w,M){var T=l-s,O=u-v,I,V;if(T===0||O===0)if(T===0){var K=(p-w)/O,at=p-K*u;I=l,V=K*I+at}else{var U=(o-d)/T,Bt=o-U*l;I=u,V=U*I+Bt}else{var U=(o-d)/T,K=(p-w)/O,Bt=o-U*l,at=p-K*u;I=(at-Bt)/(U-K),V=U*I+Bt}return M.x=I,M.y=V,M}function Ps(l,o,s,d,u,p,v,w,M,T,O,I,V,K){var at=1-M,U=M,Bt=l*at+s*U,b=o*at+d*U,_=s*at+u*U,Q=d*at+p*U,B=u*at+v*U,ot=p*at+w*U,gt=Bt*at+_*U,Lt=b*at+Q*U,mt=_*at+B*U,Ut=Q*at+ot*U,Jt=gt*at+mt*U,Bn=Lt*at+Ut*U;T.x=Bt,T.y=b,O.x=gt,O.y=Lt,I.x=Jt,I.y=Bn,V.x=mt,V.y=Ut,K.x=B,K.y=ot}var Rk=new go.Spot(.156,.156),Vk=new go.Spot(.844,.844),ft=4*((Math.sqrt(2)-1)/3);go.Shape.setFigureParameter("RoundedRectangle",0,new re("CornerRounding",5));go.Shape.defineFigureGenerator("RoundedRectangle",function(l,o,s){var d=l?l.parameter1:NaN;(isNaN(d)||d<0)&&(d=5),d=Math.min(d,o/3),d=Math.min(d,s/3);var u=d*ft,p=new go.Geometry().add(new go.PathFigure(d,0,!0).add(new go.PathSegment(go.PathSegment.Line,o-d,0)).add(new go.PathSegment(go.PathSegment.Bezier,o,d,o-u,0,o,u)).add(new go.PathSegment(go.PathSegment.Line,o,s-d)).add(new go.PathSegment(go.PathSegment.Bezier,o-d,s,o,s-u,o-u,s)).add(new go.PathSegment(go.PathSegment.Line,d,s)).add(new go.PathSegment(go.PathSegment.Bezier,0,s-d,u,s,0,s-u)).add(new go.PathSegment(go.PathSegment.Line,0,d)).add(new go.PathSegment(go.PathSegment.Bezier,d,0,0,u,u,0).close()));return u>1&&(p.spot1=new go.Spot(0,0,u,u),p.spot2=new go.Spot(1,1,-u,-u)),p});go.Shape.defineFigureGenerator("Border","RoundedRectangle");go.Shape.defineFigureGenerator("TriangleRight",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())).setSpots(0,.25,.5,.75)});go.Shape.defineFigureGenerator("TriangleDown",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,.5*o,s).close())).setSpots(.25,0,.75,.5)});go.Shape.defineFigureGenerator("TriangleLeft",function(l,o,s){return new go.Geometry().add(new go.PathFigure(o,s).add(new go.PathSegment(go.PathSegment.Line,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,o,0).close())).setSpots(.5,.25,1,.75)});go.Shape.defineFigureGenerator("TriangleUp",function(l,o,s){return new go.Geometry().add(new go.PathFigure(o,s).add(new go.PathSegment(go.PathSegment.Line,0,s)).add(new go.PathSegment(go.PathSegment.Line,.5*o,0).close())).setSpots(.25,.5,.75,1)});go.Shape.defineFigureGenerator("Triangle","TriangleUp");go.Shape.defineFigureGenerator("Diamond",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.5*o,0).add(new go.PathSegment(go.PathSegment.Line,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,.5*o,s)).add(new go.PathSegment(go.PathSegment.Line,o,.5*s).close())).setSpots(.25,.25,.75,.75)});go.Shape.defineFigureGenerator("LineH",function(l,o,s){var d=new go.Geometry(go.Geometry.Line);return d.startX=0,d.startY=s/2,d.endX=o,d.endY=s/2,d});go.Shape.defineFigureGenerator("LineV",function(l,o,s){var d=new go.Geometry(go.Geometry.Line);return d.startX=o/2,d.startY=0,d.endX=o/2,d.endY=s,d});go.Shape.defineFigureGenerator("BarH","Rectangle");go.Shape.defineFigureGenerator("BarV","Rectangle");go.Shape.defineFigureGenerator("MinusLine","LineH");go.Shape.defineFigureGenerator("PlusLine",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,s/2,!1).add(new go.PathSegment(go.PathSegment.Line,o,s/2)).add(new go.PathSegment(go.PathSegment.Move,o/2,0)).add(new go.PathSegment(go.PathSegment.Line,o/2,s)))});go.Shape.defineFigureGenerator("XLine",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,s,!1).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Move,0,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)))});go.Shape.defineFigureGenerator("LineRight",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.25*o,0,!1).add(new go.PathSegment(go.PathSegment.Line,.75*o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,.25*o,s)))});go.Shape.defineFigureGenerator("LineDown",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,.25*s,!1).add(new go.PathSegment(go.PathSegment.Line,.5*o,.75*s)).add(new go.PathSegment(go.PathSegment.Line,o,.25*s)))});go.Shape.defineFigureGenerator("LineLeft",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.75*o,0,!1).add(new go.PathSegment(go.PathSegment.Line,.25*o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,.75*o,s)))});go.Shape.defineFigureGenerator("LineUp",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,.75*s,!1).add(new go.PathSegment(go.PathSegment.Line,.5*o,.25*s)).add(new go.PathSegment(go.PathSegment.Line,o,.75*s)))});go.Shape.defineFigureGenerator("AsteriskLine",function(l,o,s){var d=.2/Math.SQRT2;return new go.Geometry().add(new go.PathFigure(d*o,(1-d)*s,!1).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,d*s)).add(new go.PathSegment(go.PathSegment.Move,d*o,d*s)).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,(1-d)*s)).add(new go.PathSegment(go.PathSegment.Move,0,s/2)).add(new go.PathSegment(go.PathSegment.Line,o,s/2)).add(new go.PathSegment(go.PathSegment.Move,o/2,0)).add(new go.PathSegment(go.PathSegment.Line,o/2,s)))});go.Shape.defineFigureGenerator("CircleLine",function(l,o,s){var d=o/2,u=new go.Geometry().add(new go.PathFigure(o,o/2,!1).add(new go.PathSegment(go.PathSegment.Arc,0,360,d,d,d,d).close()));return u.spot1=Rk,u.spot2=Vk,u.defaultStretch=go.GraphObject.Uniform,u});go.Shape.defineFigureGenerator("Line1",function(l,o,s){var d=new go.Geometry(go.Geometry.Line);return d.startX=0,d.startY=0,d.endX=o,d.endY=s,d});go.Shape.defineFigureGenerator("Line2",function(l,o,s){var d=new go.Geometry(go.Geometry.Line);return d.startX=o,d.startY=0,d.endX=0,d.endY=s,d});go.Shape.defineFigureGenerator("Curve1",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,o,s,ft*o,0,o,(1-ft)*s)))});go.Shape.defineFigureGenerator("Curve2",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,o,s,0,ft*s,(1-ft)*o,s)))});go.Shape.defineFigureGenerator("Curve3",function(l,o,s){return new go.Geometry().add(new go.PathFigure(o,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,0,s,o,ft*s,ft*o,s)))});go.Shape.defineFigureGenerator("Curve4",function(l,o,s){return new go.Geometry().add(new go.PathFigure(o,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,0,s,(1-ft)*o,0,0,(1-ft)*s)))});go.Shape.defineFigureGenerator("TriangleDownLeft",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())).setSpots(0,.5,.5,1)});go.Shape.defineFigureGenerator("TriangleDownRight",function(l,o,s){return new go.Geometry().add(new go.PathFigure(o,0,!0).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())).setSpots(.5,.5,1,1)});go.Shape.defineFigureGenerator("TriangleUpLeft",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())).setSpots(0,0,.5,.5)});go.Shape.defineFigureGenerator("TriangleUpRight",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o,s).close())).setSpots(.5,0,1,.5)});go.Shape.defineFigureGenerator("RightTriangle","TriangleDownLeft");go.Shape.setFigureParameter("Parallelogram1",0,new re("Indent",.1,-.99,.99));go.Shape.defineFigureGenerator("Parallelogram1",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)?d=.1:d<-1?d=-1:d>1&&(d=1);var u=Math.abs(d)*o;if(d===0){var p=new go.Geometry(go.Geometry.Rectangle);return p.startX=0,p.startY=0,p.endX=o,p.endY=s,p}else{var p=new go.Geometry;return d>0?p.add(new go.PathFigure(u,0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o-u,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())):p.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o-u,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,u,s).close())),u<o/2&&p.setSpots(u/o,0,(o-u)/o,1),p}});go.Shape.defineFigureGenerator("Parallelogram","Parallelogram1");go.Shape.setFigureParameter("Parallelogram2",0,new re("Indent",10,-1/0,1/0));go.Shape.defineFigureGenerator("Parallelogram2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)?d=10:d<-o?d=-o:d>o&&(d=o);var u=Math.abs(d);if(d===0){var p=new go.Geometry(go.Geometry.Rectangle);return p.startX=0,p.startY=0,p.endX=o,p.endY=s,p}else{var p=new go.Geometry;return d>0?p.add(new go.PathFigure(u,0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o-u,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())):p.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o-u,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,u,s).close())),u<o/2&&p.setSpots(u/o,0,(o-u)/o,1),p}});go.Shape.setFigureParameter("Trapezoid1",0,new re("Indent",.2,-.99,.99));go.Shape.defineFigureGenerator("Trapezoid1",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)?d=.2:d<.5?d=-.5:d>.5&&(d=.5);var u=Math.abs(d)*o;if(d===0){var p=new go.Geometry(go.Geometry.Rectangle);return p.startX=0,p.startY=0,p.endX=o,p.endY=s,p}else{var p=new go.Geometry;return d>0?p.add(new go.PathFigure(u,0).add(new go.PathSegment(go.PathSegment.Line,o-u,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())):p.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o-u,s)).add(new go.PathSegment(go.PathSegment.Line,u,s).close())),u<o/2&&p.setSpots(u/o,0,(o-u)/o,1),p}});go.Shape.defineFigureGenerator("Trapezoid","Trapezoid1");go.Shape.setFigureParameter("Trapezoid2",0,new re("Indent",20,-1/0,1/0));go.Shape.defineFigureGenerator("Trapezoid2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)?d=20:d<-o?d=-o/2:d>o&&(d=o/2);var u=Math.abs(d);if(d===0){var p=new go.Geometry(go.Geometry.Rectangle);return p.startX=0,p.startY=0,p.endX=o,p.endY=s,p}else{var p=new go.Geometry;return d>0?p.add(new go.PathFigure(u,0).add(new go.PathSegment(go.PathSegment.Line,o-u,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())):p.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o-u,s)).add(new go.PathSegment(go.PathSegment.Line,u,s).close())),u<o/2&&p.setSpots(u/o,0,(o-u)/o,1),p}});go.Shape.setFigureParameter("ManualOperation",0,new re("Indent",10,-1/0,1/0));go.Shape.defineFigureGenerator("ManualOperation",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)?d=10:d<-o?d=-o/2:d>o&&(d=o/2);var u=Math.abs(d);if(d===0){var p=new go.Geometry(go.Geometry.Rectangle);return p.startX=0,p.startY=0,p.endX=o,p.endY=s,p}else{var p=new go.Geometry;return d>0?p.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o-u,s)).add(new go.PathSegment(go.PathSegment.Line,u,s).close())):p.add(new go.PathFigure(u,0).add(new go.PathSegment(go.PathSegment.Line,o-u,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close())),u<o/2&&p.setSpots(u/o,0,(o-u)/o,1),p}});var Yk=[];function hP(){var l=Yk.pop();return l===void 0?[]:l}function zn(l){l.length=0,Yk.push(l)}function qa(l){for(var o=hP(),s=.5,d=.5,u=Math.PI*1.5,p=0,v=0;v<l;v++)p=2*Math.PI/l*v+u,o[v]=new go.Point(d+s*Math.cos(p),d+s*Math.sin(p));return o.push(o[0]),o}function Hu(l){var o=nh(l),s=hP();s[0]=o[0];for(var d=1,u=1;d<o.length;d+=2,u+=3)s[u]=o[d],s[u+1]=o[d],s[u+2]=o[d+1];return zn(o),s}function nh(l){for(var o=qa(l),s=hP(),d=Math.floor(o.length/2),u=o.length-1,p=l%2===0?2:1,v=0;v<u;v++){var w=o[v],M=o[v+1],T=o[(d+v-1)%u],O=o[(d+v+p)%u];s[v*2]=w,s[v*2+1]=Ro(w.x,w.y,T.x,T.y,M.x,M.y,O.x,O.y,new go.Point)}return s[s.length]=s[0],zn(o),s}go.Shape.defineFigureGenerator("Pentagon",function(l,o,s){var d=qa(5),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<5;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.2,.22),u.spot2=new go.Spot(.8,.9),u});go.Shape.defineFigureGenerator("Hexagon",function(l,o,s){var d=qa(6),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<6;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.07,.25),u.spot2=new go.Spot(.93,.75),u});go.Shape.defineFigureGenerator("Heptagon",function(l,o,s){var d=qa(7),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<7;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.2,.15),u.spot2=new go.Spot(.8,.85),u});go.Shape.defineFigureGenerator("Octagon",function(l,o,s){var d=qa(8),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<8;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.15,.15),u.spot2=new go.Spot(.85,.85),u});go.Shape.defineFigureGenerator("Nonagon",function(l,o,s){var d=qa(9),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<9;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.17,.13),u.spot2=new go.Spot(.82,.82),u});go.Shape.defineFigureGenerator("Decagon",function(l,o,s){var d=qa(10),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<10;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.16,.16),u.spot2=new go.Spot(.84,.84),u});go.Shape.defineFigureGenerator("Dodecagon",function(l,o,s){var d=qa(12),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<12;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.16,.16),u.spot2=new go.Spot(.84,.84),u});go.Shape.defineFigureGenerator("FivePointedStar",function(l,o,s){var d=nh(5),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<10;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.266,.333),u.spot2=new go.Spot(.733,.733),u});go.Shape.defineFigureGenerator("SixPointedStar",function(l,o,s){var d=nh(6),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<12;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.17,.25),u.spot2=new go.Spot(.83,.75),u});go.Shape.defineFigureGenerator("SevenPointedStar",function(l,o,s){var d=nh(7),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<14;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.222,.277),u.spot2=new go.Spot(.777,.666),u});go.Shape.defineFigureGenerator("EightPointedStar",function(l,o,s){var d=nh(8),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<16;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.25,.25),u.spot2=new go.Spot(.75,.75),u});go.Shape.defineFigureGenerator("NinePointedStar",function(l,o,s){var d=nh(9),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<18;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.222,.277),u.spot2=new go.Spot(.777,.666),u});go.Shape.defineFigureGenerator("TenPointedStar",function(l,o,s){var d=nh(10),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<20;v++)p.add(new go.PathSegment(go.PathSegment.Line,d[v].x*o,d[v].y*s));return p.add(new go.PathSegment(go.PathSegment.Line,d[0].x*o,d[0].y*s).close()),zn(d),u.spot1=new go.Spot(.281,.261),u.spot2=new go.Spot(.723,.748),u});go.Shape.defineFigureGenerator("FivePointedBurst",function(l,o,s){var d=Hu(5),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<d.length;v+=3)p.add(new go.PathSegment(go.PathSegment.Bezier,d[v+2].x*o,d[v+2].y*s,d[v].x*o,d[v].y*s,d[v+1].x*o,d[v+1].y*s));return p.segments.last().close(),zn(d),u.spot1=new go.Spot(.222,.277),u.spot2=new go.Spot(.777,.777),u});go.Shape.defineFigureGenerator("SixPointedBurst",function(l,o,s){var d=Hu(6),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<d.length;v+=3)p.add(new go.PathSegment(go.PathSegment.Bezier,d[v+2].x*o,d[v+2].y*s,d[v].x*o,d[v].y*s,d[v+1].x*o,d[v+1].y*s));return p.segments.last().close(),zn(d),u.spot1=new go.Spot(.17,.222),u.spot2=new go.Spot(.833,.777),u});go.Shape.defineFigureGenerator("SevenPointedBurst",function(l,o,s){var d=Hu(7),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<d.length;v+=3)p.add(new go.PathSegment(go.PathSegment.Bezier,d[v+2].x*o,d[v+2].y*s,d[v].x*o,d[v].y*s,d[v+1].x*o,d[v+1].y*s));return p.segments.last().close(),zn(d),u.spot1=new go.Spot(.222,.222),u.spot2=new go.Spot(.777,.777),u});go.Shape.defineFigureGenerator("EightPointedBurst",function(l,o,s){var d=Hu(8),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<d.length;v+=3)p.add(new go.PathSegment(go.PathSegment.Bezier,d[v+2].x*o,d[v+2].y*s,d[v].x*o,d[v].y*s,d[v+1].x*o,d[v+1].y*s));return p.segments.last().close(),zn(d),u.spot1=new go.Spot(.222,.222),u.spot2=new go.Spot(.777,.777),u});go.Shape.defineFigureGenerator("NinePointedBurst",function(l,o,s){var d=Hu(9),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<d.length;v+=3)p.add(new go.PathSegment(go.PathSegment.Bezier,d[v+2].x*o,d[v+2].y*s,d[v].x*o,d[v].y*s,d[v+1].x*o,d[v+1].y*s));return p.segments.last().close(),zn(d),u.spot1=new go.Spot(.222,.222),u.spot2=new go.Spot(.777,.777),u});go.Shape.defineFigureGenerator("TenPointedBurst",function(l,o,s){var d=Hu(10),u=new go.Geometry,p=new go.PathFigure(d[0].x*o,d[0].y*s,!0);u.add(p);for(var v=1;v<d.length;v+=3)p.add(new go.PathSegment(go.PathSegment.Bezier,d[v+2].x*o,d[v+2].y*s,d[v].x*o,d[v].y*s,d[v+1].x*o,d[v+1].y*s));return p.segments.last().close(),zn(d),u.spot1=new go.Spot(.222,.222),u.spot2=new go.Spot(.777,.777),u});go.Shape.setFigureParameter("FramedRectangle",0,new re("ThicknessX",8));go.Shape.setFigureParameter("FramedRectangle",1,new re("ThicknessY",8));go.Shape.defineFigureGenerator("FramedRectangle",function(l,o,s){var d=l?l.parameter1:NaN,u=l?l.parameter2:NaN;isNaN(d)&&(d=8),isNaN(u)&&(u=8);var p=new go.Geometry,v=new go.PathFigure(0,0,!0);return p.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,0)),v.add(new go.PathSegment(go.PathSegment.Line,o,s)),v.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d<o/2&&u<s/2&&(v.add(new go.PathSegment(go.PathSegment.Move,d,u)),v.add(new go.PathSegment(go.PathSegment.Line,d,s-u)),v.add(new go.PathSegment(go.PathSegment.Line,o-d,s-u)),v.add(new go.PathSegment(go.PathSegment.Line,o-d,u).close())),p.setSpots(0,0,1,1,d,u,-d,-u),p});go.Shape.setFigureParameter("Ring",0,new re("Thickness",8));go.Shape.defineFigureGenerator("Ring",function(l,o,s){var d=l?l.parameter1:NaN;(isNaN(d)||d<0)&&(d=8);var u=o/2,p=new go.Geometry,v=new go.PathFigure(o,o/2,!0);p.add(v),v.add(new go.PathSegment(go.PathSegment.Arc,0,360,u,u,u,u).close());var w=Math.max(u-d,0);return w>0&&(v.add(new go.PathSegment(go.PathSegment.Move,o/2+w,o/2)),v.add(new go.PathSegment(go.PathSegment.Arc,0,-360,u,u,w,w).close())),p.spot1=Rk,p.spot2=Vk,p.defaultStretch=go.GraphObject.Uniform,p});go.Shape.defineFigureGenerator("Cloud",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.08034461*o,.1944299*s,!0).add(new go.PathSegment(go.PathSegment.Bezier,.2008615*o,.05349299*s,-.09239631*o,.07836421*s,.1406031*o,-.0542823*s)).add(new go.PathSegment(go.PathSegment.Bezier,.4338609*o,.074219*s,.2450511*o,-.00697547*s,.3776197*o,-.01112067*s)).add(new go.PathSegment(go.PathSegment.Bezier,.6558228*o,.07004196*s,.4539471*o,0,.6066018*o,-.02526587*s)).add(new go.PathSegment(go.PathSegment.Bezier,.8921095*o,.08370865*s,.6914277*o,-.01904177*s,.8921095*o,-.01220843*s)).add(new go.PathSegment(go.PathSegment.Bezier,.9147671*o,.3194596*s,1.036446*o,.04105738*s,1.020377*o,.3022052*s)).add(new go.PathSegment(go.PathSegment.Bezier,.9082935*o,.562044*s,1.04448*o,.360238*s,.992256*o,.5219009*s)).add(new go.PathSegment(go.PathSegment.Bezier,.9212406*o,.8217117*s,1.032337*o,.5771781*s,1.018411*o,.8120651*s)).add(new go.PathSegment(go.PathSegment.Bezier,.7592566*o,.9156953*s,1.028411*o,.9571472*s,.8556702*o,1.052487*s)).add(new go.PathSegment(go.PathSegment.Bezier,.5101666*o,.9310455*s,.7431877*o,1.009325*s,.5624123*o,1.021761*s)).add(new go.PathSegment(go.PathSegment.Bezier,.2609328*o,.9344623*s,.4820677*o,1.031761*s,.3030112*o,1.002796*s)).add(new go.PathSegment(go.PathSegment.Bezier,.08034461*o,.870098*s,.2329994*o,1.01518*s,.03213784*o,1.01518*s)).add(new go.PathSegment(go.PathSegment.Bezier,.06829292*o,.6545475*s,-.02812061*o,.9032597*s,-.01205169*o,.6835638*s)).add(new go.PathSegment(go.PathSegment.Bezier,.06427569*o,.4265613*s,-.01812061*o,.6089503*s,-.00606892*o,.4555777*s)).add(new go.PathSegment(go.PathSegment.Bezier,.08034461*o,.1944299*s,-.01606892*o,.3892545*s,-.01205169*o,.1944299*s))).setSpots(.1,.1,.9,.9)});go.Shape.defineFigureGenerator("StopSign",function(l,o,s){var d=1/(Math.SQRT2+2);return new go.Geometry().add(new go.PathFigure(d*o,0,!0).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,0)).add(new go.PathSegment(go.PathSegment.Line,o,d*s)).add(new go.PathSegment(go.PathSegment.Line,o,(1-d)*s)).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,s)).add(new go.PathSegment(go.PathSegment.Line,d*o,s)).add(new go.PathSegment(go.PathSegment.Line,0,(1-d)*s)).add(new go.PathSegment(go.PathSegment.Line,0,d*s).close())).setSpots(d/2,d/2,1-d/2,1-d/2)});go.Shape.setFigureParameter("Pie",0,new re("Start",0,-360,360));go.Shape.setFigureParameter("Pie",1,new re("Sweep",315,-360,360));go.Shape.defineFigureGenerator("Pie",function(l,o,s){var d=l?l.parameter1:NaN,u=l?l.parameter2:NaN;isNaN(d)&&(d=0),isNaN(u)&&(u=315);var p=d%360;p<0&&(p+=360);var v=u%360,w=Math.min(o,s)/2;return new go.Geometry().add(new go.PathFigure(w,w).add(new go.PathSegment(go.PathSegment.Arc,p,v,w,w,w,w).close()))});go.Shape.defineFigureGenerator("PiePiece",function(l,o,s){var d=ft/Math.SQRT2*.5,u=Math.SQRT2/2,p=1-Math.SQRT2/2;return new go.Geometry().add(new go.PathFigure(o,s,!0).add(new go.PathSegment(go.PathSegment.Bezier,u*o,p*s,o,(1-d)*s,(u+d)*o,(p+d)*s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close()))});go.Shape.setFigureParameter("ThickCross",0,new re("Thickness",30));go.Shape.defineFigureGenerator("ThickCross",function(l,o,s){var d=l?l.parameter1:NaN;(isNaN(d)||d<0)&&(d=30);var u=Math.min(d,o)/2,p=o/2,v=s/2;return new go.Geometry().add(new go.PathFigure(p-u,0,!0).add(new go.PathSegment(go.PathSegment.Line,p+u,0)).add(new go.PathSegment(go.PathSegment.Line,p+u,v-u)).add(new go.PathSegment(go.PathSegment.Line,o,v-u)).add(new go.PathSegment(go.PathSegment.Line,o,v+u)).add(new go.PathSegment(go.PathSegment.Line,p+u,v+u)).add(new go.PathSegment(go.PathSegment.Line,p+u,s)).add(new go.PathSegment(go.PathSegment.Line,p-u,s)).add(new go.PathSegment(go.PathSegment.Line,p-u,v+u)).add(new go.PathSegment(go.PathSegment.Line,0,v+u)).add(new go.PathSegment(go.PathSegment.Line,0,v-u)).add(new go.PathSegment(go.PathSegment.Line,p-u,v-u).close()))});go.Shape.setFigureParameter("ThinCross",0,new re("Thickness",10));go.Shape.defineFigureGenerator("ThinCross",function(l,o,s){var d=l?l.parameter1:NaN;(isNaN(d)||d<0)&&(d=10);var u=Math.min(d,o)/2,p=o/2,v=s/2;return new go.Geometry().add(new go.PathFigure(p-u,0,!0).add(new go.PathSegment(go.PathSegment.Line,p+u,0)).add(new go.PathSegment(go.PathSegment.Line,p+u,v-u)).add(new go.PathSegment(go.PathSegment.Line,o,v-u)).add(new go.PathSegment(go.PathSegment.Line,o,v+u)).add(new go.PathSegment(go.PathSegment.Line,p+u,v+u)).add(new go.PathSegment(go.PathSegment.Line,p+u,s)).add(new go.PathSegment(go.PathSegment.Line,p-u,s)).add(new go.PathSegment(go.PathSegment.Line,p-u,v+u)).add(new go.PathSegment(go.PathSegment.Line,0,v+u)).add(new go.PathSegment(go.PathSegment.Line,0,v-u)).add(new go.PathSegment(go.PathSegment.Line,p-u,v-u).close()))});go.Shape.setFigureParameter("ThickX",0,new re("Thickness",30));go.Shape.defineFigureGenerator("ThickX",function(l,o,s){var d=l?l.parameter1:NaN;if((isNaN(d)||d<0)&&(d=30),o===0||s===0){var u=new go.Geometry(go.Geometry.Rectangle);return u.startX=0,u.startY=0,u.endX=o,u.endY=s,u}else{var p=o/2,v=s/2,w=Math.atan2(s,o),M=d-Math.min(Math.cos(w)*d/2,p),T=d-Math.min(Math.sin(w)*d/2,v),u=new go.Geometry,O=new go.PathFigure(M,0,!0);return u.add(O),O.add(new go.PathSegment(go.PathSegment.Line,p,.2*s)),O.add(new go.PathSegment(go.PathSegment.Line,o-M,0)),O.add(new go.PathSegment(go.PathSegment.Line,o,T)),O.add(new go.PathSegment(go.PathSegment.Line,.8*o,v)),O.add(new go.PathSegment(go.PathSegment.Line,o,s-T)),O.add(new go.PathSegment(go.PathSegment.Line,o-M,s)),O.add(new go.PathSegment(go.PathSegment.Line,p,.8*s)),O.add(new go.PathSegment(go.PathSegment.Line,M,s)),O.add(new go.PathSegment(go.PathSegment.Line,0,s-T)),O.add(new go.PathSegment(go.PathSegment.Line,.2*o,v)),O.add(new go.PathSegment(go.PathSegment.Line,0,T).close()),u}});go.Shape.setFigureParameter("ThinX",0,new re("Thickness",10));go.Shape.defineFigureGenerator("ThinX",function(l,o,s){l&&l.parameter1;var d=new go.Geometry,u=new go.PathFigure(.1*o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.1*s).close()),d});go.Shape.setFigureParameter("SquareIBeam",0,new re("BeamWidth",.2,.1,.9));go.Shape.defineFigureGenerator("SquareIBeam",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.2);var u=new go.Geometry,p=new go.PathFigure(0,0,!0);return u.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,d*s)),p.add(new go.PathSegment(go.PathSegment.Line,(.5+d/2)*o,d*s)),p.add(new go.PathSegment(go.PathSegment.Line,(.5+d/2)*o,(1-d)*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,(1-d)*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,(1-d)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(.5-d/2)*o,(1-d)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(.5-d/2)*o,d*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,d*s).close()),u});go.Shape.setFigureParameter("RoundedIBeam",0,new re("Curviness",.5,.05,.65));go.Shape.defineFigureGenerator("RoundedIBeam",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.5);var u=new go.Geometry,p=new go.PathFigure(0,0,!0);return u.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Bezier,o,s,Math.abs(1-d)*o,.25*s,Math.abs(1-d)*o,.75*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Bezier,0,0,d*o,.75*s,d*o,.25*s).close()),u});go.Shape.defineFigureGenerator("HalfEllipse",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,ft*o,0,o,(.5-ft/2)*s)).add(new go.PathSegment(go.PathSegment.Bezier,0,s,o,(.5+ft/2)*s,ft*o,s).close())).setSpots(0,.156,.844,.844)});go.Shape.defineFigureGenerator("Crescent",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Bezier,0,s,o,0,o,s)).add(new go.PathSegment(go.PathSegment.Bezier,0,0,.5*o,.75*s,.5*o,.25*s).close())).setSpots(.311,.266,.744,.744)});go.Shape.defineFigureGenerator("Heart",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.5*o,s,!0).add(new go.PathSegment(go.PathSegment.Bezier,0,.3*s,.1*o,.8*s,0,.5*s)).add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.3*s,0,0,.45*o,0)).add(new go.PathSegment(go.PathSegment.Bezier,o,.3*s,.55*o,0,o,0)).add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,.5*s,.9*o,.8*s).close())).setSpots(.14,.29,.86,.78)});go.Shape.defineFigureGenerator("Spade",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.5*o,0,!0).add(new go.PathSegment(go.PathSegment.Line,.51*o,.01*s)).add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,.6*o,.2*s,o,.25*s)).add(new go.PathSegment(go.PathSegment.Bezier,.55*o,.7*s,o,.8*s,.6*o,.8*s)).add(new go.PathSegment(go.PathSegment.Bezier,.75*o,s,.5*o,.75*s,.55*o,.95*s)).add(new go.PathSegment(go.PathSegment.Line,.25*o,s)).add(new go.PathSegment(go.PathSegment.Bezier,.45*o,.7*s,.45*o,.95*s,.5*o,.75*s)).add(new go.PathSegment(go.PathSegment.Bezier,0,.5*s,.4*o,.8*s,0,.8*s)).add(new go.PathSegment(go.PathSegment.Bezier,.49*o,.01*s,0,.25*s,.4*o,.2*s).close())).setSpots(.14,.26,.86,.78)});go.Shape.defineFigureGenerator("Club",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.4*o,.6*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.15*o,s,.5*o,.75*s,.45*o,.95*s)),u.add(new go.PathSegment(go.PathSegment.Line,.85*o,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.6*o,.6*s,.55*o,.95*s,.5*o,.75*s));var p=.2,v=.3,w=0,M=p*ft;return u.add(new go.PathSegment(go.PathSegment.Bezier,(.5+v)*o,(.5+p+w)*s,(.5-p+v)*o,(.5+M+w)*s,(.5-M+v)*o,(.5+p+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+p+v)*o,(.5+w)*s,(.5+M+v)*o,(.5+p+w)*s,(.5+p+v)*o,(.5+M+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5+v)*o,(.5-p+w)*s,(1-.5+p+v)*o,(.5-M+w)*s,(.5+M+v)*o,(.5-p+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.65*o,.36771243*s,(.5-M+v)*o,(.5-p+w)*s,(.5-p+v+.05)*o,(.5-M+w-.02)*s)),p=.2,v=0,w=-.3,M=p*ft,u.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+p+v)*o,(.5+w)*s,(.5+M+v)*o,(.5+p+w)*s,(.5+p+v)*o,(.5+M+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5+v)*o,(.5-p+w)*s,(1-.5+p+v)*o,(.5-M+w)*s,(.5+M+v)*o,(.5-p+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5-p+v)*o,(.5+w)*s,(.5-M+v)*o,(.5-p+w)*s,(.5-p+v)*o,(.5-M+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5-M+v)*o,(.5+p+w)*s,(.5-p+v)*o,(.5+M+w)*s,(.5-M+v)*o,(.5+p+w)*s)),p=.2,v=-.3,w=0,M=p*ft,u.add(new go.PathSegment(go.PathSegment.Bezier,(.5+v)*o,(.5-p+w)*s,(1-.5+p+v-.05)*o,(.5-M+w-.02)*s,(.5+M+v)*o,(.5-p+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5-p+v)*o,(.5+w)*s,(.5-M+v)*o,(.5-p+w)*s,(.5-p+v)*o,(.5-M+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5+v)*o,(.5+p+w)*s,(.5-p+v)*o,(.5+M+w)*s,(.5-M+v)*o,(.5+p+w)*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.4*o,.6*s,(.5+M+v)*o,(.5+p+w)*s,(.5+p+v)*o,(.5+M+w)*s).close()),d.setSpots(.06,.33,.93,.68),d});go.Shape.defineFigureGenerator("YinYang",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*.5,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Arc,270,180,o*.5,o*.5,o*.5,o*.5)),u.add(new go.PathSegment(go.PathSegment.Arc,90,-180,o*.5,o*.75,o*.25,o*.25)),u.add(new go.PathSegment(go.PathSegment.Arc,90,180,o*.5,o*.25,o*.25,o*.25));var p=.1,v=.5,w=.25;return u.add(new go.PathSegment(go.PathSegment.Move,(v+p)*o,w*s)),u.add(new go.PathSegment(go.PathSegment.Arc,0,-360,o*v,s*w,p*o,p*o).close()),u=new go.PathFigure(o*.5,0,!1),d.add(u),u.add(new go.PathSegment(go.PathSegment.Arc,270,-180,o*.5,o*.5,o*.5,o*.5)),w=.75,u=new go.PathFigure((v+p)*o,w*s,!0),d.add(u),u.add(new go.PathSegment(go.PathSegment.Arc,0,360,o*v,s*w,p*o,p*o).close()),d.defaultStretch=go.GraphObject.Uniform,d});go.Shape.defineFigureGenerator("Peace",function(l,o,s){var d=.8535533905932737,u=.5*o,p=.5*s;return new go.Geometry().add(new go.PathFigure(u,0,!1).add(new go.PathSegment(go.PathSegment.Arc,270,360,u,p,u,p)).add(new go.PathSegment(go.PathSegment.Line,u,s)).add(new go.PathSegment(go.PathSegment.Move,u,p)).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,d*s)).add(new go.PathSegment(go.PathSegment.Move,u,p)).add(new go.PathSegment(go.PathSegment.Line,d*o,d*s)))});go.Shape.defineFigureGenerator("NotAllowed",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=.5,v=.5,w=.5,M=new go.PathFigure(v*o,(w-p)*s);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-p)*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),p=.4,u=ft*.4;var T=Ne(),O=Ne(),I=Ne(),V=Ne();Ps(v,w-p,v+u,w-p,v+p,w-u,v+p,w,.42,T,O,I,V,V);var K=Ne(),at=Ne(),U=Ne();Ps(v,w-p,v+u,w-p,v+p,w-u,v+p,w,.58,V,V,U,K,at);var Bt=Ne(),b=Ne(),_=Ne();Ps(v,w+p,v-u,w+p,v-p,w+u,v-p,w,.42,Bt,b,_,V,V);var Q=Ne(),B=Ne(),ot=Ne();return Ps(v,w+p,v-u,w+p,v-p,w+u,v-p,w,.58,V,V,ot,Q,B),M.add(new go.PathSegment(go.PathSegment.Move,ot.x*o,ot.y*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,Q.x*o,Q.y*s,B.x*o,B.y*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-p)*s,(v-p)*o,(w-u)*s,(v-u)*o,(w-p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,I.x*o,I.y*s,T.x*o,T.y*s,O.x*o,O.y*s)),M.add(new go.PathSegment(go.PathSegment.Line,ot.x*o,ot.y*s).close()),M.add(new go.PathSegment(go.PathSegment.Move,_.x*o,_.y*s)),M.add(new go.PathSegment(go.PathSegment.Line,U.x*o,U.y*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,K.x*o,K.y*s,at.x*o,at.y*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v+p)*o,(w+u)*s,(v+u)*o,(w+p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,_.x*o,_.y*s,Bt.x*o,Bt.y*s,b.x*o,b.y*s).close()),me(T),me(O),me(I),me(V),me(K),me(at),me(U),me(Bt),me(b),me(_),me(Q),me(B),me(ot),d.defaultStretch=go.GraphObject.Uniform,d});go.Shape.defineFigureGenerator("Fragile",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,.25*o,0)).add(new go.PathSegment(go.PathSegment.Line,.2*o,.15*s)).add(new go.PathSegment(go.PathSegment.Line,.3*o,.25*s)).add(new go.PathSegment(go.PathSegment.Line,.29*o,.33*s)).add(new go.PathSegment(go.PathSegment.Line,.35*o,.25*s)).add(new go.PathSegment(go.PathSegment.Line,.3*o,.15*s)).add(new go.PathSegment(go.PathSegment.Line,.4*o,0)).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Bezier,.55*o,.5*s,o,.25*s,.75*o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,.55*o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.7*o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.7*o,s)).add(new go.PathSegment(go.PathSegment.Line,.3*o,s)).add(new go.PathSegment(go.PathSegment.Line,.3*o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.45*o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.45*o,.5*s)).add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*o,.5*s,0,.25*s).close()))});go.Shape.setFigureParameter("HourGlass",0,new re("Thickness",30));go.Shape.defineFigureGenerator("HourGlass",function(l,o,s){var d=l?l.parameter1:NaN;(isNaN(d)||d<0)&&(d=30),d>o&&(d=o);var u=(o-d)/2,p=u+d;return new go.Geometry().add(new go.PathFigure(p,.5*s).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s)).add(new go.PathSegment(go.PathSegment.Line,u,.5*s)).add(new go.PathSegment(go.PathSegment.Line,0,0)).add(new go.PathSegment(go.PathSegment.Line,o,0).close()))});go.Shape.defineFigureGenerator("Lightning",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,.55*s).add(new go.PathSegment(go.PathSegment.Line,.6*o,0)).add(new go.PathSegment(go.PathSegment.Line,.3*o,.45*s)).add(new go.PathSegment(go.PathSegment.Line,o,.45*s)).add(new go.PathSegment(go.PathSegment.Line,.4*o,s)).add(new go.PathSegment(go.PathSegment.Line,.7*o,.55*s).close()))});go.Shape.defineFigureGenerator("GenderMale",function(l,o,s){var d=new go.Geometry,u=ft*.4,p=.4,v=.5,w=.5,M=Ne(),T=Ne(),O=Ne(),I=Ne(),V=new go.PathFigure((v-p)*o,w*s,!1);d.add(V),V.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-p)*s,(v-p)*o,(w-u)*s,(v-u)*o,(w-p)*s)),Ps(v,w-p,v+u,w-p,v+p,w-u,v+p,w,.44,O,I,T,M,M),V.add(new go.PathSegment(go.PathSegment.Bezier,T.x*o,T.y*s,O.x*o,O.y*s,I.x*o,I.y*s));var K=g1(T.x,T.y);Ps(v,w-p,v+u,w-p,v+p,w-u,v+p,w,.56,M,M,T,O,I);var at=g1(T.x,T.y);V.add(new go.PathSegment(go.PathSegment.Line,(K.x*.1+.95*.9)*o,K.y*.1*s)),V.add(new go.PathSegment(go.PathSegment.Line,.85*o,K.y*.1*s)),V.add(new go.PathSegment(go.PathSegment.Line,.85*o,0)),V.add(new go.PathSegment(go.PathSegment.Line,o,0)),V.add(new go.PathSegment(go.PathSegment.Line,o,.15*s)),V.add(new go.PathSegment(go.PathSegment.Line,(at.x*.1+.9)*o,.15*s)),V.add(new go.PathSegment(go.PathSegment.Line,(at.x*.1+.9)*o,(at.y*.1+.05*.9)*s)),V.add(new go.PathSegment(go.PathSegment.Line,at.x*o,at.y*s)),V.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,O.x*o,O.y*s,I.x*o,I.y*s)),V.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v+p)*o,(w+u)*s,(v+u)*o,(w+p)*s)),V.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,(v-u)*o,(w+p)*s,(v-p)*o,(w+u)*s)),p=.35,u=ft*.35;var U=new go.PathFigure(v*o,(w-p)*s,!1);d.add(U),U.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),U.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s)),U.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),U.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-p)*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s));var Bt=new go.PathFigure((v-p)*o,w*s,!1);return d.add(Bt),me(M),me(T),me(O),me(I),me(K),me(at),d.spot1=new go.Spot(.202,.257),d.spot2=new go.Spot(.792,.739),d.defaultStretch=go.GraphObject.Uniform,d});go.Shape.defineFigureGenerator("GenderFemale",function(l,o,s){var d=new go.Geometry,u=.375,p=0,v=-.125,w=u*ft,M=new go.PathFigure((.525+p)*o,(.5+u+v)*s,!1);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+u+p)*o,(.5+v)*s,(.5+w+p)*o,(.5+u+v)*s,(.5+u+p)*o,(.5+w+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(.5+p)*o,(.5-u+v)*s,(1-.5+u+p)*o,(.5-w+v)*s,(.5+w+p)*o,(.5-u+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(.5-u+p)*o,(.5+v)*s,(.5-w+p)*o,(.5-u+v)*s,(.5-u+p)*o,(.5-w+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(.475+p)*o,(.5+u+v)*s,(.5-u+p)*o,(.5+w+v)*s,(.5-w+p)*o,(.5+u+v)*s)),M.add(new go.PathSegment(go.PathSegment.Line,.475*o,.85*s)),M.add(new go.PathSegment(go.PathSegment.Line,.425*o,.85*s)),M.add(new go.PathSegment(go.PathSegment.Line,.425*o,.9*s)),M.add(new go.PathSegment(go.PathSegment.Line,.475*o,.9*s)),M.add(new go.PathSegment(go.PathSegment.Line,.475*o,s)),M.add(new go.PathSegment(go.PathSegment.Line,.525*o,s)),M.add(new go.PathSegment(go.PathSegment.Line,.525*o,.9*s)),M.add(new go.PathSegment(go.PathSegment.Line,.575*o,.9*s)),M.add(new go.PathSegment(go.PathSegment.Line,.575*o,.85*s)),M.add(new go.PathSegment(go.PathSegment.Line,.525*o,.85*s).close()),u=.325,p=0,v=-.125,w=u*ft;var M=new go.PathFigure((1-.5+u+p)*o,(.5+v)*s,!1);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,(.5+p)*o,(.5+u+v)*s,(.5+u+p)*o,(.5+w+v)*s,(.5+w+p)*o,(.5+u+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(.5-u+p)*o,(.5+v)*s,(.5-w+p)*o,(.5+u+v)*s,(.5-u+p)*o,(.5+w+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(.5+p)*o,(.5-u+v)*s,(.5-u+p)*o,(.5-w+v)*s,(.5-w+p)*o,(.5-u+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+u+p)*o,(.5+v)*s,(.5+w+p)*o,(.5-u+v)*s,(1-.5+u+p)*o,(.5-w+v)*s));var M=new go.PathFigure((.525+p)*o,(.5+u+v)*s,!1);return d.add(M),d.spot1=new go.Spot(.232,.136),d.spot2=new go.Spot(.682,.611),d.defaultStretch=go.GraphObject.Uniform,d});go.Shape.defineFigureGenerator("LogicImplies",function(l,o,s){var d=l?l.parameter1:NaN;return isNaN(d)&&(d=.2),new go.Geometry().add(new go.PathFigure((1-d)*o,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,s)).add(new go.PathSegment(go.PathSegment.Move,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,o,.5*s))).setSpots(0,0,.8,.5)});go.Shape.defineFigureGenerator("LogicIff",function(l,o,s){var d=l?l.parameter1:NaN;return isNaN(d)&&(d=.2),new go.Geometry().add(new go.PathFigure((1-d)*o,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,(1-d)*o,s)).add(new go.PathSegment(go.PathSegment.Move,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Move,d*o,0)).add(new go.PathSegment(go.PathSegment.Line,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,d*o,s))).setSpots(.2,0,.8,.5)});go.Shape.defineFigureGenerator("LogicNot",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)))});go.Shape.defineFigureGenerator("LogicAnd",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,s,!1).add(new go.PathSegment(go.PathSegment.Line,.5*o,0)).add(new go.PathSegment(go.PathSegment.Line,o,s))).setSpots(.25,.5,.75,1)});go.Shape.defineFigureGenerator("LogicOr",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*o,s)).add(new go.PathSegment(go.PathSegment.Line,o,0))).setSpots(.219,0,.78,.409)});go.Shape.defineFigureGenerator("LogicXor",function(l,o,s){var d=new go.Geometry().add(new go.PathFigure(.5*o,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*o,s)).add(new go.PathSegment(go.PathSegment.Move,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Arc,0,360,.5*o,.5*s,.5*o,.5*s)));return d.defaultStretch=go.GraphObject.Uniform,d});go.Shape.defineFigureGenerator("LogicTruth",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Move,.5*o,0)).add(new go.PathSegment(go.PathSegment.Line,.5*o,s)))});go.Shape.defineFigureGenerator("LogicFalsity",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,s,!1).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Move,.5*o,s)).add(new go.PathSegment(go.PathSegment.Line,.5*o,0)))});go.Shape.defineFigureGenerator("LogicThereExists",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,0,.5*s)).add(new go.PathSegment(go.PathSegment.Move,o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s)))});go.Shape.defineFigureGenerator("LogicForAll",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*o,s)).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Move,.25*o,.5*s)).add(new go.PathSegment(go.PathSegment.Line,.75*o,.5*s))).setSpots(.25,0,.75,.5)});go.Shape.defineFigureGenerator("LogicIsDefinedAs",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Move,0,.5*s)).add(new go.PathSegment(go.PathSegment.Line,o,.5*s)).add(new go.PathSegment(go.PathSegment.Move,0,s)).add(new go.PathSegment(go.PathSegment.Line,o,s))).setSpots(.01,.01,.99,.49)});go.Shape.defineFigureGenerator("LogicIntersect",function(l,o,s){var d=.5;return new go.Geometry().add(new go.PathFigure(0,s,!1).add(new go.PathSegment(go.PathSegment.Line,0,d*s)).add(new go.PathSegment(go.PathSegment.Arc,180,180,d*o,d*s,d*o,d*s)).add(new go.PathSegment(go.PathSegment.Line,o,s))).setSpots(0,.5,1,1)});go.Shape.defineFigureGenerator("LogicUnion",function(l,o,s){var d=.5;return new go.Geometry().add(new go.PathFigure(o,0,!1).add(new go.PathSegment(go.PathSegment.Line,o,d*s)).add(new go.PathSegment(go.PathSegment.Arc,0,180,d*o,d*s,d*o,d*s)).add(new go.PathSegment(go.PathSegment.Line,0,0))).setSpots(0,0,1,.5)});go.Shape.setFigureParameter("Arrow",0,new re("ArrowheadWidth",.3,.01,.99));go.Shape.setFigureParameter("Arrow",1,new re("TailHeight",.3,.01,.99));go.Shape.defineFigureGenerator("Arrow",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.3);var u=l?l.parameter2:NaN;isNaN(u)&&(u=.3);var p=(1-d)*o,v=(.5-u/2)*s,w=(.5+u/2)*s,M=new go.Geometry,T=new go.PathFigure(0,v,!0);M.add(T),T.add(new go.PathSegment(go.PathSegment.Line,p,v)),T.add(new go.PathSegment(go.PathSegment.Line,p,0)),T.add(new go.PathSegment(go.PathSegment.Line,p,0)),T.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),T.add(new go.PathSegment(go.PathSegment.Line,p,s)),T.add(new go.PathSegment(go.PathSegment.Line,p,w)),T.add(new go.PathSegment(go.PathSegment.Line,0,w).close()),M.spot1=new go.Spot(0,v/s);var O=Ro(0,w/s,1,w/s,p/o,1,1,.5,Ne());return M.spot2=new go.Spot(O.x,O.y),me(O),M});go.Shape.setFigureParameter("Arrow2",0,new re("ArrowheadWidth",30));go.Shape.setFigureParameter("Arrow2",0,new re("TailHeight",30));go.Shape.defineFigureGenerator("Arrow2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=30),d>o&&(d=o);var u=l?l.parameter2:NaN;isNaN(u)&&(u=30),u=Math.min(u,s/2);var p=o-d,v=(s-u)/2,w=v+u,M=new go.Geometry,T=new go.PathFigure(0,v,!0);M.add(T),T.add(new go.PathSegment(go.PathSegment.Line,p,v)),T.add(new go.PathSegment(go.PathSegment.Line,p,0)),T.add(new go.PathSegment(go.PathSegment.Line,p,0)),T.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),T.add(new go.PathSegment(go.PathSegment.Line,p,s)),T.add(new go.PathSegment(go.PathSegment.Line,p,w)),T.add(new go.PathSegment(go.PathSegment.Line,0,w).close()),M.spot1=new go.Spot(0,v/s);var O=Ro(0,w/s,1,w/s,p/o,1,1,.5,Ne());return M.spot2=new go.Spot(O.x,O.y),me(O),M});go.Shape.defineFigureGenerator("Chevron",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s).close()),d});go.Shape.defineFigureGenerator("DoubleArrow",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,.214*s)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,1*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,1*s)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,.786*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,1*s).close()),d});go.Shape.setFigureParameter("DoubleEndArrow",0,new re("ConnecterHeight",.3,.01,.99));go.Shape.defineFigureGenerator("DoubleEndArrow",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.3);var u=(.5-d/2)*s,p=(.5+d/2)*s,v=new go.Geometry,w=new go.PathFigure(o,.5*s,!0);v.add(w),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,p)),w.add(new go.PathSegment(go.PathSegment.Line,.3*o,p)),w.add(new go.PathSegment(go.PathSegment.Line,.3*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,0,.5*s)),w.add(new go.PathSegment(go.PathSegment.Line,.3*o,0)),w.add(new go.PathSegment(go.PathSegment.Line,.3*o,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,0).close());var M=Ro(0,.5,.3,0,0,u/s,.1,u/s,Ne());return v.spot1=new go.Spot(M.x,M.y),M=Ro(.7,1,1,.5,0,p/s,1,p/s,M),v.spot2=new go.Spot(M.x,M.y),me(M),v});go.Shape.setFigureParameter("DoubleEndArrow2",0,new re("ConnecterHeight",40));go.Shape.setFigureParameter("DoubleEndArrow2",1,new re("ArrowHeight",100));go.Shape.defineFigureGenerator("DoubleEndArrow2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=40);var u=l?l.parameter2:NaN;isNaN(u)&&(u=100);var p=(s-d)/2,v=p+d,w=(s-u)/2,M=w+u;(d>s||u>s)&&(u>d?(d=d*s/u,p=(s-d)/2,v=p+d,w=0,M=s):(p=0,v=s,w=0,M=s));var T=new go.Geometry,O=new go.PathFigure(o,.5*s,!0);T.add(O),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,M)),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,v)),O.add(new go.PathSegment(go.PathSegment.Line,.3*o,v)),O.add(new go.PathSegment(go.PathSegment.Line,.3*o,M)),O.add(new go.PathSegment(go.PathSegment.Line,0,.5*s)),O.add(new go.PathSegment(go.PathSegment.Line,.3*o,w)),O.add(new go.PathSegment(go.PathSegment.Line,.3*o,p)),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,p)),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,w).close());var I=Ro(0,.5,.3,w/s,0,p/s,1,p/s,Ne());return T.spot1=new go.Spot(I.x,I.y),I=Ro(.7,M/s,1,.5,0,v/s,1,v/s,I),T.spot2=new go.Spot(I.x,I.y),me(I),T});go.Shape.setFigureParameter("IBeamArrow",0,new re("ConnectorHeight",.7,.51,.97));go.Shape.defineFigureGenerator("IBeamArrow",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.3);var u=(.5-d/2)*s,p=(.5+d/2)*s,v=new go.Geometry,w=new go.PathFigure(o,.5*s,!0);v.add(w),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,p)),w.add(new go.PathSegment(go.PathSegment.Line,.2*o,p)),w.add(new go.PathSegment(go.PathSegment.Line,.2*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,0,s)),w.add(new go.PathSegment(go.PathSegment.Line,0,0)),w.add(new go.PathSegment(go.PathSegment.Line,.2*o,0)),w.add(new go.PathSegment(go.PathSegment.Line,.2*o,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,0).close()),v.spot1=new go.Spot(0,u/s);var M=Ro(.7,1,1,.5,0,p/s,1,p/s,Ne());return v.spot2=new go.Spot(M.x,M.y),me(M),v});go.Shape.setFigureParameter("IBeamArrow2",0,new re("ConnectorHeight",40));go.Shape.setFigureParameter("IBeamArrow2",1,new re("BeamArrowHeight",100));go.Shape.defineFigureGenerator("IBeamArrow2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=40);var u=l?l.parameter2:NaN;isNaN(u)&&(u=100);var p=(s-d)/2,v=p+d,w=(s-u)/2,M=w+u;(d>s||u>s)&&(u>d?(d=d*s/u,p=(s-d)/2,v=p+d,w=0,M=s):(p=0,v=s,w=0,M=s));var T=new go.Geometry,O=new go.PathFigure(o,.5*s,!0);T.add(O),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,M)),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,v)),O.add(new go.PathSegment(go.PathSegment.Line,.2*o,v)),O.add(new go.PathSegment(go.PathSegment.Line,.2*o,M)),O.add(new go.PathSegment(go.PathSegment.Line,0,M)),O.add(new go.PathSegment(go.PathSegment.Line,0,w)),O.add(new go.PathSegment(go.PathSegment.Line,.2*o,w)),O.add(new go.PathSegment(go.PathSegment.Line,.2*o,p)),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,p)),O.add(new go.PathSegment(go.PathSegment.Line,.7*o,w).close()),T.spot1=new go.Spot(0,p/s);var I=Ro(.7,M/s,1,.5,0,v/s,1,v/s,Ne());return T.spot2=new go.Spot(I.x,I.y),me(I),T});go.Shape.setFigureParameter("Pointer",0,new re("BackPoint",.1,0,.2));go.Shape.defineFigureGenerator("Pointer",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.1);var u=new go.Geometry,p=new go.PathFigure(o,.5*s,!0);u.add(p),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,d*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,0).close()),u.spot1=new go.Spot(d,.35);var v=Ro(.2,.65,1,.65,0,1,1,.5,Ne());return u.spot2=new go.Spot(v.x,v.y),me(v),u});go.Shape.setFigureParameter("RoundedPointer",0,new re("RoundedEdge",.3,0,.5));go.Shape.defineFigureGenerator("RoundedPointer",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.3);var u=new go.Geometry,p=new go.PathFigure(o,.5*s,!0);u.add(p),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Bezier,0,0,d*o,.75*s,d*o,.25*s).close()),u.spot1=new go.Spot(d,.35);var v=Ro(0,.65,1,.65,0,1,1,.5,Ne());return u.spot2=new go.Spot(v.x,v.y),me(v),u});go.Shape.setFigureParameter("SplitEndArrow",0,new re("TailHeight",.4,.01,.99));go.Shape.defineFigureGenerator("SplitEndArrow",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.4);var u=(.5-d/2)*s,p=(.5+d/2)*s,v=new go.Geometry,w=new go.PathFigure(o,.5*s,!0);v.add(w),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,p)),w.add(new go.PathSegment(go.PathSegment.Line,0,p)),w.add(new go.PathSegment(go.PathSegment.Line,.2*o,.5*s)),w.add(new go.PathSegment(go.PathSegment.Line,0,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,0).close()),v.spot1=new go.Spot(.2,.3);var M=Ro(.7,1,1,.5,0,p/s,1,p/s,Ne());return v.spot2=new go.Spot(M.x,M.y),me(M),v});go.Shape.setFigureParameter("SplitEndArrow2",0,new re("TailThickness",50));go.Shape.defineFigureGenerator("SplitEndArrow2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=50);var u=(s-d)/2,p=u+d;d>s&&(u=0,p=s);var v=new go.Geometry,w=new go.PathFigure(o,.5*s,!0);v.add(w),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,p)),w.add(new go.PathSegment(go.PathSegment.Line,0,p)),w.add(new go.PathSegment(go.PathSegment.Line,.2*o,.5*s)),w.add(new go.PathSegment(go.PathSegment.Line,0,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,u)),w.add(new go.PathSegment(go.PathSegment.Line,.7*o,0).close()),v.spot1=new go.Spot(.2,u/s);var M=Ro(.7,1,1,.5,0,p/s,1,p/s,Ne());return v.spot2=new go.Spot(M.x,M.y),me(M),v});go.Shape.setFigureParameter("SquareArrow",0,new re("ArrowPoint",.7,.2,.9));go.Shape.defineFigureGenerator("SquareArrow",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.7);var u=new go.Geometry,p=new go.PathFigure(o,.5*s,!0);return u.add(p),p.add(new go.PathSegment(go.PathSegment.Line,d*o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,0)),p.add(new go.PathSegment(go.PathSegment.Line,d*o,0).close()),u.spot1=go.Spot.TopLeft,u.spot2=new go.Spot(d,1),u});go.Shape.defineFigureGenerator("Cone1",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=ft*.1,v=new go.PathFigure(0,.9*s,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),v.add(new go.PathSegment(go.PathSegment.Line,o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,(.9+p)*s,(.5+u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*s,(.5-u)*o,s,0,(.9+p)*s).close()),d.spot1=new go.Spot(.25,.5),d.spot2=new go.Spot(.75,.97),d});go.Shape.defineFigureGenerator("Cone2",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.9*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,o,.9*s,(1-.85/.9)*o,s,.85/.9*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,0,.9*s).close());var p=new go.PathFigure(0,.9*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Bezier,o,.9*s,(1-.85/.9)*o,.8*s,.85/.9*o,.8*s)),d.spot1=new go.Spot(.25,.5),d.spot2=new go.Spot(.75,.82),d});go.Shape.defineFigureGenerator("Cube1",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.15*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,0,.15*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.85*s).close());var p=new go.PathFigure(.5*o,s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,.15*s)),p.add(new go.PathSegment(go.PathSegment.Move,.5*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,.15*s)),d.spot1=new go.Spot(0,.3),d.spot2=new go.Spot(.5,.85),d});go.Shape.defineFigureGenerator("Cube2",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.3*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,.7*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,0).close());var p=new go.PathFigure(0,.3*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.7*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Move,.7*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Line,.7*o,s)),d.spot1=new go.Spot(0,.3),d.spot2=new go.Spot(.7,1),d});go.Shape.defineFigureGenerator("Cylinder1",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=5),d=Math.min(d,s/3);var u=new go.Geometry,p=ft*.5,v=new go.PathFigure(0,d,!0);u.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,0,ft*d,(.5-p)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,1*o,d,(.5+p)*o,0,1*o,ft*d)),v.add(new go.PathSegment(go.PathSegment.Line,o,s-d)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,1*s,1*o,s-ft*d,(.5+p)*o,1*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,s-d,(.5-p)*o,1*s,0,s-ft*d)),v.add(new go.PathSegment(go.PathSegment.Line,0,d));var w=new go.PathFigure(o,d,!1);return u.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,2*d,1*o,2*d-ft*d,(.5+p)*o,2*d)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,d,(.5-p)*o,2*d,0,2*d-ft*d)),u.spot1=new go.Spot(0,0,0,2*d),u.spot2=new go.Spot(1,1),u});go.Shape.defineFigureGenerator("Cylinder2",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=5),d=Math.min(d,s/3);var u=new go.Geometry,p=ft*.5,v=new go.PathFigure(0,s-d,!0);u.add(v),v.add(new go.PathSegment(go.PathSegment.Line,0,d)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,0,ft*d,(.5-p)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,d,(.5+p)*o,0,o,ft*d)),v.add(new go.PathSegment(go.PathSegment.Line,o,s-d)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,s-ft*d,(.5+p)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,s-d,(.5-p)*o,s,0,s-ft*d));var w=new go.PathFigure(0,s-d,!1);return u.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s-2*d,0,s-d-ft*d,(.5-p)*o,s-2*d)),w.add(new go.PathSegment(go.PathSegment.Bezier,o,s-d,(.5+p)*o,s-2*d,o,s-d-ft*d)),u.spot1=new go.Spot(0,0),u.spot2=new go.Spot(1,1,0,-2*d),u});go.Shape.defineFigureGenerator("Cylinder3",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=5),d=Math.min(d,o/3);var u=new go.Geometry,p=ft*.5,v=new go.PathFigure(d,0,!0);u.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o-d,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,o-ft*d,0,o,(.5-p)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,o-d,s,o,(.5+p)*s,o-ft*d,s)),v.add(new go.PathSegment(go.PathSegment.Line,d,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*s,ft*d,s,0,(.5+p)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,d,0,0,(.5-p)*s,ft*d,0));var w=new go.PathFigure(d,0,!1);return u.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,2*d,.5*s,d+ft*d,0,2*d,(.5-p)*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,d,s,2*d,(.5+p)*s,d+ft*d,s)),u.spot1=new go.Spot(0,0,2*d,0),u.spot2=new go.Spot(1,1),u});go.Shape.defineFigureGenerator("Cylinder4",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=5),d=Math.min(d,o/3);var u=new go.Geometry,p=ft*.5,v=new go.PathFigure(o-d,0,!0);u.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,o-ft*d,0,o,(.5-p)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,o-d,s,o,(.5+p)*s,o-ft*d,s)),v.add(new go.PathSegment(go.PathSegment.Line,d,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*s,ft*d,s,0,(.5+p)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,d,0,0,(.5-p)*s,ft*d,0)),v.add(new go.PathSegment(go.PathSegment.Line,o-d,0));var w=new go.PathFigure(o-d,0,!1);return u.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,o-2*d,.5*s,o-d-ft*d,0,o-2*d,(.5-p)*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,o-d,s,o-2*d,(.5+p)*s,o-d-ft*d,s)),u.spot1=new go.Spot(0,0),u.spot2=new go.Spot(1,1,-2*d,0),u});go.Shape.defineFigureGenerator("Prism1",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.25*o,.25*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var p=new go.PathFigure(.25*o,.25*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),d.spot1=new go.Spot(.408,.172),d.spot2=new go.Spot(.833,.662),d});go.Shape.defineFigureGenerator("Prism2",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.25*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var p=new go.PathFigure(0,s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.25*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,.25*s)),p.add(new go.PathSegment(go.PathSegment.Move,0,.25*s)),p.add(new go.PathSegment(go.PathSegment.Line,.25*o,.5*s)),d.spot1=new go.Spot(.25,.5),d.spot2=new go.Spot(.75,.75),d});go.Shape.defineFigureGenerator("Pyramid1",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.75*s).close());var p=new go.PathFigure(.5*o,0,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),d.spot1=new go.Spot(.25,.367),d.spot2=new go.Spot(.75,.875),d});go.Shape.defineFigureGenerator("Pyramid2",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.85*s).close());var p=new go.PathFigure(.5*o,0,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,.7*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,.85*s)),p.add(new go.PathSegment(go.PathSegment.Move,.5*o,.7*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,.85*s)),d.spot1=new go.Spot(.25,.367),d.spot2=new go.Spot(.75,.875),d});go.Shape.defineFigureGenerator("Actor",function(l,o,s){var d=new go.Geometry,u=.2,p=.1,v=ft*u,w=ft*p,M=.5,T=.1,O=new go.PathFigure(M*o,(T+p)*s,!0);d.add(O),O.add(new go.PathSegment(go.PathSegment.Bezier,(M-u)*o,T*s,(M-v)*o,(T+p)*s,(M-u)*o,(T+w)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-p)*s,(M-u)*o,(T-w)*s,(M-v)*o,(T-p)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,(M+u)*o,T*s,(M+v)*o,(T-p)*s,(M+u)*o,(T-w)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T+p)*s,(M+u)*o,(T+w)*s,(M+v)*o,(T+p)*s));var I=.05,V=ft*I;M=.05,T=.25;var K=new go.PathFigure(.5*o,.2*s,!0);return d.add(K),K.add(new go.PathSegment(go.PathSegment.Line,.95*o,.2*s)),M=.95,T=.25,K.add(new go.PathSegment(go.PathSegment.Bezier,(M+I)*o,T*s,(M+V)*o,(T-I)*s,(M+I)*o,(T-V)*s)),K.add(new go.PathSegment(go.PathSegment.Line,o,.6*s)),K.add(new go.PathSegment(go.PathSegment.Line,.85*o,.6*s)),K.add(new go.PathSegment(go.PathSegment.Line,.85*o,.35*s)),I=.025,V=ft*I,M=.825,T=.35,K.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-I)*s,(M+I)*o,(T-V)*s,(M+V)*o,(T-I)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(M-I)*o,T*s,(M-V)*o,(T-I)*s,(M-I)*o,(T-V)*s)),K.add(new go.PathSegment(go.PathSegment.Line,.8*o,s)),K.add(new go.PathSegment(go.PathSegment.Line,.55*o,s)),K.add(new go.PathSegment(go.PathSegment.Line,.55*o,.7*s)),I=.05,V=ft*I,M=.5,T=.7,K.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-I)*s,(M+I)*o,(T-V)*s,(M+V)*o,(T-I)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(M-I)*o,T*s,(M-V)*o,(T-I)*s,(M-I)*o,(T-V)*s)),K.add(new go.PathSegment(go.PathSegment.Line,.45*o,s)),K.add(new go.PathSegment(go.PathSegment.Line,.2*o,s)),K.add(new go.PathSegment(go.PathSegment.Line,.2*o,.35*s)),I=.025,V=ft*I,M=.175,T=.35,K.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-I)*s,(M+I)*o,(T-V)*s,(M+V)*o,(T-I)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(M-I)*o,T*s,(M-V)*o,(T-I)*s,(M-I)*o,(T-V)*s)),K.add(new go.PathSegment(go.PathSegment.Line,.15*o,.6*s)),K.add(new go.PathSegment(go.PathSegment.Line,0,.6*s)),K.add(new go.PathSegment(go.PathSegment.Line,0,.25*s)),I=.05,V=ft*I,M=.05,T=.25,K.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-I)*s,(M-I)*o,(T-V)*s,(M-V)*o,(T-I)*s)),K.add(new go.PathSegment(go.PathSegment.Line,.5*o,.2*s)),d.spot1=new go.Spot(.2,.2),d.spot2=new go.Spot(.8,.65),d});go.Shape.setFigureParameter("Card",0,new re("CornerCutoutSize",.2,.1,.9));go.Shape.defineFigureGenerator("Card",function(l,o,s){var d=l?l.parameter1:NaN;isNaN(d)&&(d=.2);var u=new go.Geometry,p=new go.PathFigure(o,0,!0);return u.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,d*s)),p.add(new go.PathSegment(go.PathSegment.Line,d*o,0).close()),u.spot1=new go.Spot(0,d),u.spot2=go.Spot.BottomRight,u});go.Shape.defineFigureGenerator("Collate",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,.5*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s));var p=new go.PathFigure(.5*o,.5*s,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),d.spot1=new go.Spot(.25,0),d.spot2=new go.Spot(.75,.25),d});go.Shape.defineFigureGenerator("CreateRequest",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.1);var p=new go.PathFigure(0,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var v=new go.PathFigure(0,u*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,u*s)),v.add(new go.PathSegment(go.PathSegment.Move,0,(1-u)*s)),v.add(new go.PathSegment(go.PathSegment.Line,o,(1-u)*s)),d});go.Shape.defineFigureGenerator("Database",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=ft*.1,v=new go.PathFigure(o,.1*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,(.9+p)*s,(.5+u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*s,(.5-u)*o,s,0,(.9+p)*s)),v.add(new go.PathSegment(go.PathSegment.Line,0,.1*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,0,(.1-p)*s,(.5-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,.1*s,(.5+u)*o,0,o,(.1-p)*s));var w=new go.PathFigure(o,.1*s,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.2*s,o,(.1+p)*s,(.5+u)*o,.2*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,.1*s,(.5-u)*o,.2*s,0,(.1+p)*s)),w.add(new go.PathSegment(go.PathSegment.Move,o,.2*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.3*s,o,(.2+p)*s,(.5+u)*o,.3*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,.2*s,(.5-u)*o,.3*s,0,(.2+p)*s)),w.add(new go.PathSegment(go.PathSegment.Move,o,.3*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.4*s,o,(.3+p)*s,(.5+u)*o,.4*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,.3*s,(.5-u)*o,.4*s,0,(.3+p)*s)),d.spot1=new go.Spot(0,.4),d.spot2=new go.Spot(1,.9),d});go.Shape.defineFigureGenerator("DataStorage",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,.75*o,s,o,0,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*o,.9*s,.25*o,.1*s).close()),d.spot1=new go.Spot(.226,0),d.spot2=new go.Spot(.81,1),d});go.Shape.defineFigureGenerator("DiskStorage",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=ft*.1,v=new go.PathFigure(o,.1*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,(.9+p)*s,(.5+u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*s,(.5-u)*o,s,0,(.9+p)*s)),v.add(new go.PathSegment(go.PathSegment.Line,0,.1*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,0,(.1-p)*s,(.5-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,.1*s,(.5+u)*o,0,o,(.1-p)*s));var w=new go.PathFigure(o,.1*s,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.2*s,o,(.1+p)*s,(.5+u)*o,.2*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,.1*s,(.5-u)*o,.2*s,0,(.1+p)*s)),w.add(new go.PathSegment(go.PathSegment.Move,o,.2*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.3*s,o,(.2+p)*s,(.5+u)*o,.3*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,.2*s,(.5-u)*o,.3*s,0,(.2+p)*s)),d.spot1=new go.Spot(0,.3),d.spot2=new go.Spot(1,.9),d});go.Shape.defineFigureGenerator("Display",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.25*o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,.75*o,s,o,0,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.25*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.5*s).close()),d.spot1=new go.Spot(.25,0),d.spot2=new go.Spot(.75,1),d});go.Shape.defineFigureGenerator("DividedEvent",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)?u=.2:u<.15&&(u=.15);var p=ft*.2,v=new go.PathFigure(0,.2*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,.2*o,0,0,(.2-p)*s,(.2-p)*o,0)),v.add(new go.PathSegment(go.PathSegment.Line,.8*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,.2*s,(.8+p)*o,0,o,(.2-p)*s)),v.add(new go.PathSegment(go.PathSegment.Line,o,.8*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,s,o,(.8+p)*s,(.8+p)*o,s)),v.add(new go.PathSegment(go.PathSegment.Line,.2*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,.8*s,(.2-p)*o,s,0,(.8+p)*s)),v.add(new go.PathSegment(go.PathSegment.Line,0,.2*s));var w=new go.PathFigure(0,u*s,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o,u*s)),d});go.Shape.defineFigureGenerator("DividedProcess",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;(isNaN(u)||u<.1)&&(u=.1);var p=new go.PathFigure(0,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var v=new go.PathFigure(0,u*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,u*s)),d});go.Shape.defineFigureGenerator("Document",function(l,o,s){var d=new go.Geometry;s=s/.8;var u=new go.PathFigure(0,.7*s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*s,.5*o,.4*s,.5*o,s).close()),d.spot1=go.Spot.TopLeft,d.spot2=new go.Spot(1,.6),d});go.Shape.defineFigureGenerator("ExternalOrganization",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;(isNaN(u)||u<.2)&&(u=.2);var p=new go.PathFigure(0,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var v=new go.PathFigure(u*o,0,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,0,u*s)),v.add(new go.PathSegment(go.PathSegment.Move,o,u*s)),v.add(new go.PathSegment(go.PathSegment.Line,(1-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Move,0,(1-u)*s)),v.add(new go.PathSegment(go.PathSegment.Line,u*o,s)),v.add(new go.PathSegment(go.PathSegment.Move,(1-u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Line,o,(1-u)*s)),d});go.Shape.defineFigureGenerator("ExternalProcess",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.5*s).close());var p=new go.PathFigure(.1*o,.4*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.1*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Move,.9*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Line,.9*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Move,.6*o,.1*s)),p.add(new go.PathSegment(go.PathSegment.Line,.4*o,.1*s)),p.add(new go.PathSegment(go.PathSegment.Move,.4*o,.9*s)),p.add(new go.PathSegment(go.PathSegment.Line,.6*o,.9*s)),d.spot1=new go.Spot(.25,.25),d.spot2=new go.Spot(.75,.75),d});go.Shape.defineFigureGenerator("File",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var p=new go.PathFigure(.75*o,0,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.75*o,.25*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,.25*s)),d.spot1=new go.Spot(0,.25),d.spot2=go.Spot.BottomRight,d});go.Shape.defineFigureGenerator("Interrupt",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o,.5*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s));var p=new go.PathFigure(o,.5*s,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,s));var v=new go.PathFigure(o,.5*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,0)),d.spot1=new go.Spot(0,.25),d.spot2=new go.Spot(.5,.75),d});go.Shape.defineFigureGenerator("InternalStorage",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN,p=l?l.parameter2:NaN;isNaN(u)&&(u=.1),isNaN(p)&&(p=.1);var v=new go.PathFigure(0,0,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,0)),v.add(new go.PathSegment(go.PathSegment.Line,o,s)),v.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var w=new go.PathFigure(u*o,0,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,u*o,s)),w.add(new go.PathSegment(go.PathSegment.Move,0,p*s)),w.add(new go.PathSegment(go.PathSegment.Line,o,p*s)),d});go.Shape.defineFigureGenerator("Junction",function(l,o,s){var d=new go.Geometry,u=1/Math.SQRT2,p=(1-1/Math.SQRT2)/2,v=ft*.5,w=.5,M=new go.PathFigure(o,w*s,!0);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,w*o,s,o,(w+v)*s,(w+v)*o,s)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,w*s,(w-v)*o,s,0,(w+v)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,w*o,0,0,(w-v)*s,(w-v)*o,0)),M.add(new go.PathSegment(go.PathSegment.Bezier,o,w*s,(w+v)*o,0,o,(w-v)*s));var T=new go.PathFigure((p+u)*o,(p+u)*s,!1);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Line,p*o,p*s)),T.add(new go.PathSegment(go.PathSegment.Move,p*o,(p+u)*s)),T.add(new go.PathSegment(go.PathSegment.Line,(p+u)*o,p*s)),d});go.Shape.defineFigureGenerator("LinedDocument",function(l,o,s){var d=new go.Geometry;s=s/.8;var u=new go.PathFigure(0,.7*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*s,.5*o,.4*s,.5*o,s).close());var p=new go.PathFigure(.1*o,0,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.1*o,.75*s)),d.spot1=new go.Spot(.1,0),d.spot2=new go.Spot(1,.6),d});go.Shape.defineFigureGenerator("LoopLimit",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,.25*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s).close()),d.spot1=new go.Spot(0,.25),d.spot2=go.Spot.BottomRight,d});go.Shape.defineFigureGenerator("MagneticTape",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=.5,v=new go.PathFigure(.5*o,s,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,0,p*s,(p-u)*o,s,0,(p+u)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,p*o,0,0,(p-u)*s,(p-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,p*s,(p+u)*o,0,o,(p-u)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,(p+.1)*o,.9*s,o,(p+u)*s,(p+u)*o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Line,o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Line,o,s)),v.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),d.spot1=new go.Spot(.15,.15),d.spot2=new go.Spot(.85,.8),d});go.Shape.defineFigureGenerator("ManualInput",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.25*s).close()),d.spot1=new go.Spot(0,.25),d.spot2=go.Spot.BottomRight,d});go.Shape.defineFigureGenerator("MessageFromUser",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.7);var p=new go.PathFigure(0,0,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,u*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d.spot1=go.Spot.TopLeft,d});go.Shape.defineFigureGenerator("MicroformProcessing",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.25);var p=new go.PathFigure(0,0,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,u*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,(1-u)*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d});go.Shape.defineFigureGenerator("MicroformRecording",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.15*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d.spot1=new go.Spot(0,.25),d.spot2=new go.Spot(1,.75),d});go.Shape.defineFigureGenerator("MultiDocument",function(l,o,s){var d=new go.Geometry;s=s/.8;var u=new go.PathFigure(o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.9*o,.44*s,.96*o,.47*s,.93*o,.45*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.54*s,.86*o,.57*s,.83*o,.55*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*s,.4*o,.4*s,.4*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,0).close());var p=new go.PathFigure(.1*o,.2*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.2*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.54*s)),p.add(new go.PathSegment(go.PathSegment.Move,.2*o,.1*s)),p.add(new go.PathSegment(go.PathSegment.Line,.9*o,.1*s)),p.add(new go.PathSegment(go.PathSegment.Line,.9*o,.44*s)),d.spot1=new go.Spot(0,.25),d.spot2=new go.Spot(.8,.77),d});go.Shape.defineFigureGenerator("MultiProcess",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.1*o,.1*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.2*s).close());var p=new go.PathFigure(.2*o,.1*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.9*o,.1*s)),p.add(new go.PathSegment(go.PathSegment.Line,.9*o,.8*s)),p.add(new go.PathSegment(go.PathSegment.Move,.1*o,.2*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.2*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.9*s)),d.spot1=new go.Spot(0,.2),d.spot2=new go.Spot(.8,1),d});go.Shape.defineFigureGenerator("OfflineStorage",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.1);var p=new go.PathFigure(0,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,s).close());var v=new go.PathFigure(.5*u*o,u*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,(1-.5*u)*o,u*s)),d});go.Shape.defineFigureGenerator("OffPageConnector",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d.spot1=go.Spot.TopLeft,d.spot2=new go.Spot(.75,1),d});go.Shape.defineFigureGenerator("Or",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=.5,v=new go.PathFigure(o,p*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,p*o,s,o,(p+u)*s,(p+u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,p*s,(p-u)*o,s,0,(p+u)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,p*o,0,0,(p-u)*s,(p-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,p*s,(p+u)*o,0,o,(p-u)*s));var w=new go.PathFigure(o,.5*s,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,0,.5*s)),w.add(new go.PathSegment(go.PathSegment.Move,.5*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),d});go.Shape.defineFigureGenerator("PaperTape",function(l,o,s){var d=new go.Geometry;s=s/.8;var u=new go.PathFigure(0,.7*s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.3*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,o,.3*s,.5*o,.6*s,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*s,.5*o,.4*s,.5*o,s).close()),d.spot1=new go.Spot(0,.49),d.spot2=new go.Spot(1,.75),d});go.Shape.defineFigureGenerator("PrimitiveFromCall",function(l,o,s){var d=new go.Geometry;l&&l.parameter1;var u=l?l.parameter2:NaN;isNaN(u)&&(u=.3);var p=new go.PathFigure(0,0,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,(1-u)*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d});go.Shape.defineFigureGenerator("PrimitiveToCall",function(l,o,s){var d=new go.Geometry;l&&l.parameter1;var u=l?l.parameter2:NaN;isNaN(u)&&(u=.3);var p=new go.PathFigure(0,0,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,(1-u)*o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,(1-u)*o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d});go.Shape.defineFigureGenerator("Procedure",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.1);var p=new go.PathFigure(0,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var v=new go.PathFigure((1-u)*o,0,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,(1-u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Move,u*o,0)),v.add(new go.PathSegment(go.PathSegment.Line,u*o,s)),d});go.Shape.defineFigureGenerator("Process",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.1);var p=new go.PathFigure(0,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var v=new go.PathFigure(u*o,0,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,u*o,s)),d.spot2=go.Spot.BottomRight,d});go.Shape.defineFigureGenerator("Sort",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.5*s).close());var p=new go.PathFigure(0,.5*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),d.spot1=new go.Spot(.25,.25),d.spot2=new go.Spot(.75,.5),d});go.Shape.defineFigureGenerator("Start",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.25);var p=new go.PathFigure(u*o,0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Arc,270,180,.75*o,.5*s,.25*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Arc,90,180,.25*o,.5*s,.25*o,.5*s));var v=new go.PathFigure(u*o,0,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,u*o,s)),v.add(new go.PathSegment(go.PathSegment.Move,(1-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Line,(1-u)*o,s)),d.spot1=new go.Spot(u,0),d.spot2=new go.Spot(1-u,1),d});go.Shape.defineFigureGenerator("Terminator",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.25*o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Arc,270,180,.75*o,.5*s,.25*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Arc,90,180,.25*o,.5*s,.25*o,.5*s)),d.spot1=new go.Spot(.23,0),d.spot2=new go.Spot(.77,1),d});go.Shape.defineFigureGenerator("TransmittalTape",function(l,o,s){var d=new go.Geometry,u=l?l.parameter1:NaN;isNaN(u)&&(u=.1);var p=new go.PathFigure(0,0,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,.75*o,(1-u)*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,(1-u)*s).close()),d.spot1=go.Spot.TopLeft,d});go.Shape.defineFigureGenerator("AndGate",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=new go.PathFigure(0,0,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),p.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,(.5+u)*o,0,o,(.5-u)*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,(.5+u)*s,(.5+u)*o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d.spot1=go.Spot.TopLeft,d.spot2=new go.Spot(.55,1),d});go.Shape.defineFigureGenerator("Buffer",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d.spot1=new go.Spot(0,.25),d.spot2=new go.Spot(.5,.75),d});go.Shape.defineFigureGenerator("Clock",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=.5,v=new go.PathFigure(o,p*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,p*o,s,o,(p+u)*s,(p+u)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,p*s,(p-u)*o,s,0,(p+u)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,p*o,0,0,(p-u)*s,(p-u)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,p*s,(p+u)*o,0,o,(p-u)*s));var w=new go.PathFigure(o,p*s,!1);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o,p*s));var M=new go.PathFigure(.8*o,.75*s,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,.8*o,.25*s)),M.add(new go.PathSegment(go.PathSegment.Line,.6*o,.25*s)),M.add(new go.PathSegment(go.PathSegment.Line,.6*o,.75*s)),M.add(new go.PathSegment(go.PathSegment.Line,.4*o,.75*s)),M.add(new go.PathSegment(go.PathSegment.Line,.4*o,.25*s)),M.add(new go.PathSegment(go.PathSegment.Line,.2*o,.25*s)),M.add(new go.PathSegment(go.PathSegment.Line,.2*o,.75*s)),d});go.Shape.defineFigureGenerator("Ground",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Move,.2*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Move,.3*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.7*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Move,.4*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,s)),d});go.Shape.defineFigureGenerator("Inverter",function(l,o,s){var d=new go.Geometry,u=ft*.1,p=.1,v=.9,w=.5,M=new go.PathFigure(.8*o,.5*s,!0);d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,0,s)),M.add(new go.PathSegment(go.PathSegment.Line,0,0)),M.add(new go.PathSegment(go.PathSegment.Line,.8*o,.5*s));var T=new go.PathFigure((v+p)*o,w*s,!0);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v+p)*o,(w+u)*s,(v+u)*o,(w+p)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,(v-u)*o,(w+p)*s,(v-p)*o,(w+u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-p)*s,(v-p)*o,(w-u)*s,(v-u)*o,(w-p)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,(v+u)*o,(w-p)*s,(v+p)*o,(w-u)*s)),d.spot1=new go.Spot(0,.25),d.spot2=new go.Spot(.4,.75),d});go.Shape.defineFigureGenerator("NandGate",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=ft*.4,v=ft*.1,w=.1,M=.9,T=.5,O=new go.PathFigure(.8*o,.5*s,!0);d.add(O),O.add(new go.PathSegment(go.PathSegment.Bezier,.4*o,s,.8*o,(.5+p)*s,(.4+u)*o,s)),O.add(new go.PathSegment(go.PathSegment.Line,0,s)),O.add(new go.PathSegment(go.PathSegment.Line,0,0)),O.add(new go.PathSegment(go.PathSegment.Line,.4*o,0)),O.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.5*s,(.4+u)*o,0,.8*o,(.5-p)*s));var I=new go.PathFigure((M+w)*o,T*s,!0);return d.add(I),I.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T+w)*s,(M+w)*o,(T+v)*s,(M+v)*o,(T+w)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,(M-w)*o,T*s,(M-v)*o,(T+w)*s,(M-w)*o,(T+v)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-w)*s,(M-w)*o,(T-v)*s,(M-v)*o,(T-w)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,(M+w)*o,T*s,(M+v)*o,(T-w)*s,(M+w)*o,(T-v)*s)),d.spot1=new go.Spot(0,.05),d.spot2=new go.Spot(.55,.95),d});go.Shape.defineFigureGenerator("NorGate",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*u,v=0,w=.5,M=new go.PathFigure(.8*o,.5*s,!0);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,0,s,.7*o,(w+p)*s,(v+p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*o,.75*s,.25*o,.25*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.5*s,(v+p)*o,(w-u)*s,.7*o,(w-p)*s)),u=.1,p=ft*.1,v=.9,w=.5;var T=new go.PathFigure((v-u)*o,w*s,!0);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-u)*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(v+u)*o,w*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+u)*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(v-u)*o,w*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s)),d.spot1=new go.Spot(.2,.25),d.spot2=new go.Spot(.6,.75),d});go.Shape.defineFigureGenerator("OrGate",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*u,v=0,w=.5,M=new go.PathFigure(0,0,!0);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,(v+p+p)*o,(w-u)*s,.8*o,(w-p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,s,.8*o,(w+p)*s,(v+p+p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*o,.75*s,.25*o,.25*s).close()),d.spot1=new go.Spot(.2,.25),d.spot2=new go.Spot(.75,.75),d});go.Shape.defineFigureGenerator("XnorGate",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*u,v=.2,w=.5,M=new go.PathFigure(.1*o,0,!1);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,.1*o,s,.35*o,.25*s,.35*o,.75*s));var T=new go.PathFigure(.8*o,.5*s,!0);d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,.2*o,s,.7*o,(w+p)*s,(v+p)*o,(w+u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,.2*o,0,.45*o,.75*s,.45*o,.25*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.5*s,(v+p)*o,(w-u)*s,.7*o,(w-p)*s)),u=.1,p=ft*.1,v=.9,w=.5;var O=new go.PathFigure((v-u)*o,w*s,!0);return d.add(O),O.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-u)*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,(v+u)*o,w*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+u)*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,(v-u)*o,w*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s)),d.spot1=new go.Spot(.4,.25),d.spot2=new go.Spot(.65,.75),d});go.Shape.defineFigureGenerator("XorGate",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*u,v=.2,w=.5,M=new go.PathFigure(.1*o,0,!1);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,.1*o,s,.35*o,.25*s,.35*o,.75*s));var T=new go.PathFigure(.2*o,0,!0);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,(v+p)*o,(w-u)*s,.9*o,(w-p)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,.2*o,s,.9*o,(w+p)*s,(v+p)*o,(w+u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,.2*o,0,.45*o,.75*s,.45*o,.25*s).close()),d.spot1=new go.Spot(.4,.25),d.spot2=new go.Spot(.8,.75),d});go.Shape.defineFigureGenerator("Capacitor",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Move,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),d});go.Shape.defineFigureGenerator("Resistor",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.5*s,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.7*o,.5*s)),d});go.Shape.defineFigureGenerator("Inductor",function(l,o,s){var d=new go.Geometry,u=ft*.1,p=.1,v=.1,w=new go.PathFigure((v-u*.5)*o,s,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,0,(v-u)*o,s,(v-p)*o,0)),v=.3,w.add(new go.PathSegment(go.PathSegment.Bezier,v*o,s,(v+p)*o,0,(v+u)*o,s)),w.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,0,(v-u)*o,s,(v-p)*o,0)),v=.5,w.add(new go.PathSegment(go.PathSegment.Bezier,v*o,s,(v+p)*o,0,(v+u)*o,s)),w.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,0,(v-u)*o,s,(v-p)*o,0)),v=.7,w.add(new go.PathSegment(go.PathSegment.Bezier,v*o,s,(v+p)*o,0,(v+u)*o,s)),w.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,0,(v-u)*o,s,(v-p)*o,0)),v=.9,w.add(new go.PathSegment(go.PathSegment.Bezier,(v+u*.5)*o,s,(v+p)*o,0,(v+u)*o,s)),d});go.Shape.defineFigureGenerator("ACvoltageSource",function(l,o,s){var d=new go.Geometry,u=ft*.5,p=.5,v=.5,w=.5,M=new go.PathFigure((v-p)*o,w*s,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-p)*s,(v-p)*o,(w-u)*s,(v-u)*o,(w-p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,(v+u)*o,(w-p)*s,(v+p)*o,(w-u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v+p)*o,(w+u)*s,(v+u)*o,(w+p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,(v-u)*o,(w+p)*s,(v-p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Move,(v-p+.1)*o,w*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+p-.1)*o,w*s,v*o,(w-p)*s,v*o,(w+p)*s)),d});go.Shape.defineFigureGenerator("DCvoltageSource",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.75*s,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.25*s)),u.add(new go.PathSegment(go.PathSegment.Move,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),d});go.Shape.defineFigureGenerator("Diode",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),d.spot1=new go.Spot(0,.25),d.spot2=new go.Spot(.5,.75),d});go.Shape.defineFigureGenerator("Wifi",function(l,o,s){var d=new go.Geometry,u=o,p=s;o=o*.38,s=s*.6;var v=ft*.8,w=.8,M=0,T=.5,O=(u-o)/2,I=(p-s)/2,V=new go.PathFigure(M*o+O,(T+w)*s+I,!0);d.add(V),V.add(new go.PathSegment(go.PathSegment.Bezier,(M-w)*o+O,T*s+I,(M-v)*o+O,(T+w)*s+I,(M-w)*o+O,(T+v)*s+I)),V.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T-w)*s+I,(M-w)*o+O,(T-v)*s+I,(M-v)*o+O,(T-w)*s+I)),V.add(new go.PathSegment(go.PathSegment.Bezier,(M-w+v*.5)*o+O,T*s+I,M*o+O,(T-w)*s+I,(M-w+v*.5)*o+O,(T-v)*s+I)),V.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T+w)*s+I,(M-w+v*.5)*o+O,(T+v)*s+I,M*o+O,(T+w)*s+I).close()),v=ft*.4,w=.4,M=.2,T=.5;var K=new go.PathFigure(M*o+O,(T+w)*s+I,!0);d.add(K),K.add(new go.PathSegment(go.PathSegment.Bezier,(M-w)*o+O,T*s+I,(M-v)*o+O,(T+w)*s+I,(M-w)*o+O,(T+v)*s+I)),K.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T-w)*s+I,(M-w)*o+O,(T-v)*s+I,(M-v)*o+O,(T-w)*s+I)),K.add(new go.PathSegment(go.PathSegment.Bezier,(M-w+v*.5)*o+O,T*s+I,M*o+O,(T-w)*s+I,(M-w+v*.5)*o+O,(T-v)*s+I)),K.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T+w)*s+I,(M-w+v*.5)*o+O,(T+v)*s+I,M*o+O,(T+w)*s+I).close()),v=ft*.2,w=.2,M=.5,T=.5;var at=new go.PathFigure((M-w)*o+O,T*s+I,!0);d.add(at),at.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T-w)*s+I,(M-w)*o+O,(T-v)*s+I,(M-v)*o+O,(T-w)*s+I)),at.add(new go.PathSegment(go.PathSegment.Bezier,(M+w)*o+O,T*s+I,(M+v)*o+O,(T-w)*s+I,(M+w)*o+O,(T-v)*s+I)),at.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T+w)*s+I,(M+w)*o+O,(T+v)*s+I,(M+v)*o+O,(T+w)*s+I)),at.add(new go.PathSegment(go.PathSegment.Bezier,(M-w)*o+O,T*s+I,(M-v)*o+O,(T+w)*s+I,(M-w)*o+O,(T+v)*s+I)),v=ft*.4,w=.4,M=.8,T=.5;var U=new go.PathFigure(M*o+O,(T-w)*s+I,!0);d.add(U),U.add(new go.PathSegment(go.PathSegment.Bezier,(M+w)*o+O,T*s+I,(M+v)*o+O,(T-w)*s+I,(M+w)*o+O,(T-v)*s+I)),U.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T+w)*s+I,(M+w)*o+O,(T+v)*s+I,(M+v)*o+O,(T+w)*s+I)),U.add(new go.PathSegment(go.PathSegment.Bezier,(M+w-v*.5)*o+O,T*s+I,M*o+O,(T+w)*s+I,(M+w-v*.5)*o+O,(T+v)*s+I)),U.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T-w)*s+I,(M+w-v*.5)*o+O,(T-v)*s+I,M*o+O,(T-w)*s+I).close()),v=ft*.8,w=.8,M=1,T=.5;var Bt=new go.PathFigure(M*o+O,(T-w)*s+I,!0);return d.add(Bt),Bt.add(new go.PathSegment(go.PathSegment.Bezier,(M+w)*o+O,T*s+I,(M+v)*o+O,(T-w)*s+I,(M+w)*o+O,(T-v)*s+I)),Bt.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T+w)*s+I,(M+w)*o+O,(T+v)*s+I,(M+v)*o+O,(T+w)*s+I)),Bt.add(new go.PathSegment(go.PathSegment.Bezier,(M+w-v*.5)*o+O,T*s+I,M*o+O,(T+w)*s+I,(M+w-v*.5)*o+O,(T+v)*s+I)),Bt.add(new go.PathSegment(go.PathSegment.Bezier,M*o+O,(T-w)*s+I,(M+w-v*.5)*o+O,(T-v)*s+I,M*o+O,(T-w)*s+I).close()),d});go.Shape.defineFigureGenerator("Email",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var p=new go.PathFigure(0,0,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,0)),p.add(new go.PathSegment(go.PathSegment.Move,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,.45*o,.54*s)),p.add(new go.PathSegment(go.PathSegment.Move,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,.55*o,.54*s)),d});go.Shape.defineFigureGenerator("Ethernet",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.35*o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.65*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.65*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.35*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.35*o,0).close());var p=new go.PathFigure(.1*o,s,!0,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.4*o,s)),p.add(new go.PathSegment(go.PathSegment.Line,.4*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Line,.1*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Line,.1*o,s).close());var v=new go.PathFigure(.6*o,s,!0,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.9*o,s)),v.add(new go.PathSegment(go.PathSegment.Line,.9*o,.6*s)),v.add(new go.PathSegment(go.PathSegment.Line,.6*o,.6*s)),v.add(new go.PathSegment(go.PathSegment.Line,.6*o,s).close());var w=new go.PathFigure(0,.5*s,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),w.add(new go.PathSegment(go.PathSegment.Move,.5*o,.5*s)),w.add(new go.PathSegment(go.PathSegment.Line,.5*o,.4*s)),w.add(new go.PathSegment(go.PathSegment.Move,.75*o,.5*s)),w.add(new go.PathSegment(go.PathSegment.Line,.75*o,.6*s)),w.add(new go.PathSegment(go.PathSegment.Move,.25*o,.5*s)),w.add(new go.PathSegment(go.PathSegment.Line,.25*o,.6*s)),d});go.Shape.defineFigureGenerator("Power",function(l,o,s){var d=new go.Geometry,u=ft*.4,p=.4,v=.5,w=.5,M=Ne(),T=Ne(),O=Ne(),I=Ne();Ps(v,w-p,v+u,w-p,v+p,w-u,v+p,w,.5,M,M,T,O,I);var V=g1(T.x,T.y),K=new go.PathFigure(T.x*o,T.y*s,!0);d.add(K),K.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,O.x*o,O.y*s,I.x*o,I.y*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v+p)*o,(w+u)*s,(v+u)*o,(w+p)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,(v-u)*o,(w+p)*s,(v-p)*o,(w+u)*s)),Ps(v-p,w,v-p,w-u,v-u,w-p,v,w-p,.5,O,I,T,M,M),K.add(new go.PathSegment(go.PathSegment.Bezier,T.x*o,T.y*s,O.x*o,O.y*s,I.x*o,I.y*s)),u=ft*.3,p=.3,Ps(v-p,w,v-p,w-u,v-u,w-p,v,w-p,.5,O,I,T,M,M),K.add(new go.PathSegment(go.PathSegment.Line,T.x*o,T.y*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(v-p)*o,w*s,I.x*o,I.y*s,O.x*o,O.y*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+p)*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(v+p)*o,w*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),Ps(v,w-p,v+u,w-p,v+p,w-u,v+p,w,.5,M,M,T,O,I),K.add(new go.PathSegment(go.PathSegment.Bezier,T.x*o,T.y*s,I.x*o,I.y*s,O.x*o,O.y*s).close());var K=new go.PathFigure(.45*o,0,!0);return d.add(K),K.add(new go.PathSegment(go.PathSegment.Line,.45*o,.5*s)),K.add(new go.PathSegment(go.PathSegment.Line,.55*o,.5*s)),K.add(new go.PathSegment(go.PathSegment.Line,.55*o,0).close()),me(M),me(T),me(O),me(I),me(V),d.spot1=new go.Spot(.25,.45),d.spot2=new go.Spot(.75,.8),d});go.Shape.defineFigureGenerator("Fallout",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s/2,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Arc,180,360,o/2,s/2,o/2,s/2));function p(v,w,M){v.add(new go.PathSegment(go.PathSegment.Move,(.3+w)*o,(.8+M)*s)),v.add(new go.PathSegment(go.PathSegment.Line,(.5+w)*o,(.5+M)*s)),v.add(new go.PathSegment(go.PathSegment.Line,(.1+w)*o,(.5+M)*s)),v.add(new go.PathSegment(go.PathSegment.Line,(.3+w)*o,(.8+M)*s).close())}return p(u,0,0),p(u,.4,0),p(u,.2,-.3),d});go.Shape.defineFigureGenerator("IrritationHazard",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.2*o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.3*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.7*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.2*s).close()),d.spot1=new go.Spot(.3,.3),d.spot2=new go.Spot(.7,.7),d});go.Shape.defineFigureGenerator("ElectricalHazard",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.37*o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.11*s)),u.add(new go.PathSegment(go.PathSegment.Line,.77*o,.04*s)),u.add(new go.PathSegment(go.PathSegment.Line,.33*o,.49*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.37*s)),u.add(new go.PathSegment(go.PathSegment.Line,.63*o,.86*s)),u.add(new go.PathSegment(go.PathSegment.Line,.77*o,.91*s)),u.add(new go.PathSegment(go.PathSegment.Line,.34*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.34*o,.78*s)),u.add(new go.PathSegment(go.PathSegment.Line,.44*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.65*o,.56*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.68*s).close()),d});go.Shape.defineFigureGenerator("FireHazard",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.1*o,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.29*o,0,-.25*o,.63*s,.45*o,.44*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.51*o,.42*s,.48*o,.17*s,.54*o,.35*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.59*o,.18*s,.59*o,.29*s,.58*o,.28*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.75*o,.6*s,.8*o,.34*s,.88*o,.43*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.88*o,.31*s,.87*o,.48*s,.88*o,.43*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.9*o,s,1.17*o,.76*s,.82*o,.8*s).close()),d.spot1=new go.Spot(.07,.445),d.spot2=new go.Spot(.884,.958),d});go.Shape.defineFigureGenerator("BpmnActivityLoop",function(l,o,s){var d=new go.Geometry,u=.5,p=0,v=0,w=u*ft,M=.4*Math.SQRT2/2+.5,T=.5-.5*Math.SQRT2/2,O=1,I=.5,V=.5,K=0,at=new go.PathFigure(M*o,(1-T)*s,!1);return d.add(at),at.add(new go.PathSegment(go.PathSegment.Bezier,O*o,I*s,O*o,.7*s,O*o,I*s)),at.add(new go.PathSegment(go.PathSegment.Bezier,(V+p)*o,(K+p)*s,(.5+u+p)*o,(.5-w+p)*s,(.5+w+p)*o,(.5-u+p)*s)),at.add(new go.PathSegment(go.PathSegment.Bezier,(.5-u+p)*o,(.5+v)*s,(.5-w+p)*o,(.5-u+v)*s,(.5-u+p)*o,(.5-w+v)*s)),at.add(new go.PathSegment(go.PathSegment.Bezier,(.35+p)*o,.9*s,(.5-u+p)*o,(.5+w+v)*s,(.5-w+p)*o,.9*s)),at.add(new go.PathSegment(go.PathSegment.Move,(.25+p)*o,.8*s)),at.add(new go.PathSegment(go.PathSegment.Line,(.35+p)*o,.9*s)),at.add(new go.PathSegment(go.PathSegment.Line,(.2+p)*o,.95*s)),d});go.Shape.defineFigureGenerator("BpmnActivityParallel",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Move,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),d});go.Shape.defineFigureGenerator("BpmnActivitySequential",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Move,0,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Move,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),d});go.Shape.defineFigureGenerator("BpmnActivityAdHoc",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);d.add(u);var p=new go.PathFigure(o,s,!1);d.add(p);var v=new go.PathFigure(0,.5*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.5*s,.2*o,.35*s,.3*o,.35*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,.7*o,.65*s,.8*o,.65*s)),d});go.Shape.defineFigureGenerator("BpmnActivityCompensation",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.5*s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s).close()),d});go.Shape.defineFigureGenerator("BpmnTaskMessage",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.2*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.8*s).close());var u=new go.PathFigure(0,.2*s,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.2*s)),d});go.Shape.defineFigureGenerator("BpmnTaskScript",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.7*o,s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.3*o,0,.6*o,.5*s,0,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.7*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,.7*o,s,.4*o,.5*s,o,.5*s).close());var p=new go.PathFigure(.45*o,.73*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.7*o,.73*s)),p.add(new go.PathSegment(go.PathSegment.Move,.38*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,.63*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Move,.31*o,.27*s)),p.add(new go.PathSegment(go.PathSegment.Line,.56*o,.27*s)),d});go.Shape.defineFigureGenerator("BpmnTaskUser",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);d.add(u);var p=new go.PathFigure(.335*o,(1-.555)*s,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.335*o,(1-.405)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*o,(1-.405)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*o,(1-.555)*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,o,.68*s,(1-.12)*o,.46*s,(1-.02)*o,.54*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,s)),p.add(new go.PathSegment(go.PathSegment.Line,0,.68*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,.335*o,(1-.555)*s,.02*o,.54*s,.12*o,.46*s)),p.add(new go.PathSegment(go.PathSegment.Line,.365*o,(1-.595)*s));var v=.5-.285,w=.5,M=v,T=Math.PI/4,O=4*(1-Math.cos(T))/(3*Math.sin(T)),I=v,V=v,K=O*I,at=O*V;p.add(new go.PathSegment(go.PathSegment.Bezier,(w-I)*o,M*s,(w-(K+I)/2)*o,(M+(V+at)/2)*s,(w-I)*o,(M+at)*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,w*o,(M-V)*s,(w-I)*o,(M-at)*s,(w-K)*o,(M-V)*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,(w+I)*o,M*s,(w+K)*o,(M-V)*s,(w+I)*o,(M-at)*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,(1-.365)*o,(1-.595)*s,(w+I)*o,(M+at)*s,(w+(K+I)/2)*o,(M+(V+at)/2)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(1-.365)*o,(1-.595)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*o,(1-.555)*s)),p.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*o,(1-.405)*s)),p.add(new go.PathSegment(go.PathSegment.Line,.335*o,(1-.405)*s));var U=new go.PathFigure(.2*o,s,!1);d.add(U),U.add(new go.PathSegment(go.PathSegment.Line,.2*o,.8*s));var Bt=new go.PathFigure(.8*o,s,!1);return d.add(Bt),Bt.add(new go.PathSegment(go.PathSegment.Line,.8*o,.8*s)),d});go.Shape.defineFigureGenerator("BpmnEventConditional",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.1*o,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,s).close());var p=new go.PathFigure(.2*o,.2*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.2*s)),p.add(new go.PathSegment(go.PathSegment.Move,.2*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Move,.2*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Move,.2*o,.8*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.8*s)),d});go.Shape.defineFigureGenerator("BpmnEventError",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.33*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.66*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.66*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.33*o,.5*s).close()),d});go.Shape.defineFigureGenerator("BpmnEventEscalation",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);d.add(u);var p=new go.PathFigure(o,s,!1);d.add(p);var v=new go.PathFigure(.1*o,s,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),v.add(new go.PathSegment(go.PathSegment.Line,.9*o,s)),v.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s).close()),d});go.Shape.defineFigureGenerator("Caution",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.05*o,s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.1*o,.8*s,0,s,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,.45*o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.55*o,.1*s,.5*o,0,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.95*o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.9*o,s,o,s,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.05*o,s));var p=.05;return u.add(new go.PathSegment(go.PathSegment.Move,(.5-p)*o,.875*s)),u.add(new go.PathSegment(go.PathSegment.Arc,180,-360,.5*o,.875*s,p*o,p*s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.325*s,.575*o,.725*s,.625*o,.375*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.75*s,.375*o,.375*s,.425*o,.725*s)),d});go.Shape.defineFigureGenerator("Recycle",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.45*o,.95*s,!1);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,.95*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.185*o,.85*s,.17*o,.95*s,.15*o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.235*o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Line,.3*o,.625*s)),u.add(new go.PathSegment(go.PathSegment.Line,.35*o,.65*s)),u.add(new go.PathSegment(go.PathSegment.Line,.275*o,.45*s)),u.add(new go.PathSegment(go.PathSegment.Line,.05*o,.45*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.05*o,.575*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.1875*o,.95*s,0,.675*s,0,.7*s)),u.add(new go.PathSegment(go.PathSegment.Move,.45*o,.95*s)),u.add(new go.PathSegment(go.PathSegment.Line,.45*o,.775*s)),u.add(new go.PathSegment(go.PathSegment.Line,.22*o,.775*s));var p=new go.PathFigure(.475*o,.2*s,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.4*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,.225*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Line,.275*o,.175*s)),p.add(new go.PathSegment(go.PathSegment.Line,.325*o,.05*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,.4*o,.05*s,.35*o,0,.375*o,0)),p.add(new go.PathSegment(go.PathSegment.Line,.575*o,.375*s)),p.add(new go.PathSegment(go.PathSegment.Line,.525*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,.75*o,.475*s)),p.add(new go.PathSegment(go.PathSegment.Line,.85*o,.315*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.32*s)),p.add(new go.PathSegment(go.PathSegment.Line,.65*o,.05*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,.575*o,0,.65*o,.05*s,.625*o,0)),p.add(new go.PathSegment(go.PathSegment.Line,.38*o,.0105*s));var v=new go.PathFigure(.675*o,.575*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.875*o,.525*s)),v.add(new go.PathSegment(go.PathSegment.Line,o,.775*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,.85*o,.95*s,o,.8*s,o,.85*s)),v.add(new go.PathSegment(go.PathSegment.Line,.65*o,.95*s)),v.add(new go.PathSegment(go.PathSegment.Line,.65*o,s)),v.add(new go.PathSegment(go.PathSegment.Line,.55*o,.85*s)),v.add(new go.PathSegment(go.PathSegment.Line,.65*o,.725*s)),v.add(new go.PathSegment(go.PathSegment.Line,.65*o,.775*s)),v.add(new go.PathSegment(go.PathSegment.Line,.7*o,.775*s)),v.add(new go.PathSegment(go.PathSegment.Line,o,.775*s)),v.add(new go.PathSegment(go.PathSegment.Move,.675*o,.575*s)),v.add(new go.PathSegment(go.PathSegment.Line,.775*o,.775*s)),d});go.Shape.defineFigureGenerator("BpmnEventTimer",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*.5,v=new go.PathFigure(o,u*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Bezier,u*o,s,o,(u+p)*s,(u+p)*o,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,u*s,(u-p)*o,s,0,(u+p)*s)),v.add(new go.PathSegment(go.PathSegment.Bezier,u*o,0,0,(u-p)*s,(u-p)*o,0)),v.add(new go.PathSegment(go.PathSegment.Bezier,o,u*s,(u+p)*o,0,o,(u-p)*s));var w=new go.PathFigure(u*o,0,!1);return d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,u*o,.15*s)),w.add(new go.PathSegment(go.PathSegment.Move,u*o,s)),w.add(new go.PathSegment(go.PathSegment.Line,u*o,.85*s)),w.add(new go.PathSegment(go.PathSegment.Move,0,u*s)),w.add(new go.PathSegment(go.PathSegment.Line,.15*o,u*s)),w.add(new go.PathSegment(go.PathSegment.Move,o,u*s)),w.add(new go.PathSegment(go.PathSegment.Line,.85*o,u*s)),w.add(new go.PathSegment(go.PathSegment.Move,u*o,u*s)),w.add(new go.PathSegment(go.PathSegment.Line,.58*o,.1*s)),w.add(new go.PathSegment(go.PathSegment.Move,u*o,u*s)),w.add(new go.PathSegment(go.PathSegment.Line,.78*o,.54*s)),d});go.Shape.defineFigureGenerator("Package",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.15*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,.15*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close());var p=new go.PathFigure(0,.15*s,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,0,0)),p.add(new go.PathSegment(go.PathSegment.Line,.6*o,0)),p.add(new go.PathSegment(go.PathSegment.Line,.65*o,.15*s).close()),d.spot1=new go.Spot(0,.1),d.spot2=new go.Spot(1,1),d});go.Shape.defineFigureGenerator("Class",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var p=new go.PathFigure(0,.2*s,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,.2*s).close());var v=new go.PathFigure(0,.5*s,!1);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,.5*s).close()),d});go.Shape.defineFigureGenerator("Component",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o,s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.15*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.15*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s).close());var p=new go.PathFigure(0,.2*s,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.45*o,.2*s)),p.add(new go.PathSegment(go.PathSegment.Line,.45*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,.2*s).close());var v=new go.PathFigure(0,.6*s,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.45*o,.6*s)),v.add(new go.PathSegment(go.PathSegment.Line,.45*o,.8*s)),v.add(new go.PathSegment(go.PathSegment.Line,0,.8*s)),v.add(new go.PathSegment(go.PathSegment.Line,0,.6*s).close()),d});go.Shape.defineFigureGenerator("Boat Shipment",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.15*o,.6*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.15*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,.15*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.85*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,.85*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.15*o,.6*s));var p=new go.PathFigure(.15*o,.6*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.85*o,.6*s)),d});go.Shape.defineFigureGenerator("Customer/Supplier",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.66*o,.33*s)),u.add(new go.PathSegment(go.PathSegment.Line,.66*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.33*o,.33*s)),u.add(new go.PathSegment(go.PathSegment.Line,.33*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,0,.33*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s).close()),d});go.Shape.defineFigureGenerator("Workcell",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.65*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.65*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.35*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.35*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),d});go.Shape.defineFigureGenerator("Supermarket",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.33*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.33*s)),u.add(new go.PathSegment(go.PathSegment.Move,o,.33*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.66*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.66*s)),u.add(new go.PathSegment(go.PathSegment.Move,o,.66*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),d});go.Shape.defineFigureGenerator("TruckShipment",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var p=new go.PathFigure(o,.8*s,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,.6*o,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,.6*o,.8*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,.8*s).close());var v=.1,w=ft*.1,M=.2,T=.9,O=new go.PathFigure((M-v)*o,T*s,!0);d.add(O),O.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-v)*s,(M-v)*o,(T-w)*s,(M-w)*o,(T-v)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,(M+v)*o,T*s,(M+w)*o,(T-v)*s,(M+v)*o,(T-w)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T+v)*s,(M+v)*o,(T+w)*s,(M+w)*o,(T+v)*s)),O.add(new go.PathSegment(go.PathSegment.Bezier,(M-v)*o,T*s,(M-w)*o,(T+v)*s,(M-v)*o,(T+w)*s).close()),v=.1,w=ft*.1,M=.8,T=.9;var I=new go.PathFigure((M-v)*o,T*s,!0);return d.add(I),I.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T-v)*s,(M-v)*o,(T-w)*s,(M-w)*o,(T-v)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,(M+v)*o,T*s,(M+w)*o,(T-v)*s,(M+v)*o,(T-w)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,M*o,(T+v)*s,(M+v)*o,(T+w)*s,(M+w)*o,(T+v)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,(M-v)*o,T*s,(M-w)*o,(T+v)*s,(M-v)*o,(T+w)*s).close()),d});go.Shape.defineFigureGenerator("KanbanPost",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.2*o,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,0)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,s)),d});go.Shape.defineFigureGenerator("Forklift",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,0,0));var p=new go.PathFigure(0,.5*s,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,0,.8*s)),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,.8*s)),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,0,.5*s));var v=new go.PathFigure(.5*o,.8*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.5*o,.1*s)),v.add(new go.PathSegment(go.PathSegment.Line,.55*o,.1*s)),v.add(new go.PathSegment(go.PathSegment.Line,.55*o,.8*s)),v.add(new go.PathSegment(go.PathSegment.Line,.5*o,.8*s));var w=new go.PathFigure(.5*o,.7*s,!1);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o,.7*s));var M=.1,T=ft*.1,O=.1,I=.9,V=new go.PathFigure((O-M)*o,I*s,!0);d.add(V),V.add(new go.PathSegment(go.PathSegment.Bezier,O*o,(I-M)*s,(O-M)*o,(I-T)*s,(O-T)*o,(I-M)*s)),V.add(new go.PathSegment(go.PathSegment.Bezier,(O+M)*o,I*s,(O+T)*o,(I-M)*s,(O+M)*o,(I-T)*s)),V.add(new go.PathSegment(go.PathSegment.Bezier,O*o,(I+M)*s,(O+M)*o,(I+T)*s,(O+T)*o,(I+M)*s)),V.add(new go.PathSegment(go.PathSegment.Bezier,(O-M)*o,I*s,(O-T)*o,(I+M)*s,(O-M)*o,(I+T)*s)),M=.1,T=ft*.1,O=.4,I=.9;var K=new go.PathFigure((O-M)*o,I*s,!0);return d.add(K),K.add(new go.PathSegment(go.PathSegment.Bezier,O*o,(I-M)*s,(O-M)*o,(I-T)*s,(O-T)*o,(I-M)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(O+M)*o,I*s,(O+T)*o,(I-M)*s,(O+M)*o,(I-T)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,O*o,(I+M)*s,(O+M)*o,(I+T)*s,(O+T)*o,(I+M)*s)),K.add(new go.PathSegment(go.PathSegment.Bezier,(O-M)*o,I*s,(O-T)*o,(I+M)*s,(O-M)*o,(I+T)*s)),d});go.Shape.defineFigureGenerator("RailShipment",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.1*o,.4*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.45*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.45*o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.9*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.4*s).close());var p=new go.PathFigure(.45*o,.7*s,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.55*o,.7*s));var v=new go.PathFigure(.55*o,.4*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.9*o,.4*s)),v.add(new go.PathSegment(go.PathSegment.Line,.9*o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Line,.55*o,.9*s)),v.add(new go.PathSegment(go.PathSegment.Line,.55*o,.4*s).close());var O=.05,I=ft*.05,V=.175,K=.95,w=new go.PathFigure((V-O)*o,K*s,!0);d.add(w),w.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K-O)*s,(V-O)*o,(K-I)*s,(V-I)*o,(K-O)*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,(V+O)*o,K*s,(V+I)*o,(K-O)*s,(V+O)*o,(K-I)*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K+O)*s,(V+O)*o,(K+I)*s,(V+I)*o,(K+O)*s)),w.add(new go.PathSegment(go.PathSegment.Bezier,(V-O)*o,K*s,(V-I)*o,(K+O)*s,(V-O)*o,(K+I)*s));var O=.05,I=ft*.05,V=.375,K=.95,M=new go.PathFigure((V-O)*o,K*s,!0);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K-O)*s,(V-O)*o,(K-I)*s,(V-I)*o,(K-O)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(V+O)*o,K*s,(V+I)*o,(K-O)*s,(V+O)*o,(K-I)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K+O)*s,(V+O)*o,(K+I)*s,(V+I)*o,(K+O)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(V-O)*o,K*s,(V-I)*o,(K+O)*s,(V-O)*o,(K+I)*s));var O=.05,I=ft*.05,V=.625,K=.95,T=new go.PathFigure((V-O)*o,K*s,!0);d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K-O)*s,(V-O)*o,(K-I)*s,(V-I)*o,(K-O)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(V+O)*o,K*s,(V+I)*o,(K-O)*s,(V+O)*o,(K-I)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K+O)*s,(V+O)*o,(K+I)*s,(V+I)*o,(K+O)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(V-O)*o,K*s,(V-I)*o,(K+O)*s,(V-O)*o,(K+I)*s));var O=.05,I=ft*.05,V=.825,K=.95,at=new go.PathFigure((V-O)*o,K*s,!0);d.add(at),at.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K-O)*s,(V-O)*o,(K-I)*s,(V-I)*o,(K-O)*s)),at.add(new go.PathSegment(go.PathSegment.Bezier,(V+O)*o,K*s,(V+I)*o,(K-O)*s,(V+O)*o,(K-I)*s)),at.add(new go.PathSegment(go.PathSegment.Bezier,V*o,(K+O)*s,(V+O)*o,(K+I)*s,(V+I)*o,(K+O)*s)),at.add(new go.PathSegment(go.PathSegment.Bezier,(V-O)*o,K*s,(V-I)*o,(K+O)*s,(V-O)*o,(K+I)*s).close());var U=new go.PathFigure(0,s,!1);return d.add(U),U.add(new go.PathSegment(go.PathSegment.Line,o,s).close()),d});go.Shape.defineFigureGenerator("Warehouse",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var p=new go.PathFigure(0,.2*s,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,.2*s).close());var v=new go.PathFigure(.15*o,s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.15*o,.5*s)),v.add(new go.PathSegment(go.PathSegment.Line,.4*o,.5*s)),v.add(new go.PathSegment(go.PathSegment.Line,.4*o,s)),v.add(new go.PathSegment(go.PathSegment.Line,.15*o,s).close());var w=.05,M=ft*.05,T=.35,O=.775,I=new go.PathFigure((T-w)*o,O*s,!0);return d.add(I),I.add(new go.PathSegment(go.PathSegment.Bezier,T*o,(O-w)*s,(T-w)*o,(O-M)*s,(T-M)*o,(O-w)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,(T+w)*o,O*s,(T+M)*o,(O-w)*s,(T+w)*o,(O-M)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,T*o,(O+w)*s,(T+w)*o,(O+M)*s,(T+M)*o,(O+w)*s)),I.add(new go.PathSegment(go.PathSegment.Bezier,(T-w)*o,O*s,(T-M)*o,(O+w)*s,(T-w)*o,(O+M)*s).close()),d});go.Shape.defineFigureGenerator("ControlCenter",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Move,.1*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,.8*s).close()),d});go.Shape.defineFigureGenerator("Bluetooth",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.75*s,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.75*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.25*s)),d});go.Shape.defineFigureGenerator("Bookmark",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Move,.2*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Move,.2*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.4*s)),d});go.Shape.defineFigureGenerator("Bookmark",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),u.add(new go.PathSegment(go.PathSegment.Line,0,0)),u.add(new go.PathSegment(go.PathSegment.Move,.2*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Move,.2*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,.8*o,.4*s)),d});go.Shape.defineFigureGenerator("Globe",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Move,0,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,o,.5*s,.75*o,0,o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,o,.75*s,.75*o,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*s,.25*o,s,0,.75*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,0,.25*s,.25*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,s,.15*o,.25*s,.15*o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,.85*o,.75*s,.85*o,.25*s)),u.add(new go.PathSegment(go.PathSegment.Move,.1675*o,.15*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.8325*o,.15*s,.35*o,.3*s,.65*o,.3*s)),u.add(new go.PathSegment(go.PathSegment.Move,.1675*o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.8325*o,.85*s,.35*o,.7*s,.65*o,.7*s)),d});go.Shape.defineFigureGenerator("Wave",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.25*s,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.3*o,.25*s,.1*o,0,.2*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,.7*o,.25*s,.425*o,.5*s,.575*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,o,.25*s,.8*o,0,.9*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.75*s)),u.add(new go.PathSegment(go.PathSegment.Move,0,.25*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.75*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.3*o,.75*s,.1*o,.5*s,.2*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.7*o,.75*s,.425*o,s,.575*o,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,o,.75*s,.8*o,.5*s,.9*o,.5*s)),d});go.Shape.defineFigureGenerator("Operator",function(l,o,s){var d=new go.Geometry,u=.3,p=ft*.3,v=.5,w=.7,M=new go.PathFigure((v-u)*o,w*s,!0);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-u)*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+u)*o,w*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+u)*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v-u)*o,w*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s));var T=new go.PathFigure(0,.7*s,!1);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,o,.7*s,0,0,o,0)),d});go.Shape.defineFigureGenerator("TripleFanBlades",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.5*o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.65*s,.65*o,.3*s,.65*o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,.35*o,.5*s,.35*o,.3*s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,.65*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,s,.3*o,.6*s,.1*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.65*s,.2*o,s,.35*o,.95*s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,.65*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,o,s,.7*o,.6*s,.9*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.65*s,.8*o,s,.65*o,.95*s)),d});go.Shape.defineFigureGenerator("CentrifugalPump",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o,0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*s,0,.075*s,0,.5*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.4*o,s,0,s,.4*o,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.4*s,.8*o,s,.85*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,0)),d});go.Shape.defineFigureGenerator("Battery",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Move,.4*o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,.1*s));var p=new go.PathFigure(0,.6*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Move,0,.4*s)),p.add(new go.PathSegment(go.PathSegment.Line,o,.4*s)),d});go.Shape.defineFigureGenerator("Delete",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*.5,v=.5,w=.5,M=new go.PathFigure((v-u)*o,w*s,!0);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-u)*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+u)*o,w*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+u)*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v-u)*o,w*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s));var T=new go.PathFigure(.15*o,.5*s,!1);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Line,.85*o,.5*s)),d});go.Shape.defineFigureGenerator("Flag",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.1*s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Move,0,.1*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.1*s,.15*o,0,.35*o,0)),u.add(new go.PathSegment(go.PathSegment.Bezier,o,.1*s,.65*o,.2*s,.85*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.5*s,.85*o,.6*s,.65*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*s,.35*o,.4*s,.15*o,.4*s).close()),d});go.Shape.defineFigureGenerator("Help",function(l,o,s){var d=new go.Geometry,u=.5,p=ft*.5,v=.5,w=.5,M=new go.PathFigure((v-u)*o,w*s,!1);d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-u)*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v+u)*o,w*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+u)*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),M.add(new go.PathSegment(go.PathSegment.Bezier,(v-u)*o,w*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s).close()),u=.05,p=ft*.05,v=.5,w=.8;var T=new go.PathFigure((v-u)*o,w*s,!1);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w-u)*s,(v-u)*o,(w-p)*s,(v-p)*o,(w-u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(v+u)*o,w*s,(v+p)*o,(w-u)*s,(v+u)*o,(w-p)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,v*o,(w+u)*s,(v+u)*o,(w+p)*s,(v+p)*o,(w+u)*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,(v-u)*o,w*s,(v-p)*o,(w+u)*s,(v-u)*o,(w+p)*s).close()),T.add(new go.PathSegment(go.PathSegment.Move,.5*o,.7*s)),T.add(new go.PathSegment(go.PathSegment.Line,.5*o,.5*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,.5*o,.2*s,.75*o,.475*s,.75*o,.225*s)),T.add(new go.PathSegment(go.PathSegment.Bezier,.3*o,.35*s,.4*o,.2*s,.3*o,.25*s)),d});go.Shape.defineFigureGenerator("Location",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.5*o,s,!0).add(new go.PathSegment(go.PathSegment.Line,.75*o,.5*s)).add(new go.PathSegment(go.PathSegment.Bezier,.5*o,0,.975*o,.025*s,.5*o,0)).add(new go.PathSegment(go.PathSegment.Bezier,.25*o,.5*s,.5*o,0,.025*o,.025*s).close()).add(new go.PathSegment(go.PathSegment.Move,.5*o,.2*s)).add(new go.PathSegment(go.PathSegment.Arc,270,360,.5*o,.3*s,.1*o,.1*s).close()))});go.Shape.defineFigureGenerator("Lock",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.5*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.5*s));var p=new go.PathFigure(.2*o,.5*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Move,.2*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,.2*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.3*s,.25*o,0,.75*o,0)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.3*s)),d});go.Shape.defineFigureGenerator("Unlocked",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.5*s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,.5*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.5*s));var p=new go.PathFigure(.2*o,.5*s,!1);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Move,.2*o,.5*s)),p.add(new go.PathSegment(go.PathSegment.Line,.2*o,.3*s)),p.add(new go.PathSegment(go.PathSegment.Bezier,.8*o,.3*s,.25*o,0,.75*o,0)),p.add(new go.PathSegment(go.PathSegment.Line,.8*o,.35*s)),d});go.Shape.defineFigureGenerator("Gear",function(l,o,s){return new go.Geometry().add(new go.PathFigure(.9375*o,.56246875*s,!0).add(new go.PathSegment(go.PathSegment.Line,.9375*o,.4375*s)).add(new go.PathSegment(go.PathSegment.Line,.80621875*o,.4375*s)).add(new go.PathSegment(go.PathSegment.Bezier,.763*o,.3316875*s,.79840625*o,.39915625*s,.7834375*o,.3635*s)).add(new go.PathSegment(go.PathSegment.Line,.8566875*o,.23796875*s)).add(new go.PathSegment(go.PathSegment.Line,.76825*o,.14959375*s)).add(new go.PathSegment(go.PathSegment.Line,.67596875*o,.24184375*s)).add(new go.PathSegment(go.PathSegment.Bezier,.5625*o,.19378125*s,.64228125*o,.2188125*s,.603875*o,.2021875*s)).add(new go.PathSegment(go.PathSegment.Line,.5625*o,.0625*s)).add(new go.PathSegment(go.PathSegment.Line,.4375*o,.0625*s)).add(new go.PathSegment(go.PathSegment.Line,.4375*o,.19378125*s)).add(new go.PathSegment(go.PathSegment.Bezier,.32775*o,.239375*s,.39759375*o,.20190625*s,.36053125*o,.2176875*s)).add(new go.PathSegment(go.PathSegment.Line,.2379375*o,.14959375*s)).add(new go.PathSegment(go.PathSegment.Line,.14953125*o,.2379375*s)).add(new go.PathSegment(go.PathSegment.Line,.23934375*o,.3278125*s)).add(new go.PathSegment(go.PathSegment.Bezier,.19378125*o,.4375*s,.21765625*o,.36059375*s,.201875*o,.397625*s)).add(new go.PathSegment(go.PathSegment.Line,.0625*o,.4375*s)).add(new go.PathSegment(go.PathSegment.Line,.0625*o,.5625*s)).add(new go.PathSegment(go.PathSegment.Line,.1938125*o,.5625*s)).add(new go.PathSegment(go.PathSegment.Bezier,.241875*o,.67596875*s,.20221875*o,.603875*s,.21884375*o,.64228125*s)).add(new go.PathSegment(go.PathSegment.Line,.1495625*o,.76825*s)).add(new go.PathSegment(go.PathSegment.Line,.238*o,.8566875*s)).add(new go.PathSegment(go.PathSegment.Line,.3316875*o,.76296875*s)).add(new go.PathSegment(go.PathSegment.Bezier,.43753125*o,.80621875*s,.36353125*o,.78340625*s,.3991875*o,.79840625*s)).add(new go.PathSegment(go.PathSegment.Line,.43753125*o,.9375*s)).add(new go.PathSegment(go.PathSegment.Line,.5625*o,.9375*s)).add(new go.PathSegment(go.PathSegment.Line,.5625*o,.80621875*s)).add(new go.PathSegment(go.PathSegment.Bezier,.67225*o,.760625*s,.602375*o,.79809375*s,.63946875*o,.78234375*s)).add(new go.PathSegment(go.PathSegment.Line,.76828125*o,.8566875*s)).add(new go.PathSegment(go.PathSegment.Line,.85671875*o,.76825*s)).add(new go.PathSegment(go.PathSegment.Line,.76065625*o,.67221875*s)).add(new go.PathSegment(go.PathSegment.Bezier,.80621875*o,.56246875*s,.78234375*o,.63940625*s,.798125*o,.602375*s)).add(new go.PathSegment(go.PathSegment.Line,.9375*o,.56246875*s).close()).add(new go.PathSegment(go.PathSegment.Move,.5*o,.6*s)).add(new go.PathSegment(go.PathSegment.Arc,90,360,.5*o,.5*s,.1*o,.1*s).close()))});go.Shape.defineFigureGenerator("Hand",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.5*s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.1*o,.3*s,0,.375*s,.05*o,.325*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.45*o,.075*s,.3*o,.225*s,.4*o,.175*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.525*o,.075*s,.46*o,.05*s,.525*o,.05*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.3*o,.4*s,.525*o,.275*s,.475*o,.325*s)),u.add(new go.PathSegment(go.PathSegment.Line,.9*o,.4*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.9*o,.55*s,o,.4*s,o,.55*s)),u.add(new go.PathSegment(go.PathSegment.Line,.425*o,.55*s)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,.55*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.6*o,.7*s,.675*o,.55*s,.675*o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Line,.575*o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.575*o,.85*s,.65*o,.7*s,.65*o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Line,.525*o,.85*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.535*o,s,.61*o,.85*s,.61*o,s)),u.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*s,.435*o,s,0,s).close()),d});go.Shape.defineFigureGenerator("Map",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,.2*s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.25*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Line,.25*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,s).close()),u.add(new go.PathSegment(go.PathSegment.Move,.25*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.25*o,.8*s)),u.add(new go.PathSegment(go.PathSegment.Move,.5*o,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s)),u.add(new go.PathSegment(go.PathSegment.Move,.75*o,0)),u.add(new go.PathSegment(go.PathSegment.Line,.75*o,.8*s)),d});go.Shape.defineFigureGenerator("Eject",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o,s)),u.add(new go.PathSegment(go.PathSegment.Line,o,s*.7)),u.add(new go.PathSegment(go.PathSegment.Line,0,s*.7).close());var p=new go.PathFigure(0,s*.6,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o,.6*s)),p.add(new go.PathSegment(go.PathSegment.Line,.5*o,0).close()),d});go.Shape.defineFigureGenerator("Pencil",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,.2*o,.1*s)).add(new go.PathSegment(go.PathSegment.Line,o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.9*o,s)).add(new go.PathSegment(go.PathSegment.Line,.1*o,.2*s).close()))});go.Shape.defineFigureGenerator("Building",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*1,s*1,!1);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,0,s*.85)),u.add(new go.PathSegment(go.PathSegment.Line,.046*o,s*.85)),u.add(new go.PathSegment(go.PathSegment.Line,.046*o,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,0,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,0,s*.3)),u.add(new go.PathSegment(go.PathSegment.Line,.046*o,s*.3)),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,(1-.046)*o,s*.3)),u.add(new go.PathSegment(go.PathSegment.Line,o,s*.3)),u.add(new go.PathSegment(go.PathSegment.Line,o,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,(1-.046)*o,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,(1-.046)*o,s*.85)),u.add(new go.PathSegment(go.PathSegment.Line,o,s*.85).close());var p=new go.PathFigure(.126*o,.85*s,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,.126*o,.45*s)),p.add(new go.PathSegment(go.PathSegment.Line,.322*o,.45*s)),p.add(new go.PathSegment(go.PathSegment.Line,.322*o,.85*s).close());var v=new go.PathFigure(.402*o,.85*s,!1);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,.402*o,.45*s)),v.add(new go.PathSegment(go.PathSegment.Line,.598*o,.45*s)),v.add(new go.PathSegment(go.PathSegment.Line,.598*o,.85*s).close());var w=new go.PathFigure(.678*o,.85*s,!1);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,.678*o,.45*s)),w.add(new go.PathSegment(go.PathSegment.Line,.874*o,.45*s)),w.add(new go.PathSegment(go.PathSegment.Line,.874*o,.85*s).close());var M=new go.PathFigure(.5*o,.1*s,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,(.046+.15)*o,.3*s)),M.add(new go.PathSegment(go.PathSegment.Line,(1-(.046+.15))*o,.3*s).close()),d});go.Shape.defineFigureGenerator("Staircase",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s*1,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.2,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.2,s*.8)),u.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.8)),u.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.6)),u.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*.6)),u.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*.4)),u.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*.4)),u.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*.2)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.2)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.15)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*.15)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*.35)),u.add(new go.PathSegment(go.PathSegment.Line,o*.55,s*.35)),u.add(new go.PathSegment(go.PathSegment.Line,o*.55,s*.55)),u.add(new go.PathSegment(go.PathSegment.Line,o*.35,s*.55)),u.add(new go.PathSegment(go.PathSegment.Line,o*.35,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.15,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.15,s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,0,s*.95).close()),d});go.Shape.defineFigureGenerator("5Bars",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,s*1,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.184,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.184,s*(1-.184)).close());var p=new go.PathFigure(o*.204,s,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o*.204,s*(1-.184))),p.add(new go.PathSegment(go.PathSegment.Line,o*.388,s*(1-.184*2))),p.add(new go.PathSegment(go.PathSegment.Line,o*.388,s*1).close());var v=new go.PathFigure(o*.408,s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*.408,s*(1-.184*2))),v.add(new go.PathSegment(go.PathSegment.Line,o*.592,s*(1-.184*3))),v.add(new go.PathSegment(go.PathSegment.Line,o*.592,s*1).close());var w=new go.PathFigure(o*.612,s,!0);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o*.612,s*(1-.184*3))),w.add(new go.PathSegment(go.PathSegment.Line,o*.796,s*(1-.184*4))),w.add(new go.PathSegment(go.PathSegment.Line,o*.796,s*1).close());var M=new go.PathFigure(o*.816,s,!0);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,o*.816,s*(1-.184*4))),M.add(new go.PathSegment(go.PathSegment.Line,o*1,s*(1-.184*5))),M.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1).close()),d});go.Shape.defineFigureGenerator("PC",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,0,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,0).close());var p=new go.PathFigure(o*.055,.07*s,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o*.245,s*.07)),p.add(new go.PathSegment(go.PathSegment.Line,o*.245,s*.1)),p.add(new go.PathSegment(go.PathSegment.Line,o*.055,s*.1).close());var v=new go.PathFigure(o*.055,.13*s,!0);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*.245,s*.13)),v.add(new go.PathSegment(go.PathSegment.Line,o*.245,s*.16)),v.add(new go.PathSegment(go.PathSegment.Line,o*.055,s*.16).close());var w=new go.PathFigure(o*.055,.18*s,!0);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o*.245,s*.18)),w.add(new go.PathSegment(go.PathSegment.Line,o*.245,s*.21)),w.add(new go.PathSegment(go.PathSegment.Line,o*.055,s*.21).close());var M=new go.PathFigure(o*1,0,!0);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,o*.4,0)),M.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.65)),M.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.65).close()),d});go.Shape.defineFigureGenerator("Plane",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(.55*o,s,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,.5*o,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,.7*s)),u.add(new go.PathSegment(go.PathSegment.Line,.1*o,.475*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.35*o,.525*s,0,.4*s,.225*o,.45*s)),u.add(new go.PathSegment(go.PathSegment.Line,.4*o,.475*s)),u.add(new go.PathSegment(go.PathSegment.Line,.15*o,.35*s)),u.add(new go.PathSegment(go.PathSegment.Line,.2*o,.325*s)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,.325*s)),u.add(new go.PathSegment(go.PathSegment.Line,.85*o,.1*s)),u.add(new go.PathSegment(go.PathSegment.Bezier,.9*o,.2*s,.975*o,0,o,.08*s)),u.add(new go.PathSegment(go.PathSegment.Line,.7*o,.45*s)),u.add(new go.PathSegment(go.PathSegment.Line,.6*o,.95*s)),u.add(new go.PathSegment(go.PathSegment.Line,.55*o,s).close()),d});go.Shape.defineFigureGenerator("Key",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*1,s*.5,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.9,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,.4*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,.35*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.45,.35*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.15,.2*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.35*s)),u.add(new go.PathSegment(go.PathSegment.Line,0,.65*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.15,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,.8*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.45,.65*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,.65*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.6,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.65,.55*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.7,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,.55*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.8,.6*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.85,.575*s)),u.add(new go.PathSegment(go.PathSegment.Line,o*.9,.6*s).close()),u.add(new go.PathSegment(go.PathSegment.Move,.17*o,.425*s)),u.add(new go.PathSegment(go.PathSegment.Arc,270,360,.17*o,.5*s,.075*o,.075*s).close()),d});go.Shape.defineFigureGenerator("FilmTape",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(0,0,!1);d.add(u),u.add(new go.PathSegment(go.PathSegment.Arc,270,180,o*0,o*.3,o*.055)),u.add(new go.PathSegment(go.PathSegment.Line,0,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.08,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.08,s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*1),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*1),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*2),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*2),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*3),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*3),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*4),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*4),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*5),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*5),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*6),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*6),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*7),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*7),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*8),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*8),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*9),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*9),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*10),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*10),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*11),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*11),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*12),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*12),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*13),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*13),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*14),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*14),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*15),s*.95)),u.add(new go.PathSegment(go.PathSegment.Line,o*(.08+.056*15),s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1));var p=new go.PathFigure(0,0,!1);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o*1,s*0)),p.add(new go.PathSegment(go.PathSegment.Arc,270,-180,o*1,o*.3,o*.055)),p.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1));var v=new go.PathFigure(o*.11,s*.1,!1);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*1+.028*0),s*.1)),v.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*1+.028*0),s*.8)),v.add(new go.PathSegment(go.PathSegment.Line,o*.11,s*.8).close());var w=new go.PathFigure(o*(.11+.24133333*1+.028*1),s*.1,!1);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*2+.028*1),s*.1)),w.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*2+.028*1),s*.8)),w.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*1+.028*1),s*.8).close());var M=new go.PathFigure(o*(.11+.24133333*2+.028*2),s*.1,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*3+.028*2),s*.1)),M.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*3+.028*2),s*.8)),M.add(new go.PathSegment(go.PathSegment.Line,o*(.11+.24133333*2+.028*2),s*.8).close()),d});go.Shape.defineFigureGenerator("FloppyDisk",function(l,o,s){var d=new go.Geometry,u=8,p=u*ft,v=new go.PathFigure(u,0,!1);d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*.86,0)),v.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.14)),v.add(new go.PathSegment(go.PathSegment.Line,o,s-u)),v.add(new go.PathSegment(go.PathSegment.Bezier,o-u,s,o,s-p,o-p,s)),v.add(new go.PathSegment(go.PathSegment.Line,u,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,s-u,p,s,0,s-p)),v.add(new go.PathSegment(go.PathSegment.Line,0,u)),v.add(new go.PathSegment(go.PathSegment.Bezier,u,0,0,p,p,0).close());var w=new go.PathFigure(o*.83,0,!1);d.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o*.83,s*.3)),w.add(new go.PathSegment(go.PathSegment.Line,o*.17,s*.3)),w.add(new go.PathSegment(go.PathSegment.Line,o*.17,s*0).close());var M=new go.PathFigure(o*.83,s*1,!1);d.add(M),M.add(new go.PathSegment(go.PathSegment.Line,o*.83,s*.5)),M.add(new go.PathSegment(go.PathSegment.Line,o*.17,s*.5)),M.add(new go.PathSegment(go.PathSegment.Line,o*.17,s*1).close());var T=new go.PathFigure(o*.78,s*.05,!1);return d.add(T),T.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*.05)),T.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*.25)),T.add(new go.PathSegment(go.PathSegment.Line,o*.78,s*.25).close()),d});go.Shape.defineFigureGenerator("SpeechBubble",function(l,o,s){var d=l?l.parameter1:NaN;(isNaN(d)||d<0)&&(d=15),d=Math.min(d,o/3),d=Math.min(d,s/3);var u=d*ft,p=s*.8,v=new go.Geometry,w=new go.PathFigure(d,0,!0);return v.add(w),w.add(new go.PathSegment(go.PathSegment.Line,o-d,0)),w.add(new go.PathSegment(go.PathSegment.Bezier,o,d,o-u,0,o,u)),w.add(new go.PathSegment(go.PathSegment.Line,o,p-d)),w.add(new go.PathSegment(go.PathSegment.Bezier,o-d,p,o,p-u,o-u,p)),w.add(new go.PathSegment(go.PathSegment.Line,o*.7,p)),w.add(new go.PathSegment(go.PathSegment.Line,o*.7,s)),w.add(new go.PathSegment(go.PathSegment.Line,o*.55,p)),w.add(new go.PathSegment(go.PathSegment.Line,d,p)),w.add(new go.PathSegment(go.PathSegment.Bezier,0,p-d,u,p,0,p-u)),w.add(new go.PathSegment(go.PathSegment.Line,0,d)),w.add(new go.PathSegment(go.PathSegment.Bezier,d,0,0,u,u,0).close()),u>1?(v.spot1=new go.Spot(0,0,u,u),v.spot2=new go.Spot(1,.8,-u,-u)):(v.spot1=go.Spot.TopLeft,v.spot2=new go.Spot(1,.8)),v});go.Shape.defineFigureGenerator("Repeat",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*0,s*.45,!0);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.25,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,s*.9)),u.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*.9)),u.add(new go.PathSegment(go.PathSegment.Line,o*.65,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.2,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.2,s*.45).close());var p=new go.PathFigure(o*1,s*.55,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*1)),p.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*.55)),p.add(new go.PathSegment(go.PathSegment.Line,o*.7,s*.55)),p.add(new go.PathSegment(go.PathSegment.Line,o*.7,s*.1)),p.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.1)),p.add(new go.PathSegment(go.PathSegment.Line,o*.35,s*0)),p.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*0)),p.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*.55).close()),d});go.Shape.defineFigureGenerator("Windows",function(l,o,s){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,o,0)).add(new go.PathSegment(go.PathSegment.Line,o,s)).add(new go.PathSegment(go.PathSegment.Line,0,s).close()).add(new go.PathSegment(go.PathSegment.Move,.4*o,.4*s)).add(new go.PathSegment(go.PathSegment.Line,.4*o,.8*s)).add(new go.PathSegment(go.PathSegment.Line,.9*o,.8*s)).add(new go.PathSegment(go.PathSegment.Line,.9*o,.4*s).close()).add(new go.PathSegment(go.PathSegment.Move,.2*o,.1*s)).add(new go.PathSegment(go.PathSegment.Line,.2*o,.6*s)).add(new go.PathSegment(go.PathSegment.Line,.7*o,.6*s)).add(new go.PathSegment(go.PathSegment.Line,.7*o,.1*s).close()).add(new go.PathSegment(go.PathSegment.Move,.1*o,.6*s)).add(new go.PathSegment(go.PathSegment.Line,.1*o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.5*o,.9*s)).add(new go.PathSegment(go.PathSegment.Line,.5*o,.6*s).close()))});go.Shape.defineFigureGenerator("Terminal",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*0,s*.1,!1);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.1)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.9)),u.add(new go.PathSegment(go.PathSegment.Line,o*0,s*.9).close());var p=new go.PathFigure(o*.1,s*.2,!0);d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o*.1,s*.25)),p.add(new go.PathSegment(go.PathSegment.Line,o*.22,s*.285)),p.add(new go.PathSegment(go.PathSegment.Line,o*.1,s*.32)),p.add(new go.PathSegment(go.PathSegment.Line,o*.1,s*.37)),p.add(new go.PathSegment(go.PathSegment.Line,o*.275,s*.32)),p.add(new go.PathSegment(go.PathSegment.Line,o*.275,s*.25).close());var v=new go.PathFigure(o*.28,s*.37,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*.45,s*.37)),v.add(new go.PathSegment(go.PathSegment.Line,o*.45,s*.41)),v.add(new go.PathSegment(go.PathSegment.Line,o*.28,s*.41).close()),d});go.Shape.defineFigureGenerator("Beaker",function(l,o,s){var d=new go.Geometry,u=15,p=u*ft,v=new go.PathFigure(o*.62,s*.475,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o,s-u)),v.add(new go.PathSegment(go.PathSegment.Bezier,o-u,s,o,s-p,o-p,s)),v.add(new go.PathSegment(go.PathSegment.Line,u,s)),v.add(new go.PathSegment(go.PathSegment.Bezier,0,s-u,p,s,0,s-p)),v.add(new go.PathSegment(go.PathSegment.Line,o*.38,s*.475)),v.add(new go.PathSegment(go.PathSegment.Line,o*.38,s*.03)),v.add(new go.PathSegment(go.PathSegment.Line,o*.36,s*0)),v.add(new go.PathSegment(go.PathSegment.Line,o*.64,s*0)),v.add(new go.PathSegment(go.PathSegment.Line,o*.62,s*.03).close()),p>1?(d.spot1=new go.Spot(0,0,p,p),d.spot2=new go.Spot(1,1,-p,-p)):(d.spot1=go.Spot.TopLeft,d.spot2=go.Spot.BottomRight),d});go.Shape.defineFigureGenerator("Download",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*0,s*1,!0);d.add(u);var p=.1/.3;u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*.755,s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*.93,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.64,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.61,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.39,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.36,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.07,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.755),s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.66),s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.66),s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.8),s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*0,s*(1-p)).close());var v=new go.PathFigure(o*.4,s*0,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.44)),v.add(new go.PathSegment(go.PathSegment.Line,o*.26,s*.44)),v.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*.66)),v.add(new go.PathSegment(go.PathSegment.Line,o*(1-.26),s*.44)),v.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*.44)),v.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*0).close()),d});go.Shape.defineFigureGenerator("Bin",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*0,s*1,!0);d.add(u);var p=.1/.3;return u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*.755,s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*.93,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.64,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.61,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.39,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.36,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.07,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.755),s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.66),s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.66),s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.8),s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*0,s*(1-p)).close()),d});go.Shape.defineFigureGenerator("Upload",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*0,s*1,!0);d.add(u);var p=.1/.3;u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.8,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.66,s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*.755,s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*.93,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.64,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.61,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.39,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.36,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*.07,s*(1-p))),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.755),s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.66),s*.055)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.66),s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*(1-.8),s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*0,s*(1-p)).close());var v=new go.PathFigure(o*.5,s*0,!0);return d.add(v),v.add(new go.PathSegment(go.PathSegment.Line,o*.26,s*.25)),v.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.25)),v.add(new go.PathSegment(go.PathSegment.Line,o*.4,s*.63)),v.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*.63)),v.add(new go.PathSegment(go.PathSegment.Line,o*.6,s*.25)),v.add(new go.PathSegment(go.PathSegment.Line,o*.74,s*.25).close()),d});go.Shape.defineFigureGenerator("EmptyDrink",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*.15,s*0,!1);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.85,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.7,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,s*1).close()),d});go.Shape.defineFigureGenerator("Drink",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*.15,s*0,!1);d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.85,s*0)),u.add(new go.PathSegment(go.PathSegment.Line,o*.7,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.3,s*1).close());var p=new go.PathFigure(o*.235,s*.28,!0);return d.add(p),p.add(new go.PathSegment(go.PathSegment.Line,o*.765,s*.28)),p.add(new go.PathSegment(go.PathSegment.Line,o*.655,s*.97)),p.add(new go.PathSegment(go.PathSegment.Line,o*.345,s*.97).close()),d});go.Shape.defineFigureGenerator("4Arrows",function(l,o,s){var d=new go.Geometry,u=new go.PathFigure(o*.5,s*0,!0);return d.add(u),u.add(new go.PathSegment(go.PathSegment.Line,o*.65,s*.25)),u.add(new go.PathSegment(go.PathSegment.Line,o*.55,s*.25)),u.add(new go.PathSegment(go.PathSegment.Line,o*.55,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*.35)),u.add(new go.PathSegment(go.PathSegment.Line,o*1,s*.5)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*.65)),u.add(new go.PathSegment(go.PathSegment.Line,o*.75,s*.55)),u.add(new go.PathSegment(go.PathSegment.Line,o*.55,s*.55)),u.add(new go.PathSegment(go.PathSegment.Line,o*.55,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.65,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.5,s*1)),u.add(new go.PathSegment(go.PathSegment.Line,o*.35,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.45,s*.75)),u.add(new go.PathSegment(go.PathSegment.Line,o*.45,s*.55)),u.add(new go.PathSegment(go.PathSegment.Line,o*.25,s*.55)),u.add(new go.PathSegment(go.PathSegment.Line,o*.25,s*.65)),u.add(new go.PathSegment(go.PathSegment.Line,o*0,s*.5)),u.add(new go.PathSegment(go.PathSegment.Line,o*.25,s*.35)),u.add(new go.PathSegment(go.PathSegment.Line,o*.25,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,o*.45,s*.45)),u.add(new go.PathSegment(go.PathSegment.Line,o*.45,s*.25)),u.add(new go.PathSegment(go.PathSegment.Line,o*.35,s*.25).close()),d});go.Shape.defineFigureGenerator("Connector","Ellipse");go.Shape.defineFigureGenerator("Alternative","TriangleUp");go.Shape.defineFigureGenerator("Merge","TriangleUp");go.Shape.defineFigureGenerator("Decision","Diamond");go.Shape.defineFigureGenerator("DataTransmissions","Hexagon");go.Shape.defineFigureGenerator("Gate","Crescent");go.Shape.defineFigureGenerator("Delay","HalfEllipse");go.Shape.defineFigureGenerator("Input","Parallelogram1");go.Shape.defineFigureGenerator("ManualLoop","ManualOperation");go.Shape.defineFigureGenerator("ISOProcess","Chevron");go.Shape.defineFigureGenerator("MessageToUser","SquareArrow");go.Shape.defineFigureGenerator("MagneticData","Cylinder1");go.Shape.defineFigureGenerator("DirectData","Cylinder4");go.Shape.defineFigureGenerator("StoredData","DataStorage");go.Shape.defineFigureGenerator("SequentialData","MagneticTape");go.Shape.defineFigureGenerator("Subroutine","Procedure");function TF(){const l=mF.make;var o={parameter1:2,spot1:Nd.TopLeft,spot2:Nd.BottomRight};const s=l(Im,{"animationManager.initialAnimationStyle":cF.None,InitialAnimationStarting:v=>{var w=v.subject.defaultAnimation;w.easing=fF.EaseOutExpo,w.duration=900,w.add(v.diagram,"scale",.1,1),w.add(v.diagram,"opacity",0,1)},"toolManager.mouseWheelBehavior":dF.WheelZoom,"clickCreatingTool.archetypeNodeData":{text:p()},model:new sP({linkKeyProperty:"key"}),"undoManager.isEnabled":!0,positionComputation:function(v,w){return new Sd(Math.floor(w.x),Math.floor(w.y))}});s.nodeTemplate=l(SF,"Auto",{locationSpot:Nd.Top,isShadowed:!0,shadowBlur:1,shadowOffset:new Sd(0,1),shadowColor:"rgba(0, 0, 0, .14)"},new Pd("location","loc",Sd.parse).makeTwoWay(Sd.stringify),l(xd,"Hexagon",o,{name:"SHAPE",fill:u(),strokeWidth:0,stroke:null,width:100,height:100,portId:"",fromLinkable:!0,fromLinkableSelfNode:!0,fromLinkableDuplicates:!0,toLinkable:!0,toLinkableSelfNode:!0,toLinkableDuplicates:!0,cursor:"pointer"}),l(CM,{font:"bold small-caps 11pt helvetica, bold arial, sans-serif",margin:7,stroke:"rgba(0, 0, 0, .87)",editable:!0},new Pd("text").makeTwoWay())),s.nodeTemplate.selectionAdornmentTemplate=l(vF,"Spot",l(yF,"Auto",l(xd,"Hexagon",o,{fill:null,stroke:"red",strokeWidth:3,width:100,height:100}),l(PF)),l("Button",{alignment:Nd.TopCenter,click:d},l(xd,"PlusLine",{width:6,height:6})));function d(v,w){var M=w.part,T=v.diagram;T.startTransaction("Add State");var O=M.adornedPart,I=O.data,V={text:p()},K=O.location.copy();K.x+=200,V.loc=Sd.stringify(K);var at=T.model;at.addNodeData(V);var U={from:at.getKeyForNodeData(I),to:at.getKeyForNodeData(V),text:""};at.addLinkData(U);var Bt=T.findNodeForData(V);T.select(Bt),T.commitTransaction("Add State"),T.scrollToRect(Bt.actualBounds)}s.linkTemplate=l(mS,{curve:mS.Bezier,adjusting:mS.Stretch,reshapable:!0,relinkableFrom:!0,relinkableTo:!0,toShortLength:3},new Pd("points").makeTwoWay(),new Pd("curviness"),l(xd,{strokeWidth:1.5}),l(xd,{toArrow:"standard",stroke:"white"}),l(CM,"",{textAlign:"center",font:"9pt helvetica, arial, sans-serif",margin:4,editable:!0},new Pd("text").makeTwoWay()));function u(){for(var v="0123456789ABCDEF",w="#",M=0;M<6;M++)w+=v[Math.floor(Math.random()*16)];return w}function p(){return new Date().toLocaleTimeString()}return s}function FF(){return bl("div",{className:"App",children:bl(CF,{initDiagram:TF,divClassName:"diagram-component",nodeDataArray:[{key:0,text:"Alpha",loc:"0 0"},{key:1,text:"Beta",loc:"180 0"},{key:2,text:"Gamma",loc:"0 180"},{key:3,text:"Delta",loc:"180 180"}],linkDataArray:[{key:-1,from:0,to:1},{key:-2,from:0,to:2},{key:-3,from:1,to:1},{key:-4,from:2,to:3},{key:-5,from:3,to:0}]})})}yS.createRoot(document.getElementById("root")).render(bl(hC.StrictMode,{children:bl(FF,{})}))});export default DF();
